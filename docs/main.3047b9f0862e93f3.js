(self.webpackChunkChatApp=self.webpackChunkChatApp||[]).push([[179],{2011:(Dt,Oe,F)=>{"use strict";F.d(Oe,{Dh:()=>pe,GT:()=>ve,cc:()=>Be,hO:()=>Ke,on:()=>q,pX:()=>fe,xv:()=>Ee});var l=F(4650),H=F(127),P=F(5813);Dt=F.hmd(Dt);const ae=["ngOnDestroy"],fe=(we,ht,ft,He={})=>new Proxy(we,{get:(Ve,Ae)=>ft.runOutsideAngular(()=>{var et;if(we[Ae])return!(null===(et=He?.spy)||void 0===et)&&et.get&&He.spy.get(Ae,we[Ae]),we[Ae];if(ae.indexOf(Ae)>-1)return()=>{};const ce=ht.toPromise().then(me=>{const De=me&&me[Ae];return"function"==typeof De?De.bind(me):De&&De.then?De.then(J=>ft.run(()=>J)):ft.run(()=>De)});return new Proxy(()=>{},{get:(me,De)=>ce[De],apply:(me,De,J)=>ce.then(ie=>{var ye;const he=ie&&ie(...J);return!(null===(ye=He?.spy)||void 0===ye)&&ye.apply&&He.spy.apply(Ae,J,he),he})})})}),ve=(we,ht)=>{ht.forEach(ft=>{Object.getOwnPropertyNames(ft.prototype||ft).forEach(He=>{Object.defineProperty(we.prototype,He,Object.getOwnPropertyDescriptor(ft.prototype||ft,He))})})};class se{constructor(ht){return ht}}const pe=new l.OlP("angularfire2.app.options"),Ee=new l.OlP("angularfire2.app.name");function q(we,ht,ft){const Ve="object"==typeof ft&&ft||{};Ve.name=Ve.name||"string"==typeof ft&&ft||"[DEFAULT]";const et=H.Z.apps.filter(ce=>ce&&ce.name===Ve.name)[0]||ht.runOutsideAngular(()=>H.Z.initializeApp(we,Ve));try{JSON.stringify(we)!==JSON.stringify(et.options)&&Y("error",`${et.name} Firebase App already initialized with different options${Dt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new se(et)}const Y=(we,...ht)=>{(0,l.X6Q)()&&typeof console<"u"&&console[we](...ht)},ee={provide:se,useFactory:q,deps:[pe,l.R0b,[new l.FiY,Ee]]};let Ke=(()=>{class we{constructor(ft){H.Z.registerVersion("angularfire",P.q4.full,"core"),H.Z.registerVersion("angularfire",P.q4.full,"app-compat"),H.Z.registerVersion("angular",l.q4F.full,ft.toString())}static initializeApp(ft,He){return{ngModule:we,providers:[{provide:pe,useValue:ft},{provide:Ee,useValue:He}]}}}return we.\u0275fac=function(ft){return new(ft||we)(l.LFG(l.Lbi))},we.\u0275mod=l.oAB({type:we}),we.\u0275inj=l.cJS({providers:[ee]}),we})();function Be(we,ht,ft,He,Ve){const[,Ae,et]=globalThis.\u0275AngularfireInstanceCache.find(ce=>ce[0]===we)||[];if(Ae)return function Te(we,ht){try{return we.toString()===ht.toString()}catch{return we===ht}}(Ve,et)||(Ie("error",`${ht} was already initialized on the ${ft} Firebase App with different settings.${gt?" You may need to reload as Firebase is not HMR aware.":""}`),Ie("warn",{is:Ve,was:et})),Ae;{const ce=He();return globalThis.\u0275AngularfireInstanceCache.push([we,ce,Ve]),ce}}const gt=!!Dt.hot,Ie=(we,...ht)=>{(0,l.X6Q)()&&typeof console<"u"&&console[we](...ht)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Dt,Oe,F)=>{"use strict";F.d(Oe,{q4:()=>nh,iC:()=>oh,HU:()=>Tu,vb:()=>or,JM:()=>hi,u3:()=>Au});var l=F(4650),H=F(5867),P=F(5861),ae=F(9681),fe=F(2090),ve=F(4859),se=F(1877),pe=F(8766);const Ee="@firebase/installations",q="0.5.12",ee=`w:${q}`,Ke="FIS_v2",ht=new fe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ft(I){return I instanceof fe.ZR&&I.code.includes("request-failed")}function He({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function Ve(I){return{token:I.token,requestStatus:2,expiresIn:ie(I.expiresIn),creationTime:Date.now()}}function Ae(I,x){return et.apply(this,arguments)}function et(){return(et=(0,P.Z)(function*(I,x){const U=(yield x.json()).error;return ht.create("request-failed",{requestName:I,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function ce({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function me(I,{refreshToken:x}){const R=ce(I);return R.append("Authorization",function ye(I){return`${Ke} ${I}`}(x)),R}function De(I){return J.apply(this,arguments)}function J(){return(J=(0,P.Z)(function*(I){const x=yield I();return x.status>=500&&x.status<600?I():x})).apply(this,arguments)}function ie(I){return Number(I.replace("s","000"))}function he(I,x){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,P.Z)(function*({appConfig:I,heartbeatServiceProvider:x},{fid:R}){const U=He(I),ne=ce(I),ge=x.getImmediate({optional:!0});if(ge){const $t=yield ge.getHeartbeatsHeader();$t&&ne.append("x-firebase-client",$t)}const it={method:"POST",headers:ne,body:JSON.stringify({fid:R,authVersion:Ke,appId:I.appId,sdkVersion:ee})},St=yield De(()=>fetch(U,it));if(St.ok){const $t=yield St.json();return{fid:$t.fid||R,registrationStatus:2,refreshToken:$t.refreshToken,authToken:Ve($t.authToken)}}throw yield Ae("Create Installation",St)})).apply(this,arguments)}function qe(I){return new Promise(x=>{setTimeout(x,I)})}const cn=/^[cdef][\w-]{21}$/;function Qe(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const R=function Rn(I){return function Et(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return cn.test(R)?R:""}catch{return""}}function rn(I){return`${I.appName}!${I.appId}`}const yn=new Map;function mn(I,x){const R=rn(I);Un(R,x),function as(I,x){const R=function Hn(){return!Qn&&"BroadcastChannel"in self&&(Qn=new BroadcastChannel("[Firebase] FID Change"),Qn.onmessage=I=>{Un(I.data.key,I.data.fid)}),Qn}();R&&R.postMessage({key:I,fid:x}),function Yr(){0===yn.size&&Qn&&(Qn.close(),Qn=null)}()}(R,x)}function Un(I,x){const R=yn.get(I);if(R)for(const U of R)U(x)}let Qn=null;const Xn="firebase-installations-store";let vr=null;function kr(){return vr||(vr=(0,pe.X3)("firebase-installations-database",1,{upgrade:(I,x)=>{0===x&&I.createObjectStore(Xn)}})),vr}function ct(I,x){return wi.apply(this,arguments)}function wi(){return(wi=(0,P.Z)(function*(I,x){const R=rn(I),ne=(yield kr()).transaction(Xn,"readwrite"),ge=ne.objectStore(Xn),Le=yield ge.get(R);return yield ge.put(x,R),yield ne.done,(!Le||Le.fid!==x.fid)&&mn(I,x.fid),x})).apply(this,arguments)}function Jn(I){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,P.Z)(function*(I){const x=rn(I),U=(yield kr()).transaction(Xn,"readwrite");yield U.objectStore(Xn).delete(x),yield U.done})).apply(this,arguments)}function gi(I,x){return de.apply(this,arguments)}function de(){return(de=(0,P.Z)(function*(I,x){const R=rn(I),ne=(yield kr()).transaction(Xn,"readwrite"),ge=ne.objectStore(Xn),Le=yield ge.get(R),it=x(Le);return void 0===it?yield ge.delete(R):yield ge.put(it,R),yield ne.done,it&&(!Le||Le.fid!==it.fid)&&mn(I,it.fid),it})).apply(this,arguments)}function Ce(I){return Re.apply(this,arguments)}function Re(){return(Re=(0,P.Z)(function*(I){let x;const R=yield gi(I.appConfig,U=>{const ne=We(U),ge=Ne(I,ne);return x=ge.registrationPromise,ge.installationEntry});return""===R.fid?{installationEntry:yield x}:{installationEntry:R,registrationPromise:x}})).apply(this,arguments)}function We(I){return tt(I||{fid:Qe(),registrationStatus:0})}function Ne(I,x){if(0===x.registrationStatus){if(!navigator.onLine)return{installationEntry:x,registrationPromise:Promise.reject(ht.create("app-offline"))};const R={fid:x.fid,registrationStatus:1,registrationTime:Date.now()},U=function ut(I,x){return Je.apply(this,arguments)}(I,R);return{installationEntry:R,registrationPromise:U}}return 1===x.registrationStatus?{installationEntry:x,registrationPromise:Nt(I)}:{installationEntry:x}}function Je(){return(Je=(0,P.Z)(function*(I,x){try{const R=yield he(I,x);return ct(I.appConfig,R)}catch(R){throw ft(R)&&409===R.customData.serverCode?yield Jn(I.appConfig):yield ct(I.appConfig,{fid:x.fid,registrationStatus:0}),R}})).apply(this,arguments)}function Nt(I){return yt.apply(this,arguments)}function yt(){return(yt=(0,P.Z)(function*(I){let x=yield jt(I.appConfig);for(;1===x.registrationStatus;)yield qe(100),x=yield jt(I.appConfig);if(0===x.registrationStatus){const{installationEntry:R,registrationPromise:U}=yield Ce(I);return U||R}return x})).apply(this,arguments)}function jt(I){return gi(I,x=>{if(!x)throw ht.create("installation-not-found");return tt(x)})}function tt(I){return function qn(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function qt(I,x){return br.apply(this,arguments)}function br(){return(br=(0,P.Z)(function*({appConfig:I,heartbeatServiceProvider:x},R){const U=un(I,R),ne=me(I,R),ge=x.getImmediate({optional:!0});if(ge){const $t=yield ge.getHeartbeatsHeader();$t&&ne.append("x-firebase-client",$t)}const it={method:"POST",headers:ne,body:JSON.stringify({installation:{sdkVersion:ee,appId:I.appId}})},St=yield De(()=>fetch(U,it));if(St.ok)return Ve(yield St.json());throw yield Ae("Generate Auth Token",St)})).apply(this,arguments)}function un(I,{fid:x}){return`${He(I)}/${x}/authTokens:generate`}function X(I){return G.apply(this,arguments)}function G(){return(G=(0,P.Z)(function*(I,x=!1){let R;const U=yield gi(I.appConfig,ge=>{if(!Ft(ge))throw ht.create("not-registered");const Le=ge.authToken;if(!x&&An(Le))return ge;if(1===Le.requestStatus)return R=j(I,x),ge;{if(!navigator.onLine)throw ht.create("app-offline");const it=Di(ge);return R=Pe(I,it),it}});return R?yield R:U.authToken})).apply(this,arguments)}function j(I,x){return Z.apply(this,arguments)}function Z(){return(Z=(0,P.Z)(function*(I,x){let R=yield Q(I.appConfig);for(;1===R.authToken.requestStatus;)yield qe(100),R=yield Q(I.appConfig);const U=R.authToken;return 0===U.requestStatus?X(I,x):U})).apply(this,arguments)}function Q(I){return gi(I,x=>{if(!Ft(x))throw ht.create("not-registered");return function oe(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(x.authToken)?Object.assign(Object.assign({},x),{authToken:{requestStatus:0}}):x})}function Pe(I,x){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,P.Z)(function*(I,x){try{const R=yield qt(I,x),U=Object.assign(Object.assign({},x),{authToken:R});return yield ct(I.appConfig,U),R}catch(R){if(!ft(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const U=Object.assign(Object.assign({},x),{authToken:{requestStatus:0}});yield ct(I.appConfig,U)}else yield Jn(I.appConfig);throw R}})).apply(this,arguments)}function Ft(I){return void 0!==I&&2===I.registrationStatus}function An(I){return 2===I.requestStatus&&!function Sn(I){const x=Date.now();return x<I.creationTime||I.creationTime+I.expiresIn<x+36e5}(I)}function Di(I){const x={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:x})}function W(){return(W=(0,P.Z)(function*(I){const x=I,{installationEntry:R,registrationPromise:U}=yield Ce(x);return U?U.catch(console.error):X(x).catch(console.error),R.fid})).apply(this,arguments)}function nt(){return(nt=(0,P.Z)(function*(I,x=!1){const R=I;return yield kt(R),(yield X(R,x)).token})).apply(this,arguments)}function kt(I){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,P.Z)(function*(I){const{registrationPromise:x}=yield Ce(I);x&&(yield x)})).apply(this,arguments)}function _o(I){return ht.create("missing-app-config-values",{valueName:I})}const Zo="installations",yo=I=>{const x=I.getProvider("app").getImmediate(),R=function Gn(I){if(!I||!I.options)throw _o("App Configuration");if(!I.name)throw _o("App Name");const x=["projectId","apiKey","appId"];for(const R of x)if(!I.options[R])throw _o(R);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(x);return{app:x,appConfig:R,heartbeatServiceProvider:(0,ae._getProvider)(x,"heartbeat"),_delete:()=>Promise.resolve()}},Ko=I=>{const x=I.getProvider("app").getImmediate(),R=(0,ae._getProvider)(x,Zo).getImmediate();return{getId:()=>function $(I){return W.apply(this,arguments)}(R),getToken:ne=>function xe(I){return nt.apply(this,arguments)}(R,ne)}};(function ec(){(0,ae._registerComponent)(new ve.wA(Zo,yo,"PUBLIC")),(0,ae._registerComponent)(new ve.wA("installations-internal",Ko,"PRIVATE"))})(),(0,ae.registerVersion)(Ee,q),(0,ae.registerVersion)(Ee,q,"esm2017");const Es="@firebase/remote-config",yi=new fe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class uu{constructor(x,R,U,ne){this.client=x,this.storage=R,this.storageCache=U,this.logger=ne}isCachedDataFresh(x,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-R,ne=U<=x;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${x}. Is cache hit: ${ne}.`),ne}fetch(x){var R=this;return(0,P.Z)(function*(){const[U,ne]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(ne&&R.isCachedDataFresh(x.cacheMaxAgeMillis,U))return ne;x.eTag=ne&&ne.eTag;const ge=yield R.client.fetch(x),Le=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ge.status&&Le.push(R.storage.setLastSuccessfulFetchResponse(ge)),yield Promise.all(Le),ge})()}}function il(I=navigator){return I.languages&&I.languages[0]||I.language}class Do{constructor(x,R,U,ne,ge,Le){this.firebaseInstallations=x,this.sdkVersion=R,this.namespace=U,this.projectId=ne,this.apiKey=ge,this.appId=Le}fetch(x){var R=this;return(0,P.Z)(function*(){var U,ne,ge;const[Le,it]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),$t=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,Xt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":x.eTag||"*"},It={sdk_version:R.sdkVersion,app_instance_id:Le,app_instance_id_token:it,app_id:R.appId,language_code:il()},fi={method:"POST",headers:Xt,body:JSON.stringify(It)},Ji=fetch($t,fi),El=new Promise((ms,Fs)=>{x.signal.addEventListener(()=>{const Sl=new Error("The operation was aborted.");Sl.name="AbortError",Fs(Sl)})});let Ml;try{yield Promise.race([Ji,El]),Ml=yield Ji}catch(ms){let Fs="fetch-client-network";throw"AbortError"===(null===(U=ms)||void 0===U?void 0:U.name)&&(Fs="fetch-timeout"),yi.create(Fs,{originalErrorMessage:null===(ne=ms)||void 0===ne?void 0:ne.message})}let Vr=Ml.status;const eo=Ml.headers.get("ETag")||void 0;let Il,xl;if(200===Ml.status){let ms;try{ms=yield Ml.json()}catch(Fs){throw yi.create("fetch-client-parse",{originalErrorMessage:null===(ge=Fs)||void 0===ge?void 0:ge.message})}Il=ms.entries,xl=ms.state}if("INSTANCE_STATE_UNSPECIFIED"===xl?Vr=500:"NO_CHANGE"===xl?Vr=304:("NO_TEMPLATE"===xl||"EMPTY_CONFIG"===xl)&&(Il={}),304!==Vr&&200!==Vr)throw yi.create("fetch-status",{httpStatus:Vr});return{status:Vr,eTag:eo,config:Il}})()}}class Is{constructor(x,R){this.client=x,this.storage=R}fetch(x){var R=this;return(0,P.Z)(function*(){const U=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(x,U)})()}attemptFetch(x,{throttleEndTimeMillis:R,backoffCount:U}){var ne=this;return(0,P.Z)(function*(){yield function Pr(I,x){return new Promise((R,U)=>{const ne=Math.max(x-Date.now(),0),ge=setTimeout(R,ne);I.addEventListener(()=>{clearTimeout(ge),U(yi.create("fetch-throttle",{throttleEndTimeMillis:x}))})})}(x.signal,R);try{const ge=yield ne.client.fetch(x);return yield ne.storage.deleteThrottleMetadata(),ge}catch(ge){if(!function Eg(I){if(!(I instanceof fe.ZR&&I.customData))return!1;const x=Number(I.customData.httpStatus);return 429===x||500===x||503===x||504===x}(ge))throw ge;const Le={throttleEndTimeMillis:Date.now()+(0,fe.$s)(U),backoffCount:U+1};return yield ne.storage.setThrottleMetadata(Le),ne.attemptFetch(x,Le)}})()}}class nc{constructor(x,R,U,ne,ge){this.app=x,this._client=R,this._storageCache=U,this._storage=ne,this._logger=ge,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function rl(I,x){var R;const U=I.target.error||void 0;return yi.create(x,{originalErrorMessage:U&&(null===(R=U)||void 0===R?void 0:R.message)})}const Qo="app_namespace_store";class kd{constructor(x,R,U,ne=function xg(){return new Promise((I,x)=>{var R;try{const U=indexedDB.open("firebase_remote_config",1);U.onerror=ne=>{x(rl(ne,"storage-open"))},U.onsuccess=ne=>{I(ne.target.result)},U.onupgradeneeded=ne=>{0===ne.oldVersion&&ne.target.result.createObjectStore(Qo,{keyPath:"compositeKey"})}}catch(U){x(yi.create("storage-open",{originalErrorMessage:null===(R=U)||void 0===R?void 0:R.message}))}})}()){this.appId=x,this.appName=R,this.namespace=U,this.openDbPromise=ne}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(x){return this.set("last_fetch_status",x)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(x){return this.set("last_successful_fetch_timestamp_millis",x)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(x){return this.set("last_successful_fetch_response",x)}getActiveConfig(){return this.get("active_config")}setActiveConfig(x){return this.set("active_config",x)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(x){return this.set("active_config_etag",x)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(x){return this.set("throttle_metadata",x)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(x){var R=this;return(0,P.Z)(function*(){const U=yield R.openDbPromise;return new Promise((ne,ge)=>{var Le;const St=U.transaction([Qo],"readonly").objectStore(Qo),$t=R.createCompositeKey(x);try{const Xt=St.get($t);Xt.onerror=It=>{ge(rl(It,"storage-get"))},Xt.onsuccess=It=>{const fi=It.target.result;ne(fi?fi.value:void 0)}}catch(Xt){ge(yi.create("storage-get",{originalErrorMessage:null===(Le=Xt)||void 0===Le?void 0:Le.message}))}})})()}set(x,R){var U=this;return(0,P.Z)(function*(){const ne=yield U.openDbPromise;return new Promise((ge,Le)=>{var it;const $t=ne.transaction([Qo],"readwrite").objectStore(Qo),Xt=U.createCompositeKey(x);try{const It=$t.put({compositeKey:Xt,value:R});It.onerror=fi=>{Le(rl(fi,"storage-set"))},It.onsuccess=()=>{ge()}}catch(It){Le(yi.create("storage-set",{originalErrorMessage:null===(it=It)||void 0===it?void 0:it.message}))}})})()}delete(x){var R=this;return(0,P.Z)(function*(){const U=yield R.openDbPromise;return new Promise((ne,ge)=>{var Le;const St=U.transaction([Qo],"readwrite").objectStore(Qo),$t=R.createCompositeKey(x);try{const Xt=St.delete($t);Xt.onerror=It=>{ge(rl(It,"storage-delete"))},Xt.onsuccess=()=>{ne()}}catch(Xt){ge(yi.create("storage-delete",{originalErrorMessage:null===(Le=Xt)||void 0===Le?void 0:Le.message}))}})})()}createCompositeKey(x){return[this.appId,this.appName,this.namespace,x].join()}}class Xo{constructor(x){this.storage=x}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var x=this;return(0,P.Z)(function*(){const R=x.storage.getLastFetchStatus(),U=x.storage.getLastSuccessfulFetchTimestampMillis(),ne=x.storage.getActiveConfig(),ge=yield R;ge&&(x.lastFetchStatus=ge);const Le=yield U;Le&&(x.lastSuccessfulFetchTimestampMillis=Le);const it=yield ne;it&&(x.activeConfig=it)})()}setLastFetchStatus(x){return this.lastFetchStatus=x,this.storage.setLastFetchStatus(x)}setLastSuccessfulFetchTimestampMillis(x){return this.lastSuccessfulFetchTimestampMillis=x,this.storage.setLastSuccessfulFetchTimestampMillis(x)}setActiveConfig(x){return this.activeConfig=x,this.storage.setActiveConfig(x)}}function Rv(){return ic.apply(this,arguments)}function ic(){return(ic=(0,P.Z)(function*(){if(!(0,fe.hl)())return!1;try{return yield(0,fe.eu)()}catch{return!1}})).apply(this,arguments)}!function Rd(){(0,ae._registerComponent)(new ve.wA("remote-config",function I(x,{instanceIdentifier:R}){const U=x.getProvider("app").getImmediate(),ne=x.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw yi.create("registration-window");if(!(0,fe.hl)())throw yi.create("indexed-db-unavailable");const{projectId:ge,apiKey:Le,appId:it}=U.options;if(!ge)throw yi.create("registration-project-id");if(!Le)throw yi.create("registration-api-key");if(!it)throw yi.create("registration-app-id");const St=new kd(it,U.name,R=R||"firebase"),$t=new Xo(St),Xt=new se.Yd(Es);Xt.logLevel=se.in.ERROR;const It=new Do(ne,ae.SDK_VERSION,R,ge,Le,it),fi=new Is(It,St),Ji=new uu(fi,St,$t,Xt),El=new nc(U,Ji,$t,St,Xt);return function Yn(I){const x=(0,fe.m9)(I);x._initializePromise||(x._initializePromise=x._storageCache.loadFromStorage().then(()=>{x._isInitializationComplete=!0}))}(El),El},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(Es,"0.3.11"),(0,ae.registerVersion)(Es,"0.3.11","esm2017")}();const zi="/firebase-messaging-sw.js",ea="/firebase-cloud-messaging-push-scope",Ys="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",rc="google.c.a.c_id",du="google.c.a.c_l",Nd="google.c.a.ts",ta="google.c.a.e";var Nr=(()=>{return(I=Nr||(Nr={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",Nr;var I})();function xs(I){const x=new Uint8Array(I);return btoa(String.fromCharCode(...x)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Dr(I){const R=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(R),ne=new Uint8Array(U.length);for(let ge=0;ge<U.length;++ge)ne[ge]=U.charCodeAt(ge);return ne}const Eo="fcm_token_details_db",na="fcm_token_object_Store";function Sg(I){return hu.apply(this,arguments)}function hu(){return hu=(0,P.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ge=>ge.name).includes(Eo))return null;let x=null;return(yield(0,pe.X3)(Eo,5,{upgrade:(U=(0,P.Z)(function*(ne,ge,Le,it){var St;if(ge<2||!ne.objectStoreNames.contains(na))return;const $t=it.objectStore(na),Xt=yield $t.index("fcmSenderId").get(I);if(yield $t.clear(),Xt)if(2===ge){const It=Xt;if(!It.auth||!It.p256dh||!It.endpoint)return;x={token:It.fcmToken,createTime:null!==(St=It.createTime)&&void 0!==St?St:Date.now(),subscriptionOptions:{auth:It.auth,p256dh:It.p256dh,endpoint:It.endpoint,swScope:It.swScope,vapidKey:"string"==typeof It.vapidKey?It.vapidKey:xs(It.vapidKey)}}}else if(3===ge){const It=Xt;x={token:It.fcmToken,createTime:It.createTime,subscriptionOptions:{auth:xs(It.auth),p256dh:xs(It.p256dh),endpoint:It.endpoint,swScope:It.swScope,vapidKey:xs(It.vapidKey)}}}else if(4===ge){const It=Xt;x={token:It.fcmToken,createTime:It.createTime,subscriptionOptions:{auth:xs(It.auth),p256dh:xs(It.p256dh),endpoint:It.endpoint,swScope:It.swScope,vapidKey:xs(It.vapidKey)}}}}),function(ge,Le,it,St){return U.apply(this,arguments)})})).close(),yield(0,pe.Lj)(Eo),yield(0,pe.Lj)("fcm_vapid_details_db"),yield(0,pe.Lj)("undefined"),ri(x)?x:null;var U}),hu.apply(this,arguments)}function ri(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:x}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof x.auth&&x.auth.length>0&&"string"==typeof x.p256dh&&x.p256dh.length>0&&"string"==typeof x.endpoint&&x.endpoint.length>0&&"string"==typeof x.swScope&&x.swScope.length>0&&"string"==typeof x.vapidKey&&x.vapidKey.length>0}const Zr="firebase-messaging-store";let $i=null;function sc(){return $i||($i=(0,pe.X3)("firebase-messaging-database",1,{upgrade:(I,x)=>{0===x&&I.createObjectStore(Zr)}})),$i}function ia(I){return cs.apply(this,arguments)}function cs(){return(cs=(0,P.Z)(function*(I){const x=Lr(I),U=yield(yield sc()).transaction(Zr).objectStore(Zr).get(x);if(U)return U;{const ne=yield Sg(I.appConfig.senderId);if(ne)return yield In(I,ne),ne}})).apply(this,arguments)}function In(I,x){return fu.apply(this,arguments)}function fu(){return(fu=(0,P.Z)(function*(I,x){const R=Lr(I),ne=(yield sc()).transaction(Zr,"readwrite");return yield ne.objectStore(Zr).put(x,R),yield ne.done,x})).apply(this,arguments)}function Zs(I){return pu.apply(this,arguments)}function pu(){return(pu=(0,P.Z)(function*(I){const x=Lr(I),U=(yield sc()).transaction(Zr,"readwrite");yield U.objectStore(Zr).delete(x),yield U.done})).apply(this,arguments)}function Lr({appConfig:I}){return I.appId}const ci=new fe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Yt(I,x){return ol.apply(this,arguments)}function ol(){return(ol=(0,P.Z)(function*(I,x){var R;const U=yield cl(I),ne=Ue(x),ge={method:"POST",headers:U,body:JSON.stringify(ne)};let Le;try{Le=yield(yield fetch(Mo(I.appConfig),ge)).json()}catch(it){throw ci.create("token-subscribe-failed",{errorInfo:null===(R=it)||void 0===R?void 0:R.toString()})}if(Le.error)throw ci.create("token-subscribe-failed",{errorInfo:Le.error.message});if(!Le.token)throw ci.create("token-subscribe-no-token");return Le.token})).apply(this,arguments)}function Tg(I,x){return al.apply(this,arguments)}function al(){return(al=(0,P.Z)(function*(I,x){var R;const U=yield cl(I),ne=Ue(x.subscriptionOptions),ge={method:"PATCH",headers:U,body:JSON.stringify(ne)};let Le;try{Le=yield(yield fetch(`${Mo(I.appConfig)}/${x.token}`,ge)).json()}catch(it){throw ci.create("token-update-failed",{errorInfo:null===(R=it)||void 0===R?void 0:R.toString()})}if(Le.error)throw ci.create("token-update-failed",{errorInfo:Le.error.message});if(!Le.token)throw ci.create("token-update-no-token");return Le.token})).apply(this,arguments)}function Ld(I,x){return ll.apply(this,arguments)}function ll(){return(ll=(0,P.Z)(function*(I,x){var R;const ne={method:"DELETE",headers:yield cl(I)};try{const Le=yield(yield fetch(`${Mo(I.appConfig)}/${x}`,ne)).json();if(Le.error)throw ci.create("token-unsubscribe-failed",{errorInfo:Le.error.message})}catch(ge){throw ci.create("token-unsubscribe-failed",{errorInfo:null===(R=ge)||void 0===R?void 0:R.toString()})}})).apply(this,arguments)}function Mo({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function cl(I){return ra.apply(this,arguments)}function ra(){return(ra=(0,P.Z)(function*({appConfig:I,installations:x}){const R=yield x.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function Ue({p256dh:I,auth:x,endpoint:R,vapidKey:U}){const ne={web:{endpoint:R,auth:x,p256dh:I}};return U!==Ys&&(ne.web.applicationPubKey=U),ne}const dn=6048e5;function zf(I){return sa.apply(this,arguments)}function sa(){return(sa=(0,P.Z)(function*(I){const x=yield $f(I.swRegistration,I.vapidKey),R={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:x.endpoint,auth:xs(x.getKey("auth")),p256dh:xs(x.getKey("p256dh"))},U=yield ia(I.firebaseDependencies);if(U){if(Ag(U.subscriptionOptions,R))return Date.now()>=U.createTime+dn?oc(I,{token:U.token,createTime:Date.now(),subscriptionOptions:R}):U.token;try{yield Ld(I.firebaseDependencies,U.token)}catch(ne){console.warn(ne)}return ac(I.firebaseDependencies,R)}return ac(I.firebaseDependencies,R)})).apply(this,arguments)}function Ii(I){return oa.apply(this,arguments)}function oa(){return(oa=(0,P.Z)(function*(I){const x=yield ia(I.firebaseDependencies);x&&(yield Ld(I.firebaseDependencies,x.token),yield Zs(I.firebaseDependencies));const R=yield I.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()})).apply(this,arguments)}function oc(I,x){return nr.apply(this,arguments)}function nr(){return(nr=(0,P.Z)(function*(I,x){try{const R=yield Tg(I.firebaseDependencies,x),U=Object.assign(Object.assign({},x),{token:R,createTime:Date.now()});return yield In(I.firebaseDependencies,U),R}catch(R){throw yield Ii(I),R}})).apply(this,arguments)}function ac(I,x){return aa.apply(this,arguments)}function aa(){return(aa=(0,P.Z)(function*(I,x){const U={token:yield Yt(I,x),createTime:Date.now(),subscriptionOptions:x};return yield In(I,U),U.token})).apply(this,arguments)}function $f(I,x){return ul.apply(this,arguments)}function ul(){return(ul=(0,P.Z)(function*(I,x){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Dr(x)})})).apply(this,arguments)}function Ag(I,x){return x.vapidKey===I.vapidKey&&x.endpoint===I.endpoint&&x.auth===I.auth&&x.p256dh===I.p256dh}function Io(I){const x={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function xi(I,x){if(!x.notification)return;I.notification={};const R=x.notification.title;R&&(I.notification.title=R);const U=x.notification.body;U&&(I.notification.body=U);const ne=x.notification.image;ne&&(I.notification.image=ne)}(x,I),function us(I,x){!x.data||(I.data=x.data)}(x,I),function dl(I,x){var R,U,ne,ge,Le;if(!(x.fcmOptions||null!==(R=x.notification)&&void 0!==R&&R.click_action))return;I.fcmOptions={};const it=null!==(ne=null===(U=x.fcmOptions)||void 0===U?void 0:U.link)&&void 0!==ne?ne:null===(ge=x.notification)||void 0===ge?void 0:ge.click_action;it&&(I.fcmOptions.link=it);const St=null===(Le=x.fcmOptions)||void 0===Le?void 0:Le.analytics_label;St&&(I.fcmOptions.analyticsLabel=St)}(x,I),x}function hl(I){return"object"==typeof I&&!!I&&rc in I}function Ss(I,x){const R=[];for(let U=0;U<I.length;U++)R.push(I.charAt(U)),U<x.length&&R.push(x.charAt(U));return R.join("")}function mu(I){return ci.create("missing-app-config-values",{valueName:I})}Ss("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ss("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Vd{constructor(x,R,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ne=function Bd(I){if(!I||!I.options)throw mu("App Configuration Object");if(!I.name)throw mu("App Name");const x=["projectId","apiKey","appId","messagingSenderId"],{options:R}=I;for(const U of x)if(!R[U])throw mu(U);return{appName:I.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(x);this.firebaseDependencies={app:x,appConfig:ne,installations:R,analyticsProvider:U}}_delete(){return Promise.resolve()}}function Gf(I){return la.apply(this,arguments)}function la(){return(la=(0,P.Z)(function*(I){var x;try{I.swRegistration=yield navigator.serviceWorker.register(zi,{scope:ea}),I.swRegistration.update().catch(()=>{})}catch(R){throw ci.create("failed-service-worker-registration",{browserErrorMessage:null===(x=R)||void 0===x?void 0:x.message})}})).apply(this,arguments)}function gu(I,x){return fl.apply(this,arguments)}function fl(){return(fl=(0,P.Z)(function*(I,x){if(!x&&!I.swRegistration&&(yield Gf(I)),x||!I.swRegistration){if(!(x instanceof ServiceWorkerRegistration))throw ci.create("invalid-sw-registration");I.swRegistration=x}})).apply(this,arguments)}function _u(I,x){return pl.apply(this,arguments)}function pl(){return(pl=(0,P.Z)(function*(I,x){x?I.vapidKey=x:I.vapidKey||(I.vapidKey=Ys)})).apply(this,arguments)}function ca(){return(ca=(0,P.Z)(function*(I,x){if(!navigator)throw ci.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw ci.create("permission-blocked");return yield _u(I,x?.vapidKey),yield gu(I,x?.serviceWorkerRegistration),zf(I)})).apply(this,arguments)}function Wf(I,x,R){return ml.apply(this,arguments)}function ml(){return(ml=(0,P.Z)(function*(I,x,R){const U=qf(x);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:R[rc],message_name:R[du],message_time:R[Nd],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function qf(I){switch(I){case Nr.NOTIFICATION_CLICKED:return"notification_open";case Nr.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Ks(){return(Ks=(0,P.Z)(function*(I,x){const R=x.data;if(!R.isFirebaseMessaging)return;I.onMessageHandler&&R.messageType===Nr.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(Io(R)):I.onMessageHandler.next(Io(R)));const U=R.data;hl(U)&&"1"===U[ta]&&(yield Wf(I,R.messageType,U))})).apply(this,arguments)}const Qs="@firebase/messaging",ti=I=>{const x=new Vd(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function Hd(I,x){return Ks.apply(this,arguments)}(x,R)),x},Ts=I=>{const x=I.getProvider("messaging").getImmediate();return{getToken:U=>function Ud(I,x){return ca.apply(this,arguments)}(x,U)}};function yu(){return vu.apply(this,arguments)}function vu(){return(vu=(0,P.Z)(function*(){try{yield(0,fe.eu)()}catch{return!1}return typeof window<"u"&&(0,fe.hl)()&&(0,fe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function ni(){(0,ae._registerComponent)(new ve.wA("messaging",ti,"PUBLIC")),(0,ae._registerComponent)(new ve.wA("messaging-internal",Ts,"PRIVATE")),(0,ae.registerVersion)(Qs,"0.9.16"),(0,ae.registerVersion)(Qs,"0.9.16","esm2017")}();const ha="analytics",Wd="firebase_id",Du="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",qd="https://www.googletagmanager.com/gtag/js",ui=new se.Yd("@firebase/analytics");function lc(I){return Promise.all(I.map(x=>x.catch(R=>R)))}function cc(I,x){const R=document.createElement("script");R.src=`${qd}?l=${I}&id=${x}`,R.async=!0,document.head.appendChild(R)}function Yf(I,x,R,U,ne,ge){return gl.apply(this,arguments)}function gl(){return(gl=(0,P.Z)(function*(I,x,R,U,ne,ge){const Le=U[ne];try{if(Le)yield x[Le];else{const St=(yield lc(R)).find($t=>$t.measurementId===ne);St&&(yield x[St.appId])}}catch(it){ui.error(it)}I("config",ne,ge)})).apply(this,arguments)}function As(I,x,R,U,ne){return _l.apply(this,arguments)}function _l(){return(_l=(0,P.Z)(function*(I,x,R,U,ne){try{let ge=[];if(ne&&ne.send_to){let Le=ne.send_to;Array.isArray(Le)||(Le=[Le]);const it=yield lc(R);for(const St of Le){const $t=it.find(It=>It.measurementId===St),Xt=$t&&x[$t.appId];if(!Xt){ge=[];break}ge.push(Xt)}}0===ge.length&&(ge=Object.values(x)),yield Promise.all(ge),I("event",U,ne||{})}catch(ge){ui.error(ge)}})).apply(this,arguments)}function Yd(){const I=window.document.getElementsByTagName("script");for(const x of Object.values(I))if(x.src&&x.src.includes(qd))return x;return null}const Si=new fe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),vl=new class Mu{constructor(x={},R=1e3){this.throttleMetadata=x,this.intervalMillis=R}getThrottleMetadata(x){return this.throttleMetadata[x]}setThrottleMetadata(x,R){this.throttleMetadata[x]=R}deleteThrottleMetadata(x){delete this.throttleMetadata[x]}};function fa(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function Qf(I){return di.apply(this,arguments)}function di(){return(di=(0,P.Z)(function*(I){var x;const{appId:R,apiKey:U}=I,ne={method:"GET",headers:fa(U)},ge=Du.replace("{app-id}",R),Le=yield fetch(ge,ne);if(200!==Le.status&&304!==Le.status){let it="";try{const St=yield Le.json();null!==(x=St.error)&&void 0!==x&&x.message&&(it=St.error.message)}catch{}throw Si.create("config-fetch-failed",{httpStatus:Le.status,responseMessage:it})}return Le.json()})).apply(this,arguments)}function Zd(I){return Er.apply(this,arguments)}function Er(){return(Er=(0,P.Z)(function*(I,x=vl,R){const{appId:U,apiKey:ne,measurementId:ge}=I.options;if(!U)throw Si.create("no-app-id");if(!ne){if(ge)return{measurementId:ge,appId:U};throw Si.create("no-api-key")}const Le=x.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},it=new bl;return setTimeout((0,P.Z)(function*(){it.abort()}),void 0!==R?R:6e4),Kd({appId:U,apiKey:ne,measurementId:ge},Le,it,x)})).apply(this,arguments)}function Kd(I,x,R){return ks.apply(this,arguments)}function ks(){return(ks=(0,P.Z)(function*(I,{throttleEndTimeMillis:x,backoffCount:R},U,ne=vl){var ge,Le;const{appId:it,measurementId:St}=I;try{yield Iu(U,x)}catch($t){if(St)return ui.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${St} provided in the "measurementId" field in the local Firebase config. [${null===(ge=$t)||void 0===ge?void 0:ge.message}]`),{appId:it,measurementId:St};throw $t}try{const $t=yield Qf(I);return ne.deleteThrottleMetadata(it),$t}catch($t){const Xt=$t;if(!dc(Xt)){if(ne.deleteThrottleMetadata(it),St)return ui.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${St} provided in the "measurementId" field in the local Firebase config. [${Xt?.message}]`),{appId:it,measurementId:St};throw $t}const It=503===Number(null===(Le=Xt?.customData)||void 0===Le?void 0:Le.httpStatus)?(0,fe.$s)(R,ne.intervalMillis,30):(0,fe.$s)(R,ne.intervalMillis),fi={throttleEndTimeMillis:Date.now()+It,backoffCount:R+1};return ne.setThrottleMetadata(it,fi),ui.debug(`Calling attemptFetch again in ${It} millis`),Kd(I,fi,U,ne)}})).apply(this,arguments)}function Iu(I,x){return new Promise((R,U)=>{const ne=Math.max(x-Date.now(),0),ge=setTimeout(R,ne);I.addEventListener(()=>{clearTimeout(ge),U(Si.create("fetch-throttle",{throttleEndTimeMillis:x}))})})}function dc(I){if(!(I instanceof fe.ZR&&I.customData))return!1;const x=Number(I.customData.httpStatus);return 429===x||500===x||503===x||504===x}class bl{constructor(){this.listeners=[]}addEventListener(x){this.listeners.push(x)}abort(){this.listeners.forEach(x=>x())}}let xo,fc;function pa(){return(pa=(0,P.Z)(function*(I,x,R,U,ne){if(ne&&ne.global)I("event",R,U);else{const ge=yield x;I("event",R,Object.assign(Object.assign({},U),{send_to:ge}))}})).apply(this,arguments)}function _a(I){fc=I}function xu(I){xo=I}function Js(){return ya.apply(this,arguments)}function ya(){return(ya=(0,P.Z)(function*(){var I;if(!(0,fe.hl)())return ui.warn(Si.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,fe.eu)()}catch(x){return ui.warn(Si.create("indexeddb-unavailable",{errorInfo:null===(I=x)||void 0===I?void 0:I.toString()}).message),!1}return!0})).apply(this,arguments)}function va(){return(va=(0,P.Z)(function*(I,x,R,U,ne,ge,Le){var it;const St=Zd(I);St.then(Ji=>{R[Ji.measurementId]=Ji.appId,I.options.measurementId&&Ji.measurementId!==I.options.measurementId&&ui.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${Ji.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Ji=>ui.error(Ji)),x.push(St);const $t=Js().then(Ji=>{if(Ji)return U.getId()}),[Xt,It]=yield Promise.all([St,$t]);Yd()||cc(ge,Xt.measurementId),fc&&(ne("consent","default",fc),_a(void 0)),ne("js",new Date);const fi=null!==(it=Le?.config)&&void 0!==it?it:{};return fi.origin="firebase",fi.update=!0,null!=It&&(fi[Wd]=It),ne("config",Xt.measurementId,fi),xo&&(ne("set",xo),xu(void 0)),Xt.measurementId})).apply(this,arguments)}class pc{constructor(x){this.app=x}_delete(){return delete Xi[this.app.options.appId],Promise.resolve()}}let Xi={},ba=[];const To={};let wa,hs,Ca="dataLayer",Xd=!1;function ep(I,x,R){!function kg(){const I=[];if((0,fe.ru)()&&I.push("This is a browser extension environment."),(0,fe.zI)()||I.push("Cookies are not available."),I.length>0){const x=I.map((U,ne)=>`(${ne+1}) ${U}`).join(" "),R=Si.create("invalid-analytics-context",{errorInfo:x});ui.warn(R.message)}}();const U=I.options.appId;if(!U)throw Si.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw Si.create("no-api-key");ui.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Xi[U])throw Si.create("already-exists",{id:U});if(!Xd){!function uc(I){let x=[];Array.isArray(window[I])?x=window[I]:window[I]=x}(Ca);const{wrappedGtag:ge,gtagCore:Le}=function yl(I,x,R,U,ne){let ge=function(...Le){window[U].push(arguments)};return window[ne]&&"function"==typeof window[ne]&&(ge=window[ne]),window[ne]=function Eu(I,x,R,U){function ge(){return(ge=(0,P.Z)(function*(Le,it,St){try{"event"===Le?yield As(I,x,R,it,St):"config"===Le?yield Yf(I,x,R,U,it,St):"consent"===Le?I("consent","update",St):I("set",it)}catch($t){ui.error($t)}})).apply(this,arguments)}return function ne(Le,it,St){return ge.apply(this,arguments)}}(ge,I,x,R),{gtagCore:ge,wrappedGtag:window[ne]}}(Xi,ba,To,Ca,"gtag");hs=ge,wa=Le,Xd=!0}return Xi[U]=function Jf(I,x,R,U,ne,ge,Le){return va.apply(this,arguments)}(I,ba,To,x,wa,Ca,R),new pc(I)}function Pv(){return tp.apply(this,arguments)}function tp(){return(tp=(0,P.Z)(function*(){if((0,fe.ru)()||!(0,fe.zI)()||!(0,fe.hl)())return!1;try{return yield(0,fe.eu)()}catch{return!1}})).apply(this,arguments)}const fs="@firebase/analytics";!function ir(){(0,ae._registerComponent)(new ve.wA(ha,(x,{options:R})=>ep(x.getProvider("app").getImmediate(),x.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,ae._registerComponent)(new ve.wA("analytics-internal",function I(x){try{const R=x.getProvider(ha).getImmediate();return{logEvent:(U,ne,ge)=>function Zt(I,x,R,U){I=(0,fe.m9)(I),function Cl(I,x,R,U,ne){return pa.apply(this,arguments)}(hs,Xi[I.app.options.appId],x,R,U).catch(ne=>ui.error(ne))}(R,U,ne,ge)}}catch(R){throw Si.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,ae.registerVersion)(fs,"0.8.0"),(0,ae.registerVersion)(fs,"0.8.0","esm2017")}();var Rs=F(4408),ko=F(7565);const Jd=new class Ro extends ko.v{}(class Ea extends Rs.o{constructor(x,R){super(x,R),this.scheduler=x,this.work=R}schedule(x,R=0){return R>0?super.schedule(x,R):(this.delay=R,this.state=x,this.scheduler.flush(this),this)}execute(x,R){return R>0||this.closed?super.execute(x,R):this._execute(x,R)}requestAsyncId(x,R,U=0){return null!=U&&U>0||null==U&&this.delay>0?super.requestAsyncId(x,R,U):x.flush(this)}});var np=F(4986),Ma=F(9751),ip=F(8505),th=F(9468),rr=F(5363);const nh=new l.GfV("7.4.1"),Os="__angularfire_symbol__analyticsIsSupportedValue",ih="__angularfire_symbol__analyticsIsSupported",Me="__angularfire_symbol__remoteConfigIsSupportedValue",ii="__angularfire_symbol__remoteConfigIsSupported",ps="__angularfire_symbol__messagingIsSupportedValue",te="__angularfire_symbol__messagingIsSupported";function hi(I,x,R){if(x){if(1===x.length)return x[0];const ge=x.filter(Le=>Le.app===R);if(1===ge.length)return ge[0]}return R.container.getProvider(I).getImmediate({optional:!0})}globalThis[ih]||(globalThis[ih]=Pv().then(I=>globalThis[Os]=I).catch(()=>globalThis[Os]=!1)),globalThis[te]||(globalThis[te]=yu().then(I=>globalThis[ps]=I).catch(()=>globalThis[ps]=!1)),globalThis[ii]||(globalThis[ii]=Rv().then(I=>globalThis[Me]=I).catch(()=>globalThis[Me]=!1));const or=(I,x)=>{const R=x?[x]:(0,H.C6)(),U=[];return R.forEach(ne=>{ne.container.getProvider(I).instances.forEach(Le=>{U.includes(Le)||U.push(Le)})}),U};function Ir(){}class Ia{constructor(x,R=Jd){this.zone=x,this.delegate=R}now(){return this.delegate.now()}schedule(x,R,U){const ne=this.zone;return this.delegate.schedule(function(Le){ne.runGuarded(()=>{x.apply(this,[Le])})},R,U)}}class xa{constructor(x){this.zone=x,this.task=null}call(x,R){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ir,{},Ir,Ir)),R.pipe((0,ip.b)({next:U,complete:U,error:U})).subscribe(x).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Tu=(()=>{class I{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new Ia(Zone.current)),this.insideAngular=R.run(()=>new Ia(Zone.current,np.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(R){return new(R||I)(l.LFG(l.R0b))},I.\u0275prov=l.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function Ps(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function sh(I){return Ps().ngZone.runOutsideAngular(()=>I())}function Ns(I){return Ps().ngZone.run(()=>I())}function oh(I){return Ps(),function vn(I){return function(R){return(R=R.lift(new xa(I.ngZone))).pipe((0,th.R)(I.outsideAngular),(0,rr.Q)(I.insideAngular))}}(Ps())(I)}const Oo=(I,x)=>function(){const U=arguments;return x&&setTimeout(()=>{"scheduled"===x.state&&x.invoke()},10),Ns(()=>I.apply(void 0,U))},Au=(I,x)=>function(){let R;const U=arguments;for(let ge=0;ge<arguments.length;ge++)"function"==typeof U[ge]&&(x&&(R||(R=Ns(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ir,{},Ir,Ir)))),U[ge]=Oo(U[ge],R));const ne=sh(()=>I.apply(this,U));if(!x){if(ne instanceof Ma.y){const ge=Ps();return ne.pipe((0,th.R)(ge.outsideAngular),(0,rr.Q)(ge.insideAngular))}return Ns(()=>ne)}return ne instanceof Ma.y?ne.pipe(oh):ne instanceof Promise?Ns(()=>new Promise((ge,Le)=>ne.then(it=>Ns(()=>ge(it)),it=>Ns(()=>Le(it))))):"function"==typeof ne&&R?function(){return setTimeout(()=>{R&&"scheduled"===R.state&&R.invoke()},10),ne.apply(this,arguments)}:Ns(()=>ne)}},7143:(Dt,Oe,F)=>{"use strict";F.d(Oe,{$:()=>Mo,A:()=>Y,B:()=>Be,G:()=>Ko,H:()=>Cr,J:()=>Is,L:()=>An,M:()=>ic,N:()=>Pd,P:()=>np,Q:()=>rc,R:()=>Rg,T:()=>du,U:()=>Ys,V:()=>Nr,W:()=>xs,X:()=>Sg,Y:()=>sl,Z:()=>Yt,_:()=>Tg,a:()=>Xs,a0:()=>zf,a1:()=>Ii,a2:()=>oc,a3:()=>ac,a4:()=>$f,a5:()=>Ag,a6:()=>xi,a7:()=>us,a8:()=>hl,a9:()=>Ss,aA:()=>fi,aB:()=>it,aC:()=>Ns,aD:()=>sh,aE:()=>Rt,aI:()=>fa,aL:()=>ta,aa:()=>Gf,ab:()=>gu,ac:()=>_u,af:()=>Wf,ag:()=>qf,ah:()=>Hd,ak:()=>Zr,al:()=>bu,an:()=>qd,ao:()=>gl,ap:()=>hn,aq:()=>De,ar:()=>_t,as:()=>kt,at:()=>ft,au:()=>hh,av:()=>Vr,aw:()=>He,ax:()=>ce,ay:()=>ie,az:()=>Sn,b:()=>Si,c:()=>ii,d:()=>rp,e:()=>te,f:()=>oh,g:()=>R,h:()=>Au,i:()=>ya,j:()=>ge,k:()=>Ug,l:()=>Da,m:()=>to,n:()=>Hg,o:()=>pe,r:()=>Rs,s:()=>Mr,u:()=>Jd});var l=F(5861),H=F(2090),P=F(9681),ae=F(655),fe=F(1877),ve=F(4859);const pe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Y={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Be=function ee(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Te=function Ke(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},gt=new H.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),we=new fe.Yd("@firebase/auth");function ht(C,...g){we.logLevel<=fe.in.ERROR&&we.error(`Auth (${P.SDK_VERSION}): ${C}`,...g)}function ft(C,...g){throw et(C,...g)}function He(C,...g){return et(C,...g)}function Ve(C,g,y){const D=Object.assign(Object.assign({},Te()),{[g]:y});return new H.LL("auth","Firebase",D).create(g,{appName:C.name})}function Ae(C,g,y){if(!(g instanceof y))throw y.name!==g.constructor.name&&ft(C,"argument-error"),Ve(C,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function et(C,...g){if("string"!=typeof C){const y=g[0],D=[...g.slice(1)];return D[0]&&(D[0].appName=C.name),C._errorFactory.create(y,...D)}return gt.create(C,...g)}function ce(C,g,...y){if(!C)throw et(g,...y)}function me(C){const g="INTERNAL ASSERTION FAILED: "+C;throw ht(g),new Error(g)}function De(C,g){C||me(g)}const J=new Map;function ie(C){De(C instanceof Function,"Expected a class definition");let g=J.get(C);return g?(De(g instanceof C,"Instance stored in cache mismatched with class"),g):(g=new C,J.set(C,g),g)}function Ge(){var C;return typeof self<"u"&&(null===(C=self.location)||void 0===C?void 0:C.href)||""}function qe(){return"http:"===Et()||"https:"===Et()}function Et(){var C;return typeof self<"u"&&(null===(C=self.location)||void 0===C?void 0:C.protocol)||null}class Qe{constructor(g,y){this.shortDelay=g,this.longDelay=y,De(y>g,"Short delay should be less than long delay!"),this.isMobile=(0,H.uI)()||(0,H.b$)()}get(){return function cn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(qe()||(0,H.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Rn(C,g){De(C.emulator,"Emulator should always be set here");const{url:y}=C.emulator;return g?`${y}${g.startsWith("/")?g.slice(1):g}`:y}class rn{static initialize(g,y,D){this.fetchImpl=g,y&&(this.headersImpl=y),D&&(this.responseImpl=D)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void me("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void me("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void me("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const yn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},mn=new Qe(3e4,6e4);function sn(C,g){return C.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:C.tenantId}):g}function Qt(C,g,y,D){return Un.apply(this,arguments)}function Un(){return(Un=(0,l.Z)(function*(C,g,y,D,k={}){return as(C,k,(0,l.Z)(function*(){let L={},le={};D&&("GET"===g?le=D:L={body:JSON.stringify(D)});const ke=(0,H.xO)(Object.assign({key:C.config.apiKey},le)).slice(1),dt=yield C._getAdditionalHeaders();return dt["Content-Type"]="application/json",C.languageCode&&(dt["X-Firebase-Locale"]=C.languageCode),rn.fetch()(yr(C,C.config.apiHost,y,ke),Object.assign({method:g,headers:dt,referrerPolicy:"no-referrer"},L))}))})).apply(this,arguments)}function as(C,g,y){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,l.Z)(function*(C,g,y){C._canInitEmulator=!1;const D=Object.assign(Object.assign({},yn),g);try{const k=new Qi(C),L=yield Promise.race([y(),k.promise]);k.clearNetworkTimeout();const le=yield L.json();if("needConfirmation"in le)throw Xn(C,"account-exists-with-different-credential",le);if(L.ok&&!("errorMessage"in le))return le;{const ke=L.ok?le.errorMessage:le.error.message,[dt,Ot]=ke.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===dt)throw Xn(C,"credential-already-in-use",le);if("EMAIL_EXISTS"===dt)throw Xn(C,"email-already-in-use",le);if("USER_DISABLED"===dt)throw Xn(C,"user-disabled",le);const an=D[dt]||dt.toLowerCase().replace(/[_\s]+/g,"-");if(Ot)throw Ve(C,an,Ot);ft(C,an)}}catch(k){if(k instanceof H.ZR)throw k;ft(C,"network-request-failed")}})).apply(this,arguments)}function Hn(C,g,y,D){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,l.Z)(function*(C,g,y,D,k={}){const L=yield Qt(C,g,y,D,k);return"mfaPendingCredential"in L&&ft(C,"multi-factor-auth-required",{_serverResponse:L}),L})).apply(this,arguments)}function yr(C,g,y,D){const k=`${g}${y}?${D}`;return C.config.emulator?Rn(C.config,k):`${C.config.apiScheme}://${k}`}class Qi{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((y,D)=>{this.timer=setTimeout(()=>D(He(this.auth,"network-request-failed")),mn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Xn(C,g,y){const D={appName:C.name};y.email&&(D.email=y.email),y.phoneNumber&&(D.phoneNumber=y.phoneNumber);const k=He(C,g,D);return k.customData._tokenResponse=y,k}function kr(){return(kr=(0,l.Z)(function*(C,g){return Qt(C,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function ct(C,g){return wi.apply(this,arguments)}function wi(){return(wi=(0,l.Z)(function*(C,g){return Qt(C,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Jn(C,g){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,l.Z)(function*(C,g){return Qt(C,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function gi(C){if(C)try{const g=new Date(Number(C));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function Re(){return(Re=(0,l.Z)(function*(C,g=!1){const y=(0,H.m9)(C),D=yield y.getIdToken(g),k=Ne(D);ce(k&&k.exp&&k.auth_time&&k.iat,y.auth,"internal-error");const L="object"==typeof k.firebase?k.firebase:void 0,le=L?.sign_in_provider;return{claims:k,token:D,authTime:gi(We(k.auth_time)),issuedAtTime:gi(We(k.iat)),expirationTime:gi(We(k.exp)),signInProvider:le||null,signInSecondFactor:L?.sign_in_second_factor||null}})).apply(this,arguments)}function We(C){return 1e3*Number(C)}function Ne(C){var g;const[y,D,k]=C.split(".");if(void 0===y||void 0===D||void 0===k)return ht("JWT malformed, contained fewer than 3 sections"),null;try{const L=(0,H.tV)(D);return L?JSON.parse(L):(ht("Failed to decode base64 JWT payload"),null)}catch(L){return ht("Caught error parsing JWT payload as JSON",null===(g=L)||void 0===g?void 0:g.toString()),null}}function Je(C,g){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,l.Z)(function*(C,g,y=!1){if(y)return g;try{return yield g}catch(D){throw D instanceof H.ZR&&yt(D)&&C.auth.currentUser===C&&(yield C.auth.signOut()),D}})).apply(this,arguments)}function yt({code:C}){return"auth/user-disabled"===C||"auth/user-token-expired"===C}class jt{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var y;if(g){const D=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),D}{this.errorBackoff=3e4;const k=(null!==(y=this.user.stsTokenManager.expirationTime)&&void 0!==y?y:0)-Date.now()-3e5;return Math.max(0,k)}}schedule(g=!1){var y=this;if(!this.isRunning)return;const D=this.getInterval(g);this.timerId=setTimeout((0,l.Z)(function*(){yield y.iteration()}),D)}iteration(){var g=this;return(0,l.Z)(function*(){var y;try{yield g.user.getIdToken(!0)}catch(D){return void("auth/network-request-failed"===(null===(y=D)||void 0===y?void 0:y.code)&&g.schedule(!0))}g.schedule()})()}}class tt{constructor(g,y){this.createdAt=g,this.lastLoginAt=y,this._initializeTime()}_initializeTime(){this.lastSignInTime=gi(this.lastLoginAt),this.creationTime=gi(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function qn(C){return qt.apply(this,arguments)}function qt(){return(qt=(0,l.Z)(function*(C){var g;const y=C.auth,D=yield C.getIdToken(),k=yield Je(C,Jn(y,{idToken:D}));ce(k?.users.length,y,"internal-error");const L=k.users[0];C._notifyReloadListener(L);const le=null!==(g=L.providerUserInfo)&&void 0!==g&&g.length?G(L.providerUserInfo):[],ke=X(C.providerData,le),an=!!C.isAnonymous&&!(C.email&&L.passwordHash||ke?.length),Zn={uid:L.localId,displayName:L.displayName||null,photoURL:L.photoUrl||null,email:L.email||null,emailVerified:L.emailVerified||!1,phoneNumber:L.phoneNumber||null,tenantId:L.tenantId||null,providerData:ke,metadata:new tt(L.createdAt,L.lastLoginAt),isAnonymous:an};Object.assign(C,Zn)})).apply(this,arguments)}function un(){return(un=(0,l.Z)(function*(C){const g=(0,H.m9)(C);yield qn(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function X(C,g){return[...C.filter(D=>!g.some(k=>k.providerId===D.providerId)),...g]}function G(C){return C.map(g=>{var{providerId:y}=g,D=(0,ae._T)(g,["providerId"]);return{providerId:y,uid:D.rawId||"",displayName:D.displayName||null,email:D.email||null,phoneNumber:D.phoneNumber||null,photoURL:D.photoUrl||null}})}function Z(){return(Z=(0,l.Z)(function*(C,g){const y=yield as(C,{},(0,l.Z)(function*(){const D=(0,H.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:k,apiKey:L}=C.config,le=yr(C,k,"/v1/token",`key=${L}`),ke=yield C._getAdditionalHeaders();return ke["Content-Type"]="application/x-www-form-urlencoded",rn.fetch()(le,{method:"POST",headers:ke,body:D})}));return{accessToken:y.access_token,expiresIn:y.expires_in,refreshToken:y.refresh_token}})).apply(this,arguments)}class Q{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){ce(g.idToken,"internal-error"),ce(typeof g.idToken<"u","internal-error"),ce(typeof g.refreshToken<"u","internal-error");const y="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function ut(C){const g=Ne(C);return ce(g,"internal-error"),ce(typeof g.exp<"u","internal-error"),ce(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,y)}getToken(g,y=!1){var D=this;return(0,l.Z)(function*(){return ce(!D.accessToken||D.refreshToken,g,"user-token-expired"),y||!D.accessToken||D.isExpired?D.refreshToken?(yield D.refresh(g,D.refreshToken),D.accessToken):null:D.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,y){var D=this;return(0,l.Z)(function*(){const{accessToken:k,refreshToken:L,expiresIn:le}=yield function j(C,g){return Z.apply(this,arguments)}(g,y);D.updateTokensAndExpiration(k,L,Number(le))})()}updateTokensAndExpiration(g,y,D){this.refreshToken=y||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*D}static fromJSON(g,y){const{refreshToken:D,accessToken:k,expirationTime:L}=y,le=new Q;return D&&(ce("string"==typeof D,"internal-error",{appName:g}),le.refreshToken=D),k&&(ce("string"==typeof k,"internal-error",{appName:g}),le.accessToken=k),L&&(ce("number"==typeof L,"internal-error",{appName:g}),le.expirationTime=L),le}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Q,this.toJSON())}_performRefresh(){return me("not implemented")}}function Pe(C,g){ce("string"==typeof C||typeof C>"u","internal-error",{appName:g})}class Xe{constructor(g){var{uid:y,auth:D,stsTokenManager:k}=g,L=(0,ae._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new jt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=y,this.auth=D,this.stsTokenManager=k,this.accessToken=k.accessToken,this.displayName=L.displayName||null,this.email=L.email||null,this.emailVerified=L.emailVerified||!1,this.phoneNumber=L.phoneNumber||null,this.photoURL=L.photoURL||null,this.isAnonymous=L.isAnonymous||!1,this.tenantId=L.tenantId||null,this.providerData=L.providerData?[...L.providerData]:[],this.metadata=new tt(L.createdAt||void 0,L.lastLoginAt||void 0)}getIdToken(g){var y=this;return(0,l.Z)(function*(){const D=yield Je(y,y.stsTokenManager.getToken(y.auth,g));return ce(D,y.auth,"internal-error"),y.accessToken!==D&&(y.accessToken=D,yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)),D})()}getIdTokenResult(g){return function Ce(C){return Re.apply(this,arguments)}(this,g)}reload(){return function br(C){return un.apply(this,arguments)}(this)}_assign(g){this!==g&&(ce(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(y=>Object.assign({},y)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new Xe(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,y=!1){var D=this;return(0,l.Z)(function*(){let k=!1;g.idToken&&g.idToken!==D.stsTokenManager.accessToken&&(D.stsTokenManager.updateFromServerResponse(g),k=!0),y&&(yield qn(D)),yield D.auth._persistUserIfCurrent(D),k&&D.auth._notifyListenersIfCurrent(D)})()}delete(){var g=this;return(0,l.Z)(function*(){const y=yield g.getIdToken();return yield Je(g,function vr(C,g){return kr.apply(this,arguments)}(g.auth,{idToken:y})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,y){var D,k,L,le,ke,dt,Ot,an;const Zn=null!==(D=y.displayName)&&void 0!==D?D:void 0,Po=null!==(k=y.email)&&void 0!==k?k:void 0,Aa=null!==(L=y.phoneNumber)&&void 0!==L?L:void 0,Ru=null!==(le=y.photoURL)&&void 0!==le?le:void 0,no=null!==(ke=y.tenantId)&&void 0!==ke?ke:void 0,ph=null!==(dt=y._redirectEventId)&&void 0!==dt?dt:void 0,cp=null!==(Ot=y.createdAt)&&void 0!==Ot?Ot:void 0,gD=null!==(an=y.lastLoginAt)&&void 0!==an?an:void 0,{uid:mh,emailVerified:zv,isAnonymous:jg,providerData:up,stsTokenManager:$v}=y;ce(mh&&$v,g,"internal-error");const Gv=Q.fromJSON(this.name,$v);ce("string"==typeof mh,g,"internal-error"),Pe(Zn,g.name),Pe(Po,g.name),ce("boolean"==typeof zv,g,"internal-error"),ce("boolean"==typeof jg,g,"internal-error"),Pe(Aa,g.name),Pe(Ru,g.name),Pe(no,g.name),Pe(ph,g.name),Pe(cp,g.name),Pe(gD,g.name);const vc=new Xe({uid:mh,auth:g,email:Po,emailVerified:zv,displayName:Zn,isAnonymous:jg,photoURL:Ru,phoneNumber:Aa,tenantId:no,stsTokenManager:Gv,createdAt:cp,lastLoginAt:gD});return up&&Array.isArray(up)&&(vc.providerData=up.map(Wv=>Object.assign({},Wv))),ph&&(vc._redirectEventId=ph),vc}static _fromIdTokenResponse(g,y,D=!1){return(0,l.Z)(function*(){const k=new Q;k.updateFromServerResponse(y);const L=new Xe({uid:y.localId,auth:g,stsTokenManager:k,isAnonymous:D});return yield qn(L),L})()}}const An=(()=>{class C{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,l.Z)(function*(){return!0})()}_set(y,D){var k=this;return(0,l.Z)(function*(){k.storage[y]=D})()}_get(y){var D=this;return(0,l.Z)(function*(){const k=D.storage[y];return void 0===k?null:k})()}_remove(y){var D=this;return(0,l.Z)(function*(){delete D.storage[y]})()}_addListener(y,D){}_removeListener(y,D){}}return C.type="NONE",C})();function Sn(C,g,y){return`firebase:${C}:${g}:${y}`}class Di{constructor(g,y,D){this.persistence=g,this.auth=y,this.userKey=D;const{config:k,name:L}=this.auth;this.fullUserKey=Sn(this.userKey,k.apiKey,L),this.fullPersistenceKey=Sn("persistence",k.apiKey,L),this.boundEventHandler=y._onStorageEvent.bind(y),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,l.Z)(function*(){const y=yield g.persistence._get(g.fullUserKey);return y?Xe._fromJSON(g.auth,y):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var y=this;return(0,l.Z)(function*(){if(y.persistence===g)return;const D=yield y.getCurrentUser();return yield y.removeCurrentUser(),y.persistence=g,D?y.setCurrentUser(D):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,y,D="authUser"){return(0,l.Z)(function*(){if(!y.length)return new Di(ie(An),g,D);const k=(yield Promise.all(y.map(function(){var Ot=(0,l.Z)(function*(an){if(yield an._isAvailable())return an});return function(an){return Ot.apply(this,arguments)}}()))).filter(Ot=>Ot);let L=k[0]||ie(An);const le=Sn(D,g.config.apiKey,g.name);let ke=null;for(const Ot of y)try{const an=yield Ot._get(le);if(an){const Zn=Xe._fromJSON(g,an);Ot!==L&&(ke=Zn),L=Ot;break}}catch{}const dt=k.filter(Ot=>Ot._shouldAllowMigration);return L._shouldAllowMigration&&dt.length?(L=dt[0],ke&&(yield L._set(le,ke.toJSON())),yield Promise.all(y.map(function(){var Ot=(0,l.Z)(function*(an){if(an!==L)try{yield an._remove(le)}catch{}});return function(an){return Ot.apply(this,arguments)}}())),new Di(L,g,D)):new Di(L,g,D)})()}}function oe(C){const g=C.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(nt(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if($(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(Bt(g))return"Blackberry";if(je(g))return"Webos";if(W(g))return"Safari";if((g.includes("chrome/")||xe(g))&&!g.includes("edge/"))return"Chrome";if(kt(g))return"Android";{const D=C.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===D?.length)return D[1]}return"Other"}function $(C=(0,H.z$)()){return/firefox\//i.test(C)}function W(C=(0,H.z$)()){const g=C.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function xe(C=(0,H.z$)()){return/crios\//i.test(C)}function nt(C=(0,H.z$)()){return/iemobile/i.test(C)}function kt(C=(0,H.z$)()){return/android/i.test(C)}function Bt(C=(0,H.z$)()){return/blackberry/i.test(C)}function je(C=(0,H.z$)()){return/webos/i.test(C)}function _t(C=(0,H.z$)()){return/iphone|ipad|ipod/i.test(C)||/macintosh/i.test(C)&&/mobile/i.test(C)}function hn(C=(0,H.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(C)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(C)}function Fn(C=(0,H.z$)()){return _t(C)||kt(C)||je(C)||Bt(C)||/windows phone/i.test(C)||nt(C)}function Gn(C,g=[]){let y;switch(C){case"Browser":y=oe((0,H.z$)());break;case"Worker":y=`${oe((0,H.z$)())}-${C}`;break;default:y=C}const D=g.length?g.join(","):"FirebaseCore-web";return`${y}/JsCore/${P.SDK_VERSION}/${D}`}class _o{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,y){const D=L=>new Promise((le,ke)=>{try{le(g(L))}catch(dt){ke(dt)}});D.onAbort=y,this.queue.push(D);const k=this.queue.length-1;return()=>{this.queue[k]=()=>Promise.resolve()}}runMiddleware(g){var y=this;return(0,l.Z)(function*(){var D;if(y.auth.currentUser===g)return;const k=[];try{for(const L of y.queue)yield L(g),L.onAbort&&k.push(L.onAbort)}catch(L){k.reverse();for(const le of k)try{le()}catch{}throw y.auth._errorFactory.create("login-blocked",{originalMessage:null===(D=L)||void 0===D?void 0:D.message})}})()}}class Zo{constructor(g,y,D){this.app=g,this.heartbeatServiceProvider=y,this.config=D,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yo(this),this.idTokenSubscription=new yo(this),this.beforeStateQueue=new _o(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=D.sdkClientVersion}_initializeWithPersistence(g,y){var D=this;return y&&(this._popupRedirectResolver=ie(y)),this._initializationPromise=this.queue((0,l.Z)(function*(){var k,L;if(!D._deleted&&(D.persistenceManager=yield Di.create(D,g),!D._deleted)){if(null!==(k=D._popupRedirectResolver)&&void 0!==k&&k._shouldInitProactively)try{yield D._popupRedirectResolver._initialize(D)}catch{}yield D.initializeCurrentUser(y),D.lastNotifiedUid=(null===(L=D.currentUser)||void 0===L?void 0:L.uid)||null,!D._deleted&&(D._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,l.Z)(function*(){if(g._deleted)return;const y=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||y){if(g.currentUser&&y&&g.currentUser.uid===y.uid)return g._currentUser._assign(y),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(y,!0)}})()}initializeCurrentUser(g){var y=this;return(0,l.Z)(function*(){var D;const k=yield y.assertedPersistence.getCurrentUser();let L=k,le=!1;if(g&&y.config.authDomain){yield y.getOrInitRedirectPersistenceManager();const ke=null===(D=y.redirectUser)||void 0===D?void 0:D._redirectEventId,dt=L?._redirectEventId,Ot=yield y.tryRedirectSignIn(g);(!ke||ke===dt)&&Ot?.user&&(L=Ot.user,le=!0)}if(!L)return y.directlySetCurrentUser(null);if(!L._redirectEventId){if(le)try{yield y.beforeStateQueue.runMiddleware(L)}catch(ke){L=k,y._popupRedirectResolver._overrideRedirectResult(y,()=>Promise.reject(ke))}return L?y.reloadAndSetCurrentUserOrClear(L):y.directlySetCurrentUser(null)}return ce(y._popupRedirectResolver,y,"argument-error"),yield y.getOrInitRedirectPersistenceManager(),y.redirectUser&&y.redirectUser._redirectEventId===L._redirectEventId?y.directlySetCurrentUser(L):y.reloadAndSetCurrentUserOrClear(L)})()}tryRedirectSignIn(g){var y=this;return(0,l.Z)(function*(){let D=null;try{D=yield y._popupRedirectResolver._completeRedirectFn(y,g,!0)}catch{yield y._setRedirectUser(null)}return D})()}reloadAndSetCurrentUserOrClear(g){var y=this;return(0,l.Z)(function*(){var D;try{yield qn(g)}catch(k){if("auth/network-request-failed"!==(null===(D=k)||void 0===D?void 0:D.code))return y.directlySetCurrentUser(null)}return y.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function Mt(){if(typeof navigator>"u")return null;const C=navigator;return C.languages&&C.languages[0]||C.language||null}()}_delete(){var g=this;return(0,l.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var y=this;return(0,l.Z)(function*(){const D=g?(0,H.m9)(g):null;return D&&ce(D.auth.config.apiKey===y.config.apiKey,y,"invalid-user-token"),y._updateCurrentUser(D&&D._clone(y))})()}_updateCurrentUser(g,y=!1){var D=this;return(0,l.Z)(function*(){if(!D._deleted)return g&&ce(D.tenantId===g.tenantId,D,"tenant-id-mismatch"),y||(yield D.beforeStateQueue.runMiddleware(g)),D.queue((0,l.Z)(function*(){yield D.directlySetCurrentUser(g),D.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,l.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var y=this;return this.queue((0,l.Z)(function*(){yield y.assertedPersistence.setPersistence(ie(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new H.LL("auth","Firebase",g())}onAuthStateChanged(g,y,D){return this.registerStateListener(this.authStateSubscription,g,y,D)}beforeAuthStateChanged(g,y){return this.beforeStateQueue.pushCallback(g,y)}onIdTokenChanged(g,y,D){return this.registerStateListener(this.idTokenSubscription,g,y,D)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,y){var D=this;return(0,l.Z)(function*(){const k=yield D.getOrInitRedirectPersistenceManager(y);return null===g?k.removeCurrentUser():k.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var y=this;return(0,l.Z)(function*(){if(!y.redirectPersistenceManager){const D=g&&ie(g)||y._popupRedirectResolver;ce(D,y,"argument-error"),y.redirectPersistenceManager=yield Di.create(y,[ie(D._redirectPersistence)],"redirectUser"),y.redirectUser=yield y.redirectPersistenceManager.getCurrentUser()}return y.redirectPersistenceManager})()}_redirectUserForId(g){var y=this;return(0,l.Z)(function*(){var D,k;return y._isInitialized&&(yield y.queue((0,l.Z)(function*(){}))),(null===(D=y._currentUser)||void 0===D?void 0:D._redirectEventId)===g?y._currentUser:(null===(k=y.redirectUser)||void 0===k?void 0:k._redirectEventId)===g?y.redirectUser:null})()}_persistUserIfCurrent(g){var y=this;return(0,l.Z)(function*(){if(g===y.currentUser)return y.queue((0,l.Z)(function*(){return y.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,y;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const D=null!==(y=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==y?y:null;this.lastNotifiedUid!==D&&(this.lastNotifiedUid=D,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,y,D,k){if(this._deleted)return()=>{};const L="function"==typeof y?y:y.next.bind(y),le=this._isInitialized?Promise.resolve():this._initializationPromise;return ce(le,this,"internal-error"),le.then(()=>L(this.currentUser)),"function"==typeof y?g.addObserver(y,D,k):g.addObserver(y)}directlySetCurrentUser(g){var y=this;return(0,l.Z)(function*(){y.currentUser&&y.currentUser!==g&&y._currentUser._stopProactiveRefresh(),g&&y.isProactiveRefreshEnabled&&g._startProactiveRefresh(),y.currentUser=g,g?yield y.assertedPersistence.setCurrentUser(g):yield y.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Gn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,l.Z)(function*(){var y;const D={"X-Client-Version":g.clientVersion};g.app.options.appId&&(D["X-Firebase-gmpid"]=g.app.options.appId);const k=yield null===(y=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getHeartbeatsHeader();return k&&(D["X-Firebase-Client"]=k),D})()}}function Rt(C){return(0,H.m9)(C)}class yo{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,H.ne)(y=>this.observer=y)}get next(){return ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ko(C,g,y){const D=Rt(C);ce(D._canInitEmulator,D,"emulator-config-failed"),ce(/^https?:\/\//.test(g),D,"invalid-emulator-scheme");const k=!!y?.disableWarnings,L=ec(g),{host:le,port:ke}=function Es(C){const g=ec(C),y=/(\/\/)?([^?#/]+)/.exec(C.substr(g.length));if(!y)return{host:"",port:null};const D=y[2].split("@").pop()||"",k=/^(\[[^\]]+\])(:|$)/.exec(D);if(k){const L=k[1];return{host:L,port:_i(D.substr(L.length+1))}}{const[L,le]=D.split(":");return{host:L,port:_i(le)}}}(g);D.config.emulator={url:`${L}//${le}${null===ke?"":`:${ke}`}/`},D.settings.appVerificationDisabledForTesting=!0,D.emulatorConfig=Object.freeze({host:le,port:ke,protocol:L.replace(":",""),options:Object.freeze({disableWarnings:k})}),k||function vo(){function C(){const g=document.createElement("p"),y=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",y.position="fixed",y.width="100%",y.backgroundColor="#ffffff",y.border=".1em solid #000000",y.color="#b50000",y.bottom="0px",y.left="0px",y.margin="0px",y.zIndex="10000",y.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",C):C())}()}function ec(C){const g=C.indexOf(":");return g<0?"":C.substr(0,g+1)}function _i(C){if(!C)return null;const g=Number(C);return isNaN(g)?null:g}class Cr{constructor(g,y){this.providerId=g,this.signInMethod=y}toJSON(){return me("not implemented")}_getIdTokenResponse(g){return me("not implemented")}_linkToIdToken(g,y){return me("not implemented")}_getReauthenticationResolver(g){return me("not implemented")}}function Rr(C,g){return yi.apply(this,arguments)}function yi(){return(yi=(0,l.Z)(function*(C,g){return Qt(C,"POST","/v1/accounts:resetPassword",sn(C,g))})).apply(this,arguments)}function lu(C,g){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,l.Z)(function*(C,g){return Qt(C,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Uf(C,g){return el.apply(this,arguments)}function el(){return(el=(0,l.Z)(function*(C,g){return Qt(C,"POST","/v1/accounts:update",sn(C,g))})).apply(this,arguments)}function bo(){return(bo=(0,l.Z)(function*(C,g){return Hn(C,"POST","/v1/accounts:signInWithPassword",sn(C,g))})).apply(this,arguments)}function ls(C,g){return Co.apply(this,arguments)}function Co(){return(Co=(0,l.Z)(function*(C,g){return Qt(C,"POST","/v1/accounts:sendOobCode",sn(C,g))})).apply(this,arguments)}function Ms(C,g){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,l.Z)(function*(C,g){return ls(C,g)})).apply(this,arguments)}function Hf(C,g){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,l.Z)(function*(C,g){return ls(C,g)})).apply(this,arguments)}function Or(C,g){return wo.apply(this,arguments)}function wo(){return(wo=(0,l.Z)(function*(C,g){return ls(C,g)})).apply(this,arguments)}function tc(C,g){return nl.apply(this,arguments)}function nl(){return(nl=(0,l.Z)(function*(C,g){return ls(C,g)})).apply(this,arguments)}function cu(){return(cu=(0,l.Z)(function*(C,g){return Hn(C,"POST","/v1/accounts:signInWithEmailLink",sn(C,g))})).apply(this,arguments)}function uu(){return(uu=(0,l.Z)(function*(C,g){return Hn(C,"POST","/v1/accounts:signInWithEmailLink",sn(C,g))})).apply(this,arguments)}class il extends Cr{constructor(g,y,D,k=null){super("password",D),this._email=g,this._password=y,this._tenantId=k}static _fromEmailAndPassword(g,y){return new il(g,y,"password")}static _fromEmailAndCode(g,y,D=null){return new il(g,y,"emailLink",D)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g;if(y?.email&&y?.password){if("password"===y.signInMethod)return this._fromEmailAndPassword(y.email,y.password);if("emailLink"===y.signInMethod)return this._fromEmailAndCode(y.email,y.password,y.tenantId)}return null}_getIdTokenResponse(g){var y=this;return(0,l.Z)(function*(){switch(y.signInMethod){case"password":return function tl(C,g){return bo.apply(this,arguments)}(g,{returnSecureToken:!0,email:y._email,password:y._password});case"emailLink":return function wr(C,g){return cu.apply(this,arguments)}(g,{email:y._email,oobCode:y._password});default:ft(g,"internal-error")}})()}_linkToIdToken(g,y){var D=this;return(0,l.Z)(function*(){switch(D.signInMethod){case"password":return lu(g,{idToken:y,returnSecureToken:!0,email:D._email,password:D._password});case"emailLink":return function Dg(C,g){return uu.apply(this,arguments)}(g,{idToken:y,email:D._email,oobCode:D._password});default:ft(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function Do(C,g){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,l.Z)(function*(C,g){return Hn(C,"POST","/v1/accounts:signInWithIdp",sn(C,g))})).apply(this,arguments)}class Is extends Cr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const y=new Is(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(y.idToken=g.idToken),g.accessToken&&(y.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(y.nonce=g.nonce),g.pendingToken&&(y.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(y.accessToken=g.oauthToken,y.secret=g.oauthTokenSecret):ft("argument-error"),y}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:D,signInMethod:k}=y,L=(0,ae._T)(y,["providerId","signInMethod"]);if(!D||!k)return null;const le=new Is(D,k);return le.idToken=L.idToken||void 0,le.accessToken=L.accessToken||void 0,le.secret=L.secret,le.nonce=L.nonce,le.pendingToken=L.pendingToken||null,le}_getIdTokenResponse(g){return Do(g,this.buildRequest())}_linkToIdToken(g,y){const D=this.buildRequest();return D.idToken=y,Do(g,D)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,Do(g,y)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const y={};this.idToken&&(y.id_token=this.idToken),this.accessToken&&(y.access_token=this.accessToken),this.secret&&(y.oauth_token_secret=this.secret),y.providerId=this.providerId,this.nonce&&!this.pendingToken&&(y.nonce=this.nonce),g.postBody=(0,H.xO)(y)}return g}}function Mg(C,g){return Td.apply(this,arguments)}function Td(){return(Td=(0,l.Z)(function*(C,g){return Qt(C,"POST","/v1/accounts:sendVerificationCode",sn(C,g))})).apply(this,arguments)}function rl(){return(rl=(0,l.Z)(function*(C,g){return Hn(C,"POST","/v1/accounts:signInWithPhoneNumber",sn(C,g))})).apply(this,arguments)}function Ad(){return(Ad=(0,l.Z)(function*(C,g){const y=yield Hn(C,"POST","/v1/accounts:signInWithPhoneNumber",sn(C,g));if(y.temporaryProof)throw Xn(C,"account-exists-with-different-credential",y);return y})).apply(this,arguments)}const Ig={USER_NOT_FOUND:"user-not-found"};function kd(){return(kd=(0,l.Z)(function*(C,g){return Hn(C,"POST","/v1/accounts:signInWithPhoneNumber",sn(C,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Ig)})).apply(this,arguments)}class Xo extends Cr{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,y){return new Xo({verificationId:g,verificationCode:y})}static _fromTokenResponse(g,y){return new Xo({phoneNumber:g,temporaryProof:y})}_getIdTokenResponse(g){return function nc(C,g){return rl.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,y){return function Qo(C,g){return Ad.apply(this,arguments)}(g,Object.assign({idToken:y},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function xg(C,g){return kd.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:y,verificationId:D,verificationCode:k}=this.params;return g&&y?{temporaryProof:g,phoneNumber:y}:{sessionInfo:D,code:k}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:y,verificationCode:D,phoneNumber:k,temporaryProof:L}=g;return D||y||k||L?new Xo({verificationId:y,verificationCode:D,phoneNumber:k,temporaryProof:L}):null}}class Jo{constructor(g){var y,D,k,L,le,ke;const dt=(0,H.zd)((0,H.pd)(g)),Ot=null!==(y=dt.apiKey)&&void 0!==y?y:null,an=null!==(D=dt.oobCode)&&void 0!==D?D:null,Zn=function Rd(C){switch(C){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(k=dt.mode)&&void 0!==k?k:null);ce(Ot&&an&&Zn,"argument-error"),this.apiKey=Ot,this.operation=Zn,this.code=an,this.continueUrl=null!==(L=dt.continueUrl)&&void 0!==L?L:null,this.languageCode=null!==(le=dt.languageCode)&&void 0!==le?le:null,this.tenantId=null!==(ke=dt.tenantId)&&void 0!==ke?ke:null}static parseLink(g){const y=function Od(C){const g=(0,H.zd)((0,H.pd)(C)).link,y=g?(0,H.zd)((0,H.pd)(g)).deep_link_id:null,D=(0,H.zd)((0,H.pd)(C)).deep_link_id;return(D?(0,H.zd)((0,H.pd)(D)).link:null)||D||y||g||C}(g);try{return new Jo(y)}catch{return null}}}let ic=(()=>{class C{constructor(){this.providerId=C.PROVIDER_ID}static credential(y,D){return il._fromEmailAndPassword(y,D)}static credentialWithLink(y,D){const k=Jo.parseLink(D);return ce(k,"argument-error"),il._fromEmailAndCode(y,k.code,k.tenantId)}}return C.PROVIDER_ID="password",C.EMAIL_PASSWORD_SIGN_IN_METHOD="password",C.EMAIL_LINK_SIGN_IN_METHOD="emailLink",C})();class zi{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class ea extends zi{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class Ys extends ea{static credentialFromJSON(g){const y="string"==typeof g?JSON.parse(g):g;return ce("providerId"in y&&"signInMethod"in y,"argument-error"),Is._fromParams(y)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return ce(g.idToken||g.accessToken,"argument-error"),Is._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return Ys.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return Ys.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:y,oauthAccessToken:D,oauthTokenSecret:k,pendingToken:L,nonce:le,providerId:ke}=g;if(!D&&!k&&!y&&!L||!ke)return null;try{return new Ys(ke)._credential({idToken:y,accessToken:D,nonce:le,pendingToken:L})}catch{return null}}}let Pd=(()=>{class C extends ea{constructor(){super("facebook.com")}static credential(y){return Is._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.FACEBOOK_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return C.credentialFromTaggedObject(y)}static credentialFromError(y){return C.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return C.credential(y.oauthAccessToken)}catch{return null}}}return C.FACEBOOK_SIGN_IN_METHOD="facebook.com",C.PROVIDER_ID="facebook.com",C})(),rc=(()=>{class C extends ea{constructor(){super("google.com"),this.addScope("profile")}static credential(y,D){return Is._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.GOOGLE_SIGN_IN_METHOD,idToken:y,accessToken:D})}static credentialFromResult(y){return C.credentialFromTaggedObject(y)}static credentialFromError(y){return C.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:D,oauthAccessToken:k}=y;if(!D&&!k)return null;try{return C.credential(D,k)}catch{return null}}}return C.GOOGLE_SIGN_IN_METHOD="google.com",C.PROVIDER_ID="google.com",C})(),du=(()=>{class C extends ea{constructor(){super("github.com")}static credential(y){return Is._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.GITHUB_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return C.credentialFromTaggedObject(y)}static credentialFromError(y){return C.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return C.credential(y.oauthAccessToken)}catch{return null}}}return C.GITHUB_SIGN_IN_METHOD="github.com",C.PROVIDER_ID="github.com",C})();class ta extends Cr{constructor(g,y){super(g,g),this.pendingToken=y}_getIdTokenResponse(g){return Do(g,this.buildRequest())}_linkToIdToken(g,y){const D=this.buildRequest();return D.idToken=y,Do(g,D)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,Do(g,y)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:D,signInMethod:k,pendingToken:L}=y;return D&&k&&L&&D===k?new ta(D,L):null}static _create(g,y){return new ta(g,y)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Nr extends zi{constructor(g){ce(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return Nr.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return Nr.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const y=ta.fromJSON(g);return ce(y,"argument-error"),y}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:y,providerId:D}=g;if(!y||!D)return null;try{return ta._create(D,y)}catch{return null}}}let xs=(()=>{class C extends ea{constructor(){super("twitter.com")}static credential(y,D){return Is._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.TWITTER_SIGN_IN_METHOD,oauthToken:y,oauthTokenSecret:D})}static credentialFromResult(y){return C.credentialFromTaggedObject(y)}static credentialFromError(y){return C.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthAccessToken:D,oauthTokenSecret:k}=y;if(!D||!k)return null;try{return C.credential(D,k)}catch{return null}}}return C.TWITTER_SIGN_IN_METHOD="twitter.com",C.PROVIDER_ID="twitter.com",C})();function Dr(C,g){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,l.Z)(function*(C,g){return Hn(C,"POST","/v1/accounts:signUp",sn(C,g))})).apply(this,arguments)}class Fr{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,y,D,k=!1){return(0,l.Z)(function*(){const L=yield Xe._fromIdTokenResponse(g,D,k),le=na(D);return new Fr({user:L,providerId:le,_tokenResponse:D,operationType:y})})()}static _forOperation(g,y,D){return(0,l.Z)(function*(){yield g._updateTokensIfNecessary(D,!0);const k=na(D);return new Fr({user:g,providerId:k,_tokenResponse:D,operationType:y})})()}}function na(C){return C.providerId?C.providerId:"phoneNumber"in C?"phone":null}function Sg(C){return hu.apply(this,arguments)}function hu(){return(hu=(0,l.Z)(function*(C){var g;const y=Rt(C);if(yield y._initializationPromise,null!==(g=y.currentUser)&&void 0!==g&&g.isAnonymous)return new Fr({user:y.currentUser,providerId:null,operationType:"signIn"});const D=yield Dr(y,{returnSecureToken:!0}),k=yield Fr._fromIdTokenResponse(y,"signIn",D,!0);return yield y._updateCurrentUser(k.user),k})).apply(this,arguments)}class ri extends H.ZR{constructor(g,y,D,k){var L;super(y.code,y.message),this.operationType=D,this.user=k,Object.setPrototypeOf(this,ri.prototype),this.customData={appName:g.name,tenantId:null!==(L=g.tenantId)&&void 0!==L?L:void 0,_serverResponse:y.customData._serverResponse,operationType:D}}static _fromErrorAndOperation(g,y,D,k){return new ri(g,y,D,k)}}function Fd(C,g,y,D){return("reauthenticate"===g?y._getReauthenticationResolver(C):y._getIdTokenResponse(C)).catch(L=>{throw"auth/multi-factor-auth-required"===L.code?ri._fromErrorAndOperation(C,L,g,D):L})}function jf(C){return new Set(C.map(({providerId:g})=>g).filter(g=>!!g))}function Zr(C,g){return $i.apply(this,arguments)}function $i(){return($i=(0,l.Z)(function*(C,g){const y=(0,H.m9)(C);yield cs(!0,y,g);const{providerUserInfo:D}=yield ct(y.auth,{idToken:yield y.getIdToken(),deleteProvider:[g]}),k=jf(D||[]);return y.providerData=y.providerData.filter(L=>k.has(L.providerId)),k.has("phone")||(y.phoneNumber=null),yield y.auth._persistUserIfCurrent(y),y})).apply(this,arguments)}function sc(C,g){return ia.apply(this,arguments)}function ia(){return(ia=(0,l.Z)(function*(C,g,y=!1){const D=yield Je(C,g._linkToIdToken(C.auth,yield C.getIdToken()),y);return Fr._forOperation(C,"link",D)})).apply(this,arguments)}function cs(C,g,y){return In.apply(this,arguments)}function In(){return(In=(0,l.Z)(function*(C,g,y){yield qn(g);const k=!1===C?"provider-already-linked":"no-such-provider";ce(jf(g.providerData).has(y)===C,g.auth,k)})).apply(this,arguments)}function fu(C,g){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,l.Z)(function*(C,g,y=!1){var D;const{auth:k}=C,L="reauthenticate";try{const le=yield Je(C,Fd(k,L,g,C),y);ce(le.idToken,k,"internal-error");const ke=Ne(le.idToken);ce(ke,k,"internal-error");const{sub:dt}=ke;return ce(C.uid===dt,k,"user-mismatch"),Fr._forOperation(C,L,le)}catch(le){throw"auth/user-not-found"===(null===(D=le)||void 0===D?void 0:D.code)&&ft(k,"user-mismatch"),le}})).apply(this,arguments)}function pu(C,g){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,l.Z)(function*(C,g,y=!1){const D="signIn",k=yield Fd(C,D,g),L=yield Fr._fromIdTokenResponse(C,D,k);return y||(yield C._updateCurrentUser(L.user)),L})).apply(this,arguments)}function sl(C,g){return ci.apply(this,arguments)}function ci(){return(ci=(0,l.Z)(function*(C,g){return pu(Rt(C),g)})).apply(this,arguments)}function Yt(C,g){return ol.apply(this,arguments)}function ol(){return(ol=(0,l.Z)(function*(C,g){const y=(0,H.m9)(C);return yield cs(!1,y,g.providerId),sc(y,g)})).apply(this,arguments)}function Tg(C,g){return al.apply(this,arguments)}function al(){return(al=(0,l.Z)(function*(C,g){return fu((0,H.m9)(C),g)})).apply(this,arguments)}function Ld(C,g){return ll.apply(this,arguments)}function ll(){return(ll=(0,l.Z)(function*(C,g){return Hn(C,"POST","/v1/accounts:signInWithCustomToken",sn(C,g))})).apply(this,arguments)}function Mo(C,g){return cl.apply(this,arguments)}function cl(){return(cl=(0,l.Z)(function*(C,g){const y=Rt(C),D=yield Ld(y,{token:g,returnSecureToken:!0}),k=yield Fr._fromIdTokenResponse(y,"signIn",D);return yield y._updateCurrentUser(k.user),k})).apply(this,arguments)}class ra{constructor(g,y){this.factorId=g,this.uid=y.mfaEnrollmentId,this.enrollmentTime=new Date(y.enrolledAt).toUTCString(),this.displayName=y.displayName}static _fromServerResponse(g,y){return"phoneInfo"in y?Ue._fromServerResponse(g,y):ft(g,"internal-error")}}class Ue extends ra{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,y){return new Ue(y)}}function dn(C,g,y){var D;ce((null===(D=y.url)||void 0===D?void 0:D.length)>0,C,"invalid-continue-uri"),ce(typeof y.dynamicLinkDomain>"u"||y.dynamicLinkDomain.length>0,C,"invalid-dynamic-link-domain"),g.continueUrl=y.url,g.dynamicLinkDomain=y.dynamicLinkDomain,g.canHandleCodeInApp=y.handleCodeInApp,y.iOS&&(ce(y.iOS.bundleId.length>0,C,"missing-ios-bundle-id"),g.iOSBundleId=y.iOS.bundleId),y.android&&(ce(y.android.packageName.length>0,C,"missing-android-pkg-name"),g.androidInstallApp=y.android.installApp,g.androidMinimumVersionCode=y.android.minimumVersion,g.androidPackageName=y.android.packageName)}function zf(C,g,y){return sa.apply(this,arguments)}function sa(){return(sa=(0,l.Z)(function*(C,g,y){const D=(0,H.m9)(C),k={requestType:"PASSWORD_RESET",email:g};y&&dn(D,k,y),yield Hf(D,k)})).apply(this,arguments)}function Ii(C,g,y){return oa.apply(this,arguments)}function oa(){return(oa=(0,l.Z)(function*(C,g,y){yield Rr((0,H.m9)(C),{oobCode:g,newPassword:y})})).apply(this,arguments)}function oc(C,g){return nr.apply(this,arguments)}function nr(){return(nr=(0,l.Z)(function*(C,g){yield Uf((0,H.m9)(C),{oobCode:g})})).apply(this,arguments)}function ac(C,g){return aa.apply(this,arguments)}function aa(){return(aa=(0,l.Z)(function*(C,g){const y=(0,H.m9)(C),D=yield Rr(y,{oobCode:g}),k=D.requestType;switch(ce(k,y,"internal-error"),k){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ce(D.newEmail,y,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ce(D.mfaInfo,y,"internal-error");default:ce(D.email,y,"internal-error")}let L=null;return D.mfaInfo&&(L=ra._fromServerResponse(Rt(y),D.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.newEmail:D.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.email:D.newEmail)||null,multiFactorInfo:L},operation:k}})).apply(this,arguments)}function $f(C,g){return ul.apply(this,arguments)}function ul(){return(ul=(0,l.Z)(function*(C,g){const{data:y}=yield ac((0,H.m9)(C),g);return y.email})).apply(this,arguments)}function Ag(C,g,y){return Io.apply(this,arguments)}function Io(){return(Io=(0,l.Z)(function*(C,g,y){const D=Rt(C),k=yield Dr(D,{returnSecureToken:!0,email:g,password:y}),L=yield Fr._fromIdTokenResponse(D,"signIn",k);return yield D._updateCurrentUser(L.user),L})).apply(this,arguments)}function xi(C,g,y){return sl((0,H.m9)(C),ic.credential(g,y))}function us(C,g,y){return dl.apply(this,arguments)}function dl(){return(dl=(0,l.Z)(function*(C,g,y){const D=(0,H.m9)(C),k={requestType:"EMAIL_SIGNIN",email:g};ce(y.handleCodeInApp,D,"argument-error"),y&&dn(D,k,y),yield Or(D,k)})).apply(this,arguments)}function hl(C,g){return"EMAIL_SIGNIN"===Jo.parseLink(g)?.operation}function Ss(C,g,y){return Bd.apply(this,arguments)}function Bd(){return(Bd=(0,l.Z)(function*(C,g,y){const D=(0,H.m9)(C),k=ic.credentialWithLink(g,y||Ge());return ce(k._tenantId===(D.tenantId||null),D,"tenant-id-mismatch"),sl(D,k)})).apply(this,arguments)}function mu(C,g){return Vd.apply(this,arguments)}function Vd(){return(Vd=(0,l.Z)(function*(C,g){return Qt(C,"POST","/v1/accounts:createAuthUri",sn(C,g))})).apply(this,arguments)}function Gf(C,g){return la.apply(this,arguments)}function la(){return(la=(0,l.Z)(function*(C,g){const D={identifier:g,continueUri:qe()?Ge():"http://localhost"},{signinMethods:k}=yield mu((0,H.m9)(C),D);return k||[]})).apply(this,arguments)}function gu(C,g){return fl.apply(this,arguments)}function fl(){return(fl=(0,l.Z)(function*(C,g){const y=(0,H.m9)(C),k={requestType:"VERIFY_EMAIL",idToken:yield C.getIdToken()};g&&dn(y.auth,k,g);const{email:L}=yield Ms(y.auth,k);L!==C.email&&(yield C.reload())})).apply(this,arguments)}function _u(C,g,y){return pl.apply(this,arguments)}function pl(){return(pl=(0,l.Z)(function*(C,g,y){const D=(0,H.m9)(C),L={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield C.getIdToken(),newEmail:g};y&&dn(D.auth,L,y);const{email:le}=yield tc(D.auth,L);le!==C.email&&(yield C.reload())})).apply(this,arguments)}function Ud(C,g){return ca.apply(this,arguments)}function ca(){return(ca=(0,l.Z)(function*(C,g){return Qt(C,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Wf(C,g){return ml.apply(this,arguments)}function ml(){return(ml=(0,l.Z)(function*(C,{displayName:g,photoURL:y}){if(void 0===g&&void 0===y)return;const D=(0,H.m9)(C),L={idToken:yield D.getIdToken(),displayName:g,photoUrl:y,returnSecureToken:!0},le=yield Je(D,Ud(D.auth,L));D.displayName=le.displayName||null,D.photoURL=le.photoUrl||null;const ke=D.providerData.find(({providerId:dt})=>"password"===dt);ke&&(ke.displayName=D.displayName,ke.photoURL=D.photoURL),yield D._updateTokensIfNecessary(le)})).apply(this,arguments)}function qf(C,g){return Ks((0,H.m9)(C),g,null)}function Hd(C,g){return Ks((0,H.m9)(C),null,g)}function Ks(C,g,y){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,l.Z)(function*(C,g,y){const{auth:D}=C,L={idToken:yield C.getIdToken(),returnSecureToken:!0};g&&(L.email=g),y&&(L.password=y);const le=yield Je(C,lu(D,L));yield C._updateTokensIfNecessary(le,!0)})).apply(this,arguments)}class ti{constructor(g,y,D={}){this.isNewUser=g,this.providerId=y,this.profile=D}}class Ts extends ti{constructor(g,y,D,k){super(g,y,D),this.username=k}}class ni extends ti{constructor(g,y){super(g,"facebook.com",y)}}class yu extends Ts{constructor(g,y){super(g,"github.com",y,"string"==typeof y?.login?y?.login:null)}}class vu extends ti{constructor(g,y){super(g,"google.com",y)}}class zd extends Ts{constructor(g,y,D){super(g,"twitter.com",y,D)}}function bu(C){const{user:g,_tokenResponse:y}=C;return g.isAnonymous&&!y?{providerId:null,isNewUser:!1,profile:null}:function jd(C){var g,y;if(!C)return null;const{providerId:D}=C,k=C.rawUserInfo?JSON.parse(C.rawUserInfo):{},L=C.isNewUser||"identitytoolkit#SignupNewUserResponse"===C.kind;if(!D&&C?.idToken){const le=null===(y=null===(g=Ne(C.idToken))||void 0===g?void 0:g.firebase)||void 0===y?void 0:y.sign_in_provider;if(le)return new ti(L,"anonymous"!==le&&"custom"!==le?le:null)}if(!D)return null;switch(D){case"facebook.com":return new ni(L,k);case"github.com":return new yu(L,k);case"google.com":return new vu(L,k);case"twitter.com":return new zd(L,k,C.screenName||null);case"custom":case"anonymous":return new ti(L,null);default:return new ti(L,D,k)}}(y)}class Br{constructor(g,y,D){this.type=g,this.credential=y,this.auth=D}static _fromIdtoken(g,y){return new Br("enroll",g,y)}static _fromMfaPendingCredential(g){return new Br("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var y,D;if(g?.multiFactorSession){if(null!==(y=g.multiFactorSession)&&void 0!==y&&y.pendingCredential)return Br._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(D=g.multiFactorSession)&&void 0!==D&&D.idToken)return Br._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Du{constructor(g,y,D){this.session=g,this.hints=y,this.signInResolver=D}static _fromError(g,y){const D=Rt(g),k=y.customData._serverResponse,L=(k.mfaInfo||[]).map(ke=>ra._fromServerResponse(D,ke));ce(k.mfaPendingCredential,D,"internal-error");const le=Br._fromMfaPendingCredential(k.mfaPendingCredential);return new Du(le,L,function(){var ke=(0,l.Z)(function*(dt){const Ot=yield dt._process(D,le);delete k.mfaInfo,delete k.mfaPendingCredential;const an=Object.assign(Object.assign({},k),{idToken:Ot.idToken,refreshToken:Ot.refreshToken});switch(y.operationType){case"signIn":const Zn=yield Fr._fromIdTokenResponse(D,y.operationType,an);return yield D._updateCurrentUser(Zn.user),Zn;case"reauthenticate":return ce(y.user,D,"internal-error"),Fr._forOperation(y.user,y.operationType,an);default:ft(D,"internal-error")}});return function(dt){return ke.apply(this,arguments)}}())}resolveSignIn(g){var y=this;return(0,l.Z)(function*(){return y.signInResolver(g)})()}}function qd(C,g){var y;const D=(0,H.m9)(C),k=g;return ce(g.customData.operationType,D,"argument-error"),ce(null===(y=k.customData._serverResponse)||void 0===y?void 0:y.mfaPendingCredential,D,"argument-error"),Du._fromError(D,k)}function ui(C,g){return Qt(C,"POST","/v2/accounts/mfaEnrollment:start",sn(C,g))}class uc{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(y=>{y.mfaInfo&&(this.enrolledFactors=y.mfaInfo.map(D=>ra._fromServerResponse(g.auth,D)))})}static _fromUser(g){return new uc(g)}getSession(){var g=this;return(0,l.Z)(function*(){return Br._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,y){var D=this;return(0,l.Z)(function*(){const k=g,L=yield D.getSession(),le=yield Je(D.user,k._process(D.user.auth,L,y));return yield D.user._updateTokensIfNecessary(le),D.user.reload()})()}unenroll(g){var y=this;return(0,l.Z)(function*(){var D;const k="string"==typeof g?g:g.uid,L=yield y.user.getIdToken(),le=yield Je(y.user,function cc(C,g){return Qt(C,"POST","/v2/accounts/mfaEnrollment:withdraw",sn(C,g))}(y.user.auth,{idToken:L,mfaEnrollmentId:k}));y.enrolledFactors=y.enrolledFactors.filter(({uid:ke})=>ke!==k),yield y.user._updateTokensIfNecessary(le);try{yield y.user.reload()}catch(ke){if("auth/user-token-expired"!==(null===(D=ke)||void 0===D?void 0:D.code))throw ke}})()}}const Yf=new WeakMap;function gl(C){const g=(0,H.m9)(C);return Yf.has(g)||Yf.set(g,uc._fromUser(g)),Yf.get(g)}const As="__sak";class _l{constructor(g,y){this.storageRetriever=g,this.type=y}_isAvailable(){try{return this.storage?(this.storage.setItem(As,"1"),this.storage.removeItem(As),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,y){return this.storage.setItem(g,JSON.stringify(y)),Promise.resolve()}_get(g){const y=this.storage.getItem(g);return Promise.resolve(y?JSON.parse(y):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const Si=(()=>{class C extends _l{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(y,D)=>this.onStorageEvent(y,D),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Eu(){const C=(0,H.z$)();return W(C)||_t(C)}()&&function Ds(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Fn(),this._shouldAllowMigration=!0}forAllChangedKeys(y){for(const D of Object.keys(this.listeners)){const k=this.storage.getItem(D),L=this.localCache[D];k!==L&&y(D,L,k)}}onStorageEvent(y,D=!1){if(!y.key)return void this.forAllChangedKeys((ke,dt,Ot)=>{this.notifyListeners(ke,Ot)});const k=y.key;if(D?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ke=this.storage.getItem(k);if(y.newValue!==ke)null!==y.newValue?this.storage.setItem(k,y.newValue):this.storage.removeItem(k);else if(this.localCache[k]===y.newValue&&!D)return}const L=()=>{const ke=this.storage.getItem(k);!D&&this.localCache[k]===ke||this.notifyListeners(k,ke)},le=this.storage.getItem(k);!function en(){return(0,H.w1)()&&10===document.documentMode}()||le===y.newValue||y.newValue===y.oldValue?L():setTimeout(L,10)}notifyListeners(y,D){this.localCache[y]=D;const k=this.listeners[y];if(k)for(const L of Array.from(k))L(D&&JSON.parse(D))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((y,D,k)=>{this.onStorageEvent(new StorageEvent("storage",{key:y,oldValue:D,newValue:k}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(y,D){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[y]||(this.listeners[y]=new Set,this.localCache[y]=this.storage.getItem(y)),this.listeners[y].add(D)}_removeListener(y,D){this.listeners[y]&&(this.listeners[y].delete(D),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(y,D){var k=()=>super._set,L=this;return(0,l.Z)(function*(){yield k().call(L,y,D),L.localCache[y]=JSON.stringify(D)})()}_get(y){var D=()=>super._get,k=this;return(0,l.Z)(function*(){const L=yield D().call(k,y);return k.localCache[y]=JSON.stringify(L),L})()}_remove(y){var D=()=>super._remove,k=this;return(0,l.Z)(function*(){yield D().call(k,y),delete k.localCache[y]})()}}return C.type="LOCAL",C})(),Xs=(()=>{class C extends _l{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(y,D){}_removeListener(y,D){}}return C.type="SESSION",C})();let vl=(()=>{class C{constructor(y){this.eventTarget=y,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(y){const D=this.receivers.find(L=>L.isListeningto(y));if(D)return D;const k=new C(y);return this.receivers.push(k),k}isListeningto(y){return this.eventTarget===y}handleEvent(y){var D=this;return(0,l.Z)(function*(){const k=y,{eventId:L,eventType:le,data:ke}=k.data,dt=D.handlersMap[le];if(!dt?.size)return;k.ports[0].postMessage({status:"ack",eventId:L,eventType:le});const Ot=Array.from(dt).map(function(){var Zn=(0,l.Z)(function*(Po){return Po(k.origin,ke)});return function(Po){return Zn.apply(this,arguments)}}()),an=yield function Mu(C){return Promise.all(C.map(function(){var g=(0,l.Z)(function*(y){try{return{fulfilled:!0,value:yield y}}catch(D){return{fulfilled:!1,reason:D}}});return function(y){return g.apply(this,arguments)}}()))}(Ot);k.ports[0].postMessage({status:"done",eventId:L,eventType:le,response:an})})()}_subscribe(y,D){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[y]||(this.handlersMap[y]=new Set),this.handlersMap[y].add(D)}_unsubscribe(y,D){this.handlersMap[y]&&D&&this.handlersMap[y].delete(D),(!D||0===this.handlersMap[y].size)&&delete this.handlersMap[y],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return C.receivers=[],C})();function fa(C="",g=10){let y="";for(let D=0;D<g;D++)y+=Math.floor(10*Math.random());return C+y}class Qf{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,y,D=50){var k=this;return(0,l.Z)(function*(){const L=typeof MessageChannel<"u"?new MessageChannel:null;if(!L)throw new Error("connection_unavailable");let le,ke;return new Promise((dt,Ot)=>{const an=fa("",20);L.port1.start();const Zn=setTimeout(()=>{Ot(new Error("unsupported_event"))},D);ke={messageChannel:L,onMessage(Po){const Aa=Po;if(Aa.data.eventId===an)switch(Aa.data.status){case"ack":clearTimeout(Zn),le=setTimeout(()=>{Ot(new Error("timeout"))},3e3);break;case"done":clearTimeout(le),dt(Aa.data.response);break;default:clearTimeout(Zn),clearTimeout(le),Ot(new Error("invalid_response"))}}},k.handlers.add(ke),L.port1.addEventListener("message",ke.onMessage),k.target.postMessage({eventType:g,eventId:an,data:y},[L.port2])}).finally(()=>{ke&&k.removeMessageHandler(ke)})})()}}function di(){return window}function Er(){return typeof di().WorkerGlobalScope<"u"&&"function"==typeof di().importScripts}function ks(){return(ks=(0,l.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const bl="firebaseLocalStorageDb",Cl="firebaseLocalStorage",pa="fbase_key";class So{constructor(g){this.request=g}toPromise(){return new Promise((g,y)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{y(this.request.error)})})}}function ma(C,g){return C.transaction([Cl],g?"readwrite":"readonly").objectStore(Cl)}function hc(){const C=indexedDB.open(bl,1);return new Promise((g,y)=>{C.addEventListener("error",()=>{y(C.error)}),C.addEventListener("upgradeneeded",()=>{const D=C.result;try{D.createObjectStore(Cl,{keyPath:pa})}catch(k){y(k)}}),C.addEventListener("success",(0,l.Z)(function*(){const D=C.result;D.objectStoreNames.contains(Cl)?g(D):(D.close(),yield function Qd(){const C=indexedDB.deleteDatabase(bl);return new So(C).toPromise()}(),g(yield hc()))}))})}function wl(C,g,y){return ds.apply(this,arguments)}function ds(){return(ds=(0,l.Z)(function*(C,g,y){const D=ma(C,!0).put({[pa]:g,value:y});return new So(D).toPromise()})).apply(this,arguments)}function ga(){return(ga=(0,l.Z)(function*(C,g){const y=ma(C,!1).get(g),D=yield new So(y).toPromise();return void 0===D?null:D.value})).apply(this,arguments)}function fc(C,g){const y=ma(C,!0).delete(g);return new So(y).toPromise()}const ya=(()=>{class C{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var y=this;return(0,l.Z)(function*(){return y.db||(y.db=yield hc()),y.db})()}_withRetries(y){var D=this;return(0,l.Z)(function*(){let k=0;for(;;)try{const L=yield D._openDb();return yield y(L)}catch(L){if(k++>3)throw L;D.db&&(D.db.close(),D.db=void 0)}})()}initializeServiceWorkerMessaging(){var y=this;return(0,l.Z)(function*(){return Er()?y.initializeReceiver():y.initializeSender()})()}initializeReceiver(){var y=this;return(0,l.Z)(function*(){y.receiver=vl._getInstance(function dc(){return Er()?self:null}()),y.receiver._subscribe("keyChanged",function(){var D=(0,l.Z)(function*(k,L){return{keyProcessed:(yield y._poll()).includes(L.key)}});return function(k,L){return D.apply(this,arguments)}}()),y.receiver._subscribe("ping",function(){var D=(0,l.Z)(function*(k,L){return["keyChanged"]});return function(k,L){return D.apply(this,arguments)}}())})()}initializeSender(){var y=this;return(0,l.Z)(function*(){var D,k;if(y.activeServiceWorker=yield function Kd(){return ks.apply(this,arguments)}(),!y.activeServiceWorker)return;y.sender=new Qf(y.activeServiceWorker);const L=yield y.sender._send("ping",{},800);!L||(null===(D=L[0])||void 0===D?void 0:D.fulfilled)&&(null===(k=L[0])||void 0===k?void 0:k.value.includes("keyChanged"))&&(y.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(y){var D=this;return(0,l.Z)(function*(){if(D.sender&&D.activeServiceWorker&&function Iu(){var C;return(null===(C=navigator?.serviceWorker)||void 0===C?void 0:C.controller)||null}()===D.activeServiceWorker)try{yield D.sender._send("keyChanged",{key:y},D.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,l.Z)(function*(){try{if(!indexedDB)return!1;const y=yield hc();return yield wl(y,As,"1"),yield fc(y,As),!0}catch{}return!1})()}_withPendingWrite(y){var D=this;return(0,l.Z)(function*(){D.pendingWrites++;try{yield y()}finally{D.pendingWrites--}})()}_set(y,D){var k=this;return(0,l.Z)(function*(){return k._withPendingWrite((0,l.Z)(function*(){return yield k._withRetries(L=>wl(L,y,D)),k.localCache[y]=D,k.notifyServiceWorker(y)}))})()}_get(y){var D=this;return(0,l.Z)(function*(){const k=yield D._withRetries(L=>function Xf(C,g){return ga.apply(this,arguments)}(L,y));return D.localCache[y]=k,k})()}_remove(y){var D=this;return(0,l.Z)(function*(){return D._withPendingWrite((0,l.Z)(function*(){return yield D._withRetries(k=>fc(k,y)),delete D.localCache[y],D.notifyServiceWorker(y)}))})()}_poll(){var y=this;return(0,l.Z)(function*(){const D=yield y._withRetries(le=>{const ke=ma(le,!1).getAll();return new So(ke).toPromise()});if(!D)return[];if(0!==y.pendingWrites)return[];const k=[],L=new Set;for(const{fbase_key:le,value:ke}of D)L.add(le),JSON.stringify(y.localCache[le])!==JSON.stringify(ke)&&(y.notifyListeners(le,ke),k.push(le));for(const le of Object.keys(y.localCache))y.localCache[le]&&!L.has(le)&&(y.notifyListeners(le,null),k.push(le));return k})()}notifyListeners(y,D){this.localCache[y]=D;const k=this.listeners[y];if(k)for(const L of Array.from(k))L(D)}startPolling(){var y=this;this.stopPolling(),this.pollTimer=setInterval((0,l.Z)(function*(){return y._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(y,D){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[y]||(this.listeners[y]=new Set,this._get(y)),this.listeners[y].add(D)}_removeListener(y,D){this.listeners[y]&&(this.listeners[y].delete(D),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return C.type="LOCAL",C})();function Jf(C,g){return Qt(C,"POST","/v2/accounts/mfaSignIn:start",sn(C,g))}function Xi(){return(Xi=(0,l.Z)(function*(C){return(yield Qt(C,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function To(C){return new Promise((g,y)=>{const D=document.createElement("script");D.setAttribute("src",C),D.onload=g,D.onerror=k=>{const L=He("internal-error");L.customData=k,y(L)},D.type="text/javascript",D.charset="UTF-8",function ba(){var C,g;return null!==(g=null===(C=document.getElementsByTagName("head"))||void 0===C?void 0:C[0])&&void 0!==g?g:document}().appendChild(D)})}function Ca(C){return`__${C}${Math.floor(1e6*Math.random())}`}const hs=1e12;class Xd{constructor(g){this.auth=g,this.counter=hs,this._widgets=new Map}render(g,y){const D=this.counter;return this._widgets.set(D,new Wn(g,this.auth.name,y||{})),this.counter++,D}reset(g){var y;const D=g||hs;null===(y=this._widgets.get(D))||void 0===y||y.delete(),this._widgets.delete(D)}getResponse(g){var y;return(null===(y=this._widgets.get(g||hs))||void 0===y?void 0:y.getResponse())||""}execute(g){var y=this;return(0,l.Z)(function*(){var D;return null===(D=y._widgets.get(g||hs))||void 0===D||D.execute(),""})()}}class Wn{constructor(g,y,D){this.params=D,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const k="string"==typeof g?document.getElementById(g):g;ce(k,"argument-error",{appName:y}),this.container=k,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function kg(C){const g=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let D=0;D<C;D++)g.push(y.charAt(Math.floor(Math.random()*y.length)));return g.join("")}(50);const{callback:g,"expired-callback":y}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,y)try{y()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ep=Ca("rcb"),fD=new Qe(3e4,6e4);class Pv{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=di().grecaptcha)||void 0===g||!g.render)}load(g,y=""){return ce(function tp(C){return C.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(C)}(y),g,"argument-error"),this.shouldResolveImmediately(y)?Promise.resolve(di().grecaptcha):new Promise((D,k)=>{const L=di().setTimeout(()=>{k(He(g,"network-request-failed"))},fD.get());di()[ep]=()=>{di().clearTimeout(L),delete di()[ep];const ke=di().grecaptcha;if(!ke)return void k(He(g,"internal-error"));const dt=ke.render;ke.render=(Ot,an)=>{const Zn=dt(Ot,an);return this.counter++,Zn},this.hostLanguage=y,D(ke)},To(`https://www.google.com/recaptcha/api.js??${(0,H.xO)({onload:ep,render:"explicit",hl:y})}`).catch(()=>{clearTimeout(L),k(He(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var y;return!(null===(y=di().grecaptcha)||void 0===y||!y.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class pD{load(g){return(0,l.Z)(function*(){return new Xd(g)})()}clearedOneInstance(){}}const Ao="recaptcha",Nv={theme:"light",type:"image"};class Rg{constructor(g,y=Object.assign({},Nv),D){this.parameters=y,this.type=Ao,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Rt(D),this.isInvisible="invisible"===this.parameters.size,ce(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const k="string"==typeof g?document.getElementById(g):g;ce(k,this.auth,"argument-error"),this.container=k,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new pD:new Pv,this.validateStartingState()}verify(){var g=this;return(0,l.Z)(function*(){g.assertNotDestroyed();const y=yield g.render(),D=g.getAssertedRecaptcha();return D.getResponse(y)||new Promise(L=>{const le=ke=>{!ke||(g.tokenChangeListeners.delete(le),L(ke))};g.tokenChangeListeners.add(le),g.isInvisible&&D.execute(y)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){ce(!this.parameters.sitekey,this.auth,"argument-error"),ce(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ce(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return y=>{if(this.tokenChangeListeners.forEach(D=>D(y)),"function"==typeof g)g(y);else if("string"==typeof g){const D=di()[g];"function"==typeof D&&D(y)}}}assertNotDestroyed(){ce(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,l.Z)(function*(){if(yield g.init(),!g.widgetId){let y=g.container;if(!g.isInvisible){const D=document.createElement("div");y.appendChild(D),y=D}g.widgetId=g.getAssertedRecaptcha().render(y,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,l.Z)(function*(){ce(qe()&&!Er(),g.auth,"internal-error"),yield function Fi(){let C=null;return new Promise(g=>{"complete"!==document.readyState?(C=()=>g(),window.addEventListener("load",C)):g()}).catch(g=>{throw C&&window.removeEventListener("load",C),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const y=yield function pc(C){return Xi.apply(this,arguments)}(g.auth);ce(y,g.auth,"internal-error"),g.parameters.sitekey=y})()}getAssertedRecaptcha(){return ce(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Zt{constructor(g,y){this.verificationId=g,this.onConfirmation=y}confirm(g){const y=Xo._fromVerification(this.verificationId,g);return this.onConfirmation(y)}}function Mr(C,g,y){return fs.apply(this,arguments)}function fs(){return(fs=(0,l.Z)(function*(C,g,y){const D=Rt(C),k=yield ko(D,g,(0,H.m9)(y));return new Zt(k,L=>sl(D,L))})).apply(this,arguments)}function Da(C,g,y){return ir.apply(this,arguments)}function ir(){return(ir=(0,l.Z)(function*(C,g,y){const D=(0,H.m9)(C);yield cs(!1,D,"phone");const k=yield ko(D.auth,g,(0,H.m9)(y));return new Zt(k,L=>Yt(D,L))})).apply(this,arguments)}function Rs(C,g,y){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,l.Z)(function*(C,g,y){const D=(0,H.m9)(C),k=yield ko(D.auth,g,(0,H.m9)(y));return new Zt(k,L=>Tg(D,L))})).apply(this,arguments)}function ko(C,g,y){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,l.Z)(function*(C,g,y){var D;const k=yield y.verify();try{let L;if(ce("string"==typeof k,C,"argument-error"),ce(y.type===Ao,C,"argument-error"),L="string"==typeof g?{phoneNumber:g}:g,"session"in L){const le=L.session;if("phoneNumber"in L)return ce("enroll"===le.type,C,"internal-error"),(yield ui(C,{idToken:le.credential,phoneEnrollmentInfo:{phoneNumber:L.phoneNumber,recaptchaToken:k}})).phoneSessionInfo.sessionInfo;{ce("signin"===le.type,C,"internal-error");const ke=(null===(D=L.multiFactorHint)||void 0===D?void 0:D.uid)||L.multiFactorUid;return ce(ke,C,"missing-multi-factor-info"),(yield Jf(C,{mfaPendingCredential:le.credential,mfaEnrollmentId:ke,phoneSignInInfo:{recaptchaToken:k}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:le}=yield Mg(C,{phoneNumber:L.phoneNumber,recaptchaToken:k});return le}}finally{y._reset()}})).apply(this,arguments)}function Jd(C,g){return eh.apply(this,arguments)}function eh(){return(eh=(0,l.Z)(function*(C,g){yield sc((0,H.m9)(C),g)})).apply(this,arguments)}let np=(()=>{class C{constructor(y){this.providerId=C.PROVIDER_ID,this.auth=Rt(y)}verifyPhoneNumber(y,D){return ko(this.auth,y,(0,H.m9)(D))}static credential(y,D){return Xo._fromVerification(y,D)}static credentialFromResult(y){return C.credentialFromTaggedObject(y)}static credentialFromError(y){return C.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{phoneNumber:D,temporaryProof:k}=y;return D&&k?Xo._fromTokenResponse(D,k):null}}return C.PROVIDER_ID="phone",C.PHONE_SIGN_IN_METHOD="phone",C})();function Ma(C,g){return g?ie(g):(ce(C._popupRedirectResolver,C,"argument-error"),C._popupRedirectResolver)}class ip extends Cr{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return Do(g,this._buildIdpRequest())}_linkToIdToken(g,y){return Do(g,this._buildIdpRequest(y))}_getReauthenticationResolver(g){return Do(g,this._buildIdpRequest())}_buildIdpRequest(g){const y={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(y.idToken=g),y}}function th(C){return pu(C.auth,new ip(C),C.bypassAuthState)}function rr(C){const{auth:g,user:y}=C;return ce(y,g,"internal-error"),fu(y,new ip(C),C.bypassAuthState)}function nh(C){return Os.apply(this,arguments)}function Os(){return(Os=(0,l.Z)(function*(C){const{auth:g,user:y}=C;return ce(y,g,"internal-error"),sc(y,new ip(C),C.bypassAuthState)})).apply(this,arguments)}class ih{constructor(g,y,D,k,L=!1){this.auth=g,this.resolver=D,this.user=k,this.bypassAuthState=L,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(y)?y:[y]}execute(){var g=this;return new Promise(function(){var y=(0,l.Z)(function*(D,k){g.pendingPromise={resolve:D,reject:k};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(L){g.reject(L)}});return function(D,k){return y.apply(this,arguments)}}())}onAuthEvent(g){var y=this;return(0,l.Z)(function*(){const{urlResponse:D,sessionId:k,postBody:L,tenantId:le,error:ke,type:dt}=g;if(ke)return void y.reject(ke);const Ot={auth:y.auth,requestUri:D,sessionId:k,tenantId:le||void 0,postBody:L||void 0,user:y.user,bypassAuthState:y.bypassAuthState};try{y.resolve(yield y.getIdpTask(dt)(Ot))}catch(an){y.reject(an)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return th;case"linkViaPopup":case"linkViaRedirect":return nh;case"reauthViaPopup":case"reauthViaRedirect":return rr;default:ft(this.auth,"internal-error")}}resolve(g){De(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){De(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Me=new Qe(2e3,1e4);function ii(C,g,y){return ps.apply(this,arguments)}function ps(){return(ps=(0,l.Z)(function*(C,g,y){const D=Rt(C);Ae(C,g,zi);const k=Ma(D,y);return new mc(D,"signInViaPopup",g,k).executeNotNull()})).apply(this,arguments)}function te(C,g,y){return sr.apply(this,arguments)}function sr(){return(sr=(0,l.Z)(function*(C,g,y){const D=(0,H.m9)(C);Ae(D.auth,g,zi);const k=Ma(D.auth,y);return new mc(D.auth,"reauthViaPopup",g,k,D).executeNotNull()})).apply(this,arguments)}function rp(C,g,y){return rh.apply(this,arguments)}function rh(){return(rh=(0,l.Z)(function*(C,g,y){const D=(0,H.m9)(C);Ae(D.auth,g,zi);const k=Ma(D.auth,y);return new mc(D.auth,"linkViaPopup",g,k,D).executeNotNull()})).apply(this,arguments)}let mc=(()=>{class C extends ih{constructor(y,D,k,L,le){super(y,D,L,le),this.provider=k,this.authWindow=null,this.pollId=null,C.currentPopupAction&&C.currentPopupAction.cancel(),C.currentPopupAction=this}executeNotNull(){var y=this;return(0,l.Z)(function*(){const D=yield y.execute();return ce(D,y.auth,"internal-error"),D})()}onExecution(){var y=this;return(0,l.Z)(function*(){De(1===y.filter.length,"Popup operations only handle one event");const D=fa();y.authWindow=yield y.resolver._openPopup(y.auth,y.provider,y.filter[0],D),y.authWindow.associatedEvent=D,y.resolver._originValidation(y.auth).catch(k=>{y.reject(k)}),y.resolver._isIframeWebStorageSupported(y.auth,k=>{k||y.reject(He(y.auth,"web-storage-unsupported"))}),y.pollUserCancellation()})()}get eventId(){var y;return(null===(y=this.authWindow)||void 0===y?void 0:y.associatedEvent)||null}cancel(){this.reject(He(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,C.currentPopupAction=null}pollUserCancellation(){const y=()=>{var D,k;this.pollId=null!==(k=null===(D=this.authWindow)||void 0===D?void 0:D.window)&&void 0!==k&&k.closed?window.setTimeout(()=>{this.pollId=null,this.reject(He(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(y,Me.get())};y()}}return C.currentPopupAction=null,C})();const or=new Map;class Ir extends ih{constructor(g,y,D=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],y,void 0,D),this.eventId=null}execute(){var g=()=>super.execute,y=this;return(0,l.Z)(function*(){let D=or.get(y.auth._key());if(!D){try{const L=(yield function Ia(C,g){return xa.apply(this,arguments)}(y.resolver,y.auth))?yield g().call(y):null;D=()=>Promise.resolve(L)}catch(k){D=()=>Promise.reject(k)}or.set(y.auth._key(),D)}return y.bypassAuthState||or.set(y.auth._key(),()=>Promise.resolve(null)),D()})()}onAuthEvent(g){var y=()=>super.onAuthEvent,D=this;return(0,l.Z)(function*(){if("signInViaRedirect"===g.type)return y().call(D,g);if("unknown"!==g.type){if(g.eventId){const k=yield D.auth._redirectUserForId(g.eventId);if(k)return D.user=k,y().call(D,g);D.resolve(null)}}else D.resolve(null)})()}onExecution(){return(0,l.Z)(function*(){})()}cleanUp(){}}function xa(){return(xa=(0,l.Z)(function*(C,g){const y=Sa(g),D=Dl(C);if(!(yield D._isAvailable()))return!1;const k="true"===(yield D._get(y));return yield D._remove(y),k})).apply(this,arguments)}function Tu(C,g){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,l.Z)(function*(C,g){return Dl(C)._set(Sa(g),"true")})).apply(this,arguments)}function sh(){or.clear()}function Ns(C,g){or.set(C._key(),g)}function Dl(C){return ie(C._redirectPersistence)}function Sa(C){return Sn("pendingRedirect",C.config.apiKey,C.name)}function oh(C,g,y){return function vn(C,g,y){return Oo.apply(this,arguments)}(C,g,y)}function Oo(){return(Oo=(0,l.Z)(function*(C,g,y){const D=Rt(C);Ae(C,g,zi);const k=Ma(D,y);return yield Tu(k,D),k._openRedirect(D,g,"signInViaRedirect")})).apply(this,arguments)}function Au(C,g,y){return function I(C,g,y){return x.apply(this,arguments)}(C,g,y)}function x(){return(x=(0,l.Z)(function*(C,g,y){const D=(0,H.m9)(C);Ae(D.auth,g,zi);const k=Ma(D.auth,y);yield Tu(k,D.auth);const L=yield $t(D);return k._openRedirect(D.auth,g,"reauthViaRedirect",L)})).apply(this,arguments)}function R(C,g,y){return function U(C,g,y){return ne.apply(this,arguments)}(C,g,y)}function ne(){return(ne=(0,l.Z)(function*(C,g,y){const D=(0,H.m9)(C);Ae(D.auth,g,zi);const k=Ma(D.auth,y);yield cs(!1,D,g.providerId),yield Tu(k,D.auth);const L=yield $t(D);return k._openRedirect(D.auth,g,"linkViaRedirect",L)})).apply(this,arguments)}function ge(C,g){return Le.apply(this,arguments)}function Le(){return(Le=(0,l.Z)(function*(C,g){return yield Rt(C)._initializationPromise,it(C,g,!1)})).apply(this,arguments)}function it(C,g){return St.apply(this,arguments)}function St(){return(St=(0,l.Z)(function*(C,g,y=!1){const D=Rt(C),k=Ma(D,g),le=yield new Ir(D,k,y).execute();return le&&!y&&(delete le.user._redirectEventId,yield D._persistUserIfCurrent(le.user),yield D._setRedirectUser(null,g)),le})).apply(this,arguments)}function $t(C){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,l.Z)(function*(C){const g=fa(`${C.uid}:::`);return C._redirectEventId=g,yield C.auth._setRedirectUser(C),yield C.auth._persistUserIfCurrent(C),g})).apply(this,arguments)}class fi{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let y=!1;return this.consumers.forEach(D=>{this.isEventForConsumer(g,D)&&(y=!0,this.sendToConsumer(g,D),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function Ml(C){switch(C.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return El(C);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,y||(this.queuedRedirectEvent=g,y=!0)),y}sendToConsumer(g,y){var D;if(g.error&&!El(g)){const k=(null===(D=g.error.code)||void 0===D?void 0:D.split("auth/")[1])||"internal-error";y.onError(He(this.auth,k))}else y.onAuthEvent(g)}isEventForConsumer(g,y){const D=null===y.eventId||!!g.eventId&&g.eventId===y.eventId;return y.filter.includes(g.type)&&D}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ji(g))}saveEventToCache(g){this.cachedEventUids.add(Ji(g)),this.lastProcessedEventTime=Date.now()}}function Ji(C){return[C.type,C.eventId,C.sessionId,C.tenantId].filter(g=>g).join("-")}function El({type:C,error:g}){return"unknown"===C&&"auth/no-auth-event"===g?.code}function Vr(C){return eo.apply(this,arguments)}function eo(){return(eo=(0,l.Z)(function*(C,g={}){return Qt(C,"GET","/v1/projects",g)})).apply(this,arguments)}const Il=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xl=/^https?/;function Fs(){return(Fs=(0,l.Z)(function*(C){if(C.config.emulator)return;const{authorizedDomains:g}=yield Vr(C);for(const y of g)try{if(Sl(y))return}catch{}ft(C,"unauthorized-domain")})).apply(this,arguments)}function Sl(C){const g=Ge(),{protocol:y,hostname:D}=new URL(g);if(C.startsWith("chrome-extension://")){const le=new URL(C);return""===le.hostname&&""===D?"chrome-extension:"===y&&C.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===y&&le.hostname===D}if(!xl.test(y))return!1;if(Il.test(C))return D===C;const k=C.replace(/\./g,"\\.");return new RegExp("^(.+\\."+k+"|"+k+")$","i").test(D)}const Fv=new Qe(3e4,6e4);function ah(){const C=di().___jsl;if(C?.H)for(const g of Object.keys(C.H))if(C.H[g].r=C.H[g].r||[],C.H[g].L=C.H[g].L||[],C.H[g].r=[...C.H[g].L],C.CP)for(let y=0;y<C.CP.length;y++)C.CP[y]=null}let Tl=null;function lh(C){return Tl=Tl||function Og(C){return new Promise((g,y)=>{var D,k,L;function le(){ah(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{ah(),y(He(C,"network-request-failed"))},timeout:Fv.get()})}if(null!==(k=null===(D=di().gapi)||void 0===D?void 0:D.iframes)&&void 0!==k&&k.Iframe)g(gapi.iframes.getContext());else{if(null===(L=di().gapi)||void 0===L||!L.load){const ke=Ca("iframefcb");return di()[ke]=()=>{gapi.load?le():y(He(C,"network-request-failed"))},To(`https://apis.google.com/js/api.js?onload=${ke}`).catch(dt=>y(dt))}le()}}).catch(g=>{throw Tl=null,g})}(C),Tl}const Pg=new Qe(5e3,15e3),Fg={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},mD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function op(C){const g=C.config;ce(g.authDomain,C,"auth-domain-config-required");const y=g.emulator?Rn(g,"emulator/auth/iframe"):`https://${C.config.authDomain}/__/auth/iframe`,D={apiKey:g.apiKey,appName:C.name,v:P.SDK_VERSION},k=mD.get(C.config.apiHost);k&&(D.eid=k);const L=C._getFrameworks();return L.length&&(D.fw=L.join(",")),`${y}?${(0,H.xO)(D).slice(1)}`}function gc(){return gc=(0,l.Z)(function*(C){const g=yield lh(C),y=di().gapi;return ce(y,C,"internal-error"),g.open({where:document.body,url:op(C),messageHandlersFilter:y.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Fg,dontclear:!0},D=>new Promise(function(){var k=(0,l.Z)(function*(L,le){yield D.restyle({setHideOnLeave:!1});const ke=He(C,"network-request-failed"),dt=di().setTimeout(()=>{le(ke)},Pg.get());function Ot(){di().clearTimeout(dt),L(D)}D.ping(Ot).then(Ot,()=>{le(ke)})});return function(L,le){return k.apply(this,arguments)}}()))}),gc.apply(this,arguments)}const _c={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class uh{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function hh(C,g,y,D,k,L){ce(C.config.authDomain,C,"auth-domain-config-required"),ce(C.config.apiKey,C,"invalid-api-key");const le={apiKey:C.config.apiKey,appName:C.name,authType:y,redirectUrl:D,v:P.SDK_VERSION,eventId:k};if(g instanceof zi){g.setDefaultLanguage(C.languageCode),le.providerId=g.providerId||"",(0,H.xb)(g.getCustomParameters())||(le.customParameters=JSON.stringify(g.getCustomParameters()));for(const[dt,Ot]of Object.entries(L||{}))le[dt]=Ot}if(g instanceof ea){const dt=g.getScopes().filter(Ot=>""!==Ot);dt.length>0&&(le.scopes=dt.join(","))}C.tenantId&&(le.tid=C.tenantId);const ke=le;for(const dt of Object.keys(ke))void 0===ke[dt]&&delete ke[dt];return`${function kl({config:C}){return C.emulator?Rn(C,"emulator/auth/handler"):`https://${C.authDomain}/__/auth/handler`}(C)}?${(0,H.xO)(ke).slice(1)}`}const lp="webStorageSupport",Ug=class Bv{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Xs,this._completeRedirectFn=it,this._overrideRedirectResult=Ns}_openPopup(g,y,D,k){var L=this;return(0,l.Z)(function*(){var le;De(null===(le=L.eventManagers[g._key()])||void 0===le?void 0:le.manager,"_initialize() not called before _openPopup()");const ke=hh(g,y,D,Ge(),k);return function dh(C,g,y,D=500,k=600){const L=Math.max((window.screen.availHeight-k)/2,0).toString(),le=Math.max((window.screen.availWidth-D)/2,0).toString();let ke="";const dt=Object.assign(Object.assign({},_c),{width:D.toString(),height:k.toString(),top:L,left:le}),Ot=(0,H.z$)().toLowerCase();y&&(ke=xe(Ot)?"_blank":y),$(Ot)&&(g=g||"http://localhost",dt.scrollbars="yes");const an=Object.entries(dt).reduce((Po,[Aa,Ru])=>`${Po}${Aa}=${Ru},`,"");if(function ei(C=(0,H.z$)()){var g;return _t(C)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(Ot)&&"_self"!==ke)return function ap(C,g){const y=document.createElement("a");y.href=C,y.target=g;const D=document.createEvent("MouseEvent");D.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),y.dispatchEvent(D)}(g||"",ke),new uh(null);const Zn=window.open(g||"",ke,an);ce(Zn,C,"popup-blocked");try{Zn.focus()}catch{}return new uh(Zn)}(g,ke,fa())})()}_openRedirect(g,y,D,k){var L=this;return(0,l.Z)(function*(){return yield L._originValidation(g),function Zd(C){di().location.href=C}(hh(g,y,D,Ge(),k)),new Promise(()=>{})})()}_initialize(g){const y=g._key();if(this.eventManagers[y]){const{manager:k,promise:L}=this.eventManagers[y];return k?Promise.resolve(k):(De(L,"If manager is not set, promise should be"),L)}const D=this.initAndGetManager(g);return this.eventManagers[y]={promise:D},D.catch(()=>{delete this.eventManagers[y]}),D}initAndGetManager(g){var y=this;return(0,l.Z)(function*(){const D=yield function ch(C){return gc.apply(this,arguments)}(g),k=new fi(g);return D.register("authEvent",L=>(ce(L?.authEvent,g,"invalid-auth-event"),{status:k.onEvent(L.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),y.eventManagers[g._key()]={manager:k},y.iframes[g._key()]=D,k})()}_isIframeWebStorageSupported(g,y){this.iframes[g._key()].send(lp,{type:lp},k=>{var L;const le=null===(L=k?.[0])||void 0===L?void 0:L[lp];void 0!==le&&y(!!le),ft(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const y=g._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function ms(C){return Fs.apply(this,arguments)}(g)),this.originValidationPromises[y]}get _shouldInitProactively(){return Fn()||W()||_t()}};class yc extends class Vv{constructor(g){this.factorId=g}_process(g,y,D){switch(y.type){case"enroll":return this._finalizeEnroll(g,y.credential,D);case"signin":return this._finalizeSignIn(g,y.credential);default:return me("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new yc(g)}_finalizeEnroll(g,y,D){return function lc(C,g){return Qt(C,"POST","/v2/accounts/mfaEnrollment:finalize",sn(C,g))}(g,{idToken:y,displayName:D,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,y){return function va(C,g){return Qt(C,"POST","/v2/accounts/mfaSignIn:finalize",sn(C,g))}(g,{mfaPendingCredential:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let to=(()=>{class C{constructor(){}static assertion(y){return yc._fromCredential(y)}}return C.FACTOR_ID="phone",C})();var Ta="@firebase/auth";class Uv{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var y=this;return(0,l.Z)(function*(){return y.assertAuthConfigured(),yield y.auth._initializationPromise,y.auth.currentUser?{accessToken:yield y.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const y=this.auth.onIdTokenChanged(D=>{var k;g((null===(k=D)||void 0===k?void 0:k.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,y),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const y=this.internalListeners.get(g);!y||(this.internalListeners.delete(g),y(),this.updateProactiveRefresh())}assertAuthConfigured(){ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Hg(C=(0,P.getApp)()){const g=(0,P._getProvider)(C,"auth");return g.isInitialized()?g.getImmediate():function ye(C,g){const y=(0,P._getProvider)(C,"auth");if(y.isInitialized()){const k=y.getImmediate(),L=y.getOptions();if((0,H.vZ)(L,g??{}))return k;ft(k,"already-initialized")}return y.initialize({options:g})}(C,{popupRedirectResolver:Ug,persistence:[ya,Si,Xs]})}!function jv(C){(0,P._registerComponent)(new ve.wA("auth",(g,{options:y})=>{const D=g.getProvider("app").getImmediate(),k=g.getProvider("heartbeat"),{apiKey:L,authDomain:le}=D.options;return((ke,dt)=>{ce(L&&!L.includes(":"),"invalid-api-key",{appName:ke.name}),ce(!le?.includes(":"),"argument-error",{appName:ke.name});const Ot={apiKey:L,authDomain:le,clientPlatform:C,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Gn(C)},an=new Zo(ke,dt,Ot);return function he(C,g){const y=g?.persistence||[],D=(Array.isArray(y)?y:[y]).map(ie);g?.errorMap&&C._updateErrorMap(g.errorMap),C._initializeWithPersistence(D,g?.popupRedirectResolver)}(an,y),an})(D,k)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,y,D)=>{g.getProvider("auth-internal").initialize()})),(0,P._registerComponent)(new ve.wA("auth-internal",g=>{const y=Rt(g.getProvider("auth").getImmediate());return new Uv(y)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,P.registerVersion)(Ta,"0.20.7",function Hv(C){switch(C){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(C)),(0,P.registerVersion)(Ta,"0.20.7","esm2017")}("Browser")},2090:(Dt,Oe,F)=>{"use strict";F.d(Oe,{$s:()=>qn,BH:()=>Ke,DV:()=>Qt,G6:()=>ce,GJ:()=>mn,L:()=>pe,LL:()=>Ge,Pz:()=>Mt,Sg:()=>Be,UG:()=>Ie,UI:()=>as,US:()=>ve,Yr:()=>et,ZB:()=>Y,ZR:()=>he,b$:()=>ft,cI:()=>cn,dS:()=>Ne,eu:()=>De,g5:()=>P,gK:()=>de,gQ:()=>vr,h$:()=>se,hl:()=>me,hu:()=>H,jU:()=>we,m9:()=>un,ne:()=>kr,p$:()=>q,pd:()=>Xn,r3:()=>sn,ru:()=>ht,tV:()=>Ee,uI:()=>gt,ug:()=>ut,vZ:()=>Qn,w1:()=>Ve,w9:()=>yn,xO:()=>yr,xb:()=>Un,z$:()=>Te,zI:()=>J,zd:()=>Qi});const H=function(X,G){if(!X)throw P(G)},P=function(X){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+X)},ae=function(X){const G=[];let j=0;for(let Z=0;Z<X.length;Z++){let Q=X.charCodeAt(Z);Q<128?G[j++]=Q:Q<2048?(G[j++]=Q>>6|192,G[j++]=63&Q|128):55296==(64512&Q)&&Z+1<X.length&&56320==(64512&X.charCodeAt(Z+1))?(Q=65536+((1023&Q)<<10)+(1023&X.charCodeAt(++Z)),G[j++]=Q>>18|240,G[j++]=Q>>12&63|128,G[j++]=Q>>6&63|128,G[j++]=63&Q|128):(G[j++]=Q>>12|224,G[j++]=Q>>6&63|128,G[j++]=63&Q|128)}return G},ve={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(X,G){if(!Array.isArray(X))throw Error("encodeByteArray takes an array as a parameter");this.init_();const j=G?this.byteToCharMapWebSafe_:this.byteToCharMap_,Z=[];for(let Q=0;Q<X.length;Q+=3){const Pe=X[Q],Xe=Q+1<X.length,Ft=Xe?X[Q+1]:0,An=Q+2<X.length,Sn=An?X[Q+2]:0;let $=(15&Ft)<<2|Sn>>6,W=63&Sn;An||(W=64,Xe||($=64)),Z.push(j[Pe>>2],j[(3&Pe)<<4|Ft>>4],j[$],j[W])}return Z.join("")},encodeString(X,G){return this.HAS_NATIVE_SUPPORT&&!G?btoa(X):this.encodeByteArray(ae(X),G)},decodeString(X,G){return this.HAS_NATIVE_SUPPORT&&!G?atob(X):function(X){const G=[];let j=0,Z=0;for(;j<X.length;){const Q=X[j++];if(Q<128)G[Z++]=String.fromCharCode(Q);else if(Q>191&&Q<224){const Pe=X[j++];G[Z++]=String.fromCharCode((31&Q)<<6|63&Pe)}else if(Q>239&&Q<365){const An=((7&Q)<<18|(63&X[j++])<<12|(63&X[j++])<<6|63&X[j++])-65536;G[Z++]=String.fromCharCode(55296+(An>>10)),G[Z++]=String.fromCharCode(56320+(1023&An))}else{const Pe=X[j++],Xe=X[j++];G[Z++]=String.fromCharCode((15&Q)<<12|(63&Pe)<<6|63&Xe)}}return G.join("")}(this.decodeStringToByteArray(X,G))},decodeStringToByteArray(X,G){this.init_();const j=G?this.charToByteMapWebSafe_:this.charToByteMap_,Z=[];for(let Q=0;Q<X.length;){const Pe=j[X.charAt(Q++)],Ft=Q<X.length?j[X.charAt(Q)]:0;++Q;const Sn=Q<X.length?j[X.charAt(Q)]:64;++Q;const oe=Q<X.length?j[X.charAt(Q)]:64;if(++Q,null==Pe||null==Ft||null==Sn||null==oe)throw Error();Z.push(Pe<<2|Ft>>4),64!==Sn&&(Z.push(Ft<<4&240|Sn>>2),64!==oe&&Z.push(Sn<<6&192|oe))}return Z},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let X=0;X<this.ENCODED_VALS.length;X++)this.byteToCharMap_[X]=this.ENCODED_VALS.charAt(X),this.charToByteMap_[this.byteToCharMap_[X]]=X,this.byteToCharMapWebSafe_[X]=this.ENCODED_VALS_WEBSAFE.charAt(X),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[X]]=X,X>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(X)]=X,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(X)]=X)}}},se=function(X){const G=ae(X);return ve.encodeByteArray(G,!0)},pe=function(X){return se(X).replace(/\./g,"")},Ee=function(X){try{return ve.decodeString(X,!0)}catch(G){console.error("base64Decode failed: ",G)}return null};function q(X){return Y(void 0,X)}function Y(X,G){if(!(G instanceof Object))return G;switch(G.constructor){case Date:return new Date(G.getTime());case Object:void 0===X&&(X={});break;case Array:X=[];break;default:return G}for(const j in G)!G.hasOwnProperty(j)||!ee(j)||(X[j]=Y(X[j],G[j]));return X}function ee(X){return"__proto__"!==X}class Ke{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((G,j)=>{this.resolve=G,this.reject=j})}wrapCallback(G){return(j,Z)=>{j?this.reject(j):this.resolve(Z),"function"==typeof G&&(this.promise.catch(()=>{}),1===G.length?G(j):G(j,Z))}}}function Be(X,G){if(X.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Z=G||"demo-project",Q=X.iat||0,Pe=X.sub||X.user_id;if(!Pe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Xe=Object.assign({iss:`https://securetoken.google.com/${Z}`,aud:Z,iat:Q,exp:Q+3600,auth_time:Q,sub:Pe,user_id:Pe,firebase:{sign_in_provider:"custom",identities:{}}},X);return[pe(JSON.stringify({alg:"none",type:"JWT"})),pe(JSON.stringify(Xe)),""].join(".")}function Te(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function gt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Te())}function Ie(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function we(){return"object"==typeof self&&self.self===self}function ht(){const X="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof X&&void 0!==X.id}function ft(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ve(){const X=Te();return X.indexOf("MSIE ")>=0||X.indexOf("Trident/")>=0}function et(){return!1}function ce(){return!Ie()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function me(){return"object"==typeof indexedDB}function De(){return new Promise((X,G)=>{try{let j=!0;const Z="validate-browser-context-for-indexeddb-analytics-module",Q=self.indexedDB.open(Z);Q.onsuccess=()=>{Q.result.close(),j||self.indexedDB.deleteDatabase(Z),X(!0)},Q.onupgradeneeded=()=>{j=!1},Q.onerror=()=>{var Pe;G((null===(Pe=Q.error)||void 0===Pe?void 0:Pe.message)||"")}}catch(j){G(j)}})}function J(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class he extends Error{constructor(G,j,Z){super(j),this.code=G,this.customData=Z,this.name="FirebaseError",Object.setPrototypeOf(this,he.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ge.prototype.create)}}class Ge{constructor(G,j,Z){this.service=G,this.serviceName=j,this.errors=Z}create(G,...j){const Z=j[0]||{},Q=`${this.service}/${G}`,Pe=this.errors[G],Xe=Pe?function qe(X,G){return X.replace(Et,(j,Z)=>{const Q=G[Z];return null!=Q?String(Q):`<${Z}?>`})}(Pe,Z):"Error";return new he(Q,`${this.serviceName}: ${Xe} (${Q}).`,Z)}}const Et=/\{\$([^}]+)}/g;function cn(X){return JSON.parse(X)}function Mt(X){return JSON.stringify(X)}const Qe=function(X){let G={},j={},Z={},Q="";try{const Pe=X.split(".");G=cn(Ee(Pe[0])||""),j=cn(Ee(Pe[1])||""),Q=Pe[2],Z=j.d||{},delete j.d}catch{}return{header:G,claims:j,data:Z,signature:Q}},yn=function(X){const j=Qe(X).claims;return!!j&&"object"==typeof j&&j.hasOwnProperty("iat")},mn=function(X){const G=Qe(X).claims;return"object"==typeof G&&!0===G.admin};function sn(X,G){return Object.prototype.hasOwnProperty.call(X,G)}function Qt(X,G){if(Object.prototype.hasOwnProperty.call(X,G))return X[G]}function Un(X){for(const G in X)if(Object.prototype.hasOwnProperty.call(X,G))return!1;return!0}function as(X,G,j){const Z={};for(const Q in X)Object.prototype.hasOwnProperty.call(X,Q)&&(Z[Q]=G.call(j,X[Q],Q,X));return Z}function Qn(X,G){if(X===G)return!0;const j=Object.keys(X),Z=Object.keys(G);for(const Q of j){if(!Z.includes(Q))return!1;const Pe=X[Q],Xe=G[Q];if(Hn(Pe)&&Hn(Xe)){if(!Qn(Pe,Xe))return!1}else if(Pe!==Xe)return!1}for(const Q of Z)if(!j.includes(Q))return!1;return!0}function Hn(X){return null!==X&&"object"==typeof X}function yr(X){const G=[];for(const[j,Z]of Object.entries(X))Array.isArray(Z)?Z.forEach(Q=>{G.push(encodeURIComponent(j)+"="+encodeURIComponent(Q))}):G.push(encodeURIComponent(j)+"="+encodeURIComponent(Z));return G.length?"&"+G.join("&"):""}function Qi(X){const G={};return X.replace(/^\?/,"").split("&").forEach(Z=>{if(Z){const[Q,Pe]=Z.split("=");G[decodeURIComponent(Q)]=decodeURIComponent(Pe)}}),G}function Xn(X){const G=X.indexOf("?");if(!G)return"";const j=X.indexOf("#",G);return X.substring(G,j>0?j:void 0)}class vr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let G=1;G<this.blockSize;++G)this.pad_[G]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(G,j){j||(j=0);const Z=this.W_;if("string"==typeof G)for(let oe=0;oe<16;oe++)Z[oe]=G.charCodeAt(j)<<24|G.charCodeAt(j+1)<<16|G.charCodeAt(j+2)<<8|G.charCodeAt(j+3),j+=4;else for(let oe=0;oe<16;oe++)Z[oe]=G[j]<<24|G[j+1]<<16|G[j+2]<<8|G[j+3],j+=4;for(let oe=16;oe<80;oe++){const $=Z[oe-3]^Z[oe-8]^Z[oe-14]^Z[oe-16];Z[oe]=4294967295&($<<1|$>>>31)}let Sn,Di,Q=this.chain_[0],Pe=this.chain_[1],Xe=this.chain_[2],Ft=this.chain_[3],An=this.chain_[4];for(let oe=0;oe<80;oe++){oe<40?oe<20?(Sn=Ft^Pe&(Xe^Ft),Di=1518500249):(Sn=Pe^Xe^Ft,Di=1859775393):oe<60?(Sn=Pe&Xe|Ft&(Pe|Xe),Di=2400959708):(Sn=Pe^Xe^Ft,Di=3395469782);const $=(Q<<5|Q>>>27)+Sn+An+Di+Z[oe]&4294967295;An=Ft,Ft=Xe,Xe=4294967295&(Pe<<30|Pe>>>2),Pe=Q,Q=$}this.chain_[0]=this.chain_[0]+Q&4294967295,this.chain_[1]=this.chain_[1]+Pe&4294967295,this.chain_[2]=this.chain_[2]+Xe&4294967295,this.chain_[3]=this.chain_[3]+Ft&4294967295,this.chain_[4]=this.chain_[4]+An&4294967295}update(G,j){if(null==G)return;void 0===j&&(j=G.length);const Z=j-this.blockSize;let Q=0;const Pe=this.buf_;let Xe=this.inbuf_;for(;Q<j;){if(0===Xe)for(;Q<=Z;)this.compress_(G,Q),Q+=this.blockSize;if("string"==typeof G){for(;Q<j;)if(Pe[Xe]=G.charCodeAt(Q),++Xe,++Q,Xe===this.blockSize){this.compress_(Pe),Xe=0;break}}else for(;Q<j;)if(Pe[Xe]=G[Q],++Xe,++Q,Xe===this.blockSize){this.compress_(Pe),Xe=0;break}}this.inbuf_=Xe,this.total_+=j}digest(){const G=[];let j=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let Q=this.blockSize-1;Q>=56;Q--)this.buf_[Q]=255&j,j/=256;this.compress_(this.buf_);let Z=0;for(let Q=0;Q<5;Q++)for(let Pe=24;Pe>=0;Pe-=8)G[Z]=this.chain_[Q]>>Pe&255,++Z;return G}}function kr(X,G){const j=new ct(X,G);return j.subscribe.bind(j)}class ct{constructor(G,j){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=j,this.task.then(()=>{G(this)}).catch(Z=>{this.error(Z)})}next(G){this.forEachObserver(j=>{j.next(G)})}error(G){this.forEachObserver(j=>{j.error(G)}),this.close(G)}complete(){this.forEachObserver(G=>{G.complete()}),this.close()}subscribe(G,j,Z){let Q;if(void 0===G&&void 0===j&&void 0===Z)throw new Error("Missing Observer.");Q=function Jn(X,G){if("object"!=typeof X||null===X)return!1;for(const j of G)if(j in X&&"function"==typeof X[j])return!0;return!1}(G,["next","error","complete"])?G:{next:G,error:j,complete:Z},void 0===Q.next&&(Q.next=Tn),void 0===Q.error&&(Q.error=Tn),void 0===Q.complete&&(Q.complete=Tn);const Pe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Q.error(this.finalError):Q.complete()}catch{}}),this.observers.push(Q),Pe}unsubscribeOne(G){void 0===this.observers||void 0===this.observers[G]||(delete this.observers[G],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(G){if(!this.finalized)for(let j=0;j<this.observers.length;j++)this.sendOne(j,G)}sendOne(G,j){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[G])try{j(this.observers[G])}catch(Z){typeof console<"u"&&console.error&&console.error(Z)}})}close(G){this.finalized||(this.finalized=!0,void 0!==G&&(this.finalError=G),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Tn(){}function de(X,G){return`${X} failed: ${G} argument `}const Ne=function(X){const G=[];let j=0;for(let Z=0;Z<X.length;Z++){let Q=X.charCodeAt(Z);if(Q>=55296&&Q<=56319){const Pe=Q-55296;Z++,H(Z<X.length,"Surrogate pair missing trail surrogate."),Q=65536+(Pe<<10)+(X.charCodeAt(Z)-56320)}Q<128?G[j++]=Q:Q<2048?(G[j++]=Q>>6|192,G[j++]=63&Q|128):Q<65536?(G[j++]=Q>>12|224,G[j++]=Q>>6&63|128,G[j++]=63&Q|128):(G[j++]=Q>>18|240,G[j++]=Q>>12&63|128,G[j++]=Q>>6&63|128,G[j++]=63&Q|128)}return G},ut=function(X){let G=0;for(let j=0;j<X.length;j++){const Z=X.charCodeAt(j);Z<128?G++:Z<2048?G+=2:Z>=55296&&Z<=56319?(G+=4,j++):G+=3}return G};function qn(X,G=1e3,j=2){const Z=G*Math.pow(j,X),Q=Math.round(.5*Z*(Math.random()-.5)*2);return Math.min(144e5,Z+Q)}function un(X){return X&&X._delegate?X._delegate:X}},3563:(Dt,Oe,F)=>{"use strict";var l=F(4650);let H=null;function P(){return H}const se=new l.OlP("DocumentToken");let pe=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return function Ee(){return(0,l.LFG)(Y)}()},providedIn:"platform"}),n})();const q=new l.OlP("Location Initialized");let Y=(()=>{class n extends pe{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(e){const i=P().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){const i=P().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,i,r){ee()?this._history.pushState(e,i,r):this.location.hash=r}replaceState(e,i,r){ee()?this._history.replaceState(e,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(se))},n.\u0275prov=l.Yz7({token:n,factory:function(){return function Ke(){return new Y((0,l.LFG)(se))}()},providedIn:"platform"}),n})();function ee(){return!!window.history.pushState}function Be(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function Te(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function gt(n){return n&&"?"!==n[0]?"?"+n:n}let Ie=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return(0,l.f3M)(ht)},providedIn:"root"}),n})();const we=new l.OlP("appBaseHref");let ht=(()=>{class n extends Ie{constructor(e,i){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??(0,l.f3M)(se).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Be(this._baseHref,e)}path(e=!1){const i=this._platformLocation.pathname+gt(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,s){const c=this.prepareExternalUrl(r+gt(s));this._platformLocation.pushState(e,i,c)}replaceState(e,i,r,s){const c=this.prepareExternalUrl(r+gt(s));this._platformLocation.replaceState(e,i,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(pe),l.LFG(we,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ft=(()=>{class n extends Ie{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(e){const i=Be(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,s){let c=this.prepareExternalUrl(r+gt(s));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(e,i,c)}replaceState(e,i,r,s){let c=this.prepareExternalUrl(r+gt(s));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(pe),l.LFG(we,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),He=(()=>{class n{constructor(e){this._subject=new l.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const i=this._locationStrategy.getBaseHref();this._baseHref=Te(et(i)),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+gt(i))}normalize(e){return n.stripTrailingSlash(function Ae(n,t){return n&&t.startsWith(n)?t.substring(n.length):t}(this._baseHref,et(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._locationStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+gt(i)),r)}replaceState(e,i="",r=null){this._locationStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+gt(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i,complete:r})}}return n.normalizeQueryParams=gt,n.joinWithSlash=Be,n.stripTrailingSlash=Te,n.\u0275fac=function(e){return new(e||n)(l.LFG(Ie))},n.\u0275prov=l.Yz7({token:n,factory:function(){return function Ve(){return new He((0,l.LFG)(Ie))}()},providedIn:"root"}),n})();function et(n){return n.replace(/\/index.html$/,"")}let Mn=(()=>{class n{constructor(e,i,r,s){this._iterableDiffers=e,this._keyValueDiffers=i,this._ngEl=r,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&((0,l.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),e.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),e.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,l.AaK)(i.item)}`);this._toggleClass(i.item,!0)}),e.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(i=>this._toggleClass(i,!0)):Object.keys(e).forEach(i=>this._toggleClass(i,!!e[i])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(i=>this._toggleClass(i,!1)):Object.keys(e).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(e,i){(e=e.trim())&&e.split(/\s+/g).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.ZZ4),l.Y36(l.aQg),l.Y36(l.SBq),l.Y36(l.Qsj))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class bo{constructor(t,e,i,r){this.$implicit=t,this.ngForOf=e,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ls=(()=>{class n{constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const i=this._viewContainer;e.forEachOperation((r,s,c)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new bo(r.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)i.remove(null===s?void 0:s);else if(null!==s){const d=i.get(s);i.move(d,c),Co(d,r)}});for(let r=0,s=i.length;r<s;r++){const d=i.get(r).context;d.index=r,d.count=s,d.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{Co(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,i){return!0}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.s_b),l.Y36(l.Rgc),l.Y36(l.ZZ4))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Co(n,t){n.context.$implicit=t.item}let Yn=(()=>{class n{constructor(e,i){this._viewContainer=e,this._context=new Hf,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){Ei("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){Ei("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.s_b),l.Y36(l.Rgc))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Hf{constructor(){this.$implicit=null,this.ngIf=null}}function Ei(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,l.AaK)(t)}'.`)}class Or{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let wo=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}_matchCase(e){const i=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(let i=0;i<this._defaultViews.length;i++)this._defaultViews[i].enforceState(e)}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=l.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),n})(),tc=(()=>{class n{constructor(e,i,r){this.ngSwitch=r,r._addCase(),this._view=new Or(e,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.s_b),l.Y36(l.Rgc),l.Y36(wo,9))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),n})();class Eg{createSubscription(t,e){return t.subscribe({next:e,error:i=>{throw i}})}dispose(t){t.unsubscribe()}}class Is{createSubscription(t,e){return t.then(e,i=>{throw i})}dispose(t){}}const Mg=new Is,Td=new Eg;let nc=(()=>{class n{constructor(e){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=e}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,i=>this._updateLatestValue(e,i))}_selectStrategy(e){if((0,l.QGY)(e))return Mg;if((0,l.F4k)(e))return Td;throw function Pr(n,t){return new l.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,i){e===this._obj&&(this._latestValue=i,this._ref.markForCheck())}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.sBO,16))},n.\u0275pipe=l.Yjl({name:"async",type:n,pure:!1,standalone:!0}),n})(),Mi=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();const Nr="browser";function na(n){return"server"===n}let Fd=(()=>{class n{}return n.\u0275prov=(0,l.Yz7)({token:n,providedIn:"root",factory:()=>new jf((0,l.LFG)(se),window)}),n})();class jf{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function $i(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const c=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(c)return c}r=i.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),i=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=Zr(this.window.history)||Zr(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Zr(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ks extends class Hd extends class ve{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function fe(n){H||(H=n)}(new Ks)}onAndCancel(t,e,i){return t.addEventListener(e,i,!1),()=>{t.removeEventListener(e,i,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function jd(){return Qs=Qs||document.querySelector("base"),Qs?Qs.getAttribute("href"):null}();return null==e?null:function Ts(n){ti=ti||document.createElement("a"),ti.setAttribute("href",n);const t=ti.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){Qs=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function lu(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const i=e.indexOf("="),[r,s]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===t)return decodeURIComponent(s)}return null}(document.cookie,t)}}let ti,Qs=null;const ni=new l.OlP("TRANSITION_ID"),vu=[{provide:l.ip1,useFactory:function yu(n,t,e){return()=>{e.get(l.CZH).donePromise.then(()=>{const i=P(),r=t.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[ni,se,l.zs3],multi:!0}];let bu=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const Cu=new l.OlP("EventManagerPlugins");let $d=(()=>{class n{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>r.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}addGlobalEventListener(e,i,r){return this._findPluginFor(i).addGlobalEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){const i=this._eventNameToPlugin.get(e);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const c=r[s];if(c.supports(e))return this._eventNameToPlugin.set(e,c),c}throw new Error(`No event manager plugin found for event ${e}`)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Cu),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class wu{constructor(t){this._doc=t}addGlobalEventListener(t,e,i){const r=P().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,i)}}let ua=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(e){const i=new Set;e.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),da=(()=>{class n extends ua{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,i,r){e.forEach(s=>{const c=this._doc.createElement("style");c.textContent=s,r.push(i.appendChild(c))})}addHost(e){const i=[];this._addStylesToHost(this._stylesSet,e,i),this._hostNodes.set(e,i)}removeHost(e){const i=this._hostNodes.get(e);i&&i.forEach(Gd),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(e,r,i)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(Gd))}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(se))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function Gd(n){P().remove(n)}const ha={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Wd=/%COMP%/g;function cc(n,t,e){for(let i=0;i<t.length;i++){let r=t[i];Array.isArray(r)?cc(n,r,e):(r=r.replace(Wd,n),e.push(r))}return e}function uc(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&(t.preventDefault(),t.returnValue=!1)}}let gl=(()=>{class n{constructor(e,i,r){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new As(e)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;switch(i.encapsulation){case l.ifc.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new Yd(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(e),r}case 1:case l.ifc.ShadowDom:return new Zf(this.eventManager,this.sharedStylesHost,e,i);default:if(!this.rendererByCompId.has(i.id)){const r=cc(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(e){return new(e||n)(l.LFG($d),l.LFG(da),l.LFG(l.AFp))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class As{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(ha[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){(yl(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(yl(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let i="string"==typeof t?document.querySelector(t):t;if(!i)throw new Error(`The selector "${t}" did not match any elements`);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;const s=ha[r];s?t.setAttributeNS(s,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){const r=ha[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(l.JOm.DashCase|l.JOm.Important)?t.style.setProperty(e,i,r&l.JOm.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&l.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t[e]=i}setValue(t,e){t.nodeValue=e}listen(t,e,i){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,uc(i)):this.eventManager.addEventListener(t,e,uc(i))}}function yl(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Yd extends As{constructor(t,e,i,r){super(t),this.component=i;const s=cc(r+"-"+i.id,i.styles,[]);e.addStyles(s),this.contentAttr=function ui(n){return"_ngcontent-%COMP%".replace(Wd,n)}(r+"-"+i.id),this.hostAttr=function lc(n){return"_nghost-%COMP%".replace(Wd,n)}(r+"-"+i.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}}class Zf extends As{constructor(t,e,i,r){super(t),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=cc(r.id,r.styles,[]);for(let c=0;c<s.length;c++){const d=document.createElement("style");d.textContent=s[c],this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Si=(()=>{class n extends wu{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(se))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const Kf=["alt","control","meta","shift"],Xs={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Mu={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let vl=(()=>{class n extends wu{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,i,r){const s=n.parseEventName(i),c=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(e,s.domEventName,c))}static parseEventName(e){const i=e.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let c="",d=i.indexOf("code");if(d>-1&&(i.splice(d,1),c="code."),Kf.forEach(_=>{const b=i.indexOf(_);b>-1&&(i.splice(b,1),c+=_+".")}),c+=s,0!=i.length||0===s.length)return null;const p={};return p.domEventName=r,p.fullKey=c,p}static matchEventFullKeyCode(e,i){let r=Xs[e.key]||e.key,s="";return i.indexOf("code.")>-1&&(r=e.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),Kf.forEach(c=>{c!==r&&(0,Mu[c])(e)&&(s+=c+".")}),s+=r,s===i)}static eventCallback(e,i,r){return s=>{n.matchEventFullKeyCode(s,e)&&r.runGuarded(()=>i(s))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(se))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const bl=(0,l.eFA)(l._c5,"browser",[{provide:l.Lbi,useValue:Nr},{provide:l.g9A,useValue:function Kd(){Ks.makeCurrent()},multi:!0},{provide:se,useFactory:function Iu(){return(0,l.RDi)(document),document},deps:[]}]),xo=new l.OlP(""),Cl=[{provide:l.rWj,useClass:class zd{addToWindow(t){l.dqk.getAngularTestability=(i,r=!0)=>{const s=t.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},l.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),l.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),l.dqk.frameworkStabilizers||(l.dqk.frameworkStabilizers=[]),l.dqk.frameworkStabilizers.push(i=>{const r=l.dqk.getAllAngularTestabilities();let s=r.length,c=!1;const d=function(p){c=c||p,s--,0==s&&i(c)};r.forEach(function(p){p.whenStable(d)})})}findTestabilityInTree(t,e,i){return null==e?null:t.getTestability(e)??(i?P().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:l.lri,useClass:l.dDg,deps:[l.R0b,l.eoX,l.rWj]},{provide:l.dDg,useClass:l.dDg,deps:[l.R0b,l.eoX,l.rWj]}],pa=[{provide:l.zSh,useValue:"root"},{provide:l.qLn,useFactory:function ks(){return new l.qLn},deps:[]},{provide:Cu,useClass:Si,multi:!0,deps:[se,l.R0b,l.Lbi]},{provide:Cu,useClass:vl,multi:!0,deps:[se]},{provide:gl,useClass:gl,deps:[$d,da,l.AFp]},{provide:l.FYo,useExisting:gl},{provide:ua,useExisting:da},{provide:da,useClass:da,deps:[se]},{provide:$d,useClass:$d,deps:[Cu,l.R0b]},{provide:class ia{},useClass:bu,deps:[]},[]];let So=(()=>{class n{constructor(e){}static withServerTransition(e){return{ngModule:n,providers:[{provide:l.AFp,useValue:e.appId},{provide:ni,useExisting:l.AFp},vu]}}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(xo,12))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[...pa,...Cl],imports:[Mi,l.hGG]}),n})(),ds=(()=>{class n{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(se))},n.\u0275prov=l.Yz7({token:n,factory:function(e){let i=null;return i=e?new e:function wl(){return new ds((0,l.LFG)(se))}(),i},providedIn:"root"}),n})();typeof window<"u"&&window;let Ao=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:function(e){let i=null;return i=e?new(e||n):l.LFG(Rg),i},providedIn:"root"}),n})(),Rg=(()=>{class n extends Ao{constructor(e){super(),this._doc=e}sanitize(e,i){if(null==i)return null;switch(e){case l.q3G.NONE:return i;case l.q3G.HTML:return(0,l.qzn)(i,"HTML")?(0,l.z3N)(i):(0,l.EiD)(this._doc,String(i)).toString();case l.q3G.STYLE:return(0,l.qzn)(i,"Style")?(0,l.z3N)(i):i;case l.q3G.SCRIPT:if((0,l.qzn)(i,"Script"))return(0,l.z3N)(i);throw new Error("unsafe value used in a script context");case l.q3G.URL:return(0,l.qzn)(i,"URL")?(0,l.z3N)(i):(0,l.mCW)(String(i));case l.q3G.RESOURCE_URL:if((0,l.qzn)(i,"ResourceURL"))return(0,l.z3N)(i);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(e){return(0,l.JVY)(e)}bypassSecurityTrustStyle(e){return(0,l.L6k)(e)}bypassSecurityTrustScript(e){return(0,l.eBb)(e)}bypassSecurityTrustUrl(e){return(0,l.LAX)(e)}bypassSecurityTrustResourceUrl(e){return(0,l.pB0)(e)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(se))},n.\u0275prov=l.Yz7({token:n,factory:function(e){let i=null;return i=e?new e:function Nv(n){return new Rg(n.get(se))}(l.LFG(l.zs3)),i},providedIn:"root"}),n})();var Zt=F(5813),Mr=F(5867);class fs{constructor(t){return t}}class Da{constructor(){return(0,Mr.C6)()}}const Ea=new l.OlP("angularfire2._apps"),ko={provide:fs,useFactory:function Rs(n){return n&&1===n.length?n[0]:new fs((0,Mr.Mq)())},deps:[[new l.FiY,Ea]]},Ro={provide:Da,deps:[[new l.FiY,Ea]]};function Jd(n){return(t,e)=>{const i=t.runOutsideAngular(()=>n(e));return new fs(i)}}let eh=(()=>{class n{constructor(e){(0,Mr.KN)("angularfire",Zt.q4.full,"core"),(0,Mr.KN)("angularfire",Zt.q4.full,"app"),(0,Mr.KN)("angular",l.q4F.full,e.toString())}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(l.Lbi))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[ko,Ro]}),n})();function np(n,...t){return{ngModule:eh,providers:[{provide:Ea,useFactory:Jd(n),multi:!0,deps:[l.R0b,l.zs3,Zt.HU,...t]}]}}const rr=(0,Zt.u3)(Mr.ZF,!0);var Me=F(5861),ii=F(9681),ps=F(4859),te=F(2090),sr=F(1877);const rp=new Map,rh={activated:!1,tokenObservers:[]},mc={initialized:!1,enabled:!1};function hi(n){return rp.get(n)||rh}function or(n,t){rp.set(n,t)}function Ir(){return mc}class Dl{constructor(t,e,i,r,s){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){var e=this;return(0,Me.Z)(function*(){e.stop();try{e.pending=new te.BH,yield function Sa(n){return new Promise(t=>{setTimeout(t,n)})}(e.getNextRun(t)),e.pending.resolve(),yield e.pending.promise,e.pending=new te.BH,yield e.operation(),e.pending.resolve(),yield e.pending.promise,e.process(!0).catch(()=>{})}catch(i){e.retryPolicy(i)?e.process(!1).catch(()=>{}):e.stop()}})()}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const vn=new te.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Au(n){if(!hi(n).activated)throw vn.create("use-before-activation",{appName:n.name})}function R(n,t){return U.apply(this,arguments)}function U(){return(U=(0,Me.Z)(function*({url:n,body:t},e){var i,r;const s={"Content-Type":"application/json"},c=e.getImmediate({optional:!0});if(c){const N=yield c.getHeartbeatsHeader();N&&(s["X-Firebase-Client"]=N)}const d={method:"POST",body:JSON.stringify(t),headers:s};let p,_;try{p=yield fetch(n,d)}catch(N){throw vn.create("fetch-network-error",{originalErrorMessage:null===(i=N)||void 0===i?void 0:i.message})}if(200!==p.status)throw vn.create("fetch-status-error",{httpStatus:p.status});try{_=yield p.json()}catch(N){throw vn.create("fetch-parse-error",{originalErrorMessage:null===(r=N)||void 0===r?void 0:r.message})}const b=_.ttl.match(/^([\d.]+)(s)$/);if(!b||!b[2]||isNaN(Number(b[1])))throw vn.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${_.ttl}`});const E=1e3*Number(b[1]),T=Date.now();return{token:_.token,expireTimeMillis:T+E,issuedAtTimeMillis:T}})).apply(this,arguments)}function Le(n,t){const{projectId:e,appId:i,apiKey:r}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${e}/apps/${i}:exchangeDebugToken?key=${r}`,body:{debug_token:t}}}const $t="firebase-app-check-store";let It=null;function fi(){return It||(It=new Promise((n,t)=>{var e;try{const i=indexedDB.open("firebase-app-check-database",1);i.onsuccess=r=>{n(r.target.result)},i.onerror=r=>{var s;t(vn.create("storage-open",{originalErrorMessage:null===(s=r.target.error)||void 0===s?void 0:s.message}))},i.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore($t,{keyPath:"compositeKey"})}}catch(i){t(vn.create("storage-open",{originalErrorMessage:null===(e=i)||void 0===e?void 0:e.message}))}}),It)}function Il(){return(Il=(0,Me.Z)(function*(n,t){const i=(yield fi()).transaction($t,"readwrite"),s=i.objectStore($t).put({compositeKey:n,value:t});return new Promise((c,d)=>{s.onsuccess=p=>{c()},i.onerror=p=>{var _;d(vn.create("storage-set",{originalErrorMessage:null===(_=p.target.error)||void 0===_?void 0:_.message}))}})})).apply(this,arguments)}const Sl=new sr.Yd("@firebase/app-check");function Og(n,t){return(0,te.hl)()?function El(n,t){return function eo(n,t){return Il.apply(this,arguments)}(function Fs(n){return`${n.options.appId}-${n.name}`}(n),t)}(n,t).catch(e=>{Sl.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function Pg(){return Ir().enabled}function sp(){return Ng.apply(this,arguments)}function Ng(){return(Ng=(0,Me.Z)(function*(){const n=Ir();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const mD={error:"UNKNOWN_ERROR"};function op(n){return te.US.encodeString(JSON.stringify(n),!1)}function ch(n){return gc.apply(this,arguments)}function gc(){return(gc=(0,Me.Z)(function*(n,t=!1){const e=n.app;Au(e);const i=hi(e);let s,r=i.token;if(!r){const p=yield i.cachedTokenPromise;p&&uh(p)&&(r=p)}if(!t&&r&&uh(r))return{token:r.token};let d,c=!1;if(Pg()){i.exchangeTokenPromise||(i.exchangeTokenPromise=R(Le(e,yield sp()),n.heartbeatServiceProvider).then(_=>(i.exchangeTokenPromise=void 0,_)),c=!0);const p=yield i.exchangeTokenPromise;return yield Og(e,p),or(e,Object.assign(Object.assign({},i),{token:p})),{token:p.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().then(p=>(i.exchangeTokenPromise=void 0,p)),c=!0),r=yield i.exchangeTokenPromise}catch(p){"appCheck/throttled"===p.code?Sl.warn(p.message):Sl.error(p),s=p}return r?(d={token:r.token},or(e,Object.assign(Object.assign({},i),{token:r})),yield Og(e,r)):d=dh(s),c&&Lg(e,d),d})).apply(this,arguments)}function ku(n,t){const e=hi(n),i=e.tokenObservers.filter(r=>r.next!==t);0===i.length&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),or(n,Object.assign(Object.assign({},e),{tokenObservers:i}))}function Al(n){const{app:t}=n,e=hi(t);let i=e.tokenRefresher;i||(i=function Lv(n){const{app:t}=n;return new Dl((0,Me.Z)(function*(){let i;if(i=hi(t).token?yield ch(n,!0):yield ch(n),i.error)throw i.error}),()=>!0,()=>{const e=hi(t);if(e.token){let i=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,e.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},3e4,96e4)}(n),or(t,Object.assign(Object.assign({},e),{tokenRefresher:i}))),!i.isRunning()&&e.isTokenAutoRefreshEnabled&&i.start()}function Lg(n,t){const e=hi(n).tokenObservers;for(const i of e)try{"EXTERNAL"===i.type&&null!=t.error?i.error(t.error):i.next(t)}catch{}}function uh(n){return n.expireTimeMillis-Date.now()>0}function dh(n){return{token:op(mD),error:n}}class ap{constructor(t,e){this.app=t,this.heartbeatServiceProvider=e}_delete(){const{tokenObservers:t}=hi(this.app);for(const e of t)ku(this.app,e.next);return Promise.resolve()}}const Zn="app-check-internal";!function Po(){(0,ii._registerComponent)(new ps.wA("app-check",n=>function Bg(n,t){return new ap(n,t)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,t,e)=>{n.getProvider(Zn).initialize()})),(0,ii._registerComponent)(new ps.wA(Zn,n=>function Vg(n){return{getToken:t=>ch(n,t),addTokenListener:t=>function _c(n,t,e,i){const{app:r}=n,s=hi(r),c={next:e,error:i,type:t};if(or(r,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,c]})),s.token&&uh(s.token)){const d=s.token;Promise.resolve().then(()=>{e({token:d.token}),Al(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>Al(n))}(n,"INTERNAL",t),removeTokenListener:t=>ku(n.app,t)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ii.registerVersion)("@firebase/app-check","0.5.12")}();class no{constructor(){return(0,Zt.vb)("app-check")}}typeof window<"u"&&window;var yD=F(7143);class $g{constructor(t){return t}}class Gg{constructor(){return(0,Zt.vb)("auth")}}const qv=new l.OlP("angularfire2.auth-instances");function lT(n){return(t,e)=>{const i=t.runOutsideAngular(()=>n(e));return new $g(i)}}const RN={provide:Gg,deps:[[new l.FiY,qv]]},ON={provide:$g,useFactory:function aT(n,t){const e=(0,Zt.JM)("auth",n,t);return e&&new $g(e)},deps:[[new l.FiY,qv],fs]};let dp=(()=>{class n{constructor(){(0,Mr.KN)("angularfire",Zt.q4.full,"auth")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[ON,RN]}),n})();function Yv(n,...t){return{ngModule:dp,providers:[{provide:qv,useFactory:lT(n),multi:!0,deps:[l.R0b,l.zs3,Zt.HU,Da,[new l.FiY,no],...t]}]}}const Ou=(0,Zt.u3)(yD.n,!0),DT="@firebase/database";let xD="";class tF{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,te.Pz)(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,te.cI)(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class nF{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return(0,te.r3)(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const ET=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const t=window[n];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new tF(t)}}catch{}return new nF},Pu=ET("localStorage"),Zg=ET("sessionStorage"),bc=new sr.Yd("@firebase/database"),Qv=function(){let n=1;return function(){return n++}}(),Xv=function(n){const t=(0,te.dS)(n),e=new te.gQ;e.update(t);const i=e.digest();return te.US.encodeByteArray(i)},_h=function(...n){let t="";for(let e=0;e<n.length;e++){const i=n[e];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?t+=_h.apply(null,i):t+="object"==typeof i?(0,te.Pz)(i):i,t+=" "}return t};let Rl=null,SD=!0;const Ri=function(...n){if(!0===SD&&(SD=!1,null===Rl&&!0===Zg.get("logging_enabled")&&function(n,t){(0,te.hu)(!t||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(bc.logLevel=sr.in.VERBOSE,Rl=bc.log.bind(bc),t&&Zg.set("logging_enabled",!0)):"function"==typeof n?Rl=n:(Rl=null,Zg.remove("logging_enabled"))}(!0)),Rl){const t=_h.apply(null,n);Rl(t)}},pp=function(n){return function(...t){Ri(n,...t)}},Jv=function(...n){const t="FIREBASE INTERNAL ERROR: "+_h(...n);bc.error(t)},ka=function(...n){const t=`FIREBASE FATAL ERROR: ${_h(...n)}`;throw bc.error(t),new Error(t)},xr=function(...n){const t="FIREBASE WARNING: "+_h(...n);bc.warn(t)},Qg=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Ol="[MIN_NAME]",io="[MAX_NAME]",Nu=function(n,t){if(n===t)return 0;if(n===Ol||t===io)return-1;if(t===Ol||n===io)return 1;{const e=e_(n),i=e_(t);return null!==e?null!==i?e-i==0?n.length-t.length:e-i:-1:null!==i?1:n<t?-1:1}},xT=function(n,t){return n===t?0:n<t?-1:1},mp=function(n,t){if(t&&n in t)return t[n];throw new Error("Missing required key ("+n+") in object: "+(0,te.Pz)(t))},Xg=function(n){if("object"!=typeof n||null===n)return(0,te.Pz)(n);const t=[];for(const i in n)t.push(i);t.sort();let e="{";for(let i=0;i<t.length;i++)0!==i&&(e+=","),e+=(0,te.Pz)(t[i]),e+=":",e+=Xg(n[t[i]]);return e+="}",e},TD=function(n,t){const e=n.length;if(e<=t)return[n];const i=[];for(let r=0;r<e;r+=t)i.push(n.substring(r,r+t>e?e:r+t));return i};function ar(n,t){for(const e in n)n.hasOwnProperty(e)&&t(e,n[e])}const Ur=function(n){(0,te.hu)(!Qg(n),"Invalid JSON number");const i=1023;let r,s,c,d,p;0===n?(s=0,c=0,r=1/n==-1/0?1:0):(r=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=d+i,c=Math.round(n*Math.pow(2,52-d)-Math.pow(2,52))):(s=0,c=Math.round(n/Math.pow(2,-1074))));const _=[];for(p=52;p;p-=1)_.push(c%2?1:0),c=Math.floor(c/2);for(p=11;p;p-=1)_.push(s%2?1:0),s=Math.floor(s/2);_.push(r?1:0),_.reverse();const b=_.join("");let E="";for(p=0;p<64;p+=8){let T=parseInt(b.substr(p,8),2).toString(16);1===T.length&&(T="0"+T),E+=T}return E.toLowerCase()},Hr=new RegExp("^-?(0*)\\d{1,10}$"),e_=function(n){if(Hr.test(n)){const t=Number(n);if(t>=-2147483648&&t<=2147483647)return t}return null},vh=function(n){try{n()}catch(t){setTimeout(()=>{throw xr("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},gp=function(n,t){const e=setTimeout(n,t);return"number"==typeof e&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(e):"object"==typeof e&&e.unref&&e.unref(),e};class RD{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=e?.getImmediate({optional:!0}),this.appCheck||e?.get().then(i=>this.appCheck=i)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,i)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){xr(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class ST{constructor(t,e,i){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&"auth/token-not-initialized"===e.code?(Ri("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,i)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',xr(t)}}let bh=(()=>{class n{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const Fu=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,TT="websocket",AT="long_polling";class n_{constructor(t,e,i,r,s=!1,c="",d=!1){this.secure=e,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=c,this.includeNamespaceInQueryParams=d,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Pu.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Pu.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function No(n,t,e){let i;if((0,te.hu)("string"==typeof t,"typeof type must == string"),(0,te.hu)("object"==typeof e,"typeof params must == object"),t===TT)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(t!==AT)throw new Error("Unknown connection type: "+t);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function iF(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(e.ns=n.namespace);const r=[];return ar(e,(s,c)=>{r.push(s+"="+c)}),i+r.join("&")}class ib{constructor(){this.counters_={}}incrementCounter(t,e=1){(0,te.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return(0,te.p$)(this.counters_)}}const _p={},rb={};function i_(n){const t=n.toString();return _p[t]||(_p[t]=new ib),_p[t]}class yp{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&vh(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Pl{constructor(t,e,i,r,s,c,d){this.connId=t,this.repoInfo=e,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=c,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=pp(t),this.stats_=i_(e),this.urlFn=p=>(this.appCheckToken&&(p.ac=this.appCheckToken),No(e,AT,p))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new yp(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,te.Yr)()||"complete"===document.readyState)n();else{let t=!1;const e=function(){document.body?t||(t=!0,n()):setTimeout(e,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&e()}),window.attachEvent("onload",e))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new vp((...s)=>{const[c,d,p,_,b]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=d,this.password=p;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[c,d]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(c,d)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Fu.test(location.hostname)&&(i.r="f");const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Pl.forceAllow_=!0}static forceDisallow(){Pl.forceDisallow_=!0}static isAvailable(){return!((0,te.Yr)()||!Pl.forceAllow_&&(Pl.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=(0,te.Pz)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const i=(0,te.h$)(e),r=TD(i,1840);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if((0,te.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=t,i.pw=e,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=(0,te.Pz)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class vp{constructor(t,e,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,te.Yr)())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=Qv(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=vp.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(d){Ri("frame writing exception"),d.stack&&Ri(d.stack),Ri(d)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||Ri("No IE domain setting required")}catch{const i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let e=this.urlFn(t),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const c=this.pendingSegs.shift();i=i+"&seg"+r+"="+c.seg+"&ts"+r+"="+c.ts+"&d"+r+"="+c.d,r++}return e+=i,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(t,e,i){this.pendingSegs.push({seg:t,ts:e,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const i=()=>{this.outstandingRequests.delete(e),this.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(t,()=>{clearTimeout(r),i()})}addTag(t,e){(0,te.Yr)()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||"loaded"===r||"complete"===r)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),e())},i.onerror=()=>{Ri("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}let r_=null;typeof MozWebSocket<"u"?r_=MozWebSocket:typeof WebSocket<"u"&&(r_=WebSocket);let Ch=(()=>{class n{constructor(e,i,r,s,c,d,p){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=pp(this.connId),this.stats_=i_(i),this.connURL=n.connectionURL_(i,d,p,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(e,i,r,s,c){const d={v:"5"};return!(0,te.Yr)()&&typeof location<"u"&&location.hostname&&Fu.test(location.hostname)&&(d.r="f"),i&&(d.s=i),r&&(d.ls=r),s&&(d.ac=s),c&&(d.p=c),No(e,TT,d)}open(e,i){this.onDisconnect=i,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Pu.set("previous_websocket_failure",!0);try{let r;if((0,te.Yr)()){r={headers:{"User-Agent":`Firebase/5/${xD}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,d=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;d&&(r.proxy={origin:d})}this.mySock=new r_(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&null!==r_&&!n.forceDisallow_}static previouslyFailed(){return Pu.isInMemoryStorage||!0===Pu.get("previous_websocket_failure")}markConnectionHealthy(){Pu.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=(0,te.cI)(i);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,te.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const i=Number(e);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const i=e.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);null!==r&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const i=(0,te.Pz)(e);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=TD(i,16384);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),db=(()=>{class n{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Pl,Ch]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const i=Ch&&Ch.isAvailable();let r=i&&!Ch.previouslyFailed();if(e.webSocketOnly&&(i||xr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Ch];else{const s=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&s.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class bp{constructor(t,e,i,r,s,c,d,p,_,b){this.id=t,this.repoInfo_=e,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=c,this.onReady_=d,this.onDisconnect_=p,this.onKill_=_,this.lastSessionId=b,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=pp("c:"+this.id+":"),this.transportManager_=new db(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,i)},Math.floor(0));const r=t.healthyTimeout||0;r>0&&(this.healthyTimeout_=gp(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){this.sendData_({t:"d",d:t})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=mp("t",t),i=mp("d",t);if("c"===e)this.onSecondaryControl_(i);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=mp("t",t),i=mp("d",t);"c"===e?this.onControl_(i):"d"===e&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=mp("t",t);if("d"in t){const i=t.d;if("h"===e)this.onHandshake_(i);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(i):"r"===e?this.onReset_(i):"e"===e?Jv("Server Error: "+i):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Jv("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,i=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==i&&xr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,i),gp(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):gp(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Pu.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class gb{put(t,e,i,r){}merge(t,e,i,r){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,i){}onDisconnectMerge(t,e,i){}onDisconnectCancel(t,e){}reportStats(t){}}class l_{constructor(t){this.allowedEvents_=t,this.listeners_={},(0,te.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const i=[...this.listeners_[t]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,e)}}on(t,e,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:i});const r=this.getInitialEvent(t);r&&e.apply(i,r)}off(t,e,i){this.validateEventType_(t);const r=this.listeners_[t]||[];for(let s=0;s<r.length;s++)if(r[s].callback===e&&(!i||i===r[s].context))return void r.splice(s,1)}validateEventType_(t){(0,te.hu)(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}class Cp extends l_{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,te.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Cp}getInitialEvent(t){return(0,te.hu)("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}class jn{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function On(){return new jn("")}function gn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Cc(n){return n.pieces_.length-n.pieceNum_}function Kn(n){let t=n.pieceNum_;return t<n.pieces_.length&&t++,new jn(n.pieces_,t)}function wp(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function u_(n,t=0){return n.pieces_.slice(n.pieceNum_+t)}function _b(n){if(n.pieceNum_>=n.pieces_.length)return null;const t=[];for(let e=n.pieceNum_;e<n.pieces_.length-1;e++)t.push(n.pieces_[e]);return new jn(t,0)}function vi(n,t){const e=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)e.push(n.pieces_[i]);if(t instanceof jn)for(let i=t.pieceNum_;i<t.pieces_.length;i++)e.push(t.pieces_[i]);else{const i=t.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&e.push(i[r])}return new jn(e,0)}function fn(n){return n.pieceNum_>=n.pieces_.length}function Qr(n,t){const e=gn(n),i=gn(t);if(null===e)return t;if(e===i)return Qr(Kn(n),Kn(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+n+")")}function Ls(n,t){if(Cc(n)!==Cc(t))return!1;for(let e=n.pieceNum_,i=t.pieceNum_;e<=n.pieces_.length;e++,i++)if(n.pieces_[e]!==t.pieces_[i])return!1;return!0}function ro(n,t){let e=n.pieceNum_,i=t.pieceNum_;if(Cc(n)>Cc(t))return!1;for(;e<n.pieces_.length;){if(n.pieces_[e]!==t.pieces_[i])return!1;++e,++i}return!0}class ZD{constructor(t,e){this.errorPrefix_=e,this.parts_=u_(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,te.ug)(this.parts_[i]);KD(this)}}function KD(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Vu(n))}function Vu(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class d_ extends l_{constructor(){let t,e;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(e="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(e="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(e="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const i=!document[t];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new d_}getInitialEvent(t){return(0,te.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]}}const Dp=1e3;let h_,Uu=(()=>{class n extends gb{constructor(e,i,r,s,c,d,p,_){if(super(),this.repoInfo_=e,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=c,this.authTokenProvider_=d,this.appCheckTokenProvider_=p,this.authOverride_=_,this.id=n.nextPersistentConnectionId_++,this.log_=pp("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Dp,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,_&&!(0,te.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");d_.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&Cp.getInstance().on("online",this.onOnline_,this)}sendRequest(e,i,r){const s=++this.requestNumber_,c={r:s,a:e,b:i};this.log_((0,te.Pz)(c)),(0,te.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const i=new te.BH,r={p:e._path.toString(),q:e._queryObject};return this.outstandingGets_.push({action:"g",request:r,onComplete:d=>{const p=d.d;"ok"===d.s?i.resolve(p):i.reject(p)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),i.promise}listen(e,i,r,s){this.initConnection_();const c=e._queryIdentifier,d=e._path.toString();this.log_("Listen called for "+d+" "+c),this.listens.has(d)||this.listens.set(d,new Map),(0,te.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,te.hu)(!this.listens.get(d).has(c),"listen() called twice for same path/queryId.");const p={onComplete:s,hashFn:i,query:e,tag:r};this.listens.get(d).set(c,p),this.connected_&&this.sendListen_(p)}sendGet_(e){const i=this.outstandingGets_[e];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(e){const i=e.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);const c={p:r};e.tag&&(c.q=i._queryObject,c.t=e.tag),c.h=e.hashFn(),this.sendRequest("q",c,p=>{const _=p.d,b=p.s;n.warnOnListenWarnings_(_,i),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",p),"ok"!==b&&this.removeListen_(r,s),e.onComplete&&e.onComplete(b,_))})}static warnOnListenWarnings_(e,i){if(e&&"object"==typeof e&&(0,te.r3)(e,"w")){const r=(0,te.DV)(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',c=i._path.toString();xr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,te.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,i=(0,te.w9)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{const c=s.s,d=s.d||"error";this.authToken_===e&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const i=e.s,r=e.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(e,i){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),(0,te.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,i)}sendUnlisten_(e,i,r,s){this.log_("Unlisten on "+e+" for "+i);const c={p:e};s&&(c.q=r,c.t=s),this.sendRequest("n",c)}onDisconnectPut(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:i,onComplete:r})}onDisconnectMerge(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:i,onComplete:r})}onDisconnectCancel(e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(e,i,r,s){const c={p:i,d:r};this.log_("onDisconnect "+e,c),this.sendRequest(e,c,d=>{s&&setTimeout(()=>{s(d.s,d.d)},Math.floor(0))})}put(e,i,r,s){this.putInternal("p",e,i,r,s)}merge(e,i,r,s){this.putInternal("m",e,i,r,s)}putInternal(e,i,r,s,c){this.initConnection_();const d={p:i,d:r};void 0!==c&&(d.h=c),this.outstandingPuts_.push({action:e,request:d,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(e){const i=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(i,r,c=>{this.log_(i+" response",c),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(c.s,c.d)})}reportStats(e){if(this.connected_){const i={c:e};this.log_("reportStats",i),this.sendRequest("s",i,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,te.Pz)(e));const i=e.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,i){this.log_("handleServerMessage",e,i),"d"===e?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===e?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===e?this.onListenRevoked_(i.p,i.q):"ac"===e?this.onAuthRevoked_(i.s,i.d):"apc"===e?this.onAppCheckRevoked_(i.s,i.d):"sd"===e?this.onSecurityDebugPacket_(i):Jv("Unrecognized action received from server: "+(0,te.Pz)(e)+"\nAre you using the latest client?")}onReady_(e,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,te.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Dp,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Dp,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Dp),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-e);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var e=this;return(0,Me.Z)(function*(){if(e.shouldReconnect_()){e.log_("Making a connection attempt"),e.lastConnectionAttemptTime_=(new Date).getTime(),e.lastConnectionEstablishedTime_=null;const i=e.onDataMessage_.bind(e),r=e.onReady_.bind(e),s=e.onRealtimeDisconnect_.bind(e),c=e.id+":"+n.nextConnectionId_++,d=e.lastSessionId;let p=!1,_=null;const b=function(){_?_.close():(p=!0,s())};e.realtime_={close:b,sendRequest:function(N){(0,te.hu)(_,"sendRequest call when we're not connected not allowed."),_.sendRequest(N)}};const T=e.forceTokenRefresh_;e.forceTokenRefresh_=!1;try{const[N,V]=yield Promise.all([e.authTokenProvider_.getToken(T),e.appCheckTokenProvider_.getToken(T)]);p?Ri("getToken() completed but was canceled"):(Ri("getToken() completed. Creating connection."),e.authToken_=N&&N.accessToken,e.appCheckToken_=V&&V.token,_=new bp(c,e.repoInfo_,e.applicationId_,e.appCheckToken_,e.authToken_,i,r,s,K=>{xr(K+" ("+e.repoInfo_.toString()+")"),e.interrupt("server_kill")},d))}catch(N){e.log_("Failed to get token: "+N),p||(e.repoInfo_.nodeAdmin&&xr(N),b())}}})()}interrupt(e){Ri("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Ri("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,te.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Dp,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const i=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const i=this.outstandingPuts_[e];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,i){let r;r=i?i.map(c=>Xg(c)).join("$"):"default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,i){const r=new jn(e).toString();let s;if(this.listens.has(r)){const c=this.listens.get(r);s=c.get(i),c.delete(i),0===c.size&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,i){Ri("Auth token revoked: "+e+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,i){Ri("App check token revoked: "+e+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const i of e.values())this.sendListen_(i);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let i="js";(0,te.Yr)()&&(i=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+i+"."+xD.replace(/\./g,"-")]=1,(0,te.uI)()?e["framework.cordova"]=1:(0,te.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Cp.getInstance().currentlyOnline();return(0,te.xb)(this.interruptReasons_)&&e}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class bn{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new bn(t,e)}}class Ep{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const i=new bn(Ol,t),r=new bn(Ol,e);return 0!==this.compare(i,r)}minPost(){return bn.MIN}}class vb extends Ep{static get __EMPTY_NODE(){return h_}static set __EMPTY_NODE(t){h_=t}compare(t,e){return Nu(t.name,e.name)}isDefinedOn(t){throw(0,te.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return bn.MIN}maxPost(){return new bn(io,h_)}makePost(t,e){return(0,te.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new bn(t,h_)}toString(){return".key"}}const Oa=new vb;class f_{constructor(t,e,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let c=1;for(;!t.isEmpty();)if(c=e?i(t.key,e):1,r&&(c*=-1),c<0)t=this.isReverse_?t.left:t.right;else{if(0===c){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}let Mp,Pa=(()=>{class n{constructor(e,i,r,s,c){this.key=e,this.value=i,this.color=r??n.RED,this.left=s??Xr.EMPTY_NODE,this.right=c??Xr.EMPTY_NODE}copy(e,i,r,s,c){return new n(e??this.key,i??this.value,r??this.color,s??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,r){let s=this;const c=r(e,s.key);return s=c<0?s.copy(null,null,null,s.left.insert(e,i,r),null):0===c?s.copy(null,i,null,null,null):s.copy(null,null,null,null,s.right.insert(e,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Xr.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,i){let r,s;if(r=this,i(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===i(e,r.key)){if(r.right.isEmpty())return Xr.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Xr{constructor(t,e=Xr.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new Xr(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,Pa.BLACK,null,null))}remove(t){return new Xr(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Pa.BLACK,null,null))}get(t){let e,i=this.root_;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e)return i.value;e<0?i=i.left:e>0&&(i=i.right)}return null}getPredecessorKey(t){let e,i=this.root_,r=null;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}e<0?i=i.left:e>0&&(r=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new f_(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new f_(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new f_(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new f_(this.root_,null,this.comparator_,!0,t)}}function Hu(n,t){return Nu(n.name,t.name)}function bb(n,t){return Nu(n,t)}Xr.EMPTY_NODE=new class eE{copy(t,e,i,r,s){return this}insert(t,e,i){return new Pa(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const tE=function(n){return"number"==typeof n?"number:"+Ur(n):"string:"+n},$T=function(n){if(n.isLeafNode()){const t=n.val();(0,te.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,te.r3)(t,".sv"),"Priority must be a string or number.")}else(0,te.hu)(n===Mp||n.isEmpty(),"priority of unexpected type.");(0,te.hu)(n===Mp||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let GT,nE,wb,Ip=(()=>{class n{constructor(e,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=i,this.lazyHash_=null,(0,te.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),$T(this.priorityNode_)}static set __childrenNodeConstructor(e){GT=e}static get __childrenNodeConstructor(){return GT}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new n(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return fn(e)?this:".priority"===gn(e)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,i){return null}updateImmediateChild(e,i){return".priority"===e?this.updatePriority(i):i.isEmpty()&&".priority"!==e?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,i).updatePriority(this.priorityNode_)}updateChild(e,i){const r=gn(e);return null===r?i:i.isEmpty()&&".priority"!==r?this:((0,te.hu)(".priority"!==r||1===Cc(e),".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Kn(e),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,i){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+tE(this.priorityNode_.val())+":");const i=typeof this.value_;e+=i+":",e+="number"===i?Ur(this.value_):this.value_,this.lazyHash_=Xv(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===n.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof n.__childrenNodeConstructor?-1:((0,te.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const i=typeof e.value_,r=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(i),c=n.VALUE_TYPE_ORDER.indexOf(r);return(0,te.hu)(s>=0,"Unknown leaf type: "+i),(0,te.hu)(c>=0,"Unknown leaf type: "+r),s===c?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:c-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const i=e;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const si=new class Dh extends Ep{compare(t,e){const i=t.node.getPriority(),r=e.node.getPriority(),s=i.compareTo(r);return 0===s?Nu(t.name,e.name):s}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return bn.MIN}maxPost(){return new bn(io,new Ip("[PRIORITY-POST]",wb))}makePost(t,e){const i=nE(t);return new bn(e,new Ip("[PRIORITY-POST]",i))}toString(){return".priority"}},iE=Math.log(2);class p_{constructor(t){this.count=parseInt(Math.log(t+1)/iE,10),this.current_=this.count-1;const r=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=t+1&r}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const m_=function(n,t,e,i){n.sort(t);const r=function(p,_){const b=_-p;let E,T;if(0===b)return null;if(1===b)return E=n[p],T=e?e(E):E,new Pa(T,E.node,Pa.BLACK,null,null);{const N=parseInt(b/2,10)+p,V=r(p,N),K=r(N+1,_);return E=n[N],T=e?e(E):E,new Pa(T,E.node,Pa.BLACK,V,K)}},d=function(p){let _=null,b=null,E=n.length;const T=function(V,K){const re=E-V,Ye=E;E-=V;const rt=r(re+1,Ye),pt=n[re],st=e?e(pt):pt;N(new Pa(st,pt.node,K,null,rt))},N=function(V){_?(_.left=V,_=V):(b=V,_=V)};for(let V=0;V<p.count;++V){const K=p.nextBitIsOne(),re=Math.pow(2,p.count-(V+1));K?T(re,Pa.BLACK):(T(re,Pa.BLACK),T(re,Pa.RED))}return b}(new p_(n.length));return new Xr(i||t,d)};let g_;const Eh={};class Nl{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return(0,te.hu)(Eh&&si,"ChildrenNode.ts has not been loaded"),g_=g_||new Nl({".priority":Eh},{".priority":si}),g_}get(t){const e=(0,te.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Xr?e:null}hasIndex(t){return(0,te.r3)(this.indexSet_,t.toString())}addIndex(t,e){(0,te.hu)(t!==Oa,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=e.getIterator(bn.Wrap);let d,c=s.getNext();for(;c;)r=r||t.isDefinedOn(c.node),i.push(c),c=s.getNext();d=r?m_(i,t.getCompare()):Eh;const p=t.toString(),_=Object.assign({},this.indexSet_);_[p]=t;const b=Object.assign({},this.indexes_);return b[p]=d,new Nl(b,_)}addToIndexes(t,e){const i=(0,te.UI)(this.indexes_,(r,s)=>{const c=(0,te.DV)(this.indexSet_,s);if((0,te.hu)(c,"Missing index implementation for "+s),r===Eh){if(c.isDefinedOn(t.node)){const d=[],p=e.getIterator(bn.Wrap);let _=p.getNext();for(;_;)_.name!==t.name&&d.push(_),_=p.getNext();return d.push(t),m_(d,c.getCompare())}return Eh}{const d=e.get(t.name);let p=r;return d&&(p=p.remove(new bn(t.name,d))),p.insert(t,t.node)}});return new Nl(i,this.indexSet_)}removeFromIndexes(t,e){const i=(0,te.UI)(this.indexes_,r=>{if(r===Eh)return r;{const s=e.get(t.name);return s?r.remove(new bn(t.name,s)):r}});return new Nl(i,this.indexSet_)}}let xp,ln=(()=>{class n{constructor(e,i,r){this.children_=e,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&$T(this.priorityNode_),this.children_.isEmpty()&&(0,te.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return xp||(xp=new n(new Xr(bb),null,Nl.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||xp}updatePriority(e){return this.children_.isEmpty()?this:new n(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const i=this.children_.get(e);return null===i?xp:i}}getChild(e){const i=gn(e);return null===i?this:this.getImmediateChild(i).getChild(Kn(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,i){if((0,te.hu)(i,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(i);{const r=new bn(e,i);let s,c;i.isEmpty()?(s=this.children_.remove(e),c=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,i),c=this.indexMap_.addToIndexes(r,this.children_));const d=s.isEmpty()?xp:this.priorityNode_;return new n(s,d,c)}}updateChild(e,i){const r=gn(e);if(null===r)return i;{(0,te.hu)(".priority"!==gn(e)||1===Cc(e),".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(Kn(e),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const i={};let r=0,s=0,c=!0;if(this.forEachChild(si,(d,p)=>{i[d]=p.val(e),r++,c&&n.INTEGER_REGEXP_.test(d)?s=Math.max(s,Number(d)):c=!1}),!e&&c&&s<2*r){const d=[];for(const p in i)d[p]=i[p];return d}return e&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+tE(this.getPriority().val())+":"),this.forEachChild(si,(i,r)=>{const s=r.hash();""!==s&&(e+=":"+i+":"+s)}),this.lazyHash_=""===e?"":Xv(e)}return this.lazyHash_}getPredecessorChildName(e,i,r){const s=this.resolveIndex_(r);if(s){const c=s.getPredecessorKey(new bn(e,i));return c?c.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const i=this.resolveIndex_(e);if(i){const r=i.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(e){const i=this.getFirstChildName(e);return i?new bn(i,this.children_.get(i)):null}getLastChildName(e){const i=this.resolveIndex_(e);if(i){const r=i.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(e){const i=this.getLastChildName(e);return i?new bn(i,this.children_.get(i)):null}forEachChild(e,i){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,bn.Wrap);let c=s.peek();for(;null!=c&&i.compare(c,e)<0;)s.getNext(),c=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,bn.Wrap);let c=s.peek();for(;null!=c&&i.compare(c,e)>0;)s.getNext(),c=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Mh?-1:0}withIndex(e){if(e===Oa||this.indexMap_.hasIndex(e))return this;{const i=this.indexMap_.addIndex(e,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(e){return e===Oa||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const i=e;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const r=this.getIterator(si),s=i.getIterator(si);let c=r.getNext(),d=s.getNext();for(;c&&d;){if(c.name!==d.name||!c.node.equals(d.node))return!1;c=r.getNext(),d=s.getNext()}return null===c&&null===d}return!1}return!1}}resolveIndex_(e){return e===Oa?null:this.indexMap_.get(e.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Mh=new class qT extends ln{constructor(){super(new Xr(bb),ln.EMPTY_NODE,Nl.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return ln.EMPTY_NODE}isEmpty(){return!1}};function bi(n,t=null){if(null===n)return ln.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(t=n[".priority"]),(0,te.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Ip(n,bi(t));if(n instanceof Array){let e=ln.EMPTY_NODE;return ar(n,(i,r)=>{if((0,te.r3)(n,i)&&"."!==i.substring(0,1)){const s=bi(r);(s.isLeafNode()||!s.isEmpty())&&(e=e.updateImmediateChild(i,s))}}),e.updatePriority(bi(t))}{const e=[];let i=!1;if(ar(n,(c,d)=>{if("."!==c.substring(0,1)){const p=bi(d);p.isEmpty()||(i=i||!p.getPriority().isEmpty(),e.push(new bn(c,p)))}}),0===e.length)return ln.EMPTY_NODE;const s=m_(e,Hu,c=>c.name,bb);if(i){const c=m_(e,si.getCompare());return new ln(s,bi(t),new Nl({".priority":c},{".priority":si}))}return new ln(s,bi(t),Nl.Default)}}Object.defineProperties(bn,{MIN:{value:new bn(Ol,ln.EMPTY_NODE)},MAX:{value:new bn(io,Mh)}}),vb.__EMPTY_NODE=ln.EMPTY_NODE,Ip.__childrenNodeConstructor=ln,function Cb(n){Mp=n}(Mh),function WT(n){wb=n}(Mh),function rF(n){nE=n}(bi);class __ extends Ep{constructor(t){super(),this.indexPath_=t,(0,te.hu)(!fn(t)&&".priority"!==gn(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const i=this.extractChild(t.node),r=this.extractChild(e.node),s=i.compareTo(r);return 0===s?Nu(t.name,e.name):s}makePost(t,e){const i=bi(t),r=ln.EMPTY_NODE.updateChild(this.indexPath_,i);return new bn(e,r)}maxPost(){const t=ln.EMPTY_NODE.updateChild(this.indexPath_,Mh);return new bn(io,t)}toString(){return u_(this.indexPath_,0).join("/")}}const rE=new class Db extends Ep{compare(t,e){const i=t.node.compareTo(e.node);return 0===i?Nu(t.name,e.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return bn.MIN}maxPost(){return bn.MAX}makePost(t,e){const i=bi(t);return new bn(e,i)}toString(){return".value"}};function $u(n,t,e){return{type:"child_changed",snapshotNode:t,childName:n,oldSnap:e}}class oE{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=si}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,te.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,te.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ol}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,te.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,te.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:io}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,te.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===si}copy(){const t=new oE;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function lE(n){const t={};if(n.isDefault())return t;let e;return n.index_===si?e="$priority":n.index_===rE?e="$value":n.index_===Oa?e="$key":((0,te.hu)(n.index_ instanceof __,"Unrecognized index type!"),e=n.index_.toString()),t.orderBy=(0,te.Pz)(e),n.startSet_&&(t.startAt=(0,te.Pz)(n.indexStartValue_),n.startNameSet_&&(t.startAt+=","+(0,te.Pz)(n.indexStartName_))),n.endSet_&&(t.endAt=(0,te.Pz)(n.indexEndValue_),n.endNameSet_&&(t.endAt+=","+(0,te.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?t.limitToFirst=n.limit_:t.limitToLast=n.limit_),t}function cE(n){const t={};if(n.startSet_&&(t.sp=n.indexStartValue_,n.startNameSet_&&(t.sn=n.indexStartName_)),n.endSet_&&(t.ep=n.indexEndValue_,n.endNameSet_&&(t.en=n.indexEndName_)),n.limitSet_){t.l=n.limit_;let e=n.viewFrom_;""===e&&(e=n.isViewFromLeft()?"l":"r"),t.vf=e}return n.index_!==si&&(t.i=n.index_.toString()),t}class v_ extends gb{constructor(t,e,i,r){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=pp("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return void 0!==e?"tag$"+e:((0,te.hu)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,i,r){const s=t._path.toString();this.log_("Listen called for "+s+" "+t._queryIdentifier);const c=v_.getListenId_(t,i),d={};this.listens_[c]=d;const p=lE(t._queryParams);this.restRequest_(s+".json",p,(_,b)=>{let E=b;if(404===_&&(E=null,_=null),null===_&&this.onDataUpdate_(s,E,!1,i),(0,te.DV)(this.listens_,c)===d){let T;T=_?401===_?"permission_denied":"rest_error:"+_:"ok",r(T,null)}})}unlisten(t,e){const i=v_.getListenId_(t,e);delete this.listens_[i]}get(t){const e=lE(t._queryParams),i=t._path.toString(),r=new te.BH;return this.restRequest_(i+".json",e,(s,c)=>{let d=c;404===s&&(d=null,s=null),null===s?(this.onDataUpdate_(i,d,!1,null),r.resolve(d)):r.reject(new Error(d))}),r.promise}refreshAuthToken(t){}restRequest_(t,e={},i){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(e.auth=r.accessToken),s&&s.token&&(e.ac=s.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+(0,te.xO)(e);this.log_("Sending REST request for "+c);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(i&&4===d.readyState){this.log_("REST Response for "+c+" received. status:",d.status,"response:",d.responseText);let p=null;if(d.status>=200&&d.status<300){try{p=(0,te.cI)(d.responseText)}catch{xr("Failed to parse JSON response for "+c+": "+d.responseText)}i(null,p)}else 401!==d.status&&404!==d.status&&xr("Got unsuccessful REST response for "+c+" Status: "+d.status),i(d.status);i=null}},d.open("GET",c,!0),d.send()})}}class KT{constructor(){this.rootNode_=ln.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}function Rp(){return{value:null,children:new Map}}function Op(n,t,e){if(fn(t))n.value=e,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(t,e);else{const i=gn(t);n.children.has(i)||n.children.set(i,Rp()),Op(n.children.get(i),t=Kn(t),e)}}function uE(n,t,e){null!==n.value?e(t,n.value):function dE(n,t){n.children.forEach((e,i)=>{t(i,e)})}(n,(i,r)=>{uE(r,new jn(t.toString()+"/"+i),e)})}class hE{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&ar(this.last_,(i,r)=>{e[i]=e[i]-r}),this.last_=t,e}}class aF{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new hE(t);const i=1e4+2e4*Math.random();gp(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const t=this.statsListener_.get(),e={};let i=!1;ar(t,(r,s)=>{s>0&&(0,te.r3)(this.statsToReport_,r)&&(e[r]=s,i=!0)}),i&&this.server_.reportStats(e),gp(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Fo=(()=>{return(n=Fo||(Fo={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Fo;var n})();function gE(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class Rb{constructor(t,e,i){this.path=t,this.affectedTree=e,this.revert=i,this.type=Fo.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(fn(this.path)){if(null!=this.affectedTree.value)return(0,te.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new jn(t));return new Rb(On(),e,this.revert)}}return(0,te.hu)(gn(this.path)===t,"operationForChild called for unrelated child."),new Rb(Kn(this.path),this.affectedTree,this.revert)}}class Sh{constructor(t,e,i){this.source=t,this.path=e,this.snap=i,this.type=Fo.OVERWRITE}operationForChild(t){return fn(this.path)?new Sh(this.source,On(),this.snap.getImmediateChild(t)):new Sh(this.source,Kn(this.path),this.snap)}}class Pp{constructor(t,e,i){this.source=t,this.path=e,this.children=i,this.type=Fo.MERGE}operationForChild(t){if(fn(this.path)){const e=this.children.subtree(new jn(t));return e.isEmpty()?null:e.value?new Sh(this.source,On(),e.value):new Pp(this.source,On(),e)}return(0,te.hu)(gn(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new Pp(this.source,Kn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Jr{constructor(t,e,i){this.node_=t,this.fullyInitialized_=e,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(fn(t))return this.isFullyInitialized()&&!this.filtered_;const e=gn(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}function Th(n,t,e,i,r,s){const c=i.filter(d=>d.type===e);c.sort((d,p)=>function _E(n,t,e){if(null==t.childName||null==e.childName)throw(0,te.g5)("Should only compare child_ events.");const i=new bn(t.childName,t.snapshotNode),r=new bn(e.childName,e.snapshotNode);return n.index_.compare(i,r)}(n,d,p)),c.forEach(d=>{const p=function Pb(n,t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,n.index_)),t}(n,d,s);r.forEach(_=>{_.respondsTo(d.type)&&t.push(_.createEvent(p,n.query_))})})}function Ah(n,t){return{eventCache:n,serverCache:t}}function Np(n,t,e,i){return Ah(new Jr(t,e,i),n.serverCache)}function Ll(n,t,e,i){return Ah(n.eventCache,new Jr(t,e,i))}function Fp(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Gu(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let Nb;class oi{constructor(t,e=(()=>(Nb||(Nb=new Xr(xT)),Nb))()){this.value=t,this.children=e}static fromObject(t){let e=new oi(null);return ar(t,(i,r)=>{e=e.set(new jn(i),r)}),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:On(),value:this.value};if(fn(t))return null;{const i=gn(t),r=this.children.get(i);if(null!==r){const s=r.findRootMostMatchingPathAndValue(Kn(t),e);return null!=s?{path:vi(new jn(i),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(fn(t))return this;{const e=gn(t),i=this.children.get(e);return null!==i?i.subtree(Kn(t)):new oi(null)}}set(t,e){if(fn(t))return new oi(e,this.children);{const i=gn(t),s=(this.children.get(i)||new oi(null)).set(Kn(t),e),c=this.children.insert(i,s);return new oi(this.value,c)}}remove(t){if(fn(t))return this.children.isEmpty()?new oi(null):new oi(null,this.children);{const e=gn(t),i=this.children.get(e);if(i){const r=i.remove(Kn(t));let s;return s=r.isEmpty()?this.children.remove(e):this.children.insert(e,r),null===this.value&&s.isEmpty()?new oi(null):new oi(this.value,s)}return this}}get(t){if(fn(t))return this.value;{const e=gn(t),i=this.children.get(e);return i?i.get(Kn(t)):null}}setTree(t,e){if(fn(t))return e;{const i=gn(t),s=(this.children.get(i)||new oi(null)).setTree(Kn(t),e);let c;return c=s.isEmpty()?this.children.remove(i):this.children.insert(i,s),new oi(this.value,c)}}fold(t){return this.fold_(On(),t)}fold_(t,e){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(vi(t,r),e)}),e(t,this.value,i)}findOnPath(t,e){return this.findOnPath_(t,On(),e)}findOnPath_(t,e,i){const r=!!this.value&&i(e,this.value);if(r)return r;if(fn(t))return null;{const s=gn(t),c=this.children.get(s);return c?c.findOnPath_(Kn(t),vi(e,s),i):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,On(),e)}foreachOnPath_(t,e,i){if(fn(t))return this;{this.value&&i(e,this.value);const r=gn(t),s=this.children.get(r);return s?s.foreachOnPath_(Kn(t),vi(e,r),i):new oi(null)}}foreach(t){this.foreach_(On(),t)}foreach_(t,e){this.children.inorderTraversal((i,r)=>{r.foreach_(vi(t,i),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,i)=>{i.value&&t(e,i.value)})}}class Lo{constructor(t){this.writeTree_=t}static empty(){return new Lo(new oi(null))}}function Dc(n,t,e){if(fn(t))return new Lo(new oi(e));{const i=n.writeTree_.findRootMostValueAndPath(t);if(null!=i){const r=i.path;let s=i.value;const c=Qr(r,t);return s=s.updateChild(c,e),new Lo(n.writeTree_.set(r,s))}{const r=new oi(e),s=n.writeTree_.setTree(t,r);return new Lo(s)}}}function Ec(n,t,e){let i=n;return ar(e,(r,s)=>{i=Dc(i,vi(t,r),s)}),i}function C_(n,t){if(fn(t))return Lo.empty();{const e=n.writeTree_.setTree(t,new oi(null));return new Lo(e)}}function Mc(n,t){return null!=Bl(n,t)}function Bl(n,t){const e=n.writeTree_.findRootMostValueAndPath(t);return null!=e?n.writeTree_.get(e.path).getChild(Qr(e.path,t)):null}function Lp(n){const t=[],e=n.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(si,(i,r)=>{t.push(new bn(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{null!=r.value&&t.push(new bn(i,r.value))}),t}function Vl(n,t){if(fn(t))return n;{const e=Bl(n,t);return new Lo(null!=e?new oi(e):n.writeTree_.subtree(t))}}function w_(n){return n.writeTree_.isEmpty()}function Ic(n,t){return D_(On(),n.writeTree_,t)}function D_(n,t,e){if(null!=t.value)return e.updateChild(n,t.value);{let i=null;return t.children.inorderTraversal((r,s)=>{".priority"===r?((0,te.hu)(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):e=D_(vi(n,r),s,e)}),!e.getChild(n).isEmpty()&&null!==i&&(e=e.updateChild(vi(n,".priority"),i)),e}}function Bp(n,t){return ME(t,n)}function vE(n,t){if(n.snap)return ro(n.path,t);for(const e in n.children)if(n.children.hasOwnProperty(e)&&ro(vi(n.path,e),t))return!0;return!1}function bE(n){return n.visible}function Lb(n,t,e){let i=Lo.empty();for(let r=0;r<n.length;++r){const s=n[r];if(t(s)){const c=s.path;let d;if(s.snap)ro(e,c)?(d=Qr(e,c),i=Dc(i,d,s.snap)):ro(c,e)&&(d=Qr(c,e),i=Dc(i,On(),s.snap.getChild(d)));else{if(!s.children)throw(0,te.g5)("WriteRecord should have .snap or .children");if(ro(e,c))d=Qr(e,c),i=Ec(i,d,s.children);else if(ro(c,e))if(d=Qr(c,e),fn(d))i=Ec(i,On(),s.children);else{const p=(0,te.DV)(s.children,gn(d));if(p){const _=p.getChild(Kn(d));i=Dc(i,On(),_)}}}}}return i}function CE(n,t,e,i,r){if(i||r){const s=Vl(n.visibleWrites,t);return!r&&w_(s)?e:r||null!=e||Mc(s,On())?Ic(Lb(n.allWrites,function(_){return(_.visible||r)&&(!i||!~i.indexOf(_.writeId))&&(ro(_.path,t)||ro(t,_.path))},t),e||ln.EMPTY_NODE):null}{const s=Bl(n.visibleWrites,t);if(null!=s)return s;{const c=Vl(n.visibleWrites,t);return w_(c)?e:null!=e||Mc(c,On())?Ic(c,e||ln.EMPTY_NODE):null}}}function Vp(n,t,e,i){return CE(n.writeTree,n.treePath,t,e,i)}function Vb(n,t){return function Bs(n,t,e){let i=ln.EMPTY_NODE;const r=Bl(n.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(si,(s,c)=>{i=i.updateImmediateChild(s,c)}),i;if(e){const s=Vl(n.visibleWrites,t);return e.forEachChild(si,(c,d)=>{const p=Ic(Vl(s,new jn(c)),d);i=i.updateImmediateChild(c,p)}),Lp(s).forEach(c=>{i=i.updateImmediateChild(c.name,c.node)}),i}return Lp(Vl(n.visibleWrites,t)).forEach(c=>{i=i.updateImmediateChild(c.name,c.node)}),i}(n.writeTree,n.treePath,t)}function DE(n,t,e,i){return function wE(n,t,e,i,r){(0,te.hu)(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=vi(t,e);if(Mc(n.visibleWrites,s))return null;{const c=Vl(n.visibleWrites,s);return w_(c)?r.getChild(e):Ic(c,r.getChild(e))}}(n.writeTree,n.treePath,t,e,i)}function E_(n,t){return function cF(n,t){return Bl(n.visibleWrites,t)}(n.writeTree,vi(n.treePath,t))}function Ub(n,t,e){return function tA(n,t,e,i){const r=vi(t,e),s=Bl(n.visibleWrites,r);return null!=s?s:i.isCompleteForChild(e)?Ic(Vl(n.visibleWrites,r),i.getNode().getImmediateChild(e)):null}(n.writeTree,n.treePath,t,e)}function Hb(n,t){return ME(vi(n.treePath,t),n.writeTree)}function ME(n,t){return{treePath:n,writeTree:t}}class iA{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,i=t.childName;(0,te.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,te.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if("child_added"===e&&"child_removed"===s)this.changeMap.set(i,$u(i,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===s)this.changeMap.delete(i);else if("child_removed"===e&&"child_changed"===s)this.changeMap.set(i,function Tp(n,t){return{type:"child_removed",snapshotNode:t,childName:n}}(i,r.oldSnap));else if("child_changed"===e&&"child_added"===s)this.changeMap.set(i,function zu(n,t){return{type:"child_added",snapshotNode:t,childName:n}}(i,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==s)throw(0,te.g5)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(i,$u(i,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}}const jb=new class IE{getCompleteChild(t){return null}getChildAfterChild(t,e,i){return null}};class zb{constructor(t,e,i=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=i}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const i=null!=this.optCompleteServerCache_?new Jr(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ub(this.writes_,t,i)}}getChildAfterChild(t,e,i){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Gu(this.viewCache_),s=function EE(n,t,e,i,r,s){return function nA(n,t,e,i,r,s,c){let d;const p=Vl(n.visibleWrites,t),_=Bl(p,On());if(null!=_)d=_;else{if(null==e)return[];d=Ic(p,e)}if(d=d.withIndex(c),d.isEmpty()||d.isLeafNode())return[];{const b=[],E=c.getCompare(),T=s?d.getReverseIteratorFrom(i,c):d.getIteratorFrom(i,c);let N=T.getNext();for(;N&&b.length<r;)0!==E(N,i)&&b.push(N),N=T.getNext();return b}}(n.writeTree,n.treePath,t,e,i,r,s)}(this.writes_,r,e,1,i,t);return 0===s.length?null:s[0]}}function oA(n,t,e,i,r,s){const c=t.eventCache;if(null!=E_(i,e))return t;{let d,p;if(fn(e))if((0,te.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const _=Gu(t),E=Vb(i,_ instanceof ln?_:ln.EMPTY_NODE);d=n.filter.updateFullNode(t.eventCache.getNode(),E,s)}else{const _=Vp(i,Gu(t));d=n.filter.updateFullNode(t.eventCache.getNode(),_,s)}else{const _=gn(e);if(".priority"===_){(0,te.hu)(1===Cc(e),"Can't have a priority with additional path components");const b=c.getNode();p=t.serverCache.getNode();const E=DE(i,e,b,p);d=null!=E?n.filter.updatePriority(b,E):c.getNode()}else{const b=Kn(e);let E;if(c.isCompleteForChild(_)){p=t.serverCache.getNode();const T=DE(i,e,c.getNode(),p);E=null!=T?c.getNode().getImmediateChild(_).updateChild(b,T):c.getNode().getImmediateChild(_)}else E=Ub(i,_,t.serverCache);d=null!=E?n.filter.updateChild(c.getNode(),_,E,b,r,s):c.getNode()}}return Np(t,d,c.isFullyInitialized()||fn(e),n.filter.filtersNodes())}}function Up(n,t,e,i,r,s,c,d){const p=t.serverCache;let _;const b=c?n.filter:n.filter.getIndexedFilter();if(fn(e))_=b.updateFullNode(p.getNode(),i,null);else if(b.filtersNodes()&&!p.isFiltered()){const N=p.getNode().updateChild(e,i);_=b.updateFullNode(p.getNode(),N,null)}else{const N=gn(e);if(!p.isCompleteForPath(e)&&Cc(e)>1)return t;const V=Kn(e),re=p.getNode().getImmediateChild(N).updateChild(V,i);_=".priority"===N?b.updatePriority(p.getNode(),re):b.updateChild(p.getNode(),N,re,V,jb,null)}const E=Ll(t,_,p.isFullyInitialized()||fn(e),b.filtersNodes());return oA(n,E,e,r,new zb(r,E,s),d)}function Gb(n,t,e,i,r,s,c){const d=t.eventCache;let p,_;const b=new zb(r,t,s);if(fn(e))_=n.filter.updateFullNode(t.eventCache.getNode(),i,c),p=Np(t,_,!0,n.filter.filtersNodes());else{const E=gn(e);if(".priority"===E)_=n.filter.updatePriority(t.eventCache.getNode(),i),p=Np(t,_,d.isFullyInitialized(),d.isFiltered());else{const T=Kn(e),N=d.getNode().getImmediateChild(E);let V;if(fn(T))V=i;else{const K=b.getCompleteChild(E);V=null!=K?".priority"===wp(T)&&K.getChild(_b(T)).isEmpty()?K:K.updateChild(T,i):ln.EMPTY_NODE}p=N.equals(V)?t:Np(t,n.filter.updateChild(d.getNode(),E,V,T,b,c),d.isFullyInitialized(),n.filter.filtersNodes())}}return p}function xE(n,t){return n.eventCache.isCompleteForChild(t)}function M_(n,t,e){return e.foreach((i,r)=>{t=t.updateChild(i,r)}),t}function Wb(n,t,e,i,r,s,c,d){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let _,p=t;_=fn(e)?i:new oi(null).setTree(e,i);const b=t.serverCache.getNode();return _.children.inorderTraversal((E,T)=>{if(b.hasChild(E)){const V=M_(0,t.serverCache.getNode().getImmediateChild(E),T);p=Up(n,p,new jn(E),V,r,s,c,d)}}),_.children.inorderTraversal((E,T)=>{const N=!t.serverCache.isCompleteForChild(E)&&null===T.value;if(!b.hasChild(E)&&!N){const K=M_(0,t.serverCache.getNode().getImmediateChild(E),T);p=Up(n,p,new jn(E),K,r,s,c,d)}}),p}function dF(n,t){const e=Gu(n.viewCache_);return e&&(n.query._queryParams.loadsAllData()||!fn(t)&&!e.getImmediateChild(gn(t)).isEmpty())?e.getChild(t):null}function Qb(n,t,e,i){t.type===Fo.MERGE&&null!==t.source.queryId&&((0,te.hu)(Gu(n.viewCache_),"We should always have a full cache before handling merges"),(0,te.hu)(Fp(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,s=function rA(n,t,e,i,r){const s=new iA;let c,d;if(e.type===Fo.OVERWRITE){const _=e;_.source.fromUser?c=Gb(n,t,_.path,_.snap,i,r,s):((0,te.hu)(_.source.fromServer,"Unknown source."),d=_.source.tagged||t.serverCache.isFiltered()&&!fn(_.path),c=Up(n,t,_.path,_.snap,i,r,d,s))}else if(e.type===Fo.MERGE){const _=e;_.source.fromUser?c=function aA(n,t,e,i,r,s,c){let d=t;return i.foreach((p,_)=>{const b=vi(e,p);xE(t,gn(b))&&(d=Gb(n,d,b,_,r,s,c))}),i.foreach((p,_)=>{const b=vi(e,p);xE(t,gn(b))||(d=Gb(n,d,b,_,r,s,c))}),d}(n,t,_.path,_.children,i,r,s):((0,te.hu)(_.source.fromServer,"Unknown source."),d=_.source.tagged||t.serverCache.isFiltered(),c=Wb(n,t,_.path,_.children,i,r,d,s))}else if(e.type===Fo.ACK_USER_WRITE){const _=e;c=_.revert?function qb(n,t,e,i,r,s){let c;if(null!=E_(i,e))return t;{const d=new zb(i,t,r),p=t.eventCache.getNode();let _;if(fn(e)||".priority"===gn(e)){let b;if(t.serverCache.isFullyInitialized())b=Vp(i,Gu(t));else{const E=t.serverCache.getNode();(0,te.hu)(E instanceof ln,"serverChildren would be complete if leaf node"),b=Vb(i,E)}_=n.filter.updateFullNode(p,b,s)}else{const b=gn(e);let E=Ub(i,b,t.serverCache);null==E&&t.serverCache.isCompleteForChild(b)&&(E=p.getImmediateChild(b)),_=null!=E?n.filter.updateChild(p,b,E,Kn(e),d,s):t.eventCache.getNode().hasChild(b)?n.filter.updateChild(p,b,ln.EMPTY_NODE,Kn(e),d,s):p,_.isEmpty()&&t.serverCache.isFullyInitialized()&&(c=Vp(i,Gu(t)),c.isLeafNode()&&(_=n.filter.updateFullNode(_,c,s)))}return c=t.serverCache.isFullyInitialized()||null!=E_(i,On()),Np(t,_,c,n.filter.filtersNodes())}}(n,t,_.path,i,r,s):function lA(n,t,e,i,r,s,c){if(null!=E_(r,e))return t;const d=t.serverCache.isFiltered(),p=t.serverCache;if(null!=i.value){if(fn(e)&&p.isFullyInitialized()||p.isCompleteForPath(e))return Up(n,t,e,p.getNode().getChild(e),r,s,d,c);if(fn(e)){let _=new oi(null);return p.getNode().forEachChild(Oa,(b,E)=>{_=_.set(new jn(b),E)}),Wb(n,t,e,_,r,s,d,c)}return t}{let _=new oi(null);return i.foreach((b,E)=>{const T=vi(e,b);p.isCompleteForPath(T)&&(_=_.set(b,p.getNode().getChild(T)))}),Wb(n,t,e,_,r,s,d,c)}}(n,t,_.path,_.affectedTree,i,r,s)}else{if(e.type!==Fo.LISTEN_COMPLETE)throw(0,te.g5)("Unknown operation type: "+e.type);c=function I_(n,t,e,i,r){const s=t.serverCache;return oA(n,Ll(t,s.getNode(),s.isFullyInitialized()||fn(e),s.isFiltered()),e,i,jb,r)}(n,t,e.path,i,s)}const p=s.getChanges();return function sA(n,t,e){const i=t.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=Fp(n);(e.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&e.push(function so(n){return{type:"value",snapshotNode:n}}(Fp(t)))}}(t,c,p),{viewCache:c,changes:p}}(n.processor_,r,t,e,i);return function $b(n,t){(0,te.hu)(t.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,te.hu)(t.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,te.hu)(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,function Fa(n,t,e,i){return function QT(n,t,e,i){const r=[],s=[];return t.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&s.push(function Fl(n,t){return{type:"child_moved",snapshotNode:t,childName:n}}(c.childName,c.snapshotNode))}),Th(n,r,"child_removed",t,i,e),Th(n,r,"child_added",t,i,e),Th(n,r,"child_moved",s,i,e),Th(n,r,"child_changed",t,i,e),Th(n,r,"value",t,i,e),r}(n.eventGenerator_,t,e,i?[i]:n.eventRegistrations_)}(n,s.changes,s.viewCache.eventCache.getNode(),null)}let Wu,A_;function S_(n,t,e,i){const r=t.source.queryId;if(null!==r){const s=n.views.get(r);return(0,te.hu)(null!=s,"SyncTree gave us an op for an invalid query."),Qb(s,t,e,i)}{let s=[];for(const c of n.views.values())s=s.concat(Qb(c,t,e,i));return s}}function qu(n,t){let e=null;for(const i of n.views.values())e=e||dF(i,t);return e}class k_{constructor(t){this.listenProvider_=t,this.syncPointTree_=new oi(null),this.pendingWriteTree_=function Bb(){return{visibleWrites:Lo.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function t0(n,t,e,i,r){return function Fb(n,t,e,i,r){(0,te.hu)(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),n.allWrites.push({path:t,snap:e,writeId:i,visible:r}),r&&(n.visibleWrites=Dc(n.visibleWrites,t,e)),n.lastWriteId=i}(n.pendingWriteTree_,t,e,i,r),r?kh(n,new Sh({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,e)):[]}function Sc(n,t,e=!1){const i=function lF(n,t){for(let e=0;e<n.allWrites.length;e++){const i=n.allWrites[e];if(i.writeId===t)return i}return null}(n.pendingWriteTree_,t);if(function JT(n,t){const e=n.allWrites.findIndex(d=>d.writeId===t);(0,te.hu)(e>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[e];n.allWrites.splice(e,1);let r=i.visible,s=!1,c=n.allWrites.length-1;for(;r&&c>=0;){const d=n.allWrites[c];d.visible&&(c>=e&&vE(d,i.path)?r=!1:ro(i.path,d.path)&&(s=!0)),c--}return!!r&&(s?(function eA(n){n.visibleWrites=Lb(n.allWrites,bE,On()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=C_(n.visibleWrites,i.path):ar(i.children,p=>{n.visibleWrites=C_(n.visibleWrites,vi(i.path,p))}),!0))}(n.pendingWriteTree_,t)){let s=new oi(null);return null!=i.snap?s=s.set(On(),!0):ar(i.children,c=>{s=s.set(new jn(c),!0)}),kh(n,new Rb(i.path,s,e))}return[]}function $p(n,t,e){return kh(n,new Sh({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,e))}function O_(n,t,e){const r=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(t,(c,d)=>{const _=qu(d,Qr(c,t));if(_)return _});return CE(r,t,s,e,!0)}function kh(n,t){return Bo(t,n.syncPointTree_,null,Bp(n.pendingWriteTree_,On()))}function Bo(n,t,e,i){if(fn(n.path))return Rh(n,t,e,i);{const r=t.get(On());null==e&&null!=r&&(e=qu(r,On()));let s=[];const c=gn(n.path),d=n.operationForChild(c),p=t.children.get(c);if(p&&d){const _=e?e.getImmediateChild(c):null,b=Hb(i,c);s=s.concat(Bo(d,p,_,b))}return r&&(s=s.concat(S_(r,n,i,e))),s}}function Rh(n,t,e,i){const r=t.get(On());null==e&&null!=r&&(e=qu(r,On()));let s=[];return t.children.inorderTraversal((c,d)=>{const p=e?e.getImmediateChild(c):null,_=Hb(i,c),b=n.operationForChild(c);b&&(s=s.concat(Rh(b,d,p,_)))}),r&&(s=s.concat(S_(r,n,i,e))),s}function gs(n,t){return n.tagToQueryMap.get(t)}function Wp(n){const t=n.indexOf("$");return(0,te.hu)(-1!==t&&t<n.length-1,"Bad queryKey."),{queryId:n.substr(t+1),path:new jn(n.substr(0,t))}}function Tc(n,t,e){const i=n.syncPointTree_.get(t);return(0,te.hu)(i,"Missing sync point for query tag that we're tracking"),S_(i,e,Bp(n.pendingWriteTree_,t),null)}class Ac{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new Ac(e)}node(){return this.node_}}class kc{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=vi(this.path_,t);return new kc(this.syncTree_,e)}node(){return O_(this.syncTree_,this.path_)}}const s0=function(n,t,e){return n&&"object"==typeof n?((0,te.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?OE(n[".sv"],t,e):"object"==typeof n[".sv"]?PE(n[".sv"],t):void(0,te.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},OE=function(n,t,e){if("timestamp"===n)return e.timestamp;(0,te.hu)(!1,"Unexpected server value: "+n)},PE=function(n,t,e){n.hasOwnProperty("increment")||(0,te.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&(0,te.hu)(!1,"Unexpected increment value: "+i);const r=t.node();if((0,te.hu)(null!==r&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const c=r.getValue();return"number"!=typeof c?i:c+i},P_=function(n,t,e){return N_(n,new Ac(t),e)};function N_(n,t,e){const i=n.getPriority().val(),r=s0(i,t.getImmediateChild(".priority"),e);let s;if(n.isLeafNode()){const c=n,d=s0(c.getValue(),t,e);return d!==c.getValue()||r!==c.getPriority().val()?new Ip(d,bi(r)):n}{const c=n;return s=c,r!==c.getPriority().val()&&(s=s.updatePriority(new Ip(r))),c.forEachChild(si,(d,p)=>{const _=N_(p,t.getImmediateChild(d),e);_!==p&&(s=s.updateImmediateChild(d,_))}),s}}class F_{constructor(t="",e=null,i={children:{},childCount:0}){this.name=t,this.parent=e,this.node=i}}function qp(n,t){let e=t instanceof jn?t:new jn(t),i=n,r=gn(e);for(;null!==r;){const s=(0,te.DV)(i.node.children,r)||{children:{},childCount:0};i=new F_(r,i,s),e=Kn(e),r=gn(e)}return i}function Rc(n){return n.node.value}function a0(n,t){n.node.value=t,u0(n)}function NE(n){return n.node.childCount>0}function L_(n,t){ar(n.node.children,(e,i)=>{t(new F_(e,n,i))})}function l0(n,t,e,i){e&&!i&&t(n),L_(n,r=>{l0(r,t,!0,i)}),e&&i&&t(n)}function Zu(n){return new jn(null===n.parent?n.name:Zu(n.parent)+"/"+n.name)}function u0(n){null!==n.parent&&function B_(n,t,e){const i=function FE(n){return void 0===Rc(n)&&!NE(n)}(e),r=(0,te.r3)(n.node.children,t);i&&r?(delete n.node.children[t],n.node.childCount--,u0(n)):!i&&!r&&(n.node.children[t]=e.node,n.node.childCount++,u0(n))}(n.parent,n.name,n)}const V_=/[\[\].#$\/\u0000-\u001F\u007F]/,d0=/[\[\].#$\u0000-\u001F\u007F]/,h0=10485760,Ku=function(n){return"string"==typeof n&&0!==n.length&&!V_.test(n)},Vh=function(n,t,e){const i=e instanceof jn?new ZD(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+Vu(i));if("function"==typeof t)throw new Error(n+"contains a function "+Vu(i)+" with contents = "+t.toString());if(Qg(t))throw new Error(n+"contains "+t.toString()+" "+Vu(i));if("string"==typeof t&&t.length>h0/3&&(0,te.ug)(t)>h0)throw new Error(n+"contains a string greater than "+h0+" utf8 bytes "+Vu(i)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let r=!1,s=!1;if(ar(t,(c,d)=>{if(".value"===c)r=!0;else if(".priority"!==c&&".sv"!==c&&(s=!0,!Ku(c)))throw new Error(n+" contains an invalid key ("+c+") "+Vu(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function HT(n,t){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(t),n.byteLength_+=(0,te.ug)(t),KD(n)})(i,c),Vh(n,d,i),function jT(n){const t=n.parts_.pop();n.byteLength_-=(0,te.ug)(t),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),r&&s)throw new Error(n+' contains ".value" child '+Vu(i)+" in addition to actual children.")}},p0=function(n,t){const e=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!Ku(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==e.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),function(n){return"string"==typeof n&&0!==n.length&&!d0.test(n)}(n)}(e))throw new Error((0,te.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class _A{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function es(n,t,e){(function Qp(n,t){let e=null;for(let i=0;i<t.length;i++){const r=t[i],s=r.getPath();null!==e&&!Ls(s,e.path)&&(n.eventLists_.push(e),e=null),null===e&&(e={events:[],path:s}),e.events.push(r)}e&&n.eventLists_.push(e)})(n,e),function j_(n,t){n.recursionDepth_++;let e=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];r&&(t(r.path)?(VE(n.eventLists_[i]),n.eventLists_[i]=null):e=!1)}e&&(n.eventLists_=[]),n.recursionDepth_--}(n,i=>ro(i,t)||ro(t,i))}function VE(n){for(let t=0;t<n.events.length;t++){const e=n.events[t];if(null!==e){n.events[t]=null;const i=e.getEventRunner();Rl&&Ri("event: "+e.toString()),vh(i)}}}class HE{constructor(t,e,i,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new _A,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Rp(),this.transactionQueueTree_=new F_,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function _0(n){const e=n.infoData_.getNode(new jn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function Uh(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:_0(n)})}function y0(n,t,e,i,r){n.dataUpdateCount++;const s=new jn(t);e=n.interceptServerDataCallback_?n.interceptServerDataCallback_(t,e):e;let c=[];if(r)if(i){const p=(0,te.UI)(e,_=>bi(_));c=function Gp(n,t,e,i){const r=gs(n,i);if(r){const s=Wp(r),c=s.path,d=s.queryId,p=Qr(c,t),_=oi.fromObject(e);return Tc(n,c,new Pp(gE(d),p,_))}return[]}(n.serverSyncTree_,s,p,r)}else{const p=bi(e);c=function gA(n,t,e,i){const r=gs(n,i);if(null!=r){const s=Wp(r),c=s.path,d=s.queryId,p=Qr(c,t);return Tc(n,c,new Sh(gE(d),p,e))}return[]}(n.serverSyncTree_,s,p,r)}else if(i){const p=(0,te.UI)(e,_=>bi(_));c=function pA(n,t,e){const i=oi.fromObject(e);return kh(n,new Pp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,i))}(n.serverSyncTree_,s,p)}else{const p=bi(e);c=$p(n.serverSyncTree_,s,p)}let d=s;c.length>0&&(d=ts(n,s)),es(n.eventQueue_,d,c)}function yA(n,t){v0(n,"connected",t),!1===t&&function CA(n){Qu(n,"onDisconnectEvents");const t=Uh(n),e=Rp();uE(n.onDisconnect_,On(),(r,s)=>{const c=function(n,t,e,i){return N_(t,new kc(e,n),i)}(r,s,n.serverSyncTree_,t);Op(e,r,c)});let i=[];uE(e,On(),(r,s)=>{i=i.concat($p(n.serverSyncTree_,r,s));const c=function z_(n,t){const e=Zu(w0(n,t)),i=qp(n.transactionQueueTree_,t);return function c0(n,t,e){let i=e?n:n.parent;for(;null!==i;){if(t(i))return!0;i=i.parent}}(i,r=>{$_(n,r)}),$_(n,i),l0(i,r=>{$_(n,r)}),e}(n,r);ts(n,c)}),n.onDisconnect_=Rp(),es(n.eventQueue_,On(),i)}(n)}function v0(n,t,e){const i=new jn("/.info/"+t),r=bi(e);n.infoData_.updateSnapshot(i,r);const s=$p(n.infoSyncTree_,i,r);es(n.eventQueue_,i,s)}function Xp(n){return n.nextWriteId_++}function Qu(n,...t){let e="";n.persistentConnection_&&(e=n.persistentConnection_.id+":"),Ri(e,...t)}function YE(n,t,e){return O_(n.serverSyncTree_,t,e)||ln.EMPTY_NODE}function Hh(n,t=n.transactionQueueTree_){if(t||_s(n,t),Rc(t)){const e=Ho(n,t);(0,te.hu)(e.length>0,"Sending zero length transaction queue"),e.every(r=>0===r.status)&&function C0(n,t,e){const i=e.map(_=>_.currentWriteId),r=YE(n,t,i);let s=r;const c=r.hash();for(let _=0;_<e.length;_++){const b=e[_];(0,te.hu)(0===b.status,"tryToSendTransactionQueue_: items in queue should all be run."),b.status=1,b.retryCount++;const E=Qr(t,b.path);s=s.updateChild(E,b.currentOutputSnapshotRaw)}const d=s.val(!0),p=t;n.server_.put(p.toString(),d,_=>{Qu(n,"transaction put response",{path:p.toString(),status:_});let b=[];if("ok"===_){const E=[];for(let T=0;T<e.length;T++)e[T].status=2,b=b.concat(Sc(n.serverSyncTree_,e[T].currentWriteId)),e[T].onComplete&&E.push(()=>e[T].onComplete(null,!0,e[T].currentOutputSnapshotResolved)),e[T].unwatcher();_s(n,qp(n.transactionQueueTree_,t)),Hh(n,n.transactionQueueTree_),es(n.eventQueue_,t,b);for(let T=0;T<E.length;T++)vh(E[T])}else{if("datastale"===_)for(let E=0;E<e.length;E++)e[E].status=3===e[E].status?4:0;else{xr("transaction at "+p.toString()+" failed: "+_);for(let E=0;E<e.length;E++)e[E].status=4,e[E].abortReason=_}ts(n,t)}},c)}(n,Zu(t),e)}else NE(t)&&L_(t,e=>{Hh(n,e)})}function ts(n,t){const e=w0(n,t),i=Zu(e);return function MA(n,t,e){if(0===t.length)return;const i=[];let r=[];const c=t.filter(d=>0===d.status).map(d=>d.currentWriteId);for(let d=0;d<t.length;d++){const p=t[d],_=Qr(e,p.path);let E,b=!1;if((0,te.hu)(null!==_,"rerunTransactionsUnderNode_: relativePath should not be null."),4===p.status)b=!0,E=p.abortReason,r=r.concat(Sc(n.serverSyncTree_,p.currentWriteId,!0));else if(0===p.status)if(p.retryCount>=25)b=!0,E="maxretry",r=r.concat(Sc(n.serverSyncTree_,p.currentWriteId,!0));else{const T=YE(n,p.path,c);p.currentInputSnapshot=T;const N=t[d].update(T.val());if(void 0!==N){Vh("transaction failed: Data returned ",N,p.path);let V=bi(N);"object"==typeof N&&null!=N&&(0,te.r3)(N,".priority")||(V=V.updatePriority(T.getPriority()));const re=p.currentWriteId,Ye=Uh(n),rt=P_(V,T,Ye);p.currentOutputSnapshotRaw=V,p.currentOutputSnapshotResolved=rt,p.currentWriteId=Xp(n),c.splice(c.indexOf(re),1),r=r.concat(t0(n.serverSyncTree_,p.path,rt,p.currentWriteId,p.applyLocally)),r=r.concat(Sc(n.serverSyncTree_,re,!0))}else b=!0,E="nodata",r=r.concat(Sc(n.serverSyncTree_,p.currentWriteId,!0))}es(n.eventQueue_,e,r),r=[],b&&(t[d].status=2,setTimeout(t[d].unwatcher,Math.floor(0)),t[d].onComplete&&i.push("nodata"===E?()=>t[d].onComplete(null,!1,t[d].currentInputSnapshot):()=>t[d].onComplete(new Error(E),!1,null)))}_s(n,n.transactionQueueTree_);for(let d=0;d<i.length;d++)vh(i[d]);Hh(n,n.transactionQueueTree_)}(n,Ho(n,e),i),i}function w0(n,t){let e,i=n.transactionQueueTree_;for(e=gn(t);null!==e&&void 0===Rc(i);)i=qp(i,e),e=gn(t=Kn(t));return i}function Ho(n,t){const e=[];return ao(n,t,e),e.sort((i,r)=>i.order-r.order),e}function ao(n,t,e){const i=Rc(t);if(i)for(let r=0;r<i.length;r++)e.push(i[r]);L_(t,r=>{ao(n,r,e)})}function _s(n,t){const e=Rc(t);if(e){let i=0;for(let r=0;r<e.length;r++)2!==e[r].status&&(e[i]=e[r],i++);e.length=i,a0(t,e.length>0?e:void 0)}L_(t,i=>{_s(n,i)})}function $_(n,t){const e=Rc(t);if(e){const i=[];let r=[],s=-1;for(let c=0;c<e.length;c++)3===e[c].status||(1===e[c].status?((0,te.hu)(s===c-1,"All SENT items should be at beginning of queue."),s=c,e[c].status=3,e[c].abortReason="set"):((0,te.hu)(0===e[c].status,"Unexpected transaction status in abort"),e[c].unwatcher(),r=r.concat(Sc(n.serverSyncTree_,e[c].currentWriteId,!0)),e[c].onComplete&&i.push(e[c].onComplete.bind(null,new Error("set"),!1,null))));-1===s?a0(t,void 0):e.length=s+1,es(n.eventQueue_,Zu(t),r);for(let c=0;c<i.length;c++)vh(i[c])}}const D0=function(n,t){const e=SA(n),i=e.namespace;return"firebase.com"===e.domain&&ka(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==e.domain&&ka("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&xr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new n_(e.host,e.secure,i,"ws"===e.scheme||"wss"===e.scheme,t,"",i!==e.subdomain),path:new jn(e.pathString)}},SA=function(n){let t="",e="",i="",r="",s="",c=!0,d="https",p=443;if("string"==typeof n){let _=n.indexOf("//");_>=0&&(d=n.substring(0,_-1),n=n.substring(_+2));let b=n.indexOf("/");-1===b&&(b=n.length);let E=n.indexOf("?");-1===E&&(E=n.length),t=n.substring(0,Math.min(b,E)),b<E&&(r=function IA(n){let t="";const e=n.split("/");for(let i=0;i<e.length;i++)if(e[i].length>0){let r=e[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}t+="/"+r}return t}(n.substring(b,E)));const T=function xA(n){const t={};"?"===n.charAt(0)&&(n=n.substring(1));for(const e of n.split("&")){if(0===e.length)continue;const i=e.split("=");2===i.length?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):xr(`Invalid query segment '${e}' in query '${n}'`)}return t}(n.substring(Math.min(n.length,E)));_=t.indexOf(":"),_>=0?(c="https"===d||"wss"===d,p=parseInt(t.substring(_+1),10)):_=t.length;const N=t.slice(0,_);if("localhost"===N.toLowerCase())e="localhost";else if(N.split(".").length<=2)e=N;else{const V=t.indexOf(".");i=t.substring(0,V).toLowerCase(),e=t.substring(V+1),s=i}"ns"in T&&(s=T.ns)}return{host:t,port:p,domain:e,subdomain:i,secure:c,scheme:d,pathString:r,namespace:s}};class Vs{constructor(t,e,i,r){this._repo=t,this._path=e,this._queryParams=i,this._orderByCalled=r}get key(){return fn(this._path)?null:wp(this._path)}get ref(){return new jo(this._repo,this._path)}get _queryIdentifier(){const t=cE(this._queryParams),e=Xg(t);return"{}"===e?"default":e}get _queryObject(){return cE(this._queryParams)}isEqual(t){if(!((t=(0,te.m9)(t))instanceof Vs))return!1;const e=this._repo===t._repo,i=Ls(this._path,t._path);return e&&i&&this._queryIdentifier===t._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function YD(n){let t="";for(let e=n.pieceNum_;e<n.pieces_.length;e++)""!==n.pieces_[e]&&(t+="/"+encodeURIComponent(String(n.pieces_[e])));return t||"/"}(this._path)}}class jo extends Vs{constructor(t,e){super(t,e,new oE,!1)}get parent(){const t=_b(this._path);return null===t?null:new jo(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}(function jp(n){(0,te.hu)(!Wu,"__referenceConstructor has already been defined"),Wu=n})(jo),function RE(n){(0,te.hu)(!A_,"__referenceConstructor has already been defined"),A_=n}(jo);const im={};class GA{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function jE(n,t,e){if(n.stats_=i_(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new v_(n.repoInfo_,(i,r,s,c)=>{y0(n,i,r,s,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>yA(n,!0),0);else{if(typeof e<"u"&&null!==e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,te.Pz)(e)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new Uu(n.repoInfo_,t,(i,r,s,c)=>{y0(n,i,r,s,c)},i=>{yA(n,i)},i=>{!function vA(n,t){ar(t,(e,i)=>{v0(n,e,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,e),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function kT(n,t){const e=n.toString();return rb[e]||(rb[e]=t()),rb[e]}(n.repoInfo_,()=>new aF(n.stats_,n.server_)),n.infoData_=new KT,n.infoSyncTree_=new k_({startListening:(i,r,s,c)=>{let d=[];const p=n.infoData_.getNode(i._path);return p.isEmpty()||(d=$p(n.infoSyncTree_,i._path,p),setTimeout(()=>{c("ok")},0)),d},stopListening:()=>{}}),v0(n,"connected",!1),n.serverSyncTree_=new k_({startListening:(i,r,s,c)=>(n.server_.listen(i,s,r,(d,p)=>{const _=c(d,p);es(n.eventQueue_,i._path,_)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new jo(this._repo,On())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function EF(n,t){const e=im[t];(!e||e[n.key]!==n)&&ka(`Database ${t}(${n.repoInfo_}) has already been deleted.`),function WE(n){n.persistentConnection_&&n.persistentConnection_.interrupt("repo_interrupt")}(n),delete e[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&ka("Cannot call "+t+" on a deleted database.")}}function q_(n=(0,ii.getApp)(),t){return(0,ii._getProvider)(n,"database").getImmediate({identifier:t})}Uu.prototype.simpleListen=function(n,t){this.sendRequest("q",{p:n},t)},Uu.prototype.echo=function(n,t){this.sendRequest("echo",{d:n},t)},function uM(n){(function eF(n){xD=n})(ii.SDK_VERSION),(0,ii._registerComponent)(new ps.wA("database",(t,{instanceIdentifier:e})=>function lM(n,t,e,i,r){let s=i||n.options.databaseURL;void 0===s&&(n.options.projectId||ka("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ri("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let p,_,c=D0(s,r),d=c.repoInfo;typeof process<"u"&&process.env&&(_=process.env.FIREBASE_DATABASE_EMULATOR_HOST),_?(p=!0,s=`http://${_}?ns=${d.namespace}`,c=D0(s,r),d=c.repoInfo):p=!c.repoInfo.secure;const b=r&&p?new bh(bh.OWNER):new ST(n.name,n.options,t);p0("Invalid Firebase Database URL",c),fn(c.path)||ka("Database URL must point to the root of a Firebase Database (not including a child path).");const E=function zt(n,t,e,i){let r=im[t.name];r||(r={},im[t.name]=r);let s=r[n.toURLString()];return s&&ka("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new HE(n,!1,e,i),r[n.toURLString()]=s,s}(d,n,b,new RD(n.name,e));return new GA(E,n)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),e),"PUBLIC").setMultipleInstances(!0)),(0,ii.registerVersion)(DT,"0.13.6",n),(0,ii.registerVersion)(DT,"0.13.6","esm2017")}();class Y_{constructor(t){return t}}const $h="database",S0=new l.OlP("angularfire2.database-instances");function hM(n){return(t,e)=>{const i=t.runOutsideAngular(()=>n(e));return new Y_(i)}}const fM={provide:class QA{constructor(){return(0,Zt.vb)($h)}},deps:[[new l.FiY,S0]]},pM={provide:Y_,useFactory:function Z_(n,t){const e=(0,Zt.JM)($h,n,t);return e&&new Y_(e)},deps:[[new l.FiY,S0],fs]};let XA=(()=>{class n{constructor(){(0,Mr.KN)("angularfire",Zt.q4.full,"rtdb")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[pM,fM]}),n})();function sm(n,...t){return{ngModule:XA,providers:[{provide:S0,useFactory:hM(n),multi:!0,deps:[l.R0b,l.zs3,Zt.HU,Da,[new l.FiY,Gg],[new l.FiY,no],...t]}]}}const rk=(0,Zt.u3)(q_,!0);var om=F(4986),ns=F(9751),_n=F(8996),Gh=F(3269);function vt(...n){const t=(0,Gh.yG)(n);return(0,_n.D)(n,t)}var am=F(8189);function lm(...n){return function fk(){return(0,am.J)(1)}()((0,_n.D)(n,(0,Gh.yG)(n)))}var Oi=F(4482);function lo(...n){const t=(0,Gh.yG)(n);return(0,Oi.e)((e,i)=>{(t?lm(n,e,t):lm(n,e)).subscribe(i)})}var Vi=F(5403);function A0(){return(0,Oi.e)((n,t)=>{let e,i=!1;n.subscribe((0,Vi.x)(t,r=>{const s=e;e=r,i&&t.next([s,r]),i=!0}))})}var Ct=F(4004);function _M(n,t,e,i,r){return(s,c)=>{let d=e,p=t,_=0;s.subscribe((0,Vi.x)(c,b=>{const E=_++;p=d?n(p,b,E):(d=!0,b),i&&c.next(p)},r&&(()=>{d&&c.next(p),c.complete()})))}}function cm(n,t){return(0,Oi.e)(_M(n,t,arguments.length>=2,!0))}var um=F(4671);function dm(n,t=um.y){return n=n??k0,(0,Oi.e)((e,i)=>{let r,s=!0;e.subscribe((0,Vi.x)(i,c=>{const d=t(c);(s||!n(r,d))&&(s=!1,r=d,i.next(c))}))})}function k0(n,t){return n===t}function Ti(n,t){return(0,Oi.e)((e,i)=>{let r=0;e.subscribe((0,Vi.x)(i,s=>n.call(t,s,r++)&&i.next(s)))})}var Tt,Us=F(2011),pk=(F(5881),F(3942)),R0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},jl={},Fc=Fc||{},tn=R0||self;function J_(){}function O0(n){var t=typeof n;return"array"==(t="object"!=t?t:n?Array.isArray(n)?"array":t:"null")||"object"==t&&"number"==typeof n.length}function Wh(n){var t=typeof n;return"object"==t&&null!=n||"function"==t}var N0="closure_uid_"+(1e9*Math.random()>>>0),F0=0;function mk(n,t,e){return n.call.apply(n.bind,arguments)}function yM(n,t,e){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(t,r)}}return function(){return n.apply(t,arguments)}}function lr(n,t,e){return(lr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?mk:yM).apply(null,arguments)}function hm(n,t){var e=Array.prototype.slice.call(arguments,1);return function(){var i=e.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function cr(n,t){function e(){}e.prototype=t.prototype,n.X=t.prototype,n.prototype=new e,n.prototype.constructor=n,n.Vb=function(i,r,s){for(var c=Array(arguments.length-2),d=2;d<arguments.length;d++)c[d-2]=arguments[d];return t.prototype[r].apply(i,c)}}function zl(){this.s=this.s,this.o=this.o}var gk={};zl.prototype.s=!1,zl.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function P0(n){return Object.prototype.hasOwnProperty.call(n,N0)&&n[N0]||(n[N0]=++F0)}(this);delete gk[n]}},zl.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const bM=Array.prototype.indexOf?function(n,t){return Array.prototype.indexOf.call(n,t,void 0)}:function(n,t){if("string"==typeof n)return"string"!=typeof t||1!=t.length?-1:n.indexOf(t,0);for(let e=0;e<n.length;e++)if(e in n&&n[e]===t)return e;return-1};function L0(n){const t=n.length;if(0<t){const e=Array(t);for(let i=0;i<t;i++)e[i]=n[i];return e}return[]}function CM(n,t){for(let e=1;e<arguments.length;e++){const i=arguments[e];if(O0(i)){const r=n.length||0,s=i.length||0;n.length=r+s;for(let c=0;c<s;c++)n[r+c]=i[c]}else n.push(i)}}function Tr(n,t){this.type=n,this.g=this.target=t,this.defaultPrevented=!1}Tr.prototype.h=function(){this.defaultPrevented=!0};var JF=function(){if(!tn.addEventListener||!Object.defineProperty)return!1;var n=!1,t=Object.defineProperty({},"passive",{get:function(){n=!0}});try{tn.addEventListener("test",J_,t),tn.removeEventListener("test",J_,t)}catch{}return n}();function fm(n){return/^[\s\xa0]*$/.test(n)}var wM=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function B0(n,t){return n<t?-1:n>t?1:0}function V0(){var n=tn.navigator;return n&&(n=n.userAgent)?n:""}function $l(n){return-1!=V0().indexOf(n)}function U0(n){return U0[" "](n),n}U0[" "]=J_;var ey,n,DM=$l("Opera"),Ju=$l("Trident")||$l("MSIE"),H0=$l("Edge"),j0=H0||Ju,EM=$l("Gecko")&&!(-1!=V0().toLowerCase().indexOf("webkit")&&!$l("Edge"))&&!($l("Trident")||$l("MSIE"))&&!$l("Edge"),yk=-1!=V0().toLowerCase().indexOf("webkit")&&!$l("Edge");function MM(){var n=tn.document;return n?n.documentMode:void 0}e:{var z0="",$0=(n=V0(),EM?/rv:([^\);]+)(\)|;)/.exec(n):H0?/Edge\/([\d\.]+)/.exec(n):Ju?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):yk?/WebKit\/(\S+)/.exec(n):DM?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if($0&&(z0=$0?$0[1]:""),Ju){var ed=MM();if(null!=ed&&ed>parseFloat(z0)){ey=String(ed);break e}}ey=z0}var IM={};var SM=tn.document&&Ju&&(MM()||parseInt(ey,10))||void 0;function qh(n,t){if(Tr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var e=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=t,t=n.relatedTarget){if(EM){e:{try{U0(t.nodeName);var r=!0;break e}catch{}r=!1}r||(t=null)}}else"mouseover"==e?t=n.fromElement:"mouseout"==e&&(t=n.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:vk[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&qh.X.h.call(this)}}cr(qh,Tr);var vk={2:"touch",3:"pen",4:"mouse"};qh.prototype.h=function(){qh.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var ny="closure_listenable_"+(1e6*Math.random()|0),TM=0;function bk(n,t,e,i,r){this.listener=n,this.proxy=null,this.src=t,this.type=e,this.capture=!!i,this.ha=r,this.key=++TM,this.ba=this.ea=!1}function iy(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function W0(n,t,e){for(const i in n)t.call(e,n[i],i,n)}function AM(n){const t={};for(const e in n)t[e]=n[e];return t}const Yh="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function kM(n,t){let e,i;for(let r=1;r<arguments.length;r++){for(e in i=arguments[r],i)n[e]=i[e];for(let s=0;s<Yh.length;s++)e=Yh[s],Object.prototype.hasOwnProperty.call(i,e)&&(n[e]=i[e])}}function Zh(n){this.src=n,this.g={},this.h=0}function co(n,t){var e=t.type;if(e in n.g){var s,i=n.g[e],r=bM(i,t);(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(iy(t),0==n.g[e].length&&(delete n.g[e],n.h--))}}function q0(n,t,e,i){for(var r=0;r<n.length;++r){var s=n[r];if(!s.ba&&s.listener==t&&s.capture==!!e&&s.ha==i)return r}return-1}Zh.prototype.add=function(n,t,e,i,r){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var c=q0(n,t,i,r);return-1<c?(t=n[c],e||(t.ea=!1)):((t=new bk(t,this.src,s,!!i,r)).ea=e,n.push(t)),t};var Kh="closure_lm_"+(1e6*Math.random()|0),td={};function RM(n,t,e,i,r){if(i&&i.once)return pm(n,t,e,i,r);if(Array.isArray(t)){for(var s=0;s<t.length;s++)RM(n,t[s],e,i,r);return null}return e=sy(e),n&&n[ny]?n.N(t,e,Wh(i)?!!i.capture:!!i,r):OM(n,t,e,!1,i,r)}function OM(n,t,e,i,r,s){if(!t)throw Error("Invalid event type");var c=Wh(r)?!!r.capture:!!r,d=ry(n);if(d||(n[Kh]=d=new Zh(n)),(e=d.add(t,e,i,c,s)).proxy)return e;if(i=function Ck(){const t=NM;return function n(e){return t.call(n.src,n.listener,e)}}(),e.proxy=i,i.src=n,i.listener=e,n.addEventListener)JF||(r=c),void 0===r&&(r=!1),n.addEventListener(t.toString(),i,r);else if(n.attachEvent)n.attachEvent(PM(t.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return e}function pm(n,t,e,i,r){if(Array.isArray(t)){for(var s=0;s<t.length;s++)pm(n,t[s],e,i,r);return null}return e=sy(e),n&&n[ny]?n.O(t,e,Wh(i)?!!i.capture:!!i,r):OM(n,t,e,!0,i,r)}function mm(n,t,e,i,r){if(Array.isArray(t))for(var s=0;s<t.length;s++)mm(n,t[s],e,i,r);else i=Wh(i)?!!i.capture:!!i,e=sy(e),n&&n[ny]?(n=n.i,(t=String(t).toString())in n.g&&-1<(e=q0(s=n.g[t],e,i,r))&&(iy(s[e]),Array.prototype.splice.call(s,e,1),0==s.length&&(delete n.g[t],n.h--))):n&&(n=ry(n))&&(t=n.g[t.toString()],n=-1,t&&(n=q0(t,e,i,r)),(e=-1<n?t[n]:null)&&Y0(e))}function Y0(n){if("number"!=typeof n&&n&&!n.ba){var t=n.src;if(t&&t[ny])co(t.i,n);else{var e=n.type,i=n.proxy;t.removeEventListener?t.removeEventListener(e,i,n.capture):t.detachEvent?t.detachEvent(PM(e),i):t.addListener&&t.removeListener&&t.removeListener(i),(e=ry(t))?(co(e,n),0==e.h&&(e.src=null,t[Kh]=null)):iy(n)}}}function PM(n){return n in td?td[n]:td[n]="on"+n}function NM(n,t){if(n.ba)n=!0;else{t=new qh(t,this);var e=n.listener,i=n.ha||n.src;n.ea&&Y0(n),n=e.call(i,t)}return n}function ry(n){return(n=n[Kh])instanceof Zh?n:null}var gm="__closure_events_fn_"+(1e9*Math.random()>>>0);function sy(n){return"function"==typeof n?n:(n[gm]||(n[gm]=function(t){return n.handleEvent(t)}),n[gm])}function ur(){zl.call(this),this.i=new Zh(this),this.P=this,this.I=null}function Ar(n,t){var e,i=n.I;if(i)for(e=[];i;i=i.I)e.push(i);if(n=n.P,i=t.type||t,"string"==typeof t)t=new Tr(t,n);else if(t instanceof Tr)t.target=t.target||n;else{var r=t;kM(t=new Tr(i,n),r)}if(r=!0,e)for(var s=e.length-1;0<=s;s--){var c=t.g=e[s];r=Z0(c,i,!0,t)&&r}if(r=Z0(c=t.g=n,i,!0,t)&&r,r=Z0(c,i,!1,t)&&r,e)for(s=0;s<e.length;s++)r=Z0(c=t.g=e[s],i,!1,t)&&r}function Z0(n,t,e,i){if(!(t=n.i.g[String(t)]))return!0;t=t.concat();for(var r=!0,s=0;s<t.length;++s){var c=t[s];if(c&&!c.ba&&c.capture==e){var d=c.listener,p=c.ha||c.src;c.ea&&co(n.i,c),r=!1!==d.call(p,i)&&r}}return r&&!i.defaultPrevented}cr(ur,zl),ur.prototype[ny]=!0,ur.prototype.removeEventListener=function(n,t,e,i){mm(this,n,t,e,i)},ur.prototype.M=function(){if(ur.X.M.call(this),this.i){var t,n=this.i;for(t in n.g){for(var e=n.g[t],i=0;i<e.length;i++)iy(e[i]);delete n.g[t],n.h--}}this.I=null},ur.prototype.N=function(n,t,e,i){return this.i.add(String(n),t,!1,e,i)},ur.prototype.O=function(n,t,e,i){return this.i.add(String(n),t,!0,e,i)};var _m=tn.JSON.stringify;function K0(){var n=ly;let t=null;return n.g&&(t=n.g,n.g=n.g.next,n.g||(n.h=null),t.next=null),t}var X0,oy=new class{constructor(n,t){this.i=n,this.j=t,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Q0,n=>n.reset());class Q0{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function wk(n){tn.setTimeout(()=>{throw n},0)}function LM(n,t){X0||function Dk(){var n=tn.Promise.resolve(void 0);X0=function(){n.then(BM)}}(),ay||(X0(),ay=!0),ly.add(n,t)}var ay=!1,ly=new class FM{constructor(){this.h=this.g=null}add(t,e){const i=oy.get();i.set(t,e),this.h?this.h.next=i:this.g=i,this.h=i}};function BM(){for(var n;n=K0();){try{n.h.call(n.g)}catch(e){wk(e)}var t=oy;t.j(n),100>t.h&&(t.h++,n.next=t.g,t.g=n)}ay=!1}function ym(n,t){ur.call(this),this.h=n||1,this.g=t||tn,this.j=lr(this.kb,this),this.l=Date.now()}function cy(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function uy(n,t,e){if("function"==typeof n)e&&(n=lr(n,e));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=lr(n.handleEvent,n)}return 2147483647<Number(t)?-1:tn.setTimeout(n,t||0)}function VM(n){n.g=uy(()=>{n.g=null,n.i&&(n.i=!1,VM(n))},n.j);const t=n.h;n.h=null,n.m.apply(null,t)}cr(ym,ur),(Tt=ym.prototype).ca=!1,Tt.R=null,Tt.kb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Ar(this,"tick"),this.ca&&(cy(this),this.start()))}},Tt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Tt.M=function(){ym.X.M.call(this),cy(this),delete this.g};class UM extends zl{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:VM(this)}M(){super.M(),this.g&&(tn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qh(n){zl.call(this),this.h=n,this.g={}}cr(Qh,zl);var HM=[];function J0(n,t,e,i){Array.isArray(e)||(e&&(HM[0]=e.toString()),e=HM);for(var r=0;r<e.length;r++){var s=RM(t,e[r],i||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function jM(n){W0(n.g,function(t,e){this.g.hasOwnProperty(e)&&Y0(t)},n),n.g={}}function dr(){this.g=!0}function Jh(n,t,e,i){n.info(function(){return"XMLHTTP TEXT ("+t+"): "+function tL(n,t){if(!n.g)return t;if(!t)return null;try{var e=JSON.parse(t);if(e)for(n=0;n<e.length;n++)if(Array.isArray(e[n])){var i=e[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var c=1;c<r.length;c++)r[c]=""}}}return _m(e)}catch{return t}}(n,e)+(i?" "+i:"")})}Qh.prototype.M=function(){Qh.X.M.call(this),jM(this)},Qh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},dr.prototype.Aa=function(){this.g=!1},dr.prototype.info=function(){};var Lc={},eC=null;function Bc(){return eC=eC||new ur}function zM(n){Tr.call(this,Lc.Oa,n)}function nd(n){const t=Bc();Ar(t,new zM(t,n))}function $M(n,t){Tr.call(this,Lc.STAT_EVENT,n),this.stat=t}function jr(n){const t=Bc();Ar(t,new $M(t,n))}function GM(n,t){Tr.call(this,Lc.Pa,n),this.size=t}function vm(n,t){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return tn.setTimeout(function(){n()},t)}Lc.Oa="serverreachability",cr(zM,Tr),Lc.STAT_EVENT="statevent",cr($M,Tr),Lc.Pa="timingevent",cr(GM,Tr);var dy={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,La:7,TIMEOUT:8,Cb:9},hy={qb:"complete",Mb:"success",Ma:"error",La:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function fy(){}function bm(){}fy.prototype.h=null;var nC,id={OPEN:"a",pb:"b",Ma:"c",Bb:"d"};function WM(){Tr.call(this,"d")}function py(){Tr.call(this,"c")}function Cm(){}function Va(n,t,e,i){this.l=n,this.j=t,this.m=e,this.U=i||1,this.S=new Qh(this),this.O=YM,this.T=new ym(n=j0?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new qM}function qM(){this.i=null,this.g="",this.h=!1}cr(WM,Tr),cr(py,Tr),cr(Cm,fy),Cm.prototype.g=function(){return new XMLHttpRequest},Cm.prototype.i=function(){return{}},nC=new Cm;var YM=45e3,wm={},iC={};function rC(n,t,e){n.K=1,n.v=lC(Ua(t)),n.s=e,n.P=!0,Mk(n,null)}function Mk(n,t){n.F=Date.now(),ef(n),n.A=Ua(n.v);var e=n.A,i=n.U;Array.isArray(i)||(i=[String(i)]),uC(e.i,"t",i),n.C=0,e=n.l.H,n.h=new qM,n.g=xy(n.l,e?t:null,!n.s),0<n.N&&(n.L=new UM(lr(n.Ka,n,n.g),n.N)),J0(n.S,n.g,"readystatechange",n.hb),t=n.H?AM(n.H):{},n.s?(n.u||(n.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,t)):(n.u="GET",n.g.da(n.A,n.u,null,t)),nd(1),function Xh(n,t,e,i,r,s){n.info(function(){if(n.g)if(s)for(var c="",d=s.split("&"),p=0;p<d.length;p++){var _=d[p].split("=");if(1<_.length){var b=_[0];_=_[1];var E=b.split("_");c=2<=E.length&&"type"==E[1]?c+(b+"=")+_+"&":c+(b+"=redacted&")}}else c=null;else c=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+t+"\n"+e+"\n"+c})}(n.j,n.u,n.A,n.m,n.U,n.s)}function ZM(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function KM(n,t,e){let r,i=!0;for(;!n.I&&n.C<e.length;){if(r=Ik(n,e),r==iC){4==t&&(n.o=4,jr(14),i=!1),Jh(n.j,n.m,null,"[Incomplete Response]");break}if(r==wm){n.o=4,jr(15),Jh(n.j,n.m,e,"[Invalid Chunk]"),i=!1;break}Jh(n.j,n.m,r,null),oC(n,r)}ZM(n)&&r!=iC&&r!=wm&&(n.h.g="",n.C=0),4!=t||0!=e.length||n.h.h||(n.o=1,jr(16),i=!1),n.i=n.i&&i,i?0<e.length&&!n.$&&(n.$=!0,(t=n.l).g==n&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+e.length),DC(t),t.K=!0,jr(11))):(Jh(n.j,n.m,e,"[Invalid Chunked Response]"),Vc(n),tf(n))}function Ik(n,t){var e=n.C,i=t.indexOf("\n",e);return-1==i?iC:(e=Number(t.substring(e,i)),isNaN(e)?wm:(i+=1)+e>t.length?iC:(t=t.substr(i,e),n.C=i+e,t))}function ef(n){n.V=Date.now()+n.O,sC(n,n.O)}function sC(n,t){if(null!=n.B)throw Error("WatchDog timer not null");n.B=vm(lr(n.fb,n),t)}function my(n){n.B&&(tn.clearTimeout(n.B),n.B=null)}function tf(n){0==n.l.G||n.I||Nk(n.l,n)}function Vc(n){my(n);var t=n.L;t&&"function"==typeof t.na&&t.na(),n.L=null,cy(n.T),jM(n.S),n.g&&(t=n.g,n.g=null,t.abort(),t.na())}function oC(n,t){try{var e=n.l;if(0!=e.G&&(e.g==n||hC(e.h,n)))if(!n.J&&hC(e.h,n)&&3==e.G){try{var i=e.Fa.g.parse(t)}catch{i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!e.u){if(e.g){if(!(e.g.F+3e3<n.F))break e;Am(e),sf(e)}wC(e),jr(18)}}else e.Ba=r[1],0<e.Ba-e.T&&37500>r[2]&&e.L&&0==e.A&&!e.v&&(e.v=vm(lr(e.bb,e),6e3));if(1>=iI(e.h)&&e.ja){try{e.ja()}catch{}e.ja=void 0}}else rd(e,11)}else if((n.J||e.g==n)&&Am(e),!fm(t))for(r=e.Fa.g.parse(t),t=0;t<r.length;t++){let _=r[t];if(e.T=_[0],_=_[1],2==e.G)if("c"==_[0]){e.I=_[1],e.ka=_[2];const b=_[3];null!=b&&(e.ma=b,e.j.info("VER="+e.ma));const E=_[4];null!=E&&(e.Ca=E,e.j.info("SVER="+e.Ca));const T=_[5];null!=T&&"number"==typeof T&&0<T&&(e.J=i=1.5*T,e.j.info("backChannelRequestTimeoutMs_="+i)),i=e;const N=n.g;if(N){const V=N.g?N.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(V){var s=i.h;s.g||-1==V.indexOf("spdy")&&-1==V.indexOf("quic")&&-1==V.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(fC(s,s.h),s.h=null))}if(i.D){const K=N.g?N.g.getResponseHeader("X-HTTP-Session-Id"):null;K&&(i.za=K,pi(i.F,i.D,K))}}e.G=3,e.l&&e.l.xa(),e.$&&(e.P=Date.now()-n.F,e.j.info("Handshake RTT: "+e.P+"ms"));var c=n;if((i=e).sa=Fk(i,i.H?i.ka:null,i.V),c.J){Mm(i.h,c);var d=c,p=i.J;p&&d.setTimeout(p),d.B&&(my(d),ef(d)),i.g=c}else cI(i);0<e.i.length&&Sm(e)}else"stop"!=_[0]&&"close"!=_[0]||rd(e,7);else 3==e.G&&("stop"==_[0]||"close"==_[0]?"stop"==_[0]?rd(e,7):bC(e):"noop"!=_[0]&&e.l&&e.l.wa(_),e.A=0)}nd(4)}catch{}}function XM(n,t){if(n.forEach&&"function"==typeof n.forEach)n.forEach(t,void 0);else if(O0(n)||"string"==typeof n)Array.prototype.forEach.call(n,t,void 0);else for(var e=function QM(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(O0(n)||"string"==typeof n){var t=[];n=n.length;for(var e=0;e<n;e++)t.push(e);return t}t=[],e=0;for(const i in n)t[e++]=i;return t}}}(n),i=function xk(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(O0(n)){for(var t=[],e=n.length,i=0;i<e;i++)t.push(n[i]);return t}for(i in t=[],e=0,n)t[e++]=n[i];return t}(n),r=i.length,s=0;s<r;s++)t.call(void 0,i[s],e&&e[s],n)}(Tt=Va.prototype).setTimeout=function(n){this.O=n},Tt.hb=function(n){n=n.target;const t=this.L;t&&3==Ha(n)?t.l():this.Ka(n)},Tt.Ka=function(n){try{if(n==this.g)e:{const b=Ha(this.g);var t=this.g.Ea();const E=this.g.aa();if(!(3>b)&&(3!=b||j0||this.g&&(this.h.h||this.g.fa()||lI(this.g)))){this.I||4!=b||7==t||nd(8==t||0>=E?3:2),my(this);var e=this.g.aa();this.Y=e;t:if(ZM(this)){var i=lI(this.g);n="";var r=i.length,s=4==Ha(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Vc(this),tf(this);var c="";break t}this.h.i=new tn.TextDecoder}for(t=0;t<r;t++)this.h.h=!0,n+=this.h.i.decode(i[t],{stream:s&&t==r-1});i.splice(0,r),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.fa();if(this.i=200==e,function Ek(n,t,e,i,r,s,c){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+t+"\n"+e+"\n"+s+" "+c})}(this.j,this.u,this.A,this.m,this.U,b,e),this.i){if(this.Z&&!this.J){t:{if(this.g){var d,p=this.g;if((d=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!fm(d)){var _=d;break t}}_=null}if(!(e=_)){this.i=!1,this.o=3,jr(12),Vc(this),tf(this);break e}Jh(this.j,this.m,e,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,oC(this,e)}this.P?(KM(this,b,c),j0&&this.i&&3==b&&(J0(this.S,this.T,"tick",this.gb),this.T.start())):(Jh(this.j,this.m,c,null),oC(this,c)),4==b&&Vc(this),this.i&&!this.I&&(4==b?Nk(this.l,this):(this.i=!1,ef(this)))}else 400==e&&0<c.indexOf("Unknown SID")?(this.o=3,jr(12)):(this.o=0,jr(13)),Vc(this),tf(this)}}}catch{}},Tt.gb=function(){if(this.g){var n=Ha(this.g),t=this.g.fa();this.C<t.length&&(my(this),KM(this,n,t),this.i&&4!=n&&ef(this))}},Tt.cancel=function(){this.I=!0,Vc(this)},Tt.fb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function eL(n,t){n.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(nd(3),jr(17)),Vc(this),this.o=2,tf(this)):sC(this,this.V-n)};var aC=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Uc(n,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Uc){this.h=void 0!==t?t:n.h,gy(this,n.j),this.s=n.s,this.g=n.g,_y(this,n.m),this.l=n.l,t=n.i;var e=new Cy;e.i=t.i,t.g&&(e.g=new Map(t.g),e.h=t.h),Sk(this,e),this.o=n.o}else n&&(e=String(n).match(aC))?(this.h=!!t,gy(this,e[1]||"",!0),this.s=yy(e[2]||""),this.g=yy(e[3]||"",!0),_y(this,e[4]),this.l=yy(e[5]||"",!0),Sk(this,e[6]||"",!0),this.o=yy(e[7]||"")):(this.h=!!t,this.i=new Cy(null,this.h))}function Ua(n){return new Uc(n)}function gy(n,t,e){n.j=e?yy(t,!0):t,n.j&&(n.j=n.j.replace(/:$/,""))}function _y(n,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);n.m=t}else n.m=null}function Sk(n,t,e){t instanceof Cy?(n.i=t,function dC(n,t){t&&!n.j&&(Gl(n),n.i=null,n.g.forEach(function(e,i){var r=i.toLowerCase();i!=r&&(Dm(this,i),uC(this,r,e))},n)),n.j=t}(n.i,n.h)):(e||(t=vy(t,sL)),n.i=new Cy(t,n.h))}function pi(n,t,e){n.i.set(t,e)}function lC(n){return pi(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function yy(n,t){return n?t?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function vy(n,t,e){return"string"==typeof n?(n=encodeURI(n).replace(t,nL),e&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function nL(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Uc.prototype.toString=function(){var n=[],t=this.j;t&&n.push(vy(t,Tk,!0),":");var e=this.g;return(e||"file"==t)&&(n.push("//"),(t=this.s)&&n.push(vy(t,Tk,!0),"@"),n.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.m)&&n.push(":",String(e))),(e=this.l)&&(this.g&&"/"!=e.charAt(0)&&n.push("/"),n.push(vy(e,"/"==e.charAt(0)?rL:iL,!0))),(e=this.i.toString())&&n.push("?",e),(e=this.o)&&n.push("#",vy(e,by)),n.join("")};var Tk=/[#\/\?@]/g,iL=/[#\?:]/g,rL=/[#\?]/g,sL=/[#\?@]/g,by=/#/g;function Cy(n,t){this.h=this.g=null,this.i=n||null,this.j=!!t}function Gl(n){n.g||(n.g=new Map,n.h=0,n.i&&function JM(n,t){if(n){n=n.split("&");for(var e=0;e<n.length;e++){var i=n[e].indexOf("="),r=null;if(0<=i){var s=n[e].substring(0,i);r=n[e].substring(i+1)}else s=n[e];t(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.i,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function Dm(n,t){Gl(n),t=Em(n,t),n.g.has(t)&&(n.i=null,n.h-=n.g.get(t).length,n.g.delete(t))}function cC(n,t){return Gl(n),t=Em(n,t),n.g.has(t)}function uC(n,t,e){Dm(n,t),0<e.length&&(n.i=null,n.g.set(Em(n,t),L0(e)),n.h+=e.length)}function Em(n,t){return t=String(t),n.j&&(t=t.toLowerCase()),t}function tI(n){this.l=n||nI,n=tn.PerformanceNavigationTiming?0<(n=tn.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(tn.g&&tn.g.Ga&&tn.g.Ga()&&tn.g.Ga().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Tt=Cy.prototype).add=function(n,t){Gl(this),this.i=null,n=Em(this,n);var e=this.g.get(n);return e||this.g.set(n,e=[]),e.push(t),this.h+=1,this},Tt.forEach=function(n,t){Gl(this),this.g.forEach(function(e,i){e.forEach(function(r){n.call(t,r,i,this)},this)},this)},Tt.oa=function(){Gl(this);const n=Array.from(this.g.values()),t=Array.from(this.g.keys()),e=[];for(let i=0;i<t.length;i++){const r=n[i];for(let s=0;s<r.length;s++)e.push(t[i])}return e},Tt.W=function(n){Gl(this);let t=[];if("string"==typeof n)cC(this,n)&&(t=t.concat(this.g.get(Em(this,n))));else{n=Array.from(this.g.values());for(let e=0;e<n.length;e++)t=t.concat(n[e])}return t},Tt.set=function(n,t){return Gl(this),this.i=null,cC(this,n=Em(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[t]),this.h+=1,this},Tt.get=function(n,t){return n&&0<(n=this.W(n)).length?String(n[0]):t},Tt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],t=Array.from(this.g.keys());for(var e=0;e<t.length;e++){var i=t[e];const s=encodeURIComponent(String(i)),c=this.W(i);for(i=0;i<c.length;i++){var r=s;""!==c[i]&&(r+="="+encodeURIComponent(String(c[i]))),n.push(r)}}return this.i=n.join("&")};var nI=10;function Ak(n){return!!n.h||!!n.g&&n.g.size>=n.j}function iI(n){return n.h?1:n.g?n.g.size:0}function hC(n,t){return n.h?n.h==t:!!n.g&&n.g.has(t)}function fC(n,t){n.g?n.g.add(t):n.h=t}function Mm(n,t){n.h&&n.h==t?n.h=null:n.g&&n.g.has(t)&&n.g.delete(t)}function rI(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let t=n.i;for(const e of n.g.values())t=t.concat(e.D);return t}return L0(n.i)}function sI(){}function oL(){this.g=new sI}function aL(n,t,e){const i=e||"";try{XM(n,function(r,s){let c=r;Wh(r)&&(c=_m(r)),t.push(i+s+"="+encodeURIComponent(c))})}catch(r){throw t.push(i+"type="+encodeURIComponent("_badmap")),r}}function wy(n,t,e,i,r){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,r(i)}catch{}}function Im(n){this.l=n.$b||null,this.j=n.ib||!1}function pC(n,t){ur.call(this),this.D=n,this.u=t,this.m=void 0,this.readyState=mC,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}tI.prototype.cancel=function(){if(this.i=rI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},sI.prototype.stringify=function(n){return tn.JSON.stringify(n,void 0)},sI.prototype.parse=function(n){return tn.JSON.parse(n,void 0)},cr(Im,fy),Im.prototype.g=function(){return new pC(this.l,this.j)},Im.prototype.i=function(n){return function(){return n}}({}),cr(pC,ur);var mC=0;function gC(n){n.j.read().then(n.Sa.bind(n)).catch(n.ga.bind(n))}function nf(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Dy(n)}function Dy(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Tt=pC.prototype).open=function(n,t){if(this.readyState!=mC)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=t,this.readyState=1,Dy(this)},Tt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(t.body=n),(this.D||tn).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ga.bind(this))},Tt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,nf(this)),this.readyState=mC},Tt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Dy(this)),this.g&&(this.readyState=3,Dy(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ga.bind(this));else if(typeof tn.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;gC(this)}else n.text().then(this.Ua.bind(this),this.ga.bind(this))},Tt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var t=n.value?n.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!n.done}))&&(this.response=this.responseText+=t)}n.done?nf(this):Dy(this),3==this.readyState&&gC(this)}},Tt.Ua=function(n){this.g&&(this.response=this.responseText=n,nf(this))},Tt.Ta=function(n){this.g&&(this.response=n,nf(this))},Tt.ga=function(){this.g&&nf(this)},Tt.setRequestHeader=function(n,t){this.v.append(n,t)},Tt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Tt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],t=this.h.entries();for(var e=t.next();!e.done;)n.push((e=e.value)[0]+": "+e[1]),e=t.next();return n.join("\r\n")},Object.defineProperty(pC.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var zo=tn.JSON.parse;function Wi(n){ur.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Ey,this.K=this.L=!1}cr(Wi,ur);var Ey="",Rk=/^https?$/i,uo=["POST","PUT"];function My(n,t){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=t,n.m=5,oI(n),rf(n)}function oI(n){n.D||(n.D=!0,Ar(n,"complete"),Ar(n,"error"))}function aI(n){if(n.h&&typeof Fc<"u"&&(!n.C[1]||4!=Ha(n)||2!=n.aa()))if(n.v&&4==Ha(n))uy(n.Ha,0,n);else if(Ar(n,"readystatechange"),4==Ha(n)){n.h=!1;try{const d=n.aa();e:switch(d){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var e;if(!(e=t)){var i;if(i=0===d){var r=String(n.H).match(aC)[1]||null;if(!r&&tn.self&&tn.self.location){var s=tn.self.location.protocol;r=s.substr(0,s.length-1)}i=!Rk.test(r?r.toLowerCase():"")}e=i}if(e)Ar(n,"complete"),Ar(n,"success");else{n.m=6;try{var c=2<Ha(n)?n.g.statusText:""}catch{c=""}n.j=c+" ["+n.aa()+"]",oI(n)}}finally{rf(n)}}}function rf(n,t){if(n.g){_C(n);const e=n.g,i=n.C[0]?J_:null;n.g=null,n.C=null,t||Ar(n,"ready");try{e.onreadystatechange=i}catch{}}}function _C(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(tn.clearTimeout(n.A),n.A=null)}function Ha(n){return n.g?n.g.readyState:0}function lI(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Ey:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function yC(n){let t="";return W0(n,function(e,i){t+=i,t+=":",t+=e,t+="\r\n"}),t}function Iy(n,t,e){e:{for(i in e){var i=!1;break e}i=!0}i||(e=yC(e),"string"==typeof n?null!=e&&encodeURIComponent(String(e)):pi(n,t,e))}function xm(n,t,e){return e&&e.internalChannelParams&&e.internalChannelParams[n]||t}function vC(n){this.Ca=0,this.i=[],this.j=new dr,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.$a=this.U=0,this.Ya=xm("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Wa=xm("baseRetryDelayMs",5e3,n),this.ab=xm("retryDelaySeedMs",1e4,n),this.Za=xm("forwardChannelMaxRetries",2,n),this.ta=xm("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Yb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new tI(n&&n.concurrentRequestLimit),this.Fa=new oL,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Xa=n&&n.Wb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function bC(n){if(Wl(n),3==n.G){var t=n.U++,e=Ua(n.F);pi(e,"SID",n.I),pi(e,"RID",t),pi(e,"TYPE","terminate"),Tm(n,e),(t=new Va(n,n.j,t,void 0)).K=2,t.v=lC(Ua(e)),e=!1,tn.navigator&&tn.navigator.sendBeacon&&(e=tn.navigator.sendBeacon(t.v.toString(),"")),!e&&tn.Image&&((new Image).src=t.v,e=!0),e||(t.g=xy(t.l,null),t.g.da(t.v)),t.F=Date.now(),ef(t)}MC(n)}function sf(n){n.g&&(DC(n),n.g.cancel(),n.g=null)}function Wl(n){sf(n),n.u&&(tn.clearTimeout(n.u),n.u=null),Am(n),n.h.cancel(),n.m&&("number"==typeof n.m&&tn.clearTimeout(n.m),n.m=null)}function Sm(n){Ak(n.h)||n.m||(n.m=!0,LM(n.Ja,n),n.C=0)}function ja(n,t){var e;e=t?t.m:n.U++;const i=Ua(n.F);pi(i,"SID",n.I),pi(i,"RID",e),pi(i,"AID",n.T),Tm(n,i),n.o&&n.s&&Iy(i,n.o,n.s),e=new Va(n,n.j,e,n.C+1),null===n.o&&(e.H=n.s),t&&(n.i=t.D.concat(n.i)),t=Pk(n,e,1e3),e.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),fC(n.h,e),rC(e,i,t)}function Tm(n,t){n.ia&&W0(n.ia,function(e,i){pi(t,i,e)}),n.l&&XM({},function(e,i){pi(t,i,e)})}function Pk(n,t,e){e=Math.min(n.i.length,e);var i=n.l?lr(n.l.Qa,n.l,n):null;e:{var r=n.i;let s=-1;for(;;){const c=["count="+e];-1==s?0<e?(s=r[0].h,c.push("ofs="+s)):s=0:c.push("ofs="+s);let d=!0;for(let p=0;p<e;p++){let _=r[p].h;const b=r[p].g;if(_-=s,0>_)s=Math.max(0,r[p].h-100),d=!1;else try{aL(b,c,"req"+_+"_")}catch{i&&i(b)}}if(d){i=c.join("&");break e}}}return n=n.i.splice(0,e),t.D=n,i}function cI(n){n.g||n.u||(n.Z=1,LM(n.Ia,n),n.A=0)}function wC(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=vm(lr(n.Ia,n),EC(n,n.A)),n.A++,0))}function DC(n){null!=n.B&&(tn.clearTimeout(n.B),n.B=null)}function uI(n){n.g=new Va(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var t=Ua(n.sa);pi(t,"RID","rpc"),pi(t,"SID",n.I),pi(t,"CI",n.L?"0":"1"),pi(t,"AID",n.T),pi(t,"TYPE","xmlhttp"),Tm(n,t),n.o&&n.s&&Iy(t,n.o,n.s),n.J&&n.g.setTimeout(n.J);var e=n.g;n=n.ka,e.K=1,e.v=lC(Ua(t)),e.s=null,e.P=!0,Mk(e,n)}function Am(n){null!=n.v&&(tn.clearTimeout(n.v),n.v=null)}function Nk(n,t){var e=null;if(n.g==t){Am(n),DC(n),n.g=null;var i=2}else{if(!hC(n.h,t))return;e=t.D,Mm(n.h,t),i=1}if(0!=n.G)if(n.pa=t.Y,t.i)if(1==i){e=t.s?t.s.length:0,t=Date.now()-t.F;var r=n.C;Ar(i=Bc(),new GM(i,e,t,r)),Sm(n)}else cI(n);else if(3==(r=t.o)||0==r&&0<n.pa||!(1==i&&function CC(n,t){return!(iI(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=t.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Ya?0:n.Za)||(n.m=vm(lr(n.Ja,n,t),EC(n,n.C)),n.C++,0)))}(n,t)||2==i&&wC(n)))switch(e&&0<e.length&&(t=n.h,t.i=t.i.concat(e)),r){case 1:rd(n,5);break;case 4:rd(n,10);break;case 3:rd(n,6);break;default:rd(n,2)}}function EC(n,t){let e=n.Wa+Math.floor(Math.random()*n.ab);return n.l||(e*=2),e*t}function rd(n,t){if(n.j.info("Error code "+t),2==t){var e=null;n.l&&(e=null);var i=lr(n.jb,n);e||(e=new Uc("//www.google.com/images/cleardot.gif"),tn.location&&"http"==tn.location.protocol||gy(e,"https"),lC(e)),function kk(n,t){const e=new dr;if(tn.Image){const i=new Image;i.onload=hm(wy,e,i,"TestLoadImage: loaded",!0,t),i.onerror=hm(wy,e,i,"TestLoadImage: error",!1,t),i.onabort=hm(wy,e,i,"TestLoadImage: abort",!1,t),i.ontimeout=hm(wy,e,i,"TestLoadImage: timeout",!1,t),tn.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else t(!1)}(e.toString(),i)}else jr(2);n.G=0,n.l&&n.l.va(t),MC(n),Wl(n)}function MC(n){if(n.G=0,n.la=[],n.l){const t=rI(n.h);(0!=t.length||0!=n.i.length)&&(CM(n.la,t),CM(n.la,n.i),n.h.i.length=0,L0(n.i),n.i.length=0),n.l.ua()}}function Fk(n,t,e){var i=e instanceof Uc?Ua(e):new Uc(e,void 0);if(""!=i.g)t&&(i.g=t+"."+i.g),_y(i,i.m);else{var r=tn.location;i=r.protocol,t=t?t+"."+r.hostname:r.hostname,r=+r.port;var s=new Uc(null,void 0);i&&gy(s,i),t&&(s.g=t),r&&_y(s,r),e&&(s.l=e),i=s}return t=n.za,(e=n.D)&&t&&pi(i,e,t),pi(i,"VER",n.ma),Tm(n,i),i}function xy(n,t,e){if(t&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new Wi(e&&n.Da&&!n.ra?new Im({ib:!0}):n.ra)).L=n.H,t}function IC(){}function km(){if(Ju&&!(10<=Number(SM)))throw Error("Environmental error: no available transport.")}function ys(n,t){ur.call(this),this.g=new vC(t),this.l=n,this.h=t&&t.messageUrlParams||null,n=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(n?n["X-WebChannel-Content-Type"]=t.messageContentType:n={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(n?n["X-WebChannel-Client-Profile"]=t.ya:n={"X-WebChannel-Client-Profile":t.ya}),this.g.S=n,(n=t&&t.Xb)&&!fm(n)&&(this.g.o=n),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!fm(t)&&(this.g.D=t,null!==(n=this.h)&&t in n&&t in(n=this.h)&&delete n[t]),this.j=new ql(this)}function xC(n){WM.call(this);var t=n.__sm__;if(t){e:{for(const e in t){n=e;break e}n=void 0}(this.i=n)&&(n=this.i,t=null!==t&&n in t?t[n]:void 0),this.data=t}else this.data=n}function SC(){py.call(this),this.status=1}function ql(n){this.g=n}(Tt=Wi.prototype).da=function(n,t,e,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);t=t?t.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():nC.g(),this.C=function tC(n){return n.h||(n.h=n.i())}(this.u?this.u:nC),this.g.onreadystatechange=lr(this.Ha,this);try{this.F=!0,this.g.open(t,String(n),!0),this.F=!1}catch(s){return void My(this,s)}if(n=e||"",e=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)e.set(r,i[r]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const s of i.keys())e.set(s,i.get(s))}i=Array.from(e.keys()).find(s=>"content-type"==s.toLowerCase()),r=tn.FormData&&n instanceof tn.FormData,!(0<=bM(uo,t))||i||r||e.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,c]of e)this.g.setRequestHeader(s,c);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{_C(this),0<this.B&&((this.K=function Ok(n){return Ju&&function xM(){return function _k(n){var t=IM;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=n(9)}(function(){let n=0;const t=wM(String(ey)).split("."),e=wM("9").split("."),i=Math.max(t.length,e.length);for(let c=0;0==n&&c<i;c++){var r=t[c]||"",s=e[c]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==r[0].length&&0==s[0].length)break;n=B0(0==r[1].length?0:parseInt(r[1],10),0==s[1].length?0:parseInt(s[1],10))||B0(0==r[2].length,0==s[2].length)||B0(r[2],s[2]),r=r[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=lr(this.qa,this)):this.A=uy(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){My(this,s)}},Tt.qa=function(){typeof Fc<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ar(this,"timeout"),this.abort(8))},Tt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ar(this,"complete"),Ar(this,"abort"),rf(this))},Tt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),rf(this,!0)),Wi.X.M.call(this)},Tt.Ha=function(){this.s||(this.F||this.v||this.l?aI(this):this.eb())},Tt.eb=function(){aI(this)},Tt.aa=function(){try{return 2<Ha(this)?this.g.status:-1}catch{return-1}},Tt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},Tt.Ra=function(n){if(this.g){var t=this.g.responseText;return n&&0==t.indexOf(n)&&(t=t.substring(n.length)),zo(t)}},Tt.Ea=function(){return this.m},Tt.Na=function(){return"string"==typeof this.j?this.j:String(this.j)},(Tt=vC.prototype).ma=8,Tt.G=1,Tt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const r=new Va(this,this.j,n,void 0);let s=this.s;if(this.S&&(s?(s=AM(s),kM(s,this.S)):s=this.S),null!==this.o||this.N||(r.H=s,s=null),this.O)e:{for(var t=0,e=0;e<this.i.length;e++){var i=this.i[e];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(t+=i)){t=e;break e}if(4096===t||e===this.i.length-1){t=e+1;break e}}t=1e3}else t=1e3;t=Pk(this,r,t),pi(e=Ua(this.F),"RID",n),pi(e,"CVER",22),this.D&&pi(e,"X-HTTP-Session-Id",this.D),Tm(this,e),s&&(this.N?t="headers="+encodeURIComponent(String(yC(s)))+"&"+t:this.o&&Iy(e,this.o,s)),fC(this.h,r),this.Xa&&pi(e,"TYPE","init"),this.O?(pi(e,"$req",t),pi(e,"SID","null"),r.Z=!0,rC(r,e,null)):rC(r,e,t),this.G=2}}else 3==this.G&&(n?ja(this,n):0==this.i.length||Ak(this.h)||ja(this))},Tt.Ia=function(){if(this.u=null,uI(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=vm(lr(this.cb,this),n)}},Tt.cb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,jr(10),sf(this),uI(this))},Tt.bb=function(){null!=this.v&&(this.v=null,sf(this),wC(this),jr(19))},Tt.jb=function(n){n?(this.j.info("Successfully pinged google.com"),jr(2)):(this.j.info("Failed to ping google.com"),jr(1))},(Tt=IC.prototype).xa=function(){},Tt.wa=function(){},Tt.va=function(){},Tt.ua=function(){},Tt.Qa=function(){},km.prototype.g=function(n,t){return new ys(n,t)},cr(ys,ur),ys.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,t=this.l,e=this.h||void 0;jr(0),n.V=t,n.ia=e||{},n.L=n.Y,n.F=Fk(n,null,n.V),Sm(n)},ys.prototype.close=function(){bC(this.g)},ys.prototype.u=function(n){var t=this.g;if("string"==typeof n){var e={};e.__data__=n,n=e}else this.v&&((e={}).__data__=_m(n),n=e);t.i.push(new class{constructor(n,t){this.h=n,this.g=t}}(t.$a++,n)),3==t.G&&Sm(t)},ys.prototype.M=function(){this.g.l=null,delete this.j,bC(this.g),delete this.g,ys.X.M.call(this)},cr(xC,WM),cr(SC,py),cr(ql,IC),ql.prototype.xa=function(){Ar(this.g,"a")},ql.prototype.wa=function(n){Ar(this.g,new xC(n))},ql.prototype.va=function(n){Ar(this.g,new SC(n))},ql.prototype.ua=function(){Ar(this.g,"b")},km.prototype.createWebChannel=km.prototype.g,ys.prototype.send=ys.prototype.u,ys.prototype.open=ys.prototype.m,ys.prototype.close=ys.prototype.close,dy.NO_ERROR=0,dy.TIMEOUT=8,dy.HTTP_ERROR=6,hy.COMPLETE="complete",bm.EventType=id,id.OPEN="a",id.CLOSE="b",id.ERROR="c",id.MESSAGE="d",ur.prototype.listen=ur.prototype.N,Wi.prototype.listenOnce=Wi.prototype.O,Wi.prototype.getLastError=Wi.prototype.Na,Wi.prototype.getLastErrorCode=Wi.prototype.Ea,Wi.prototype.getStatus=Wi.prototype.aa,Wi.prototype.getResponseJson=Wi.prototype.Ra,Wi.prototype.getResponseText=Wi.prototype.fa,Wi.prototype.send=Wi.prototype.da;var Sy=jl.createWebChannelTransport=function(){return new km},dI=jl.getStatEventTarget=function(){return Bc()},TC=jl.ErrorCode=dy,hI=jl.EventType=hy,fI=jl.Event=Lc,pI=jl.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Lk=jl.FetchXmlHttpFactory=Im,AC=jl.WebChannel=bm,lL=jl.XhrIo=Wi;const kC="@firebase/firestore";class hr{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}hr.UNAUTHENTICATED=new hr(null),hr.GOOGLE_CREDENTIALS=new hr("google-credentials-uid"),hr.FIRST_PARTY=new hr("first-party-uid"),hr.MOCK_USER=new hr("mock-user");let af="9.10.0";const Hc=new sr.Yd("@firebase/firestore");function mI(){return Hc.logLevel}function Ze(n,...t){if(Hc.logLevel<=sr.in.DEBUG){const e=t.map(RC);Hc.debug(`Firestore (${af}): ${n}`,...e)}}function qi(n,...t){if(Hc.logLevel<=sr.in.ERROR){const e=t.map(RC);Hc.error(`Firestore (${af}): ${n}`,...e)}}function lf(n,...t){if(Hc.logLevel<=sr.in.WARN){const e=t.map(RC);Hc.warn(`Firestore (${af}): ${n}`,...e)}}function RC(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function wt(n="Unexpected state"){const t=`FIRESTORE (${af}) INTERNAL ASSERTION FAILED: `+n;throw qi(t),new Error(t)}function Kt(n,t){n||wt()}function mt(n,t){return n}const be={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ze extends te.ZR{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Yi{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}class Ty{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Vk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(hr.UNAUTHENTICATED))}shutdown(){}}class OC{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class PC{constructor(t){this.t=t,this.currentUser=hr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){var i=this;let r=this.i;const s=_=>this.i!==r?(r=this.i,e(_)):Promise.resolve();let c=new Yi;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Yi,t.enqueueRetryable(()=>s(this.currentUser))};const d=()=>{const _=c;t.enqueueRetryable((0,Me.Z)(function*(){yield _.promise,yield s(i.currentUser)}))},p=_=>{Ze("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(_=>p(_)),setTimeout(()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?p(_):(Ze("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Yi)}},0),d()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(Ze("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Kt("string"==typeof i.accessToken),new Ty(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Kt(null===t||"string"==typeof t),new hr(t)}}class Ay{constructor(t,e,i,r){this.h=t,this.l=e,this.m=i,this.g=r,this.type="FirstParty",this.user=hr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Kt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.p.set("Authorization",t),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class uL{constructor(t,e,i,r){this.h=t,this.l=e,this.m=i,this.g=r}getToken(){return Promise.resolve(new Ay(this.h,this.l,this.m,this.g))}start(t,e){t.enqueueRetryable(()=>e(hr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Uk{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class dL{constructor(t){this.T=t,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(t,e){const i=s=>{null!=s.error&&Ze("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const c=s.token!==this.A;return this.A=s.token,Ze("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};const r=s=>{Ze("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.T.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.T.getImmediate({optional:!0});s?r(s):Ze("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Kt("string"==typeof e.token),this.A=e.token,new Uk(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function gI(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}class _I{static R(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let i="";for(;i.length<20;){const r=gI(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<e&&(i+=t.charAt(r[s]%t.length))}return i}}function nn(n,t){return n<t?-1:n>t?1:0}function cf(n,t,e){return n.length===t.length&&n.every((i,r)=>e(i,t[r]))}function yI(n){return n+"\0"}class mi{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new ze(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new ze(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new ze(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ze(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return mi.fromMillis(Date.now())}static fromDate(t){return mi.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*e));return new mi(e,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?nn(this.nanoseconds,t.nanoseconds):nn(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Gt{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Gt(t)}static min(){return new Gt(new mi(0,0))}static max(){return new Gt(new mi(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class uf{constructor(t,e,i){void 0===e?e=0:e>t.length&&wt(),void 0===i?i=t.length-e:i>t.length-e&&wt(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return 0===uf.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof uf?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let r=0;r<i;r++){const s=t.get(r),c=e.get(r);if(s<c)return-1;if(s>c)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class kn extends uf{construct(t,e,i){return new kn(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new ze(be.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(r=>r.length>0))}return new kn(e)}static emptyPath(){return new kn([])}}const Hk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ai extends uf{construct(t,e,i){return new Ai(t,e,i)}static isValidIdentifier(t){return Hk.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ai.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ai(["__name__"])}static fromServerFormat(t){const e=[];let i="",r=0;const s=()=>{if(0===i.length)throw new ze(be.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let c=!1;for(;r<t.length;){const d=t[r];if("\\"===d){if(r+1===t.length)throw new ze(be.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const p=t[r+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new ze(be.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=p,r+=2}else"`"===d?(c=!c,r++):"."!==d||c?(i+=d,r++):(s(),r++)}if(s(),c)throw new ze(be.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ai(e)}static emptyPath(){return new Ai([])}}class at{constructor(t){this.path=t}static fromPath(t){return new at(kn.fromString(t))}static fromName(t){return new at(kn.fromString(t).popFirst(5))}static empty(){return new at(kn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===kn.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return kn.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new at(new kn(t.slice()))}}class NC{constructor(t,e,i,r){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=r}}function ky(n){return n.fields.find(t=>2===t.kind)}function Yl(n){return n.fields.filter(t=>2!==t.kind)}NC.UNKNOWN_ID=-1;class Ry{constructor(t,e){this.fieldPath=t,this.kind=e}}class Oy{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new Oy(0,Hs.min())}}function vI(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Gt.fromTimestamp(1e9===i?new mi(e+1,0):new mi(e,i));return new Hs(r,at.empty(),t)}function bI(n){return new Hs(n.readTime,n.key,-1)}class Hs{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new Hs(Gt.min(),at.empty(),-1)}static max(){return new Hs(Gt.max(),at.empty(),-1)}}function CI(n,t){let e=n.readTime.compareTo(t.readTime);return 0!==e?e:(e=at.comparator(n.documentKey,t.documentKey),0!==e?e:nn(n.largestBatchId,t.largestBatchId))}const zk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $k{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}function sd(n){return wI.apply(this,arguments)}function wI(){return wI=(0,Me.Z)(function*(n){if(n.code!==be.FAILED_PRECONDITION||n.message!==zk)throw n;Ze("LocalStore","Unexpectedly lost primary lease")}),wI.apply(this,arguments)}class _e{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&wt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new _e((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(e,s).next(i,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof _e?e:_e.resolve(e)}catch(e){return _e.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):_e.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):_e.reject(e)}static resolve(t){return new _e((e,i)=>{e(t)})}static reject(t){return new _e((e,i)=>{i(t)})}static waitFor(t){return new _e((e,i)=>{let r=0,s=0,c=!1;t.forEach(d=>{++r,d.next(()=>{++s,c&&s===r&&e()},p=>i(p))}),c=!0,s===r&&e()})}static or(t){let e=_e.resolve(!1);for(const i of t)e=e.next(r=>r?_e.resolve(r):i());return e}static forEach(t,e){const i=[];return t.forEach((r,s)=>{i.push(e.call(this,r,s))}),this.waitFor(i)}static mapArray(t,e){return new _e((i,r)=>{const s=t.length,c=new Array(s);let d=0;for(let p=0;p<s;p++){const _=p;e(t[_]).next(b=>{c[_]=b,++d,d===s&&i(c)},b=>r(b))}})}static doWhile(t,e){return new _e((i,r)=>{const s=()=>{!0===t()?e().next(()=>{s()},r):i()};s()})}}class FC{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.P=new Yi,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{e.error?this.P.reject(new Py(t,e.error)):this.P.resolve()},this.transaction.onerror=i=>{const r=u(i.target.error);this.P.reject(new Py(t,r))}}static open(t,e,i,r){try{return new FC(e,t.transaction(r,i))}catch(s){throw new Py(e,s)}}get v(){return this.P.promise}abort(t){t&&this.P.reject(t),this.aborted||(Ze("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new pL(e)}}class za{constructor(t,e,i){this.name=t,this.version=e,this.S=i,12.2===za.D((0,te.z$)())&&qi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return Ze("SimpleDb","Removing database:",t),o(window.indexedDB.deleteDatabase(t)).toPromise()}static C(){if(!(0,te.hl)())return!1;if(za.N())return!0;const t=(0,te.z$)(),e=za.D(t),i=0<e&&e<10,r=za.k(t),s=0<r&&r<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||i||s)}static N(){var t;return typeof process<"u"&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.M)}static O(t,e){return t.store(e)}static D(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static k(t){const e=t.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)}F(t){var e=this;return(0,Me.Z)(function*(){return e.db||(Ze("SimpleDb","Opening database:",e.name),e.db=yield new Promise((i,r)=>{const s=indexedDB.open(e.name,e.version);s.onsuccess=c=>{i(c.target.result)},s.onblocked=()=>{r(new Py(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=c=>{const d=c.target.error;r("VersionError"===d.name?new ze(be.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new ze(be.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new Py(t,d))},s.onupgradeneeded=c=>{Ze("SimpleDb",'Database "'+e.name+'" requires upgrade from version:',c.oldVersion),e.S.$(c.target.result,s.transaction,c.oldVersion,e.version).next(()=>{Ze("SimpleDb","Database upgrade to version "+e.version+" complete")})}})),e.B&&(e.db.onversionchange=i=>e.B(i)),e.db})()}L(t){this.B=t,this.db&&(this.db.onversionchange=e=>t(e))}runTransaction(t,e,i,r){var s=this;return(0,Me.Z)(function*(){const c="readonly"===e;let d=0;for(;;){++d;try{s.db=yield s.F(t);const p=FC.open(s.db,t,c?"readonly":"readwrite",i),_=r(p).next(b=>(p.V(),b)).catch(b=>(p.abort(b),_e.reject(b))).toPromise();return _.catch(()=>{}),yield p.v,_}catch(p){const _=p,b="FirebaseError"!==_.name&&d<3;if(Ze("SimpleDb","Transaction failed with error:",_.message,"Retrying:",b),s.close(),!b)return Promise.reject(_)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class fL{constructor(t){this.U=t,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(t){this.U=t}done(){this.q=!0}j(t){this.K=t}delete(){return o(this.U.delete())}}class Py extends ze{constructor(t,e){super(be.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function od(n){return"IndexedDbTransactionError"===n.name}class pL{constructor(t){this.store=t}put(t,e){let i;return void 0!==e?(Ze("SimpleDb","PUT",this.store.name,t,e),i=this.store.put(e,t)):(Ze("SimpleDb","PUT",this.store.name,"<auto-key>",t),i=this.store.put(t)),o(i)}add(t){return Ze("SimpleDb","ADD",this.store.name,t,t),o(this.store.add(t))}get(t){return o(this.store.get(t)).next(e=>(void 0===e&&(e=null),Ze("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return Ze("SimpleDb","DELETE",this.store.name,t),o(this.store.delete(t))}count(){return Ze("SimpleDb","COUNT",this.store.name),o(this.store.count())}W(t,e){const i=this.options(t,e);if(i.index||"function"!=typeof this.store.getAll){const r=this.cursor(i),s=[];return this.H(r,(c,d)=>{s.push(d)}).next(()=>s)}{const r=this.store.getAll(i.range);return new _e((s,c)=>{r.onerror=d=>{c(d.target.error)},r.onsuccess=d=>{s(d.target.result)}})}}J(t,e){const i=this.store.getAll(t,null===e?void 0:e);return new _e((r,s)=>{i.onerror=c=>{s(c.target.error)},i.onsuccess=c=>{r(c.target.result)}})}Y(t,e){Ze("SimpleDb","DELETE ALL",this.store.name);const i=this.options(t,e);i.X=!1;const r=this.cursor(i);return this.H(r,(s,c,d)=>d.delete())}Z(t,e){let i;e?i=t:(i={},e=t);const r=this.cursor(i);return this.H(r,e)}tt(t){const e=this.cursor({});return new _e((i,r)=>{e.onerror=s=>{const c=u(s.target.error);r(c)},e.onsuccess=s=>{const c=s.target.result;c?t(c.primaryKey,c.value).next(d=>{d?c.continue():i()}):i()}})}H(t,e){const i=[];return new _e((r,s)=>{t.onerror=c=>{s(c.target.error)},t.onsuccess=c=>{const d=c.target.result;if(!d)return void r();const p=new fL(d),_=e(d.primaryKey,d.value,p);if(_ instanceof _e){const b=_.catch(E=>(p.done(),_e.reject(E)));i.push(b)}p.isDone?r():null===p.G?d.continue():d.continue(p.G)}}).next(()=>_e.waitFor(i))}options(t,e){let i;return void 0!==t&&("string"==typeof t?i=t:e=t),{index:i,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const i=this.store.index(t.index);return t.X?i.openKeyCursor(t.range,e):i.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function o(n){return new _e((t,e)=>{n.onsuccess=i=>{t(i.target.result)},n.onerror=i=>{const r=u(i.target.error);e(r)}})}let a=!1;function u(n){const t=za.D((0,te.z$)());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){const i=new ze("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return a||(a=!0,setTimeout(()=>{throw i},0)),i}}return n}class h{constructor(t,e){this.asyncQueue=t,this.et=e,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(t){var e=this;Ze("IndexBackiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(0,Me.Z)(function*(){e.task=null;try{Ze("IndexBackiller",`Documents written: ${yield e.et.st()}`)}catch(i){od(i)?Ze("IndexBackiller","Ignoring IndexedDB error during index backfill: ",i):yield sd(i)}yield e.nt(6e4)}))}}class f{constructor(t,e){this.localStore=t,this.persistence=e}st(t=50){var e=this;return(0,Me.Z)(function*(){return e.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>e.it(i,t))})()}it(t,e){const i=new Set;let r=e,s=!0;return _e.doWhile(()=>!0===s&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(c=>{if(null!==c&&!i.has(c))return Ze("IndexBackiller",`Processing collection: ${c}`),this.rt(t,c,r).next(d=>{r-=d,i.add(c)});s=!1})).next(()=>e-r)}rt(t,e,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next(r=>this.localStore.localDocuments.getNextDocuments(t,e,r,i).next(s=>{const c=s.changes;return this.localStore.indexManager.updateIndexEntries(t,c).next(()=>this.ot(r,s)).next(d=>(Ze("IndexBackiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(t,e,d))).next(()=>c.size)}))}ot(t,e){let i=t;return e.changes.forEach((r,s)=>{const c=bI(s);CI(c,i)>0&&(i=c)}),new Hs(i.readTime,i.documentKey,Math.max(e.batchId,t.largestBatchId))}}class m{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this.ut(i),this.ct=i=>e.writeSequenceNumber(i))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}function v(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function w(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function M(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}m.at=-1;class S{constructor(t,e){this.comparator=t,this.root=e||B.EMPTY}insert(t,e){return new S(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,B.BLACK,null,null))}remove(t){return new S(this.comparator,this.root.remove(t,this.comparator).copy(null,null,B.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(0===i)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(0===r)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new O(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new O(this.root,t,this.comparator,!1)}getReverseIterator(){return new O(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new O(this.root,t,this.comparator,!0)}}class O{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?i(t.key,e):1,e&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(0===s){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class B{constructor(t,e,i,r,s){this.key=t,this.value=e,this.color=i??B.RED,this.left=r??B.EMPTY,this.right=s??B.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,s){return new B(t??this.key,e??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this;const s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,e,i),null):0===s?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return B.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return B.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,B.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,B.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw wt();const t=this.left.check();if(t!==this.right.check())throw wt();return t+(this.isRed()?0:1)}}B.EMPTY=null,B.RED=!0,B.BLACK=!1,B.EMPTY=new class{constructor(){this.size=0}get key(){throw wt()}get value(){throw wt()}get color(){throw wt()}get left(){throw wt()}get right(){throw wt()}copy(n,t,e,i,r){return this}insert(n,t,e){return new B(n,t)}remove(n,t){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class z{constructor(t){this.comparator=t,this.data=new S(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new ue(this.data.getIterator())}getIteratorFrom(t){return new ue(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof z)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=i.getNext().key;if(0!==this.comparator(r,s))return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new z(this.comparator);return e.data=t,e}}class ue{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Se(n){return n.hasNext()?n.getNext():void 0}class $e{constructor(t){this.fields=t,t.sort(Ai.comparator)}static empty(){return new $e([])}unionWith(t){let e=new z(Ai.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new $e(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return cf(this.fields,t.fields,(e,i)=>e.isEqual(i))}}class ot{constructor(t){this.binaryString=t}static fromBase64String(t){const e=atob(t);return new ot(e)}static fromUint8Array(t){const e=function(i){let r="";for(let s=0;s<i.length;++s)r+=String.fromCharCode(i[s]);return r}(t);return new ot(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return nn(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}ot.EMPTY_BYTE_STRING=new ot("");const Vt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fe(n){if(Kt(!!n),"string"==typeof n){let t=0;const e=Vt.exec(n);if(Kt(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:bt(n.seconds),nanos:bt(n.nanos)}}function bt(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function wn(n){return"string"==typeof n?ot.fromBase64String(n):ot.fromUint8Array(n)}function ai(n){var t,e;return"server_timestamp"===(null===(e=((null===(t=n?.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===e?void 0:e.stringValue)}function jc(n){const t=n.mapValue.fields.__previous_value__;return ai(t)?jc(t):t}function ad(n){const t=Fe(n.mapValue.fields.__local_write_time__.timestampValue);return new mi(t.seconds,t.nanos)}class LC{constructor(t,e,i,r,s,c,d,p){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.useFetchStreams=p}}class $a{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new $a("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof $a&&t.projectId===this.projectId&&t.database===this.database}}function ld(n){return null==n}function cd(n){return 0===n&&1/n==-1/0}function Ny(n){return"number"==typeof n&&Number.isInteger(n)&&!cd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Ga={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},df={nullValue:"NULL_VALUE"};function Zl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ai(n)?4:yL(n)?9007199254740991:10:wt()}function zc(n,t){if(n===t)return!0;const e=Zl(n);if(e!==Zl(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return ad(n).isEqual(ad(t));case 3:return function(i,r){if("string"==typeof i.timestampValue&&"string"==typeof r.timestampValue&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const s=Fe(i.timestampValue),c=Fe(r.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return r=t,wn(n.bytesValue).isEqual(wn(r.bytesValue));case 7:return n.referenceValue===t.referenceValue;case 8:return function(i,r){return bt(i.geoPointValue.latitude)===bt(r.geoPointValue.latitude)&&bt(i.geoPointValue.longitude)===bt(r.geoPointValue.longitude)}(n,t);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return bt(i.integerValue)===bt(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const s=bt(i.doubleValue),c=bt(r.doubleValue);return s===c?cd(s)===cd(c):isNaN(s)&&isNaN(c)}return!1}(n,t);case 9:return cf(n.arrayValue.values||[],t.arrayValue.values||[],zc);case 10:return function(i,r){const s=i.mapValue.fields||{},c=r.mapValue.fields||{};if(v(s)!==v(c))return!1;for(const d in s)if(s.hasOwnProperty(d)&&(void 0===c[d]||!zc(s[d],c[d])))return!1;return!0}(n,t);default:return wt()}var r}function BC(n,t){return void 0!==(n.values||[]).find(e=>zc(e,t))}function hf(n,t){if(n===t)return 0;const e=Zl(n),i=Zl(t);if(e!==i)return nn(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return nn(n.booleanValue,t.booleanValue);case 2:return function(r,s){const c=bt(r.integerValue||r.doubleValue),d=bt(s.integerValue||s.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1}(n,t);case 3:return mL(n.timestampValue,t.timestampValue);case 4:return mL(ad(n),ad(t));case 5:return nn(n.stringValue,t.stringValue);case 6:return function(r,s){const c=wn(r),d=wn(s);return c.compareTo(d)}(n.bytesValue,t.bytesValue);case 7:return function(r,s){const c=r.split("/"),d=s.split("/");for(let p=0;p<c.length&&p<d.length;p++){const _=nn(c[p],d[p]);if(0!==_)return _}return nn(c.length,d.length)}(n.referenceValue,t.referenceValue);case 8:return function(r,s){const c=nn(bt(r.latitude),bt(s.latitude));return 0!==c?c:nn(bt(r.longitude),bt(s.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return function(r,s){const c=r.values||[],d=s.values||[];for(let p=0;p<c.length&&p<d.length;++p){const _=hf(c[p],d[p]);if(_)return _}return nn(c.length,d.length)}(n.arrayValue,t.arrayValue);case 10:return function(r,s){if(r===Ga.mapValue&&s===Ga.mapValue)return 0;if(r===Ga.mapValue)return 1;if(s===Ga.mapValue)return-1;const c=r.fields||{},d=Object.keys(c),p=s.fields||{},_=Object.keys(p);d.sort(),_.sort();for(let b=0;b<d.length&&b<_.length;++b){const E=nn(d[b],_[b]);if(0!==E)return E;const T=hf(c[d[b]],p[_[b]]);if(0!==T)return T}return nn(d.length,_.length)}(n.mapValue,t.mapValue);default:throw wt()}}function mL(n,t){if("string"==typeof n&&"string"==typeof t&&n.length===t.length)return nn(n,t);const e=Fe(n),i=Fe(t),r=nn(e.seconds,i.seconds);return 0!==r?r:nn(e.nanos,i.nanos)}function Fy(n){return Gk(n)}function Gk(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=Fe(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?wn(n.bytesValue).toBase64():"referenceValue"in n?at.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(t=n.geoPointValue).latitude},${t.longitude})`:"arrayValue"in n?function(i){let r="[",s=!0;for(const c of i.values||[])s?s=!1:r+=",",r+=Gk(c);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let s="{",c=!0;for(const d of r)c?c=!1:s+=",",s+=`${d}:${Gk(i.fields[d])}`;return s+"}"}(n.mapValue):wt();var t}function Rm(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function Wk(n){return!!n&&"integerValue"in n}function VC(n){return!!n&&"arrayValue"in n}function gL(n){return!!n&&"nullValue"in n}function _L(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function DI(n){return!!n&&"mapValue"in n}function UC(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return w(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=UC(i)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=UC(n.arrayValue.values[e]);return t}return Object.assign({},n)}function yL(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function rG(n){return"nullValue"in n?df:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Rm($a.empty(),at.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:wt()}function sG(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Rm($a.empty(),at.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Ga:wt()}function vL(n,t){const e=hf(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?-1:!n.inclusive&&t.inclusive?1:0}function bL(n,t){const e=hf(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?1:!n.inclusive&&t.inclusive?-1:0}class is{constructor(t){this.value=t}static empty(){return new is({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!DI(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=UC(e)}setAll(t){let e=Ai.emptyPath(),i={},r=[];t.forEach((c,d)=>{if(!e.isImmediateParentOf(d)){const p=this.getFieldsMap(e);this.applyChanges(p,i,r),i={},r=[],e=d.popLast()}c?i[d.lastSegment()]=UC(c):r.push(d.lastSegment())});const s=this.getFieldsMap(e);this.applyChanges(s,i,r)}delete(t){const e=this.field(t.popLast());DI(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return zc(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];DI(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){w(e,(r,s)=>t[r]=s);for(const r of i)delete t[r]}clone(){return new is(UC(this.value))}}function CL(n){const t=[];return w(n.fields,(e,i)=>{const r=new Ai([e]);if(DI(i)){const s=CL(i.mapValue).fields;if(0===s.length)t.push(r);else for(const c of s)t.push(r.child(c))}else t.push(r)}),new $e(t)}class Ci{constructor(t,e,i,r,s,c){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.data=s,this.documentState=c}static newInvalidDocument(t){return new Ci(t,0,Gt.min(),Gt.min(),is.empty(),0)}static newFoundDocument(t,e,i){return new Ci(t,1,e,Gt.min(),i,0)}static newNoDocument(t,e){return new Ci(t,2,e,Gt.min(),is.empty(),0)}static newUnknownDocument(t,e){return new Ci(t,3,e,Gt.min(),is.empty(),2)}convertToFoundDocument(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=is.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=is.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Gt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof Ci&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ci(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class oG{constructor(t,e=null,i=[],r=[],s=null,c=null,d=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=c,this.endAt=d,this.ht=null}}function wL(n,t=null,e=[],i=[],r=null,s=null,c=null){return new oG(n,t,e,i,r,s,c)}function Om(n){const t=mt(n);if(null===t.ht){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>{return(r=i).field.canonicalString()+r.op.toString()+Fy(r.value);var r}).join(","),e+="|ob:",e+=t.orderBy.map(i=>{return(r=i).field.canonicalString()+r.dir;var r}).join(","),ld(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>Fy(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>Fy(i)).join(",")),t.ht=e}return t.ht}function HC(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<n.orderBy.length;r++)if(!mG(n.orderBy[r],t.orderBy[r]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let r=0;r<n.filters.length;r++)if((e=n.filters[r]).op!==(i=t.filters[r]).op||!e.field.isEqual(i.field)||!zc(e.value,i.value))return!1;var e,i;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!xL(n.startAt,t.startAt)&&xL(n.endAt,t.endAt)}function EI(n){return at.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function MI(n,t){return n.filters.filter(e=>e instanceof rs&&e.field.isEqual(t))}function DL(n,t,e){let i=df,r=!0;for(const s of MI(n,t)){let c=df,d=!0;switch(s.op){case"<":case"<=":c=rG(s.value);break;case"==":case"in":case">=":c=s.value;break;case">":c=s.value,d=!1;break;case"!=":case"not-in":c=df}vL({value:i,inclusive:r},{value:c,inclusive:d})<0&&(i=c,r=d)}if(null!==e)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){const c=e.position[s];vL({value:i,inclusive:r},{value:c,inclusive:e.inclusive})<0&&(i=c,r=e.inclusive);break}return{value:i,inclusive:r}}function EL(n,t,e){let i=Ga,r=!0;for(const s of MI(n,t)){let c=Ga,d=!0;switch(s.op){case">=":case">":c=sG(s.value),d=!1;break;case"==":case"in":case"<=":c=s.value;break;case"<":c=s.value,d=!1;break;case"!=":case"not-in":c=Ga}bL({value:i,inclusive:r},{value:c,inclusive:d})>0&&(i=c,r=d)}if(null!==e)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){const c=e.position[s];bL({value:i,inclusive:r},{value:c,inclusive:e.inclusive})>0&&(i=c,r=e.inclusive);break}return{value:i,inclusive:r}}class rs extends class{}{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?"in"===e||"not-in"===e?this.lt(t,e,i):new lG(t,e,i):"array-contains"===e?new dG(t,i):"in"===e?new hG(t,i):"not-in"===e?new fG(t,i):"array-contains-any"===e?new pG(t,i):new rs(t,e,i)}static lt(t,e,i){return"in"===e?new cG(t,i):new uG(t,i)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.ft(hf(e,this.value)):null!==e&&Zl(this.value)===Zl(e)&&this.ft(hf(e,this.value))}ft(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return wt()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class lG extends rs{constructor(t,e,i){super(t,e,i),this.key=at.fromName(i.referenceValue)}matches(t){const e=at.comparator(t.key,this.key);return this.ft(e)}}class cG extends rs{constructor(t,e){super(t,"in",e),this.keys=ML(0,e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class uG extends rs{constructor(t,e){super(t,"not-in",e),this.keys=ML(0,e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function ML(n,t){var e;return((null===(e=t.arrayValue)||void 0===e?void 0:e.values)||[]).map(i=>at.fromName(i.referenceValue))}class dG extends rs{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return VC(e)&&BC(e.arrayValue,this.value)}}class hG extends rs{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&BC(this.value.arrayValue,e)}}class fG extends rs{constructor(t,e){super(t,"not-in",e)}matches(t){if(BC(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!BC(this.value.arrayValue,e)}}class pG extends rs{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!VC(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>BC(this.value.arrayValue,i))}}class ff{constructor(t,e){this.position=t,this.inclusive=e}}class Ly{constructor(t,e="asc"){this.field=t,this.dir=e}}function mG(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}function IL(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){const s=t[r],c=n.position[r];if(i=s.field.isKeyField()?at.comparator(at.fromName(c.referenceValue),e.key):hf(c,e.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function xL(n,t){if(null===n)return null===t;if(null===t||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!zc(n.position[e],t.position[e]))return!1;return!0}class ud{constructor(t,e=null,i=[],r=[],s=null,c="F",d=null,p=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=c,this.startAt=d,this.endAt=p,this._t=null,this.wt=null}}function SL(n,t,e,i,r,s,c,d){return new ud(n,t,e,i,r,s,c,d)}function By(n){return new ud(n)}function TL(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function qk(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Yk(n){for(const t of n.filters)if(t.dt())return t.field;return null}function Zk(n){return null!==n.collectionGroup}function Vy(n){const t=mt(n);if(null===t._t){t._t=[];const e=Yk(t),i=qk(t);if(null!==e&&null===i)e.isKeyField()||t._t.push(new Ly(e)),t._t.push(new Ly(Ai.keyField(),"asc"));else{let r=!1;for(const s of t.explicitOrderBy)t._t.push(s),s.field.isKeyField()&&(r=!0);if(!r){const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t._t.push(new Ly(Ai.keyField(),s))}}}return t._t}function ho(n){const t=mt(n);if(!t.wt)if("F"===t.limitType)t.wt=wL(t.path,t.collectionGroup,Vy(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const s of Vy(t))e.push(new Ly(s.field,"desc"===s.dir?"asc":"desc"));const i=t.endAt?new ff(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ff(t.startAt.position,t.startAt.inclusive):null;t.wt=wL(t.path,t.collectionGroup,e,t.filters,t.limit,i,r)}return t.wt}function II(n,t,e){return new ud(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function jC(n,t){return HC(ho(n),ho(t))&&n.limitType===t.limitType}function AL(n){return`${Om(ho(n))}|lt:${n.limitType}`}function Kk(n){return`Query(target=${function aG(n){let t=n.path.canonicalString();return null!==n.collectionGroup&&(t+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(t+=`, filters: [${n.filters.map(e=>{return`${(i=e).field.canonicalString()} ${i.op} ${Fy(i.value)}`;var i}).join(", ")}]`),ld(n.limit)||(t+=", limit: "+n.limit),n.orderBy.length>0&&(t+=`, orderBy: [${n.orderBy.map(e=>{return`${(i=e).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),n.startAt&&(t+=", startAt: ",t+=n.startAt.inclusive?"b:":"a:",t+=n.startAt.position.map(e=>Fy(e)).join(",")),n.endAt&&(t+=", endAt: ",t+=n.endAt.inclusive?"a:":"b:",t+=n.endAt.position.map(e=>Fy(e)).join(",")),`Target(${t})`}(ho(n))}; limitType=${n.limitType})`}function Qk(n,t){return t.isFoundDocument()&&function(e,i){const r=i.key.path;return null!==e.collectionGroup?i.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(r):at.isDocumentKey(e.path)?e.path.isEqual(r):e.path.isImmediateParentOf(r)}(n,t)&&function(e,i){for(const r of e.explicitOrderBy)if(!r.field.isKeyField()&&null===i.data.field(r.field))return!1;return!0}(n,t)&&function(e,i){for(const r of e.filters)if(!r.matches(i))return!1;return!0}(n,t)&&(i=t,!((e=n).startAt&&!function(r,s,c){const d=IL(r,s,c);return r.inclusive?d<=0:d<0}(e.startAt,Vy(e),i)||e.endAt&&!function(r,s,c){const d=IL(r,s,c);return r.inclusive?d>=0:d>0}(e.endAt,Vy(e),i)));var e,i}function kL(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function RL(n){return(t,e)=>{let i=!1;for(const r of Vy(n)){const s=gG(r,t,e);if(0!==s)return s;i=i||r.field.isKeyField()}return 0}}function gG(n,t,e){const i=n.field.isKeyField()?at.comparator(t.key,e.key):function(r,s,c){const d=s.data.field(r),p=c.data.field(r);return null!==d&&null!==p?hf(d,p):wt()}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return wt()}}function OL(n,t){if(n.gt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cd(t)?"-0":t}}function PL(n){return{integerValue:""+n}}function NL(n,t){return Ny(t)?PL(t):OL(n,t)}class xI{constructor(){this._=void 0}}function _G(n,t,e){return n instanceof Uy?function(i,r){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&(s.fields.__previous_value__=r),{mapValue:s}}(e,t):n instanceof Pm?LL(n,t):n instanceof Nm?BL(n,t):function(i,r){const s=FL(i,r),c=VL(s)+VL(i.yt);return Wk(s)&&Wk(i.yt)?PL(c):OL(i.It,c)}(n,t)}function yG(n,t,e){return n instanceof Pm?LL(n,t):n instanceof Nm?BL(n,t):e}function FL(n,t){return n instanceof Hy?Wk(e=t)||(i=e)&&"doubleValue"in i?t:{integerValue:0}:null;var i,e}class Uy extends xI{}class Pm extends xI{constructor(t){super(),this.elements=t}}function LL(n,t){const e=UL(t);for(const i of n.elements)e.some(r=>zc(r,i))||e.push(i);return{arrayValue:{values:e}}}class Nm extends xI{constructor(t){super(),this.elements=t}}function BL(n,t){let e=UL(t);for(const i of n.elements)e=e.filter(r=>!zc(r,i));return{arrayValue:{values:e}}}class Hy extends xI{constructor(t,e){super(),this.It=t,this.yt=e}}function VL(n){return bt(n.integerValue||n.doubleValue)}function UL(n){return VC(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class zC{constructor(t,e){this.field=t,this.transform=e}}class bG{constructor(t,e){this.version=t,this.transformResults=e}}class Pi{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Pi}static exists(t){return new Pi(void 0,t)}static updateTime(t){return new Pi(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function SI(n,t){return void 0!==n.updateTime?t.isFoundDocument()&&t.version.isEqual(n.updateTime):void 0===n.exists||n.exists===t.isFoundDocument()}class TI{}function HL(n,t){if(!n.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return n.isNoDocument()?new zy(n.key,Pi.none()):new jy(n.key,n.data,Pi.none());{const e=n.data,i=is.empty();let r=new z(Ai.comparator);for(let s of t.fields)if(!r.has(s)){let c=e.field(s);null===c&&s.length>1&&(s=s.popLast(),c=e.field(s)),null===c?i.delete(s):i.set(s,c),r=r.add(s)}return new dd(n.key,i,new $e(r.toArray()),Pi.none())}}function CG(n,t,e){n instanceof jy?function(i,r,s){const c=i.value.clone(),d=$L(i.fieldTransforms,r,s.transformResults);c.setAll(d),r.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,t,e):n instanceof dd?function(i,r,s){if(!SI(i.precondition,r))return void r.convertToUnknownDocument(s.version);const c=$L(i.fieldTransforms,r,s.transformResults),d=r.data;d.setAll(zL(i)),d.setAll(c),r.convertToFoundDocument(s.version,d).setHasCommittedMutations()}(n,t,e):t.convertToNoDocument(e.version).setHasCommittedMutations()}function $C(n,t,e,i){return n instanceof jy?function(r,s,c,d){if(!SI(r.precondition,s))return c;const p=r.value.clone(),_=GL(r.fieldTransforms,d,s);return p.setAll(_),s.convertToFoundDocument(s.version,p).setHasLocalMutations(),null}(n,t,e,i):n instanceof dd?function(r,s,c,d){if(!SI(r.precondition,s))return c;const p=GL(r.fieldTransforms,d,s),_=s.data;return _.setAll(zL(r)),_.setAll(p),s.convertToFoundDocument(s.version,_).setHasLocalMutations(),null===c?null:c.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(b=>b.field))}(n,t,e,i):(c=e,SI(n.precondition,s=t)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c);var s,c}function wG(n,t){let e=null;for(const i of n.fieldTransforms){const r=t.data.field(i.field),s=FL(i.transform,r||null);null!=s&&(null===e&&(e=is.empty()),e.set(i.field,s))}return e||null}function jL(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&(i=t.fieldTransforms,!!(void 0===(e=n.fieldTransforms)&&void 0===i||e&&i&&cf(e,i,(r,s)=>function vG(n,t){return n.field.isEqual(t.field)&&(i=t.transform,(e=n.transform)instanceof Pm&&i instanceof Pm||e instanceof Nm&&i instanceof Nm?cf(e.elements,i.elements,zc):e instanceof Hy&&i instanceof Hy?zc(e.yt,i.yt):e instanceof Uy&&i instanceof Uy);var e,i}(r,s))))&&(0===n.type?n.value.isEqual(t.value):1!==n.type||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask));var e,i}class jy extends TI{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class dd extends TI{constructor(t,e,i,r,s=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function zL(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}}),t}function $L(n,t,e){const i=new Map;Kt(n.length===e.length);for(let r=0;r<e.length;r++){const s=n[r],c=s.transform,d=t.data.field(s.field);i.set(s.field,yG(c,d,e[r]))}return i}function GL(n,t,e){const i=new Map;for(const r of n){const s=r.transform,c=e.data.field(r.field);i.set(r.field,_G(s,c,t))}return i}class zy extends TI{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Xk extends TI{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class DG{constructor(t){this.count=t}}var fr,Ln;function WL(n){switch(n){default:return wt();case be.CANCELLED:case be.UNKNOWN:case be.DEADLINE_EXCEEDED:case be.RESOURCE_EXHAUSTED:case be.INTERNAL:case be.UNAVAILABLE:case be.UNAUTHENTICATED:return!1;case be.INVALID_ARGUMENT:case be.NOT_FOUND:case be.ALREADY_EXISTS:case be.PERMISSION_DENIED:case be.FAILED_PRECONDITION:case be.ABORTED:case be.OUT_OF_RANGE:case be.UNIMPLEMENTED:case be.DATA_LOSS:return!0}}function qL(n){if(void 0===n)return qi("GRPC error has no .code"),be.UNKNOWN;switch(n){case fr.OK:return be.OK;case fr.CANCELLED:return be.CANCELLED;case fr.UNKNOWN:return be.UNKNOWN;case fr.DEADLINE_EXCEEDED:return be.DEADLINE_EXCEEDED;case fr.RESOURCE_EXHAUSTED:return be.RESOURCE_EXHAUSTED;case fr.INTERNAL:return be.INTERNAL;case fr.UNAVAILABLE:return be.UNAVAILABLE;case fr.UNAUTHENTICATED:return be.UNAUTHENTICATED;case fr.INVALID_ARGUMENT:return be.INVALID_ARGUMENT;case fr.NOT_FOUND:return be.NOT_FOUND;case fr.ALREADY_EXISTS:return be.ALREADY_EXISTS;case fr.PERMISSION_DENIED:return be.PERMISSION_DENIED;case fr.FAILED_PRECONDITION:return be.FAILED_PRECONDITION;case fr.ABORTED:return be.ABORTED;case fr.OUT_OF_RANGE:return be.OUT_OF_RANGE;case fr.UNIMPLEMENTED:return be.UNIMPLEMENTED;case fr.DATA_LOSS:return be.DATA_LOSS;default:return wt()}}(Ln=fr||(fr={}))[Ln.OK=0]="OK",Ln[Ln.CANCELLED=1]="CANCELLED",Ln[Ln.UNKNOWN=2]="UNKNOWN",Ln[Ln.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ln[Ln.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ln[Ln.NOT_FOUND=5]="NOT_FOUND",Ln[Ln.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ln[Ln.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ln[Ln.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ln[Ln.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ln[Ln.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ln[Ln.ABORTED=10]="ABORTED",Ln[Ln.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ln[Ln.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ln[Ln.INTERNAL=13]="INTERNAL",Ln[Ln.UNAVAILABLE=14]="UNAVAILABLE",Ln[Ln.DATA_LOSS=15]="DATA_LOSS";class pf{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0!==i)for(const[r,s]of i)if(this.equalsFn(r,t))return s}has(t){return void 0!==this.get(t)}set(t,e){const i=this.mapKeyFn(t),r=this.inner[i];if(void 0===r)return this.inner[i]=[[t,e]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return 1===i.length?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){w(this.inner,(e,i)=>{for(const[r,s]of i)t(r,s)})}isEmpty(){return M(this.inner)}size(){return this.innerSize}}const EG=new S(at.comparator);function fo(){return EG}const YL=new S(at.comparator);function GC(...n){let t=YL;for(const e of n)t=t.insert(e.key,e);return t}function ZL(n){let t=YL;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function $c(){return WC()}function KL(){return WC()}function WC(){return new pf(n=>n.toString(),(n,t)=>n.isEqual(t))}const MG=new S(at.comparator),IG=new z(at.comparator);function pn(...n){let t=IG;for(const e of n)t=t.add(e);return t}const xG=new z(nn);function AI(){return xG}class qC{constructor(t,e,i,r,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e){const i=new Map;return i.set(t,YC.createSynthesizedTargetChangeForCurrentChange(t,e)),new qC(Gt.min(),i,AI(),fo(),pn())}}class YC{constructor(t,e,i,r,s){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e){return new YC(ot.EMPTY_BYTE_STRING,e,pn(),pn(),pn())}}class kI{constructor(t,e,i,r){this.Tt=t,this.removedTargetIds=e,this.key=i,this.Et=r}}class QL{constructor(t,e){this.targetId=t,this.At=e}}class XL{constructor(t,e,i=ot.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}}class JL{constructor(){this.Rt=0,this.bt=tB(),this.Pt=ot.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(t){t.approximateByteSize()>0&&(this.Vt=!0,this.Pt=t)}xt(){let t=pn(),e=pn(),i=pn();return this.bt.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:wt()}}),new YC(this.Pt,this.vt,t,e,i)}Nt(){this.Vt=!1,this.bt=tB()}kt(t,e){this.Vt=!0,this.bt=this.bt.insert(t,e)}Mt(t){this.Vt=!0,this.bt=this.bt.remove(t)}Ot(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class SG{constructor(t){this.Bt=t,this.Lt=new Map,this.Ut=fo(),this.qt=eB(),this.Kt=new z(nn)}Gt(t){for(const e of t.Tt)t.Et&&t.Et.isFoundDocument()?this.Qt(e,t.Et):this.jt(e,t.key,t.Et);for(const e of t.removedTargetIds)this.jt(e,t.key,t.Et)}Wt(t){this.forEachTarget(t,e=>{const i=this.zt(e);switch(t.state){case 0:this.Ht(e)&&i.Ct(t.resumeToken);break;case 1:i.Ft(),i.St||i.Nt(),i.Ct(t.resumeToken);break;case 2:i.Ft(),i.St||this.removeTarget(e);break;case 3:this.Ht(e)&&(i.$t(),i.Ct(t.resumeToken));break;case 4:this.Ht(e)&&(this.Jt(e),i.Ct(t.resumeToken));break;default:wt()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Lt.forEach((i,r)=>{this.Ht(r)&&e(r)})}Yt(t){const e=t.targetId,i=t.At.count,r=this.Xt(e);if(r){const s=r.target;if(EI(s))if(0===i){const c=new at(s.path);this.jt(e,c,Ci.newNoDocument(c,Gt.min()))}else Kt(1===i);else this.Zt(e)!==i&&(this.Jt(e),this.Kt=this.Kt.add(e))}}te(t){const e=new Map;this.Lt.forEach((s,c)=>{const d=this.Xt(c);if(d){if(s.current&&EI(d.target)){const p=new at(d.target.path);null!==this.Ut.get(p)||this.ee(c,p)||this.jt(c,p,Ci.newNoDocument(p,t))}s.Dt&&(e.set(c,s.xt()),s.Nt())}});let i=pn();this.qt.forEach((s,c)=>{let d=!0;c.forEachWhile(p=>{const _=this.Xt(p);return!_||2===_.purpose||(d=!1,!1)}),d&&(i=i.add(s))}),this.Ut.forEach((s,c)=>c.setReadTime(t));const r=new qC(t,e,this.Kt,this.Ut,i);return this.Ut=fo(),this.qt=eB(),this.Kt=new z(nn),r}Qt(t,e){if(!this.Ht(t))return;const i=this.ee(t,e.key)?2:0;this.zt(t).kt(e.key,i),this.Ut=this.Ut.insert(e.key,e),this.qt=this.qt.insert(e.key,this.ne(e.key).add(t))}jt(t,e,i){if(!this.Ht(t))return;const r=this.zt(t);this.ee(t,e)?r.kt(e,1):r.Mt(e),this.qt=this.qt.insert(e,this.ne(e).delete(t)),i&&(this.Ut=this.Ut.insert(e,i))}removeTarget(t){this.Lt.delete(t)}Zt(t){const e=this.zt(t).xt();return this.Bt.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ot(t){this.zt(t).Ot()}zt(t){let e=this.Lt.get(t);return e||(e=new JL,this.Lt.set(t,e)),e}ne(t){let e=this.qt.get(t);return e||(e=new z(nn),this.qt=this.qt.insert(t,e)),e}Ht(t){const e=null!==this.Xt(t);return e||Ze("WatchChangeAggregator","Detected inactive target",t),e}Xt(t){const e=this.Lt.get(t);return e&&e.St?null:this.Bt.se(t)}Jt(t){this.Lt.set(t,new JL),this.Bt.getRemoteKeysForTarget(t).forEach(e=>{this.jt(t,e,null)})}ee(t,e){return this.Bt.getRemoteKeysForTarget(t).has(e)}}function eB(){return new S(at.comparator)}function tB(){return new S(at.comparator)}const TG={asc:"ASCENDING",desc:"DESCENDING"},AG={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class kG{constructor(t,e){this.databaseId=t,this.gt=e}}function ZC(n,t){return n.gt?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function nB(n,t){return n.gt?t.toBase64():t.toUint8Array()}function RG(n,t){return ZC(n,t.toTimestamp())}function zr(n){return Kt(!!n),Gt.fromTimestamp(function(t){const e=Fe(t);return new mi(e.seconds,e.nanos)}(n))}function Jk(n,t){return(e=n,new kn(["projects",e.projectId,"databases",e.database])).child("documents").child(t).canonicalString();var e}function iB(n){const t=kn.fromString(n);return Kt(hB(t)),t}function KC(n,t){return Jk(n.databaseId,t.path)}function Gc(n,t){const e=iB(t);if(e.get(1)!==n.databaseId.projectId)throw new ze(be.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new ze(be.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new at(sB(e))}function eR(n,t){return Jk(n.databaseId,t)}function rB(n){const t=iB(n);return 4===t.length?kn.emptyPath():sB(t)}function QC(n){return new kn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function sB(n){return Kt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function oB(n,t,e){return{name:KC(n,t),fields:e.value.mapValue.fields}}function aB(n,t,e){const i=Gc(n,t.name),r=zr(t.updateTime),s=new is({mapValue:{fields:t.fields}}),c=Ci.newFoundDocument(i,r,s);return e&&c.setHasCommittedMutations(),e?c.setHasCommittedMutations():c}function XC(n,t){let e;if(t instanceof jy)e={update:oB(n,t.key,t.value)};else if(t instanceof zy)e={delete:KC(n,t.key)};else if(t instanceof dd)e={update:oB(n,t.key,t.data),updateMask:HG(t.fieldMask)};else{if(!(t instanceof Xk))return wt();e={verify:KC(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(r,s){const c=s.transform;if(c instanceof Uy)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Pm)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Nm)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Hy)return{fieldPath:s.field.canonicalString(),increment:c.yt};throw wt()}(0,i))),t.precondition.isNone||(e.currentDocument=void 0!==(r=t.precondition).updateTime?{updateTime:RG(n,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:wt()),e;var r}function tR(n,t){const e=t.currentDocument?void 0!==(r=t.currentDocument).updateTime?Pi.updateTime(zr(r.updateTime)):void 0!==r.exists?Pi.exists(r.exists):Pi.none():Pi.none(),i=t.updateTransforms?t.updateTransforms.map(r=>function(s,c){let d=null;"setToServerValue"in c?(Kt("REQUEST_TIME"===c.setToServerValue),d=new Uy):"appendMissingElements"in c?d=new Pm(c.appendMissingElements.values||[]):"removeAllFromArray"in c?d=new Nm(c.removeAllFromArray.values||[]):"increment"in c?d=new Hy(s,c.increment):wt();const p=Ai.fromServerFormat(c.fieldPath);return new zC(p,d)}(n,r)):[];var r;if(t.update){const r=Gc(n,t.update.name),s=new is({mapValue:{fields:t.update.fields}});if(t.updateMask){const c=new $e((t.updateMask.fieldPaths||[]).map(_=>Ai.fromServerFormat(_)));return new dd(r,s,c,e,i)}return new jy(r,s,e,i)}if(t.delete){const r=Gc(n,t.delete);return new zy(r,e)}if(t.verify){const r=Gc(n,t.verify);return new Xk(r,e)}return wt()}function lB(n,t){return{documents:[eR(n,t.path)]}}function cB(n,t){const e={structuredQuery:{}},i=t.path;null!==t.collectionGroup?(e.parent=eR(n,i),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(e.parent=eR(n,i.popLast()),e.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(p){if(0===p.length)return;const _=p.map(b=>function(E){if("=="===E.op){if(_L(E.value))return{unaryFilter:{field:$y(E.field),op:"IS_NAN"}};if(gL(E.value))return{unaryFilter:{field:$y(E.field),op:"IS_NULL"}}}else if("!="===E.op){if(_L(E.value))return{unaryFilter:{field:$y(E.field),op:"IS_NOT_NAN"}};if(gL(E.value))return{unaryFilter:{field:$y(E.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$y(E.field),op:BG(E.op),value:E.value}}}(b));return 1===_.length?_[0]:{compositeFilter:{op:"AND",filters:_}}}(t.filters);r&&(e.structuredQuery.where=r);const s=function(p){if(0!==p.length)return p.map(_=>{return{field:$y((b=_).field),direction:LG(b.dir)};var b})}(t.orderBy);s&&(e.structuredQuery.orderBy=s);const c=(_=t.limit,n.gt||ld(_)?_:{value:_});var _,d,p;return null!==c&&(e.structuredQuery.limit=c),t.startAt&&(e.structuredQuery.startAt={before:(d=t.startAt).inclusive,values:d.position}),t.endAt&&(e.structuredQuery.endAt={before:!(p=t.endAt).inclusive,values:p.position}),e}function uB(n){let t=rB(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let r=null;if(i>0){Kt(1===i);const b=e.from[0];b.allDescendants?r=b.collectionId:t=t.child(b.collectionId)}let s=[];e.where&&(s=dB(e.where));let c=[];e.orderBy&&(c=e.orderBy.map(b=>{return new Ly(Gy((E=b).field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction));var E}));let d=null;e.limit&&(d=function(b){let E;return E="object"==typeof b?b.value:b,ld(E)?null:E}(e.limit));let p=null;var b;e.startAt&&(p=new ff((b=e.startAt).values||[],!!b.before));let _=null;return e.endAt&&(_=function(b){return new ff(b.values||[],!b.before)}(e.endAt)),SL(t,r,c,s,d,"F",p,_)}function dB(n){return n?void 0!==n.unaryFilter?[UG(n)]:void 0!==n.fieldFilter?[VG(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(t=>dB(t)).reduce((t,e)=>t.concat(e)):wt():[]}function LG(n){return TG[n]}function BG(n){return AG[n]}function $y(n){return{fieldPath:n.canonicalString()}}function Gy(n){return Ai.fromServerFormat(n.fieldPath)}function VG(n){return rs.create(Gy(n.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return wt()}}(n.fieldFilter.op),n.fieldFilter.value)}function UG(n){switch(n.unaryFilter.op){case"IS_NAN":const t=Gy(n.unaryFilter.field);return rs.create(t,"==",{doubleValue:NaN});case"IS_NULL":const e=Gy(n.unaryFilter.field);return rs.create(e,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Gy(n.unaryFilter.field);return rs.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Gy(n.unaryFilter.field);return rs.create(r,"!=",{nullValue:"NULL_VALUE"});default:return wt()}}function HG(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function hB(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function js(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=fB(t)),t=jG(n.get(e),t);return fB(t)}function jG(n,t){let e=t;const i=n.length;for(let r=0;r<i;r++){const s=n.charAt(r);switch(s){case"\0":e+="\x01\x10";break;case"\x01":e+="\x01\x11";break;default:e+=s}}return e}function fB(n){return n+"\x01\x01"}function Wc(n){const t=n.length;if(Kt(t>=2),2===t)return Kt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),kn.emptyPath();const e=t-2,i=[];let r="";for(let s=0;s<t;){const c=n.indexOf("\x01",s);switch((c<0||c>e)&&wt(),n.charAt(c+1)){case"\x01":const d=n.substring(s,c);let p;0===r.length?p=d:(r+=d,p=r,r=""),i.push(p);break;case"\x10":r+=n.substring(s,c),r+="\0";break;case"\x11":r+=n.substring(s,c+1);break;default:wt()}s=c+2}return new kn(i)}const pB=["userId","batchId"];function RI(n,t){return[n,js(t)]}function mB(n,t,e){return[n,js(t),e]}const zG={},$G=["prefixPath","collectionGroup","readTime","documentId"],GG=["prefixPath","collectionGroup","documentId"],WG=["collectionGroup","readTime","prefixPath","documentId"],qG=["canonicalId","targetId"],YG=["targetId","path"],ZG=["path","targetId"],KG=["collectionId","parent"],QG=["indexId","uid"],XG=["uid","sequenceNumber"],JG=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],eW=["indexId","uid","orderedDocumentKey"],tW=["userId","collectionPath","documentId"],nW=["userId","collectionPath","largestBatchId"],iW=["userId","collectionGroup","largestBatchId"],gB=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],rW=[...gB,"documentOverlays"],_B=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],yB=_B,sW=[...yB,"indexConfiguration","indexState","indexEntries"];class nR extends $k{constructor(t,e){super(),this.ie=t,this.currentSequenceNumber=e}}function $r(n,t){const e=mt(n);return za.O(e.ie,t)}class iR{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&CG(s,t,i[r])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=$C(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=$C(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=KL();return this.mutations.forEach(r=>{const s=t.get(r.key),c=s.overlayedDocument;let d=this.applyToLocalView(c,s.mutatedFields);d=e.has(r.key)?null:d;const p=HL(c,d);null!==p&&i.set(r.key,p),c.isValidDocument()||c.convertToNoDocument(Gt.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),pn())}isEqual(t){return this.batchId===t.batchId&&cf(this.mutations,t.mutations,(e,i)=>jL(e,i))&&cf(this.baseMutations,t.baseMutations,(e,i)=>jL(e,i))}}class rR{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){Kt(t.mutations.length===i.length);let r=MG;const s=t.mutations;for(let c=0;c<s.length;c++)r=r.insert(s[c].key,i[c].version);return new rR(t,e,i,r)}}class sR{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class mf{constructor(t,e,i,r,s=Gt.min(),c=Gt.min(),d=ot.EMPTY_BYTE_STRING){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d}withSequenceNumber(t){return new mf(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,e){return new mf(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new mf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}class vB{constructor(t){this.re=t}}function bB(n,t){const e=t.key,i={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:OI(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())i.document={name:KC(r=n.re,(s=t).key),fields:s.data.value.mapValue.fields,updateTime:ZC(r,s.version.toTimestamp())};else if(t.isNoDocument())i.noDocument={path:e.path.toArray(),readTime:Fm(t.version)};else{if(!t.isUnknownDocument())return wt();i.unknownDocument={path:e.path.toArray(),version:Fm(t.version)}}var r,s;return i}function OI(n){const t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function Fm(n){const t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Lm(n){const t=new mi(n.seconds,n.nanoseconds);return Gt.fromTimestamp(t)}function Bm(n,t){const e=(t.baseMutations||[]).map(s=>tR(n.re,s));for(let s=0;s<t.mutations.length-1;++s){const c=t.mutations[s];s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform&&(c.updateTransforms=t.mutations[s+1].transform.fieldTransforms,t.mutations.splice(s+1,1),++s)}const i=t.mutations.map(s=>tR(n.re,s)),r=mi.fromMillis(t.localWriteTimeMs);return new iR(t.batchId,r,e,i)}function JC(n){const t=Lm(n.readTime),e=void 0!==n.lastLimboFreeSnapshotVersion?Lm(n.lastLimboFreeSnapshotVersion):Gt.min();let i;var r;return void 0!==n.query.documents?(Kt(1===(r=n.query).documents.length),i=ho(By(rB(r.documents[0])))):i=ho(uB(n.query)),new mf(i,n.targetId,0,n.lastListenSequenceNumber,t,e,ot.fromBase64String(n.resumeToken))}function CB(n,t){const e=Fm(t.snapshotVersion),i=Fm(t.lastLimboFreeSnapshotVersion);let r;r=EI(t.target)?lB(n.re,t.target):cB(n.re,t.target);const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Om(t.target),readTime:e,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function oR(n){const t=uB({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?II(t,t.limit,"L"):t}function aR(n,t){return new sR(t.largestBatchId,tR(n.re,t.overlayMutation))}function wB(n,t){const e=t.path.lastSegment();return[n,js(t.path.popLast()),e]}function DB(n,t,e,i){return{indexId:n,uid:t.uid||"",sequenceNumber:e,readTime:Fm(i.readTime),documentKey:js(i.documentKey.path),largestBatchId:i.largestBatchId}}class aW{getBundleMetadata(t,e){return EB(t).get(e).next(i=>{if(i)return{id:(r=i).bundleId,createTime:Lm(r.createTime),version:r.version};var r})}saveBundleMetadata(t,e){return EB(t).put({bundleId:(i=e).id,createTime:Fm(zr(i.createTime)),version:i.version});var i}getNamedQuery(t,e){return MB(t).get(e).next(i=>{if(i)return{name:(r=i).name,query:oR(r.bundledQuery),readTime:Lm(r.readTime)};var r})}saveNamedQuery(t,e){return MB(t).put({name:(i=e).name,readTime:Fm(zr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function EB(n){return $r(n,"bundles")}function MB(n){return $r(n,"namedQueries")}class PI{constructor(t,e){this.It=t,this.userId=e}static oe(t,e){return new PI(t,e.uid||"")}getOverlay(t,e){return ew(t).get(wB(this.userId,e)).next(i=>i?aR(this.It,i):null)}getOverlays(t,e){const i=$c();return _e.forEach(e,r=>this.getOverlay(t,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(t,e,i){const r=[];return i.forEach((s,c)=>{const d=new sR(e,c);r.push(this.ue(t,d))}),_e.waitFor(r)}removeOverlaysForBatchId(t,e,i){const r=new Set;e.forEach(c=>r.add(js(c.getCollectionPath())));const s=[];return r.forEach(c=>{const d=IDBKeyRange.bound([this.userId,c,i],[this.userId,c,i+1],!1,!0);s.push(ew(t).Y("collectionPathOverlayIndex",d))}),_e.waitFor(s)}getOverlaysForCollection(t,e,i){const r=$c(),s=js(e),c=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return ew(t).W("collectionPathOverlayIndex",c).next(d=>{for(const p of d){const _=aR(this.It,p);r.set(_.getKey(),_)}return r})}getOverlaysForCollectionGroup(t,e,i,r){const s=$c();let c;const d=IDBKeyRange.bound([this.userId,e,i],[this.userId,e,Number.POSITIVE_INFINITY],!0);return ew(t).Z({index:"collectionGroupOverlayIndex",range:d},(p,_,b)=>{const E=aR(this.It,_);s.size()<r||E.largestBatchId===c?(s.set(E.getKey(),E),c=E.largestBatchId):b.done()}).next(()=>s)}ue(t,e){return ew(t).put(function(i,r,s){const[c,d,p]=wB(r,s.mutation.key);return{userId:r,collectionPath:d,documentId:p,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:XC(i.re,s.mutation)}}(this.It,this.userId,e))}}function ew(n){return $r(n,"documentOverlays")}class Vm{constructor(){}ce(t,e){this.ae(t,e),e.he()}ae(t,e){if("nullValue"in t)this.le(e,5);else if("booleanValue"in t)this.le(e,10),e.fe(t.booleanValue?1:0);else if("integerValue"in t)this.le(e,15),e.fe(bt(t.integerValue));else if("doubleValue"in t){const i=bt(t.doubleValue);isNaN(i)?this.le(e,13):(this.le(e,15),cd(i)?e.fe(0):e.fe(i))}else if("timestampValue"in t){const i=t.timestampValue;this.le(e,20),"string"==typeof i?e.de(i):(e.de(`${i.seconds||""}`),e.fe(i.nanos||0))}else if("stringValue"in t)this._e(t.stringValue,e),this.we(e);else if("bytesValue"in t)this.le(e,30),e.me(wn(t.bytesValue)),this.we(e);else if("referenceValue"in t)this.ge(t.referenceValue,e);else if("geoPointValue"in t){const i=t.geoPointValue;this.le(e,45),e.fe(i.latitude||0),e.fe(i.longitude||0)}else"mapValue"in t?yL(t)?this.le(e,Number.MAX_SAFE_INTEGER):(this.ye(t.mapValue,e),this.we(e)):"arrayValue"in t?(this.pe(t.arrayValue,e),this.we(e)):wt()}_e(t,e){this.le(e,25),this.Ie(t,e)}Ie(t,e){e.de(t)}ye(t,e){const i=t.fields||{};this.le(e,55);for(const r of Object.keys(i))this._e(r,e),this.ae(i[r],e)}pe(t,e){const i=t.values||[];this.le(e,50);for(const r of i)this.ae(r,e)}ge(t,e){this.le(e,37),at.fromName(t).path.forEach(i=>{this.le(e,60),this.Ie(i,e)})}le(t,e){t.fe(e)}we(t){t.fe(2)}}function lW(n){if(0===n)return 8;let t=0;return n>>4==0&&(t+=4,n<<=4),n>>6==0&&(t+=2,n<<=2),n>>7==0&&(t+=1),t}function IB(n){const t=64-function(e){let i=0;for(let r=0;r<8;++r){const s=lW(255&e[r]);if(i+=s,8!==s)break}return i}(n);return Math.ceil(t/8)}Vm.Te=new Vm;class cW{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Ae(i.value),i=e.next();this.Re()}be(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Pe(i.value),i=e.next();this.ve()}Ve(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Ae(i);else if(i<2048)this.Ae(960|i>>>6),this.Ae(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.Ae(480|i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i);else{const r=e.codePointAt(0);this.Ae(240|r>>>18),this.Ae(128|63&r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r)}}this.Re()}Se(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Pe(i);else if(i<2048)this.Pe(960|i>>>6),this.Pe(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.Pe(480|i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i);else{const r=e.codePointAt(0);this.Pe(240|r>>>18),this.Pe(128|63&r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r)}}this.ve()}De(t){const e=this.Ce(t),i=IB(e);this.xe(1+i),this.buffer[this.position++]=255&i;for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=255&e[r]}Ne(t){const e=this.Ce(t),i=IB(e);this.xe(1+i),this.buffer[this.position++]=~(255&i);for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=~(255&e[r])}ke(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(t){this.xe(t.length),this.buffer.set(t,this.position),this.position+=t.length}$e(){return this.buffer.slice(0,this.position)}Ce(t){const e=function(r){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,r,!1),new Uint8Array(s.buffer)}(t),i=0!=(128&e[0]);e[0]^=i?255:128;for(let r=1;r<e.length;++r)e[r]^=i?255:0;return e}Ae(t){const e=255&t;0===e?(this.Me(0),this.Me(255)):255===e?(this.Me(255),this.Me(0)):this.Me(e)}Pe(t){const e=255&t;0===e?(this.Fe(0),this.Fe(255)):255===e?(this.Fe(255),this.Fe(0)):this.Fe(t)}Re(){this.Me(0),this.Me(1)}ve(){this.Fe(0),this.Fe(1)}Me(t){this.xe(1),this.buffer[this.position++]=t}Fe(t){this.xe(1),this.buffer[this.position++]=~t}xe(t){const e=t+this.position;if(e<=this.buffer.length)return;let i=2*this.buffer.length;i<e&&(i=e);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class uW{constructor(t){this.Be=t}me(t){this.Be.Ee(t)}de(t){this.Be.Ve(t)}fe(t){this.Be.De(t)}he(){this.Be.ke()}}class dW{constructor(t){this.Be=t}me(t){this.Be.be(t)}de(t){this.Be.Se(t)}fe(t){this.Be.Ne(t)}he(){this.Be.Oe()}}class tw{constructor(){this.Be=new cW,this.Le=new uW(this.Be),this.Ue=new dW(this.Be)}seed(t){this.Be.seed(t)}qe(t){return 0===t?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class Um{constructor(t,e,i,r){this.indexId=t,this.documentKey=e,this.arrayValue=i,this.directionalValue=r}Ke(){const t=this.directionalValue.length,e=0===t||255===this.directionalValue[t-1]?t+1:t,i=new Uint8Array(e);return i.set(this.directionalValue,0),e!==t?i.set([0],this.directionalValue.length):++i[i.length-1],new Um(this.indexId,this.documentKey,this.arrayValue,i)}}function Hm(n,t){let e=n.indexId-t.indexId;return 0!==e?e:(e=xB(n.arrayValue,t.arrayValue),0!==e?e:(e=xB(n.directionalValue,t.directionalValue),0!==e?e:at.comparator(n.documentKey,t.documentKey)))}function xB(n,t){for(let e=0;e<n.length&&e<t.length;++e){const i=n[e]-t[e];if(0!==i)return i}return n.length-t.length}class hW{constructor(t){this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ge=t.orderBy,this.Qe=[];for(const e of t.filters){const i=e;i.dt()?this.je=i:this.Qe.push(i)}}We(t){const e=ky(t);if(void 0!==e&&!this.ze(e))return!1;const i=Yl(t);let r=0,s=0;for(;r<i.length&&this.ze(i[r]);++r);if(r===i.length)return!0;if(void 0!==this.je){const c=i[r];if(!this.He(this.je,c)||!this.Je(this.Ge[s++],c))return!1;++r}for(;r<i.length;++r){const c=i[r];if(s>=this.Ge.length||!this.Je(this.Ge[s++],c))return!1}return!0}ze(t){for(const e of this.Qe)if(this.He(e,t))return!0;return!1}He(t,e){return!(void 0===t||!t.field.isEqual(e.fieldPath))&&2===e.kind==("array-contains"===t.op||"array-contains-any"===t.op)}Je(t,e){return!!t.field.isEqual(e.fieldPath)&&(0===e.kind&&"asc"===t.dir||1===e.kind&&"desc"===t.dir)}}class fW{constructor(){this.Ye=new lR}addToCollectionParentIndex(t,e){return this.Ye.add(e),_e.resolve()}getCollectionParents(t,e){return _e.resolve(this.Ye.getEntries(e))}addFieldIndex(t,e){return _e.resolve()}deleteFieldIndex(t,e){return _e.resolve()}getDocumentsMatchingTarget(t,e){return _e.resolve(null)}getIndexType(t,e){return _e.resolve(0)}getFieldIndexes(t,e){return _e.resolve([])}getNextCollectionGroupToUpdate(t){return _e.resolve(null)}getMinOffset(t,e){return _e.resolve(Hs.min())}getMinOffsetFromCollectionGroup(t,e){return _e.resolve(Hs.min())}updateCollectionGroup(t,e,i){return _e.resolve()}updateIndexEntries(t,e){return _e.resolve()}}class lR{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new z(kn.comparator),s=!r.has(i);return this.index[e]=r.add(i),s}has(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new z(kn.comparator)).toArray()}}const NI=new Uint8Array(0);class pW{constructor(t,e){this.user=t,this.databaseId=e,this.Xe=new lR,this.Ze=new pf(i=>Om(i),(i,r)=>HC(i,r)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.Xe.has(e)){const i=e.lastSegment(),r=e.popLast();t.addOnCommittedListener(()=>{this.Xe.add(e)});const s={collectionId:i,parent:js(r)};return SB(t).put(s)}return _e.resolve()}getCollectionParents(t,e){const i=[],r=IDBKeyRange.bound([e,""],[yI(e),""],!1,!0);return SB(t).W(r).next(s=>{for(const c of s){if(c.collectionId!==e)break;i.push(Wc(c.parent))}return i})}addFieldIndex(t,e){const i=FI(t),r={indexId:(c=e).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var c;delete r.indexId;const s=i.add(r);if(e.indexState){const c=iw(t);return s.next(d=>{c.put(DB(d,this.user,e.indexState.sequenceNumber,e.indexState.offset))})}return s.next()}deleteFieldIndex(t,e){const i=FI(t),r=iw(t),s=nw(t);return i.delete(e.indexId).next(()=>r.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}getDocumentsMatchingTarget(t,e){const i=nw(t);let r=!0;const s=new Map;return _e.forEach(this.tn(e),c=>this.en(t,c).next(d=>{r&&(r=!!d),s.set(c,d)})).next(()=>{if(r){let c=pn();const d=[];return _e.forEach(s,(p,_)=>{var b;Ze("IndexedDbIndexManager",`Using index ${b=p,`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(pt=>`${pt.fieldPath}:${pt.kind}`).join(",")}`} to execute ${Om(e)}`);const E=function(pt,st){const Lt=ky(st);if(void 0===Lt)return null;for(const Ht of MI(pt,Lt.fieldPath))switch(Ht.op){case"array-contains-any":return Ht.value.arrayValue.values||[];case"array-contains":return[Ht.value]}return null}(_,p),T=function(pt,st){const Lt=new Map;for(const Ht of Yl(st))for(const En of MI(pt,Ht.fieldPath))switch(En.op){case"==":case"in":Lt.set(Ht.fieldPath.canonicalString(),En.value);break;case"not-in":case"!=":return Lt.set(Ht.fieldPath.canonicalString(),En.value),Array.from(Lt.values())}return null}(_,p),N=function(pt,st){const Lt=[];let Ht=!0;for(const En of Yl(st)){const tr=0===En.kind?DL(pt,En.fieldPath,pt.startAt):EL(pt,En.fieldPath,pt.startAt);Lt.push(tr.value),Ht&&(Ht=tr.inclusive)}return new ff(Lt,Ht)}(_,p),V=function(pt,st){const Lt=[];let Ht=!0;for(const En of Yl(st)){const tr=0===En.kind?EL(pt,En.fieldPath,pt.endAt):DL(pt,En.fieldPath,pt.endAt);Lt.push(tr.value),Ht&&(Ht=tr.inclusive)}return new ff(Lt,Ht)}(_,p),K=this.nn(p,_,N),re=this.nn(p,_,V),Ye=this.sn(p,_,T),rt=this.rn(p.indexId,E,K,N.inclusive,re,V.inclusive,Ye);return _e.forEach(rt,pt=>i.J(pt,e.limit).next(st=>{st.forEach(Lt=>{const Ht=at.fromSegments(Lt.documentKey);c.has(Ht)||(c=c.add(Ht),d.push(Ht))})}))}).next(()=>d)}return _e.resolve(null)})}tn(t){let e=this.Ze.get(t);return e||(e=[t],this.Ze.set(t,e),e)}rn(t,e,i,r,s,c,d){const p=(null!=e?e.length:1)*Math.max(i.length,s.length),_=p/(null!=e?e.length:1),b=[];for(let E=0;E<p;++E){const T=e?this.on(e[E/_]):NI,N=this.un(t,T,i[E%_],r),V=this.cn(t,T,s[E%_],c),K=d.map(re=>this.un(t,T,re,!0));b.push(...this.createRange(N,V,K))}return b}un(t,e,i,r){const s=new Um(t,at.empty(),e,i);return r?s:s.Ke()}cn(t,e,i,r){const s=new Um(t,at.empty(),e,i);return r?s.Ke():s}en(t,e){const i=new hW(e),r=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,r).next(s=>{let c=null;for(const d of s)i.We(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c})}getIndexType(t,e){let i=2;return _e.forEach(this.tn(e),r=>this.en(t,r).next(s=>{s?0!==i&&s.fields.length<function(c){let d=new z(Ai.comparator),p=!1;for(const _ of c.filters){const b=_;b.field.isKeyField()||("array-contains"===b.op||"array-contains-any"===b.op?p=!0:d=d.add(b.field))}for(const _ of c.orderBy)_.field.isKeyField()||(d=d.add(_.field));return d.size+(p?1:0)}(r)&&(i=1):i=0})).next(()=>i)}an(t,e){const i=new tw;for(const r of Yl(t)){const s=e.data.field(r.fieldPath);if(null==s)return null;const c=i.qe(r.kind);Vm.Te.ce(s,c)}return i.$e()}on(t){const e=new tw;return Vm.Te.ce(t,e.qe(0)),e.$e()}hn(t,e){const i=new tw;return Vm.Te.ce(Rm(this.databaseId,e),i.qe(function(r){const s=Yl(r);return 0===s.length?0:s[s.length-1].kind}(t))),i.$e()}sn(t,e,i){if(null===i)return[];let r=[];r.push(new tw);let s=0;for(const c of Yl(t)){const d=i[s++];for(const p of r)if(this.ln(e,c.fieldPath)&&VC(d))r=this.fn(r,c,d);else{const _=p.qe(c.kind);Vm.Te.ce(d,_)}}return this.dn(r)}nn(t,e,i){return this.sn(t,e,i.position)}dn(t){const e=[];for(let i=0;i<t.length;++i)e[i]=t[i].$e();return e}fn(t,e,i){const r=[...t],s=[];for(const c of i.arrayValue.values||[])for(const d of r){const p=new tw;p.seed(d.$e()),Vm.Te.ce(c,p.qe(e.kind)),s.push(p)}return s}ln(t,e){return!!t.filters.find(i=>i instanceof rs&&i.field.isEqual(e)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(t,e){const i=FI(t),r=iw(t);return(e?i.W("collectionGroupIndex",IDBKeyRange.bound(e,e)):i.W()).next(s=>{const c=[];return _e.forEach(s,d=>r.get([d.indexId,this.uid]).next(p=>{c.push(function(_,b){const E=b?new Oy(b.sequenceNumber,new Hs(Lm(b.readTime),new at(Wc(b.documentKey)),b.largestBatchId)):Oy.empty(),T=_.fields.map(([N,V])=>new Ry(Ai.fromServerFormat(N),V));return new NC(_.indexId,_.collectionGroup,T,E)}(d,p))})).next(()=>c)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>0===e.length?null:(e.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return 0!==s?s:nn(i.collectionGroup,r.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,i){const r=FI(t),s=iw(t);return this._n(t).next(c=>r.W("collectionGroupIndex",IDBKeyRange.bound(e,e)).next(d=>_e.forEach(d,p=>s.put(DB(p.indexId,this.user,c,i)))))}updateIndexEntries(t,e){const i=new Map;return _e.forEach(e,(r,s)=>{const c=i.get(r.collectionGroup);return(c?_e.resolve(c):this.getFieldIndexes(t,r.collectionGroup)).next(d=>(i.set(r.collectionGroup,d),_e.forEach(d,p=>this.wn(t,r,p).next(_=>{const b=this.mn(s,p);return _.isEqual(b)?_e.resolve():this.gn(t,s,p,_,b)}))))})}yn(t,e,i,r){return nw(t).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.hn(i,e.key),documentKey:e.key.path.toArray()})}pn(t,e,i,r){return nw(t).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.hn(i,e.key),e.key.path.toArray()])}wn(t,e,i){const r=nw(t);let s=new z(Hm);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.hn(i,e)])},(c,d)=>{s=s.add(new Um(i.indexId,e,d.arrayValue,d.directionalValue))}).next(()=>s)}mn(t,e){let i=new z(Hm);const r=this.an(e,t);if(null==r)return i;const s=ky(e);if(null!=s){const c=t.data.field(s.fieldPath);if(VC(c))for(const d of c.arrayValue.values||[])i=i.add(new Um(e.indexId,t.key,this.on(d),r))}else i=i.add(new Um(e.indexId,t.key,NI,r));return i}gn(t,e,i,r,s){Ze("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const c=[];return function(d,p,_,b,E){const T=d.getIterator(),N=p.getIterator();let V=Se(T),K=Se(N);for(;V||K;){let re=!1,Ye=!1;if(V&&K){const rt=_(V,K);rt<0?Ye=!0:rt>0&&(re=!0)}else null!=V?Ye=!0:re=!0;re?(b(K),K=Se(N)):Ye?(E(V),V=Se(T)):(V=Se(T),K=Se(N))}}(r,s,Hm,d=>{c.push(this.yn(t,e,i,d))},d=>{c.push(this.pn(t,e,i,d))}),_e.waitFor(c)}_n(t){let e=1;return iw(t).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),e=r.sequenceNumber+1}).next(()=>e)}createRange(t,e,i){i=i.sort((c,d)=>Hm(c,d)).filter((c,d,p)=>!d||0!==Hm(c,p[d-1]));const r=[];r.push(t);for(const c of i){const d=Hm(c,t),p=Hm(c,e);if(0===d)r[0]=t.Ke();else if(d>0&&p<0)r.push(c),r.push(c.Ke());else if(p>0)break}r.push(e);const s=[];for(let c=0;c<r.length;c+=2)s.push(IDBKeyRange.bound([r[c].indexId,this.uid,r[c].arrayValue,r[c].directionalValue,NI,[]],[r[c+1].indexId,this.uid,r[c+1].arrayValue,r[c+1].directionalValue,NI,[]]));return s}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(TB)}getMinOffset(t,e){return _e.mapArray(this.tn(e),i=>this.en(t,i).next(r=>r||wt())).next(TB)}}function SB(n){return $r(n,"collectionParents")}function nw(n){return $r(n,"indexEntries")}function FI(n){return $r(n,"indexConfiguration")}function iw(n){return $r(n,"indexState")}function TB(n){Kt(0!==n.length);let t=n[0].indexState.offset,e=t.largestBatchId;for(let i=1;i<n.length;i++){const r=n[i].indexState.offset;CI(r,t)<0&&(t=r),e<r.largestBatchId&&(e=r.largestBatchId)}return new Hs(t.readTime,t.documentKey,e)}const AB={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class po{constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}static withCacheSize(t){return new po(t,po.DEFAULT_COLLECTION_PERCENTILE,po.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function kB(n,t,e){const i=n.store("mutations"),r=n.store("documentMutations"),s=[],c=IDBKeyRange.only(e.batchId);let d=0;const p=i.Z({range:c},(b,E,T)=>(d++,T.delete()));s.push(p.next(()=>{Kt(1===d)}));const _=[];for(const b of e.mutations){const E=mB(t,b.key.path,e.batchId);s.push(r.delete(E)),_.push(b.key)}return _e.waitFor(s).next(()=>_)}function LI(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw wt();t=n.noDocument}return JSON.stringify(t).length}po.DEFAULT_COLLECTION_PERCENTILE=10,po.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,po.DEFAULT=new po(41943040,po.DEFAULT_COLLECTION_PERCENTILE,po.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),po.DISABLED=new po(-1,0,0);class BI{constructor(t,e,i,r){this.userId=t,this.It=e,this.indexManager=i,this.referenceDelegate=r,this.In={}}static oe(t,e,i,r){Kt(""!==t.uid);const s=t.isAuthenticated()?t.uid:"";return new BI(s,e,i,r)}checkEmpty(t){let e=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return gf(t).Z({index:"userMutationsIndex",range:i},(r,s,c)=>{e=!1,c.done()}).next(()=>e)}addMutationBatch(t,e,i,r){const s=Wy(t),c=gf(t);return c.add({}).next(d=>{Kt("number"==typeof d);const p=new iR(d,e,i,r),_=function(T,N,V){const K=V.baseMutations.map(Ye=>XC(T.re,Ye)),re=V.mutations.map(Ye=>XC(T.re,Ye));return{userId:N,batchId:V.batchId,localWriteTimeMs:V.localWriteTime.toMillis(),baseMutations:K,mutations:re}}(this.It,this.userId,p),b=[];let E=new z((T,N)=>nn(T.canonicalString(),N.canonicalString()));for(const T of r){const N=mB(this.userId,T.key.path,d);E=E.add(T.key.path.popLast()),b.push(c.put(_)),b.push(s.put(N,zG))}return E.forEach(T=>{b.push(this.indexManager.addToCollectionParentIndex(t,T))}),t.addOnCommittedListener(()=>{this.In[d]=p.keys()}),_e.waitFor(b).next(()=>p)})}lookupMutationBatch(t,e){return gf(t).get(e).next(i=>i?(Kt(i.userId===this.userId),Bm(this.It,i)):null)}Tn(t,e){return this.In[e]?_e.resolve(this.In[e]):this.lookupMutationBatch(t,e).next(i=>{if(i){const r=i.keys();return this.In[e]=r,r}return null})}getNextMutationBatchAfterBatchId(t,e){const i=e+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return gf(t).Z({index:"userMutationsIndex",range:r},(c,d,p)=>{d.userId===this.userId&&(Kt(d.batchId>=i),s=Bm(this.It,d)),p.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return gf(t).Z({index:"userMutationsIndex",range:e,reverse:!0},(r,s,c)=>{i=s.batchId,c.done()}).next(()=>i)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return gf(t).W("userMutationsIndex",e).next(i=>i.map(r=>Bm(this.It,r)))}getAllMutationBatchesAffectingDocumentKey(t,e){const i=RI(this.userId,e.path),r=IDBKeyRange.lowerBound(i),s=[];return Wy(t).Z({range:r},(c,d,p)=>{const[_,b,E]=c,T=Wc(b);if(_===this.userId&&e.path.isEqual(T))return gf(t).get(E).next(N=>{if(!N)throw wt();Kt(N.userId===this.userId),s.push(Bm(this.It,N))});p.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new z(nn);const r=[];return e.forEach(s=>{const c=RI(this.userId,s.path),d=IDBKeyRange.lowerBound(c),p=Wy(t).Z({range:d},(_,b,E)=>{const[T,N,V]=_,K=Wc(N);T===this.userId&&s.path.isEqual(K)?i=i.add(V):E.done()});r.push(p)}),_e.waitFor(r).next(()=>this.En(t,i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1,s=RI(this.userId,i),c=IDBKeyRange.lowerBound(s);let d=new z(nn);return Wy(t).Z({range:c},(p,_,b)=>{const[E,T,N]=p,V=Wc(T);E===this.userId&&i.isPrefixOf(V)?V.length===r&&(d=d.add(N)):b.done()}).next(()=>this.En(t,d))}En(t,e){const i=[],r=[];return e.forEach(s=>{r.push(gf(t).get(s).next(c=>{if(null===c)throw wt();Kt(c.userId===this.userId),i.push(Bm(this.It,c))}))}),_e.waitFor(r).next(()=>i)}removeMutationBatch(t,e){return kB(t.ie,this.userId,e).next(i=>(t.addOnCommittedListener(()=>{this.An(e.batchId)}),_e.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(t,r))))}An(t){delete this.In[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return _e.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return Wy(t).Z({range:i},(s,c,d)=>{if(s[0]===this.userId){const p=Wc(s[1]);r.push(p)}else d.done()}).next(()=>{Kt(0===r.length)})})}containsKey(t,e){return RB(t,this.userId,e)}Rn(t){return OB(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function RB(n,t,e){const i=RI(t,e.path),r=i[1],s=IDBKeyRange.lowerBound(i);let c=!1;return Wy(n).Z({range:s,X:!0},(d,p,_)=>{const[b,E,T]=d;b===t&&E===r&&(c=!0),_.done()}).next(()=>c)}function gf(n){return $r(n,"mutations")}function Wy(n){return $r(n,"documentMutations")}function OB(n){return $r(n,"mutationQueues")}class jm{constructor(t){this.bn=t}next(){return this.bn+=2,this.bn}static Pn(){return new jm(0)}static vn(){return new jm(-1)}}class mW{constructor(t,e){this.referenceDelegate=t,this.It=e}allocateTargetId(t){return this.Vn(t).next(e=>{const i=new jm(e.highestTargetId);return e.highestTargetId=i.next(),this.Sn(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.Vn(t).next(e=>Gt.fromTimestamp(new mi(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.Vn(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,i){return this.Vn(t).next(r=>(r.highestListenSequenceNumber=e,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),e>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e),this.Sn(t,r)))}addTargetData(t,e){return this.Dn(t,e).next(()=>this.Vn(t).next(i=>(i.targetCount+=1,this.Cn(e,i),this.Sn(t,i))))}updateTargetData(t,e){return this.Dn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>qy(t).delete(e.targetId)).next(()=>this.Vn(t)).next(i=>(Kt(i.targetCount>0),i.targetCount-=1,this.Sn(t,i)))}removeTargets(t,e,i){let r=0;const s=[];return qy(t).Z((c,d)=>{const p=JC(d);p.sequenceNumber<=e&&null===i.get(p.targetId)&&(r++,s.push(this.removeTargetData(t,p)))}).next(()=>_e.waitFor(s)).next(()=>r)}forEachTarget(t,e){return qy(t).Z((i,r)=>{const s=JC(r);e(s)})}Vn(t){return PB(t).get("targetGlobalKey").next(e=>(Kt(null!==e),e))}Sn(t,e){return PB(t).put("targetGlobalKey",e)}Dn(t,e){return qy(t).put(CB(this.It,e))}Cn(t,e){let i=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,i=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,i=!0),i}getTargetCount(t){return this.Vn(t).next(e=>e.targetCount)}getTargetData(t,e){const i=Om(e),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return qy(t).Z({range:r,index:"queryTargetsIndex"},(c,d,p)=>{const _=JC(d);HC(e,_.target)&&(s=_,p.done())}).next(()=>s)}addMatchingKeys(t,e,i){const r=[],s=_f(t);return e.forEach(c=>{const d=js(c.path);r.push(s.put({targetId:i,path:d})),r.push(this.referenceDelegate.addReference(t,i,c))}),_e.waitFor(r)}removeMatchingKeys(t,e,i){const r=_f(t);return _e.forEach(e,s=>{const c=js(s.path);return _e.waitFor([r.delete([i,c]),this.referenceDelegate.removeReference(t,i,s)])})}removeMatchingKeysForTargetId(t,e){const i=_f(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(t,e){const i=IDBKeyRange.bound([e],[e+1],!1,!0),r=_f(t);let s=pn();return r.Z({range:i,X:!0},(c,d,p)=>{const _=Wc(c[1]),b=new at(_);s=s.add(b)}).next(()=>s)}containsKey(t,e){const i=js(e.path),r=IDBKeyRange.bound([i],[yI(i)],!1,!0);let s=0;return _f(t).Z({index:"documentTargetsIndex",X:!0,range:r},([c,d],p,_)=>{0!==c&&(s++,_.done())}).next(()=>s>0)}se(t,e){return qy(t).get(e).next(i=>i?JC(i):null)}}function qy(n){return $r(n,"targets")}function PB(n){return $r(n,"targetGlobal")}function _f(n){return $r(n,"targetDocuments")}function NB([n,t],[e,i]){const r=nn(n,e);return 0===r?nn(t,i):r}class gW{constructor(t){this.xn=t,this.buffer=new z(NB),this.Nn=0}kn(){return++this.Nn}Mn(t){const e=[t,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();NB(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class _W{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.On=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return null!==this.On}Fn(t){var e=this;Ze("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(0,Me.Z)(function*(){e.On=null;try{yield e.localStore.collectGarbage(e.garbageCollector)}catch(i){od(i)?Ze("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield sd(i)}yield e.Fn(3e5)}))}}class yW{constructor(t,e){this.$n=t,this.params=e}calculateTargetCount(t,e){return this.$n.Bn(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(0===e)return _e.resolve(m.at);const i=new gW(e);return this.$n.forEachTarget(t,r=>i.Mn(r.sequenceNumber)).next(()=>this.$n.Ln(t,r=>i.Mn(r))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.$n.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.$n.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(Ze("LruGarbageCollector","Garbage collection skipped; disabled"),_e.resolve(AB)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(Ze("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),AB):this.Un(t,e))}getCacheSize(t){return this.$n.getCacheSize(t)}Un(t,e){let i,r,s,c,d,p,_;const b=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(E=>(E>this.params.maximumSequenceNumbersToCollect?(Ze("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),r=this.params.maximumSequenceNumbersToCollect):r=E,c=Date.now(),this.nthSequenceNumber(t,r))).next(E=>(i=E,d=Date.now(),this.removeTargets(t,i,e))).next(E=>(s=E,p=Date.now(),this.removeOrphanedDocuments(t,i))).next(E=>(_=Date.now(),mI()<=sr.in.DEBUG&&Ze("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-b}ms\n\tDetermined least recently used ${r} in `+(d-c)+`ms\n\tRemoved ${s} targets in `+(p-d)+`ms\n\tRemoved ${E} documents in `+(_-p)+`ms\nTotal Duration: ${_-b}ms`),_e.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:E})))}}class vW{constructor(t,e){this.db=t,this.garbageCollector=new yW(this,e)}Bn(t){const e=this.qn(t);return this.db.getTargetCache().getTargetCount(t).next(i=>e.next(r=>i+r))}qn(t){let e=0;return this.Ln(t,i=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}Ln(t,e){return this.Kn(t,(i,r)=>e(r))}addReference(t,e,i){return VI(t,i)}removeReference(t,e,i){return VI(t,i)}removeTargets(t,e,i){return this.db.getTargetCache().removeTargets(t,e,i)}markPotentiallyOrphaned(t,e){return VI(t,e)}Gn(t,e){return function(i,r){let s=!1;return OB(i).tt(c=>RB(i,c,r).next(d=>(d&&(s=!0),_e.resolve(!d)))).next(()=>s)}(t,e)}removeOrphanedDocuments(t,e){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Kn(t,(c,d)=>{if(d<=e){const p=this.Gn(t,c).next(_=>{if(!_)return s++,i.getEntry(t,c).next(()=>(i.removeEntry(c,Gt.min()),_f(t).delete([0,js(c.path)])))});r.push(p)}}).next(()=>_e.waitFor(r)).next(()=>i.apply(t)).next(()=>s)}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,i)}updateLimboDocument(t,e){return VI(t,e)}Kn(t,e){const i=_f(t);let r,s=m.at;return i.Z({index:"documentTargetsIndex"},([c,d],{path:p,sequenceNumber:_})=>{0===c?(s!==m.at&&e(new at(Wc(r)),s),s=_,r=p):s=m.at}).next(()=>{s!==m.at&&e(new at(Wc(r)),s)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function VI(n,t){return _f(n).put((i=n.currentSequenceNumber,{targetId:0,path:js(t.path),sequenceNumber:i}));var i}class FB{constructor(){this.changes=new pf(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Ci.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return void 0!==i?_e.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class bW{constructor(t){this.It=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,i){return zm(t).put(i)}removeEntry(t,e,i){return zm(t).delete(function(r,s){const c=r.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],OI(s),c[c.length-1]]}(e,i))}updateMetadata(t,e){return this.getMetadata(t).next(i=>(i.byteSize+=e,this.Qn(t,i)))}getEntry(t,e){let i=Ci.newInvalidDocument(e);return zm(t).Z({index:"documentKeyIndex",range:IDBKeyRange.only(rw(e))},(r,s)=>{i=this.jn(e,s)}).next(()=>i)}Wn(t,e){let i={size:0,document:Ci.newInvalidDocument(e)};return zm(t).Z({index:"documentKeyIndex",range:IDBKeyRange.only(rw(e))},(r,s)=>{i={document:this.jn(e,s),size:LI(s)}}).next(()=>i)}getEntries(t,e){let i=fo();return this.zn(t,e,(r,s)=>{const c=this.jn(r,s);i=i.insert(r,c)}).next(()=>i)}Hn(t,e){let i=fo(),r=new S(at.comparator);return this.zn(t,e,(s,c)=>{const d=this.jn(s,c);i=i.insert(s,d),r=r.insert(s,LI(c))}).next(()=>({documents:i,Jn:r}))}zn(t,e,i){if(e.isEmpty())return _e.resolve();let r=new z(UB);e.forEach(p=>r=r.add(p));const s=IDBKeyRange.bound(rw(r.first()),rw(r.last())),c=r.getIterator();let d=c.getNext();return zm(t).Z({index:"documentKeyIndex",range:s},(p,_,b)=>{const E=at.fromSegments([..._.prefixPath,_.collectionGroup,_.documentId]);for(;d&&UB(d,E)<0;)i(d,null),d=c.getNext();d&&d.isEqual(E)&&(i(d,_),d=c.hasNext()?c.getNext():null),d?b.j(rw(d)):b.done()}).next(()=>{for(;d;)i(d,null),d=c.hasNext()?c.getNext():null})}getAllFromCollection(t,e,i){const r=[e.popLast().toArray(),e.lastSegment(),OI(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],s=[e.popLast().toArray(),e.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return zm(t).W(IDBKeyRange.bound(r,s,!0)).next(c=>{let d=fo();for(const p of c){const _=this.jn(at.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);d=d.insert(_.key,_)}return d})}getAllFromCollectionGroup(t,e,i,r){let s=fo();const c=VB(e,i),d=VB(e,Hs.max());return zm(t).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,d,!0)},(p,_,b)=>{const E=this.jn(at.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);s=s.insert(E.key,E),s.size===r&&b.done()}).next(()=>s)}newChangeBuffer(t){return new CW(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return BB(t).get("remoteDocumentGlobalKey").next(e=>(Kt(!!e),e))}Qn(t,e){return BB(t).put("remoteDocumentGlobalKey",e)}jn(t,e){if(e){const i=function oW(n,t){let e;if(t.document)e=aB(n.re,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const i=at.fromSegments(t.noDocument.path),r=Lm(t.noDocument.readTime);e=Ci.newNoDocument(i,r),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return wt();{const i=at.fromSegments(t.unknownDocument.path),r=Lm(t.unknownDocument.version);e=Ci.newUnknownDocument(i,r)}}return t.readTime&&e.setReadTime(function(i){const r=new mi(i[0],i[1]);return Gt.fromTimestamp(r)}(t.readTime)),e}(this.It,e);if(!i.isNoDocument()||!i.version.isEqual(Gt.min()))return i}return Ci.newInvalidDocument(t)}}function LB(n){return new bW(n)}class CW extends FB{constructor(t,e){super(),this.Yn=t,this.trackRemovals=e,this.Xn=new pf(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(t){const e=[];let i=0,r=new z((s,c)=>nn(s.canonicalString(),c.canonicalString()));return this.changes.forEach((s,c)=>{const d=this.Xn.get(s);if(e.push(this.Yn.removeEntry(t,s,d.readTime)),c.isValidDocument()){const p=bB(this.Yn.It,c);r=r.add(s.path.popLast()),i+=LI(p)-d.size,e.push(this.Yn.addEntry(t,s,p))}else if(i-=d.size,this.trackRemovals){const p=bB(this.Yn.It,c.convertToNoDocument(Gt.min()));e.push(this.Yn.addEntry(t,s,p))}}),r.forEach(s=>{e.push(this.Yn.indexManager.addToCollectionParentIndex(t,s))}),e.push(this.Yn.updateMetadata(t,i)),_e.waitFor(e)}getFromCache(t,e){return this.Yn.Wn(t,e).next(i=>(this.Xn.set(e,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(t,e){return this.Yn.Hn(t,e).next(({documents:i,Jn:r})=>(r.forEach((s,c)=>{this.Xn.set(s,{size:c,readTime:i.get(s).readTime})}),i))}}function BB(n){return $r(n,"remoteDocumentGlobal")}function zm(n){return $r(n,"remoteDocumentsV14")}function rw(n){const t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function VB(n,t){const e=t.documentKey.path.toArray();return[n,OI(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function UB(n,t){const e=n.path.toArray(),i=t.path.toArray();let r=0;for(let s=0;s<e.length-2&&s<i.length-2;++s)if(r=nn(e[s],i[s]),r)return r;return r=nn(e.length,i.length),r||(r=nn(e[e.length-2],i[i.length-2]),r||nn(e[e.length-1],i[i.length-1]))}class wW{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class HB{constructor(t,e,i,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(i=r,this.getBaseDocument(t,e,i))).next(r=>(null!==i&&$C(i.mutation,r,$e.empty(),mi.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,pn()).next(()=>i))}getLocalViewOfDocuments(t,e,i=pn()){const r=$c();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,i).next(s=>{let c=GC();return s.forEach((d,p)=>{c=c.insert(d,p.overlayedDocument)}),c}))}getOverlayedDocuments(t,e){const i=$c();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,pn()))}populateOverlays(t,e,i){const r=[];return i.forEach(s=>{e.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((c,d)=>{e.set(c,d)})})}computeViews(t,e,i,r){let s=fo();const c=WC(),d=WC();return e.forEach((p,_)=>{const b=i.get(_.key);r.has(_.key)&&(void 0===b||b.mutation instanceof dd)?s=s.insert(_.key,_):void 0!==b&&(c.set(_.key,b.mutation.getFieldMask()),$C(b.mutation,_,b.mutation.getFieldMask(),mi.now()))}),this.recalculateAndSaveOverlays(t,s).next(p=>(p.forEach((_,b)=>c.set(_,b)),e.forEach((_,b)=>{var E;return d.set(_,new wW(b,null!==(E=c.get(_))&&void 0!==E?E:null))}),d))}recalculateAndSaveOverlays(t,e){const i=WC();let r=new S((c,d)=>c-d),s=pn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(c=>{for(const d of c)d.keys().forEach(p=>{const _=e.get(p);if(null===_)return;let b=i.get(p)||$e.empty();b=d.applyToLocalView(_,b),i.set(p,b);const E=(r.get(d.batchId)||pn()).add(p);r=r.insert(d.batchId,E)})}).next(()=>{const c=[],d=r.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),_=p.key,b=p.value,E=KL();b.forEach(T=>{if(!s.has(T)){const N=HL(e.get(T),i.get(T));null!==N&&E.set(T,N),s=s.add(T)}}),c.push(this.documentOverlayCache.saveOverlays(t,_,E))}return _e.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i){return at.isDocumentKey((r=e).path)&&null===r.collectionGroup&&0===r.filters.length?this.getDocumentsMatchingDocumentQuery(t,e.path):Zk(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i):this.getDocumentsMatchingCollectionQuery(t,e,i);var r}getNextDocuments(t,e,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,r).next(s=>{const c=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,r-s.size):_e.resolve($c());let d=-1,p=s;return c.next(_=>_e.forEach(_,(b,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),s.get(b)?_e.resolve():this.getBaseDocument(t,b,E).next(T=>{p=p.insert(b,T)}))).next(()=>this.populateOverlays(t,_,s)).next(()=>this.computeViews(t,p,_,pn())).next(b=>({batchId:d,changes:ZL(b)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new at(e)).next(i=>{let r=GC();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,i){const r=e.collectionGroup;let s=GC();return this.indexManager.getCollectionParents(t,r).next(c=>_e.forEach(c,d=>{const p=(_=e,b=d.child(r),new ud(b,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt));var _,b;return this.getDocumentsMatchingCollectionQuery(t,p,i).next(_=>{_.forEach((b,E)=>{s=s.insert(b,E)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(t,e,i){let r;return this.remoteDocumentCache.getAllFromCollection(t,e.path,i).next(s=>(r=s,this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId))).next(s=>{s.forEach((d,p)=>{const _=p.getKey();null===r.get(_)&&(r=r.insert(_,Ci.newInvalidDocument(_)))});let c=GC();return r.forEach((d,p)=>{const _=s.get(d);void 0!==_&&$C(_.mutation,p,$e.empty(),mi.now()),Qk(e,p)&&(c=c.insert(d,p))}),c})}getBaseDocument(t,e,i){return null===i||1===i.mutation.type?this.remoteDocumentCache.getEntry(t,e):_e.resolve(Ci.newInvalidDocument(e))}}class DW{constructor(t){this.It=t,this.Zn=new Map,this.ts=new Map}getBundleMetadata(t,e){return _e.resolve(this.Zn.get(e))}saveBundleMetadata(t,e){var i;return this.Zn.set(e.id,{id:(i=e).id,version:i.version,createTime:zr(i.createTime)}),_e.resolve()}getNamedQuery(t,e){return _e.resolve(this.ts.get(e))}saveNamedQuery(t,e){return this.ts.set(e.name,{name:(i=e).name,query:oR(i.bundledQuery),readTime:zr(i.readTime)}),_e.resolve();var i}}class EW{constructor(){this.overlays=new S(at.comparator),this.es=new Map}getOverlay(t,e){return _e.resolve(this.overlays.get(e))}getOverlays(t,e){const i=$c();return _e.forEach(e,r=>this.getOverlay(t,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((r,s)=>{this.ue(t,e,s)}),_e.resolve()}removeOverlaysForBatchId(t,e,i){const r=this.es.get(i);return void 0!==r&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.es.delete(i)),_e.resolve()}getOverlaysForCollection(t,e,i){const r=$c(),s=e.length+1,c=new at(e.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,_=p.getKey();if(!e.isPrefixOf(_.path))break;_.path.length===s&&p.largestBatchId>i&&r.set(p.getKey(),p)}return _e.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let s=new S((_,b)=>_-b);const c=this.overlays.getIterator();for(;c.hasNext();){const _=c.getNext().value;if(_.getKey().getCollectionGroup()===e&&_.largestBatchId>i){let b=s.get(_.largestBatchId);null===b&&(b=$c(),s=s.insert(_.largestBatchId,b)),b.set(_.getKey(),_)}}const d=$c(),p=s.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((_,b)=>d.set(_,b)),!(d.size()>=r)););return _e.resolve(d)}ue(t,e,i){const r=this.overlays.get(i.key);if(null!==r){const c=this.es.get(r.largestBatchId).delete(i.key);this.es.set(r.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new sR(e,i));let s=this.es.get(e);void 0===s&&(s=pn(),this.es.set(e,s)),this.es.set(e,s.add(i.key))}}class cR{constructor(){this.ns=new z(Gr.ss),this.rs=new z(Gr.os)}isEmpty(){return this.ns.isEmpty()}addReference(t,e){const i=new Gr(t,e);this.ns=this.ns.add(i),this.rs=this.rs.add(i)}us(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.cs(new Gr(t,e))}hs(t,e){t.forEach(i=>this.removeReference(i,e))}ls(t){const e=new at(new kn([])),i=new Gr(e,t),r=new Gr(e,t+1),s=[];return this.rs.forEachInRange([i,r],c=>{this.cs(c),s.push(c.key)}),s}fs(){this.ns.forEach(t=>this.cs(t))}cs(t){this.ns=this.ns.delete(t),this.rs=this.rs.delete(t)}ds(t){const e=new at(new kn([])),i=new Gr(e,t),r=new Gr(e,t+1);let s=pn();return this.rs.forEachInRange([i,r],c=>{s=s.add(c.key)}),s}containsKey(t){const e=new Gr(t,0),i=this.ns.firstAfterOrEqual(e);return null!==i&&t.isEqual(i.key)}}class Gr{constructor(t,e){this.key=t,this._s=e}static ss(t,e){return at.comparator(t.key,e.key)||nn(t._s,e._s)}static os(t,e){return nn(t._s,e._s)||at.comparator(t.key,e.key)}}class MW{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.ws=1,this.gs=new z(Gr.ss)}checkEmpty(t){return _e.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,i,r){const s=this.ws;this.ws++;const c=new iR(s,e,i,r);this.mutationQueue.push(c);for(const d of r)this.gs=this.gs.add(new Gr(d.key,s)),this.indexManager.addToCollectionParentIndex(t,d.key.path.popLast());return _e.resolve(c)}lookupMutationBatch(t,e){return _e.resolve(this.ys(e))}getNextMutationBatchAfterBatchId(t,e){const r=this.ps(e+1),s=r<0?0:r;return _e.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return _e.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(t){return _e.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new Gr(e,0),r=new Gr(e,Number.POSITIVE_INFINITY),s=[];return this.gs.forEachInRange([i,r],c=>{const d=this.ys(c._s);s.push(d)}),_e.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new z(nn);return e.forEach(r=>{const s=new Gr(r,0),c=new Gr(r,Number.POSITIVE_INFINITY);this.gs.forEachInRange([s,c],d=>{i=i.add(d._s)})}),_e.resolve(this.Is(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1;let s=i;at.isDocumentKey(s)||(s=s.child(""));const c=new Gr(new at(s),0);let d=new z(nn);return this.gs.forEachWhile(p=>{const _=p.key.path;return!!i.isPrefixOf(_)&&(_.length===r&&(d=d.add(p._s)),!0)},c),_e.resolve(this.Is(d))}Is(t){const e=[];return t.forEach(i=>{const r=this.ys(i);null!==r&&e.push(r)}),e}removeMutationBatch(t,e){Kt(0===this.Ts(e.batchId,"removed")),this.mutationQueue.shift();let i=this.gs;return _e.forEach(e.mutations,r=>{const s=new Gr(r.key,e.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.gs=i})}An(t){}containsKey(t,e){const i=new Gr(e,0),r=this.gs.firstAfterOrEqual(i);return _e.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return _e.resolve()}Ts(t,e){return this.ps(t)}ps(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}ys(t){const e=this.ps(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class IW{constructor(t){this.Es=t,this.docs=new S(at.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,r=this.docs.get(i),s=r?r.size:0,c=this.Es(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:c}),this.size+=c-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return _e.resolve(i?i.document.mutableCopy():Ci.newInvalidDocument(e))}getEntries(t,e){let i=fo();return e.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Ci.newInvalidDocument(r))}),_e.resolve(i)}getAllFromCollection(t,e,i){let r=fo();const s=new at(e.child("")),c=this.docs.getIteratorFrom(s);for(;c.hasNext();){const{key:d,value:{document:p}}=c.getNext();if(!e.isPrefixOf(d.path))break;d.path.length>e.length+1||CI(bI(p),i)<=0||(r=r.insert(p.key,p.mutableCopy()))}return _e.resolve(r)}getAllFromCollectionGroup(t,e,i,r){wt()}As(t,e){return _e.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new xW(this)}getSize(t){return _e.resolve(this.size)}}class xW extends FB{constructor(t){super(),this.Yn=t}applyChanges(t){const e=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?e.push(this.Yn.addEntry(t,r)):this.Yn.removeEntry(i)}),_e.waitFor(e)}getFromCache(t,e){return this.Yn.getEntry(t,e)}getAllFromCache(t,e){return this.Yn.getEntries(t,e)}}class SW{constructor(t){this.persistence=t,this.Rs=new pf(e=>Om(e),HC),this.lastRemoteSnapshotVersion=Gt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new cR,this.targetCount=0,this.vs=jm.Pn()}forEachTarget(t,e){return this.Rs.forEach((i,r)=>e(r)),_e.resolve()}getLastRemoteSnapshotVersion(t){return _e.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return _e.resolve(this.bs)}allocateTargetId(t){return this.highestTargetId=this.vs.next(),_e.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.bs&&(this.bs=e),_e.resolve()}Dn(t){this.Rs.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.vs=new jm(e),this.highestTargetId=e),t.sequenceNumber>this.bs&&(this.bs=t.sequenceNumber)}addTargetData(t,e){return this.Dn(e),this.targetCount+=1,_e.resolve()}updateTargetData(t,e){return this.Dn(e),_e.resolve()}removeTargetData(t,e){return this.Rs.delete(e.target),this.Ps.ls(e.targetId),this.targetCount-=1,_e.resolve()}removeTargets(t,e,i){let r=0;const s=[];return this.Rs.forEach((c,d)=>{d.sequenceNumber<=e&&null===i.get(d.targetId)&&(this.Rs.delete(c),s.push(this.removeMatchingKeysForTargetId(t,d.targetId)),r++)}),_e.waitFor(s).next(()=>r)}getTargetCount(t){return _e.resolve(this.targetCount)}getTargetData(t,e){const i=this.Rs.get(e)||null;return _e.resolve(i)}addMatchingKeys(t,e,i){return this.Ps.us(e,i),_e.resolve()}removeMatchingKeys(t,e,i){this.Ps.hs(e,i);const r=this.persistence.referenceDelegate,s=[];return r&&e.forEach(c=>{s.push(r.markPotentiallyOrphaned(t,c))}),_e.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this.Ps.ls(e),_e.resolve()}getMatchingKeysForTargetId(t,e){const i=this.Ps.ds(e);return _e.resolve(i)}containsKey(t,e){return _e.resolve(this.Ps.containsKey(e))}}class jB{constructor(t,e){this.Vs={},this.overlays={},this.Ss=new m(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=t(this),this.Cs=new SW(this),this.indexManager=new fW,this.remoteDocumentCache=new IW(i=>this.referenceDelegate.xs(i)),this.It=new vB(e),this.Ns=new DW(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new EW,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.Vs[t.toKey()];return i||(i=new MW(e,this.referenceDelegate),this.Vs[t.toKey()]=i),i}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(t,e,i){Ze("MemoryPersistence","Starting transaction:",t);const r=new TW(this.Ss.next());return this.referenceDelegate.ks(),i(r).next(s=>this.referenceDelegate.Ms(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Os(t,e){return _e.or(Object.values(this.Vs).map(i=>()=>i.containsKey(t,e)))}}class TW extends $k{constructor(t){super(),this.currentSequenceNumber=t}}class UI{constructor(t){this.persistence=t,this.Fs=new cR,this.$s=null}static Bs(t){return new UI(t)}get Ls(){if(this.$s)return this.$s;throw wt()}addReference(t,e,i){return this.Fs.addReference(i,e),this.Ls.delete(i.toString()),_e.resolve()}removeReference(t,e,i){return this.Fs.removeReference(i,e),this.Ls.add(i.toString()),_e.resolve()}markPotentiallyOrphaned(t,e){return this.Ls.add(e.toString()),_e.resolve()}removeTarget(t,e){this.Fs.ls(e.targetId).forEach(r=>this.Ls.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(s=>this.Ls.add(s.toString()))}).next(()=>i.removeTargetData(t,e))}ks(){this.$s=new Set}Ms(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _e.forEach(this.Ls,i=>{const r=at.fromPath(i);return this.Us(t,r).next(s=>{s||e.removeEntry(r,Gt.min())})}).next(()=>(this.$s=null,e.apply(t)))}updateLimboDocument(t,e){return this.Us(t,e).next(i=>{i?this.Ls.delete(e.toString()):this.Ls.add(e.toString())})}xs(t){return 0}Us(t,e){return _e.or([()=>_e.resolve(this.Fs.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Os(t,e)])}}class AW{constructor(t){this.It=t}$(t,e,i,r){const s=new FC("createOrUpgrade",e);var d;i<1&&r>=1&&(t.createObjectStore("owner"),(d=t).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",pB,{unique:!0}),d.createObjectStore("documentMutations"),zB(t),function(d){d.createObjectStore("remoteDocuments")}(t));let c=_e.resolve();return i<3&&r>=3&&(0!==i&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(t),zB(t)),c=c.next(()=>function(d){const p=d.store("targetGlobal"),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Gt.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",_)}(s))),i<4&&r>=4&&(0!==i&&(c=c.next(()=>function(d,p){return p.store("mutations").W().next(_=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",pB,{unique:!0});const b=p.store("mutations"),E=_.map(T=>b.put(T));return _e.waitFor(E)})}(t,s))),c=c.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)})),i<5&&r>=5&&(c=c.next(()=>this.qs(s))),i<6&&r>=6&&(c=c.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(t),this.Ks(s)))),i<7&&r>=7&&(c=c.next(()=>this.Gs(s))),i<8&&r>=8&&(c=c.next(()=>this.Qs(t,s))),i<9&&r>=9&&(c=c.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(t)})),i<10&&r>=10&&(c=c.next(()=>this.js(s))),i<11&&r>=11&&(c=c.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),i<12&&r>=12&&(c=c.next(()=>{!function(d){const p=d.createObjectStore("documentOverlays",{keyPath:tW});p.createIndex("collectionPathOverlayIndex",nW,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",iW,{unique:!1})}(t)})),i<13&&r>=13&&(c=c.next(()=>function(d){const p=d.createObjectStore("remoteDocumentsV14",{keyPath:$G});p.createIndex("documentKeyIndex",GG),p.createIndex("collectionGroupIndex",WG)}(t)).next(()=>this.Ws(t,s)).next(()=>t.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(c=c.next(()=>this.zs(t,s))),i<15&&r>=15&&(c=c.next(()=>function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:QG}).createIndex("sequenceNumberIndex",XG,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:JG}).createIndex("documentKeyIndex",eW,{unique:!1})}(t))),c}Ks(t){let e=0;return t.store("remoteDocuments").Z((i,r)=>{e+=LI(r)}).next(()=>{const i={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}qs(t){const e=t.store("mutationQueues"),i=t.store("mutations");return e.W().next(r=>_e.forEach(r,s=>{const c=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.W("userMutationsIndex",c).next(d=>_e.forEach(d,p=>{Kt(p.userId===s.userId);const _=Bm(this.It,p);return kB(t,s.userId,_).next(()=>{})}))}))}Gs(t){const e=t.store("targetDocuments"),i=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(r=>{const s=[];return i.Z((c,d)=>{const p=new kn(c),_=[0,js(p)];s.push(e.get(_).next(b=>b?_e.resolve():e.put({targetId:0,path:js(p),sequenceNumber:r.highestListenSequenceNumber})))}).next(()=>_e.waitFor(s))})}Qs(t,e){t.createObjectStore("collectionParents",{keyPath:KG});const i=e.store("collectionParents"),r=new lR,s=c=>{if(r.add(c)){const d=c.lastSegment(),p=c.popLast();return i.put({collectionId:d,parent:js(p)})}};return e.store("remoteDocuments").Z({X:!0},(c,d)=>{const p=new kn(c);return s(p.popLast())}).next(()=>e.store("documentMutations").Z({X:!0},([c,d,p],_)=>{const b=Wc(d);return s(b.popLast())}))}js(t){const e=t.store("targets");return e.Z((i,r)=>{const s=JC(r),c=CB(this.It,s);return e.put(c)})}Ws(t,e){const i=e.store("remoteDocuments"),r=[];return i.Z((s,c)=>{const d=e.store("remoteDocumentsV14"),p=(_=c,_.document?new at(kn.fromString(_.document.name).popFirst(5)):_.noDocument?at.fromSegments(_.noDocument.path):_.unknownDocument?at.fromSegments(_.unknownDocument.path):wt()).path.toArray();var _;const b={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};r.push(d.put(b))}).next(()=>_e.waitFor(r))}zs(t,e){const i=e.store("mutations"),r=LB(this.It),s=new jB(UI.Bs,this.It.re);return i.W().next(c=>{const d=new Map;return c.forEach(p=>{var _;let b=null!==(_=d.get(p.userId))&&void 0!==_?_:pn();Bm(this.It,p).keys().forEach(E=>b=b.add(E)),d.set(p.userId,b)}),_e.forEach(d,(p,_)=>{const b=new hr(_),E=PI.oe(this.It,b),T=s.getIndexManager(b),N=BI.oe(b,this.It,T,s.referenceDelegate);return new HB(r,N,E,T).recalculateAndSaveOverlaysForDocumentKeys(new nR(e,m.at),p).next()})})}}function zB(n){n.createObjectStore("targetDocuments",{keyPath:YG}).createIndex("documentTargetsIndex",ZG,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",qG,{unique:!0}),n.createObjectStore("targetGlobal")}const uR="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class dR{constructor(t,e,i,r,s,c,d,p,_,b,E=15){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=i,this.Hs=s,this.window=c,this.document=d,this.Js=_,this.Ys=b,this.Xs=E,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=T=>Promise.resolve(),!dR.C())throw new ze(be.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new vW(this,r),this.ii=e+"main",this.It=new vB(p),this.ri=new za(this.ii,this.Xs,new AW(this.It)),this.Cs=new mW(this.referenceDelegate,this.It),this.remoteDocumentCache=LB(this.It),this.Ns=new aW,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===b&&qi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ze(be.FAILED_PRECONDITION,uR);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Cs.getHighestSequenceNumber(t))}).then(t=>{this.Ss=new m(t,this.Js)}).then(()=>{this.Ds=!0}).catch(t=>(this.ri&&this.ri.close(),Promise.reject(t)))}li(t){var e=this;return this.si=function(){var i=(0,Me.Z)(function*(r){if(e.started)return t(r)});return function(r){return i.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.ri.L(function(){var e=(0,Me.Z)(function*(i){null===i.newVersion&&(yield t())});return function(i){return e.apply(this,arguments)}}())}setNetworkEnabled(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Hs.enqueueAndForget((0,Me.Z)(function*(){e.started&&(yield e.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>HI(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(t).next(e=>{e||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(t)).next(e=>this.isPrimary&&!e?this._i(t).next(()=>!1):!!e&&this.wi(t).next(()=>!0))).catch(t=>{if(od(t))return Ze("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return Ze("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.Hs.enqueueRetryable(()=>this.si(t)),this.isPrimary=t})}fi(t){return sw(t).get("owner").next(e=>_e.resolve(this.mi(e)))}gi(t){return HI(t).delete(this.clientId)}yi(){var t=this;return(0,Me.Z)(function*(){if(t.isPrimary&&!t.pi(t.ni,18e5)){t.ni=Date.now();const e=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=$r(i,"clientMetadata");return r.W().next(s=>{const c=t.Ii(s,18e5),d=s.filter(p=>-1===c.indexOf(p));return _e.forEach(d,p=>r.delete(p.clientId)).next(()=>d)})}).catch(()=>[]);if(t.oi)for(const i of e)t.oi.removeItem(t.Ti(i.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(t){return!!t&&t.ownerId===this.clientId}di(t){return this.Ys?_e.resolve(!0):sw(t).get("owner").next(e=>{if(null!==e&&this.pi(e.leaseTimestampMs,5e3)&&!this.Ei(e.ownerId)){if(this.mi(e)&&this.networkEnabled)return!0;if(!this.mi(e)){if(!e.allowTabSynchronization)throw new ze(be.FAILED_PRECONDITION,uR);return!1}}return!(!this.networkEnabled||!this.inForeground)||HI(t).W().next(i=>void 0===this.Ii(i,5e3).find(r=>{if(this.clientId!==r.clientId){const c=!this.inForeground&&r.inForeground,d=this.networkEnabled===r.networkEnabled;if(!this.networkEnabled&&r.networkEnabled||c&&d)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&Ze("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var t=this;return(0,Me.Z)(function*(){t.Ds=!1,t.Ai(),t.ei&&(t.ei.cancel(),t.ei=null),t.Ri(),t.bi(),yield t.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const i=new nR(e,m.at);return t._i(i).next(()=>t.gi(i))}),t.ri.close(),t.Pi()})()}Ii(t,e){return t.filter(i=>this.pi(i.updateTimeMs,e)&&!this.Ei(i.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",t=>HI(t).W().next(e=>this.Ii(e,18e5).map(i=>i.clientId)))}get started(){return this.Ds}getMutationQueue(t,e){return BI.oe(t,this.It,e,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new pW(t,this.It.re.databaseId)}getDocumentOverlayCache(t){return PI.oe(this.It,t)}getBundleCache(){return this.Ns}runTransaction(t,e,i){Ze("IndexedDbPersistence","Starting transaction:",t);const r="readonly"===e?"readonly":"readwrite",s=15===(c=this.Xs)?sW:14===c?yB:13===c?_B:12===c?rW:11===c?gB:void wt();var c;let d;return this.ri.runTransaction(t,r,s,p=>(d=new nR(p,this.Ss?this.Ss.next():m.at),"readwrite-primary"===e?this.fi(d).next(_=>!!_||this.di(d)).next(_=>{if(!_)throw qi(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new ze(be.FAILED_PRECONDITION,zk);return i(d)}).next(_=>this.wi(d).next(()=>_)):this.Vi(d).next(()=>i(d)))).then(p=>(d.raiseOnCommittedEvent(),p))}Vi(t){return sw(t).get("owner").next(e=>{if(null!==e&&this.pi(e.leaseTimestampMs,5e3)&&!this.Ei(e.ownerId)&&!this.mi(e)&&!(this.Ys||this.allowTabSynchronization&&e.allowTabSynchronization))throw new ze(be.FAILED_PRECONDITION,uR)})}wi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return sw(t).put("owner",e)}static C(){return za.C()}_i(t){const e=sw(t);return e.get("owner").next(i=>this.mi(i)?(Ze("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):_e.resolve())}pi(t,e){const i=Date.now();return!(t<i-e||t>i&&(qi(`Detected an update time that is in the future: ${t} > ${i}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,te.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(t){var e;try{const i=null!==(null===(e=this.oi)||void 0===e?void 0:e.getItem(this.Ti(t)));return Ze("IndexedDbPersistence",`Client '${t}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return qi("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(t){qi("Failed to set zombie client id.",t)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function sw(n){return $r(n,"owner")}function HI(n){return $r(n,"clientMetadata")}function hR(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}class fR{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.Si=i,this.Di=r}static Ci(t,e){let i=pn(),r=pn();for(const s of e.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new fR(t,e.fromCache,i,r)}}class $B{constructor(){this.xi=!1}initialize(t,e){this.Ni=t,this.indexManager=e,this.xi=!0}getDocumentsMatchingQuery(t,e,i,r){return this.ki(t,e).next(s=>s||this.Mi(t,e,r,i)).next(s=>s||this.Oi(t,e))}ki(t,e){if(TL(e))return _e.resolve(null);let i=ho(e);return this.indexManager.getIndexType(t,i).next(r=>0===r?null:(null!==e.limit&&1===r&&(e=II(e,null,"F"),i=ho(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{const c=pn(...s);return this.Ni.getDocuments(t,c).next(d=>this.indexManager.getMinOffset(t,i).next(p=>{const _=this.Fi(e,d);return this.$i(e,_,c,p.readTime)?this.ki(t,II(e,null,"F")):this.Bi(t,_,e,p)}))})))}Mi(t,e,i,r){return TL(e)||r.isEqual(Gt.min())?this.Oi(t,e):this.Ni.getDocuments(t,i).next(s=>{const c=this.Fi(e,s);return this.$i(e,c,i,r)?this.Oi(t,e):(mI()<=sr.in.DEBUG&&Ze("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Kk(e)),this.Bi(t,c,e,vI(r,-1)))})}Fi(t,e){let i=new z(RL(t));return e.forEach((r,s)=>{Qk(t,s)&&(i=i.add(s))}),i}$i(t,e,i,r){if(null===t.limit)return!1;if(i.size!==e.size)return!0;const s="F"===t.limitType?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Oi(t,e){return mI()<=sr.in.DEBUG&&Ze("QueryEngine","Using full collection scan to execute query:",Kk(e)),this.Ni.getDocumentsMatchingQuery(t,e,Hs.min())}Bi(t,e,i,r){return this.Ni.getDocumentsMatchingQuery(t,i,r).next(s=>(e.forEach(c=>{s=s.insert(c.key,c)}),s))}}class kW{constructor(t,e,i,r){this.persistence=t,this.Li=e,this.It=r,this.Ui=new S(nn),this.qi=new pf(s=>Om(s),HC),this.Ki=new Map,this.Gi=t.getRemoteDocumentCache(),this.Cs=t.getTargetCache(),this.Ns=t.getBundleCache(),this.Qi(i)}Qi(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new HB(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Ui))}}function GB(n,t,e,i){return new kW(n,t,e,i)}function WB(n,t){return pR.apply(this,arguments)}function pR(){return pR=(0,Me.Z)(function*(n,t){const e=mt(n);return yield e.persistence.runTransaction("Handle user change","readonly",i=>{let r;return e.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,e.Qi(t),e.mutationQueue.getAllMutationBatches(i))).next(s=>{const c=[],d=[];let p=pn();for(const _ of r){c.push(_.batchId);for(const b of _.mutations)p=p.add(b.key)}for(const _ of s){d.push(_.batchId);for(const b of _.mutations)p=p.add(b.key)}return e.localDocuments.getDocuments(i,p).next(_=>({ji:_,removedBatchIds:c,addedBatchIds:d}))})})}),pR.apply(this,arguments)}function RW(n,t){const e=mt(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),s=e.Gi.newChangeBuffer({trackRemovals:!0});return function(c,d,p,_){const b=p.batch,E=b.keys();let T=_e.resolve();return E.forEach(N=>{T=T.next(()=>_.getEntry(d,N)).next(V=>{const K=p.docVersions.get(N);Kt(null!==K),V.version.compareTo(K)<0&&(b.applyToRemoteDocument(V,p),V.isValidDocument()&&(V.setReadTime(p.commitVersion),_.addEntry(V)))})}),T.next(()=>c.mutationQueue.removeMutationBatch(d,b))}(e,i,t,s).next(()=>s.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(c){let d=pn();for(let p=0;p<c.mutationResults.length;++p)c.mutationResults[p].transformResults.length>0&&(d=d.add(c.batch.mutations[p].key));return d}(t))).next(()=>e.localDocuments.getDocuments(i,r))})}function qB(n){const t=mt(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Cs.getLastRemoteSnapshotVersion(e))}function OW(n,t){const e=mt(n),i=t.snapshotVersion;let r=e.Ui;return e.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const c=e.Gi.newChangeBuffer({trackRemovals:!0});r=e.Ui;const d=[];t.targetChanges.forEach((b,E)=>{const T=r.get(E);if(!T)return;d.push(e.Cs.removeMatchingKeys(s,b.removedDocuments,E).next(()=>e.Cs.addMatchingKeys(s,b.addedDocuments,E)));let N=T.withSequenceNumber(s.currentSequenceNumber);var V,K,re;t.targetMismatches.has(E)?N=N.withResumeToken(ot.EMPTY_BYTE_STRING,Gt.min()).withLastLimboFreeSnapshotVersion(Gt.min()):b.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(b.resumeToken,i)),r=r.insert(E,N),K=N,re=b,(0===(V=T).resumeToken.approximateByteSize()||K.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=3e8||re.addedDocuments.size+re.modifiedDocuments.size+re.removedDocuments.size>0)&&d.push(e.Cs.updateTargetData(s,N))});let p=fo(),_=pn();if(t.documentUpdates.forEach(b=>{t.resolvedLimboDocuments.has(b)&&d.push(e.persistence.referenceDelegate.updateLimboDocument(s,b))}),d.push(YB(s,c,t.documentUpdates).next(b=>{p=b.Wi,_=b.zi})),!i.isEqual(Gt.min())){const b=e.Cs.getLastRemoteSnapshotVersion(s).next(E=>e.Cs.setTargetsMetadata(s,s.currentSequenceNumber,i));d.push(b)}return _e.waitFor(d).next(()=>c.apply(s)).next(()=>e.localDocuments.getLocalViewOfDocuments(s,p,_)).next(()=>p)}).then(s=>(e.Ui=r,s))}function YB(n,t,e){let i=pn(),r=pn();return e.forEach(s=>i=i.add(s)),t.getEntries(n,i).next(s=>{let c=fo();return e.forEach((d,p)=>{const _=s.get(d);p.isFoundDocument()!==_.isFoundDocument()&&(r=r.add(d)),p.isNoDocument()&&p.version.isEqual(Gt.min())?(t.removeEntry(d,p.readTime),c=c.insert(d,p)):!_.isValidDocument()||p.version.compareTo(_.version)>0||0===p.version.compareTo(_.version)&&_.hasPendingWrites?(t.addEntry(p),c=c.insert(d,p)):Ze("LocalStore","Ignoring outdated watch update for ",d,". Current version:",_.version," Watch version:",p.version)}),{Wi:c,zi:r}})}function PW(n,t){const e=mt(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===t&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function Yy(n,t){const e=mt(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return e.Cs.getTargetData(i,t).next(s=>s?(r=s,_e.resolve(r)):e.Cs.allocateTargetId(i).next(c=>(r=new mf(t,c,0,i.currentSequenceNumber),e.Cs.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=e.Ui.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.Ui=e.Ui.insert(i.targetId,i),e.qi.set(t,i.targetId)),i})}function Zy(n,t,e){return mR.apply(this,arguments)}function mR(){return mR=(0,Me.Z)(function*(n,t,e){const i=mt(n),r=i.Ui.get(t),s=e?"readwrite":"readwrite-primary";try{e||(yield i.persistence.runTransaction("Release target",s,c=>i.persistence.referenceDelegate.removeTarget(c,r)))}catch(c){if(!od(c))throw c;Ze("LocalStore",`Failed to update sequence numbers for target ${t}: ${c}`)}i.Ui=i.Ui.remove(t),i.qi.delete(r.target)}),mR.apply(this,arguments)}function jI(n,t,e){const i=mt(n);let r=Gt.min(),s=pn();return i.persistence.runTransaction("Execute query","readonly",c=>function(d,p,_){const b=mt(d),E=b.qi.get(_);return void 0!==E?_e.resolve(b.Ui.get(E)):b.Cs.getTargetData(p,_)}(i,c,ho(t)).next(d=>{if(d)return r=d.lastLimboFreeSnapshotVersion,i.Cs.getMatchingKeysForTargetId(c,d.targetId).next(p=>{s=p})}).next(()=>i.Li.getDocumentsMatchingQuery(c,t,e?r:Gt.min(),e?s:pn())).next(d=>(QB(i,kL(t),d),{documents:d,Hi:s})))}function ZB(n,t){const e=mt(n),i=mt(e.Cs),r=e.Ui.get(t);return r?Promise.resolve(r.target):e.persistence.runTransaction("Get target data","readonly",s=>i.se(s,t).next(c=>c?c.target:null))}function KB(n,t){const e=mt(n),i=e.Ki.get(t)||Gt.min();return e.persistence.runTransaction("Get new document changes","readonly",r=>e.Gi.getAllFromCollectionGroup(r,t,vI(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(QB(e,t,r),r))}function QB(n,t,e){let i=Gt.min();e.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.Ki.set(t,i)}function gR(){return gR=(0,Me.Z)(function*(n,t,e,i){const r=mt(n);let s=pn(),c=fo();for(const _ of e){const b=t.Ji(_.metadata.name);_.document&&(s=s.add(b));const E=t.Yi(_);E.setReadTime(t.Xi(_.metadata.readTime)),c=c.insert(b,E)}const d=r.Gi.newChangeBuffer({trackRemovals:!0}),p=yield Yy(r,(_=i,ho(By(kn.fromString(`__bundle__/docs/${_}`)))));var _;return r.persistence.runTransaction("Apply bundle documents","readwrite",_=>YB(_,d,c).next(b=>(d.apply(_),b)).next(b=>r.Cs.removeMatchingKeysForTargetId(_,p.targetId).next(()=>r.Cs.addMatchingKeys(_,s,p.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(_,b.Wi,b.zi)).next(()=>b.Wi)))}),gR.apply(this,arguments)}function FW(n,t){return _R.apply(this,arguments)}function _R(){return _R=(0,Me.Z)(function*(n,t,e=pn()){const i=yield Yy(n,ho(oR(t.bundledQuery))),r=mt(n);return r.persistence.runTransaction("Save named query","readwrite",s=>{const c=zr(t.readTime);if(i.snapshotVersion.compareTo(c)>=0)return r.Ns.saveNamedQuery(s,t);const d=i.withResumeToken(ot.EMPTY_BYTE_STRING,c);return r.Ui=r.Ui.insert(d.targetId,d),r.Cs.updateTargetData(s,d).next(()=>r.Cs.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.Cs.addMatchingKeys(s,e,i.targetId)).next(()=>r.Ns.saveNamedQuery(s,t))})}),_R.apply(this,arguments)}function XB(n,t){return`firestore_clients_${n}_${t}`}function JB(n,t,e){let i=`firestore_mutations_${n}_${e}`;return t.isAuthenticated()&&(i+=`_${t.uid}`),i}function yR(n,t){return`firestore_targets_${n}_${t}`}class zI{constructor(t,e,i,r){this.user=t,this.batchId=e,this.state=i,this.error=r}static Zi(t,e,i){const r=JSON.parse(i);let s,c="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return c&&r.error&&(c="string"==typeof r.error.message&&"string"==typeof r.error.code,c&&(s=new ze(r.error.code,r.error.message))),c?new zI(t,e,r.state,s):(qi("SharedClientState",`Failed to parse mutation state for ID '${e}': ${i}`),null)}tr(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class ow{constructor(t,e,i){this.targetId=t,this.state=e,this.error=i}static Zi(t,e){const i=JSON.parse(e);let r,s="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(r=new ze(i.error.code,i.error.message))),s?new ow(t,i.state,r):(qi("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}tr(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class $I{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Zi(t,e){const i=JSON.parse(e);let r="object"==typeof i&&i.activeTargetIds instanceof Array,s=AI();for(let c=0;r&&c<i.activeTargetIds.length;++c)r=Ny(i.activeTargetIds[c]),s=s.add(i.activeTargetIds[c]);return r?new $I(t,s):(qi("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class vR{constructor(t,e){this.clientId=t,this.onlineState=e}static Zi(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new vR(e.clientId,e.onlineState):(qi("SharedClientState",`Failed to parse online state: ${t}`),null)}}class bR{constructor(){this.activeTargetIds=AI()}er(t){this.activeTargetIds=this.activeTargetIds.add(t)}nr(t){this.activeTargetIds=this.activeTargetIds.delete(t)}tr(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class CR{constructor(t,e,i,r,s){this.window=t,this.Hs=e,this.persistenceKey=i,this.sr=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new S(nn),this.started=!1,this.cr=[];const c=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ar=XB(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new bR),this.lr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(t){return!(!t||!t.localStorage)}start(){var t=this;return(0,Me.Z)(function*(){const e=yield t.syncEngine.vi();for(const r of e){if(r===t.sr)continue;const s=t.getItem(XB(t.persistenceKey,r));if(s){const c=$I.Zi(r,s);c&&(t.ur=t.ur.insert(c.clientId,c))}}t.gr();const i=t.storage.getItem(t.wr);if(i){const r=t.yr(i);r&&t.pr(r)}for(const r of t.cr)t.rr(r);t.cr=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.hr,JSON.stringify(t))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(t){let e=!1;return this.ur.forEach((i,r)=>{r.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.Tr(t,"pending")}updateMutationState(t,e,i){this.Tr(t,e,i),this.Er(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const i=this.storage.getItem(yR(this.persistenceKey,t));if(i){const r=ow.Zi(t,i);r&&(e=r.state)}}return this.Ar.er(t),this.gr(),e}removeLocalQueryTarget(t){this.Ar.nr(t),this.gr()}isLocalQueryTarget(t){return this.Ar.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(yR(this.persistenceKey,t))}updateQueryState(t,e,i){this.Rr(t,e,i)}handleUserChange(t,e,i){e.forEach(r=>{this.Er(r)}),this.currentUser=t,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(t){this.br(t)}notifyBundleLoaded(t){this.Pr(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return Ze("SharedClientState","READ",t,e),e}setItem(t,e){Ze("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){Ze("SharedClientState","REMOVE",t),this.storage.removeItem(t)}rr(t){var e=this;const i=t;if(i.storageArea===this.storage){if(Ze("SharedClientState","EVENT",i.key,i.newValue),i.key===this.ar)return void qi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,Me.Z)(function*(){if(e.started){if(null!==i.key)if(e.lr.test(i.key)){if(null==i.newValue){const r=e.vr(i.key);return e.Vr(r,null)}{const r=e.Sr(i.key,i.newValue);if(r)return e.Vr(r.clientId,r)}}else if(e.dr.test(i.key)){if(null!==i.newValue){const r=e.Dr(i.key,i.newValue);if(r)return e.Cr(r)}}else if(e._r.test(i.key)){if(null!==i.newValue){const r=e.Nr(i.key,i.newValue);if(r)return e.kr(r)}}else if(i.key===e.wr){if(null!==i.newValue){const r=e.yr(i.newValue);if(r)return e.pr(r)}}else if(i.key===e.hr){const r=function(s){let c=m.at;if(null!=s)try{const d=JSON.parse(s);Kt("number"==typeof d),c=d}catch(d){qi("SharedClientState","Failed to read sequence number from WebStorage",d)}return c}(i.newValue);r!==m.at&&e.sequenceNumberHandler(r)}else if(i.key===e.mr){const r=e.Mr(i.newValue);yield Promise.all(r.map(s=>e.syncEngine.Or(s)))}}else e.cr.push(i)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(t,e,i){const r=new zI(this.currentUser,t,e,i),s=JB(this.persistenceKey,this.currentUser,t);this.setItem(s,r.tr())}Er(t){const e=JB(this.persistenceKey,this.currentUser,t);this.removeItem(e)}br(t){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:t}))}Rr(t,e,i){const r=yR(this.persistenceKey,t),s=new ow(t,e,i);this.setItem(r,s.tr())}Pr(t){const e=JSON.stringify(Array.from(t));this.setItem(this.mr,e)}vr(t){const e=this.lr.exec(t);return e?e[1]:null}Sr(t,e){const i=this.vr(t);return $I.Zi(i,e)}Dr(t,e){const i=this.dr.exec(t),r=Number(i[1]);return zI.Zi(new hr(void 0!==i[2]?i[2]:null),r,e)}Nr(t,e){const i=this._r.exec(t),r=Number(i[1]);return ow.Zi(r,e)}yr(t){return vR.Zi(t)}Mr(t){return JSON.parse(t)}Cr(t){var e=this;return(0,Me.Z)(function*(){if(t.user.uid===e.currentUser.uid)return e.syncEngine.Fr(t.batchId,t.state,t.error);Ze("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}kr(t){return this.syncEngine.$r(t.targetId,t.state,t.error)}Vr(t,e){const i=e?this.ur.insert(t,e):this.ur.remove(t),r=this.Ir(this.ur),s=this.Ir(i),c=[],d=[];return s.forEach(p=>{r.has(p)||c.push(p)}),r.forEach(p=>{s.has(p)||d.push(p)}),this.syncEngine.Br(c,d).then(()=>{this.ur=i})}pr(t){this.ur.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}Ir(t){let e=AI();return t.forEach((i,r)=>{e=e.unionWith(r.activeTargetIds)}),e}}class eV{constructor(){this.Lr=new bR,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t){return this.Lr.er(t),this.Ur[t]||"not-current"}updateQueryState(t,e,i){this.Ur[t]=e}removeLocalQueryTarget(t){this.Lr.nr(t)}isLocalQueryTarget(t){return this.Lr.activeTargetIds.has(t)}clearQueryState(t){delete this.Ur[t]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(t){return this.Lr.activeTargetIds.has(t)}start(){return this.Lr=new bR,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class LW{qr(t){}shutdown(){}}class tV{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(t){this.Wr.push(t)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Ze("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.Wr)t(0)}jr(){Ze("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.Wr)t(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const BW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class VW{constructor(t){this.Hr=t.Hr,this.Jr=t.Jr}Yr(t){this.Xr=t}Zr(t){this.eo=t}onMessage(t){this.no=t}close(){this.Jr()}send(t){this.Hr(t)}so(){this.Xr()}io(t){this.eo(t)}ro(t){this.no(t)}}class UW extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.oo=(t.ssl?"https":"http")+"://"+t.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(t,e,i,r,s){const c=this.ao(t,e);Ze("RestConnection","Sending: ",c,i);const d={};return this.ho(d,r,s),this.lo(t,c,d,i).then(p=>(Ze("RestConnection","Received: ",p),p),p=>{throw lf("RestConnection",`${t} failed with error: `,p,"url: ",c,"request:",i),p})}fo(t,e,i,r,s,c){return this.co(t,e,i,r,s)}ho(t,e,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+af,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((r,s)=>t[s]=r),i&&i.headers.forEach((r,s)=>t[s]=r)}ao(t,e){return`${this.oo}/v1/${e}:${BW[t]}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}lo(t,e,i,r){return new Promise((s,c)=>{const d=new lL;d.listenOnce(hI.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case TC.NO_ERROR:const _=d.getResponseJson();Ze("Connection","XHR received:",JSON.stringify(_)),s(_);break;case TC.TIMEOUT:Ze("Connection",'RPC "'+t+'" timed out'),c(new ze(be.DEADLINE_EXCEEDED,"Request time out"));break;case TC.HTTP_ERROR:const b=d.getStatus();if(Ze("Connection",'RPC "'+t+'" failed with status:',b,"response text:",d.getResponseText()),b>0){const E=d.getResponseJson().error;if(E&&E.status&&E.message){const T=function(N){const V=N.toLowerCase().replace(/_/g,"-");return Object.values(be).indexOf(V)>=0?V:be.UNKNOWN}(E.status);c(new ze(T,E.message))}else c(new ze(be.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new ze(be.UNAVAILABLE,"Connection failed."));break;default:wt()}}finally{Ze("Connection",'RPC "'+t+'" completed.')}});const p=JSON.stringify(r);d.send(e,"POST",p,i,15)})}_o(t,e,i){const r=[this.oo,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=Sy(),c=dI(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(d.xmlHttpFactory=new Lk({})),this.ho(d.initMessageHeaders,e,i),d.encodeInitMessageHeaders=!0;const p=r.join("");Ze("Connection","Creating WebChannel: "+p,d);const _=s.createWebChannel(p,d);let b=!1,E=!1;const T=new VW({Hr:V=>{E?Ze("Connection","Not sending because WebChannel is closed:",V):(b||(Ze("Connection","Opening WebChannel transport."),_.open(),b=!0),Ze("Connection","WebChannel sending:",V),_.send(V))},Jr:()=>_.close()}),N=(V,K,re)=>{V.listen(K,Ye=>{try{re(Ye)}catch(rt){setTimeout(()=>{throw rt},0)}})};return N(_,AC.EventType.OPEN,()=>{E||Ze("Connection","WebChannel transport opened.")}),N(_,AC.EventType.CLOSE,()=>{E||(E=!0,Ze("Connection","WebChannel transport closed"),T.io())}),N(_,AC.EventType.ERROR,V=>{E||(E=!0,lf("Connection","WebChannel transport errored:",V),T.io(new ze(be.UNAVAILABLE,"The operation could not be completed")))}),N(_,AC.EventType.MESSAGE,V=>{var K;if(!E){const re=V.data[0];Kt(!!re);const Ye=re,rt=Ye.error||(null===(K=Ye[0])||void 0===K?void 0:K.error);if(rt){Ze("Connection","WebChannel received error:",rt);const pt=rt.status;let st=function(Ht){const En=fr[Ht];if(void 0!==En)return qL(En)}(pt),Lt=rt.message;void 0===st&&(st=be.INTERNAL,Lt="Unknown error status: "+pt+" with message "+rt.message),E=!0,T.io(new ze(st,Lt)),_.close()}else Ze("Connection","WebChannel received:",re),T.ro(re)}}),N(c,fI.STAT_EVENT,V=>{V.stat===pI.PROXY?Ze("Connection","Detected buffering proxy"):V.stat===pI.NOPROXY&&Ze("Connection","Detected no buffering proxy")}),setTimeout(()=>{T.so()},0),T}}function nV(){return typeof window<"u"?window:null}function GI(){return typeof document<"u"?document:null}function aw(n){return new kG(n,!0)}class wR{constructor(t,e,i=1e3,r=1.5,s=6e4){this.Hs=t,this.timerId=e,this.wo=i,this.mo=r,this.yo=s,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(t){this.cancel();const e=Math.floor(this.po+this.Ro()),i=Math.max(0,Date.now()-this.To),r=Math.max(0,e-i);r>0&&Ze("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.po} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.Io=this.Hs.enqueueAfterDelay(this.timerId,r,()=>(this.To=Date.now(),t())),this.po*=this.mo,this.po<this.wo&&(this.po=this.wo),this.po>this.yo&&(this.po=this.yo)}bo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class iV{constructor(t,e,i,r,s,c,d,p){this.Hs=t,this.Po=i,this.vo=r,this.Vo=s,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new wR(t,e)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var t=this;return(0,Me.Z)(function*(){t.No()&&(yield t.close(0))})()}Oo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.Po,6e4,()=>this.$o()))}Bo(t){this.Lo(),this.stream.send(t)}$o(){var t=this;return(0,Me.Z)(function*(){if(t.ko())return t.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(t,e){var i=this;return(0,Me.Z)(function*(){i.Lo(),i.Uo(),i.xo.cancel(),i.So++,4!==t?i.xo.reset():e&&e.code===be.RESOURCE_EXHAUSTED?(qi(e.toString()),qi("Using maximum backoff delay to prevent overloading the backend."),i.xo.Eo()):e&&e.code===be.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.qo(),i.stream.close(),i.stream=null),i.state=t,yield i.listener.Zr(e)})()}qo(){}auth(){this.state=1;const t=this.Ko(this.So),e=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.So===e&&this.Go(i,r)},i=>{t(()=>{const r=new ze(be.UNKNOWN,"Fetching auth token failed: "+i.message);return this.Qo(r)})})}Go(t,e){const i=this.Ko(this.So);this.stream=this.jo(t,e),this.stream.Yr(()=>{i(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(r=>{i(()=>this.Qo(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Mo(){var t=this;this.state=5,this.xo.Ao((0,Me.Z)(function*(){t.state=0,t.start()}))}Qo(t){return Ze("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Ko(t){return e=>{this.Hs.enqueueAndForget(()=>this.So===t?e():(Ze("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class HW extends iV{constructor(t,e,i,r,s,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,c),this.It=s}jo(t,e){return this.Vo._o("Listen",t,e)}onMessage(t){this.xo.reset();const e=function PG(n,t){let e;if("targetChange"in t){const i="NO_CHANGE"===(p=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===p?1:"REMOVE"===p?2:"CURRENT"===p?3:"RESET"===p?4:wt(),r=t.targetChange.targetIds||[],s=function(p,_){return p.gt?(Kt(void 0===_||"string"==typeof _),ot.fromBase64String(_||"")):(Kt(void 0===_||_ instanceof Uint8Array),ot.fromUint8Array(_||new Uint8Array))}(n,t.targetChange.resumeToken),c=t.targetChange.cause,d=c&&function(p){const _=void 0===p.code?be.UNKNOWN:qL(p.code);return new ze(_,p.message||"")}(c);e=new XL(i,r,s,d||null)}else if("documentChange"in t){const i=t.documentChange,r=Gc(n,i.document.name),s=zr(i.document.updateTime),c=new is({mapValue:{fields:i.document.fields}}),d=Ci.newFoundDocument(r,s,c);e=new kI(i.targetIds||[],i.removedTargetIds||[],d.key,d)}else if("documentDelete"in t){const i=t.documentDelete,r=Gc(n,i.document),s=i.readTime?zr(i.readTime):Gt.min(),c=Ci.newNoDocument(r,s);e=new kI([],i.removedTargetIds||[],c.key,c)}else if("documentRemove"in t){const i=t.documentRemove,r=Gc(n,i.document);e=new kI([],i.removedTargetIds||[],r,null)}else{if(!("filter"in t))return wt();{const i=t.filter,s=new DG(i.count||0);e=new QL(i.targetId,s)}}var p;return e}(this.It,t),i=function(r){if(!("targetChange"in r))return Gt.min();const s=r.targetChange;return s.targetIds&&s.targetIds.length?Gt.min():s.readTime?zr(s.readTime):Gt.min()}(t);return this.listener.Wo(e,i)}zo(t){const e={};e.database=QC(this.It),e.addTarget=function(r,s){let c;const d=s.target;return c=EI(d)?{documents:lB(r,d)}:{query:cB(r,d)},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?c.resumeToken=nB(r,s.resumeToken):s.snapshotVersion.compareTo(Gt.min())>0&&(c.readTime=ZC(r,s.snapshotVersion.toTimestamp())),c}(this.It,t);const i=function FG(n,t){const e=function(i,r){switch(r){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return wt()}}(0,t.purpose);return null==e?null:{"goog-listen-tags":e}}(0,t);i&&(e.labels=i),this.Bo(e)}Ho(t){const e={};e.database=QC(this.It),e.removeTarget=t,this.Bo(e)}}class jW extends iV{constructor(t,e,i,r,s,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,c),this.It=s,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(t,e){return this.Vo._o("Write",t,e)}onMessage(t){if(Kt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Jo){this.xo.reset();const e=function NG(n,t){return n&&n.length>0?(Kt(void 0!==t),n.map(e=>function(i,r){let s=zr(i.updateTime?i.updateTime:r);return s.isEqual(Gt.min())&&(s=zr(r)),new bG(s,i.transformResults||[])}(e,t))):[]}(t.writeResults,t.commitTime),i=zr(t.commitTime);return this.listener.Zo(i,e)}return Kt(!t.writeResults||0===t.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const t={};t.database=QC(this.It),this.Bo(t)}Xo(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>XC(this.It,i))};this.Bo(e)}}class zW extends class{}{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.Vo=i,this.It=r,this.nu=!1}su(){if(this.nu)throw new ze(be.FAILED_PRECONDITION,"The client has already been terminated.")}co(t,e,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.Vo.co(t,e,i,r,s)).catch(r=>{throw"FirebaseError"===r.name?(r.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new ze(be.UNKNOWN,r.toString())})}fo(t,e,i,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.Vo.fo(t,e,i,s,c,r)).catch(s=>{throw"FirebaseError"===s.name?(s.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ze(be.UNKNOWN,s.toString())})}terminate(){this.nu=!0}}class $W{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(t){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.cu("Offline")))}set(t){this.lu(),this.iu=0,"Online"===t&&(this.ou=!1),this.cu(t)}cu(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}au(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(qi(e),this.ou=!1):Ze("OnlineStateTracker",e)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class GW{constructor(t,e,i,r,s){var c=this;this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=s,this.mu.qr(d=>{i.enqueueAndForget((0,Me.Z)(function*(){var p;yf(c)&&(Ze("RemoteStore","Restarting streams for network reachability change."),yield(p=(0,Me.Z)(function*(_){const b=mt(_);b._u.add(4),yield Ky(b),b.gu.set("Unknown"),b._u.delete(4),yield lw(b)}),function(_){return p.apply(this,arguments)})(c))}))}),this.gu=new $W(i,r)}}function lw(n){return DR.apply(this,arguments)}function DR(){return DR=(0,Me.Z)(function*(n){if(yf(n))for(const t of n.wu)yield t(!0)}),DR.apply(this,arguments)}function Ky(n){return ER.apply(this,arguments)}function ER(){return ER=(0,Me.Z)(function*(n){for(const t of n.wu)yield t(!1)}),ER.apply(this,arguments)}function WI(n,t){const e=mt(n);e.du.has(t.targetId)||(e.du.set(t.targetId,t),xR(e)?IR(e):Xy(e).ko()&&MR(e,t))}function cw(n,t){const e=mt(n),i=Xy(e);e.du.delete(t),i.ko()&&rV(e,t),0===e.du.size&&(i.ko()?i.Fo():yf(e)&&e.gu.set("Unknown"))}function MR(n,t){n.yu.Ot(t.targetId),Xy(n).zo(t)}function rV(n,t){n.yu.Ot(t),Xy(n).Ho(t)}function IR(n){n.yu=new SG({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),se:t=>n.du.get(t)||null}),Xy(n).start(),n.gu.uu()}function xR(n){return yf(n)&&!Xy(n).No()&&n.du.size>0}function yf(n){return 0===mt(n)._u.size}function sV(n){n.yu=void 0}function WW(n){return SR.apply(this,arguments)}function SR(){return SR=(0,Me.Z)(function*(n){n.du.forEach((t,e)=>{MR(n,t)})}),SR.apply(this,arguments)}function qW(n,t){return TR.apply(this,arguments)}function TR(){return TR=(0,Me.Z)(function*(n,t){sV(n),xR(n)?(n.gu.hu(t),IR(n)):n.gu.set("Unknown")}),TR.apply(this,arguments)}function YW(n,t,e){return AR.apply(this,arguments)}function AR(){return AR=(0,Me.Z)(function*(n,t,e){if(n.gu.set("Online"),t instanceof XL&&2===t.state&&t.cause)try{yield(i=(0,Me.Z)(function*(r,s){const c=s.cause;for(const d of s.targetIds)r.du.has(d)&&(yield r.remoteSyncer.rejectListen(d,c),r.du.delete(d),r.yu.removeTarget(d))}),function(r,s){return i.apply(this,arguments)})(n,t)}catch(i){Ze("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),yield qI(n,i)}else if(t instanceof kI?n.yu.Gt(t):t instanceof QL?n.yu.Yt(t):n.yu.Wt(t),!e.isEqual(Gt.min()))try{const i=yield qB(n.localStore);e.compareTo(i)>=0&&(yield function(r,s){const c=r.yu.te(s);return c.targetChanges.forEach((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const _=r.du.get(p);_&&r.du.set(p,_.withResumeToken(d.resumeToken,s))}}),c.targetMismatches.forEach(d=>{const p=r.du.get(d);if(!p)return;r.du.set(d,p.withResumeToken(ot.EMPTY_BYTE_STRING,p.snapshotVersion)),rV(r,d);const _=new mf(p.target,d,1,p.sequenceNumber);MR(r,_)}),r.remoteSyncer.applyRemoteEvent(c)}(n,e))}catch(i){Ze("RemoteStore","Failed to raise snapshot:",i),yield qI(n,i)}var i}),AR.apply(this,arguments)}function qI(n,t,e){return kR.apply(this,arguments)}function kR(){return kR=(0,Me.Z)(function*(n,t,e){if(!od(t))throw t;n._u.add(1),yield Ky(n),n.gu.set("Offline"),e||(e=()=>qB(n.localStore)),n.asyncQueue.enqueueRetryable((0,Me.Z)(function*(){Ze("RemoteStore","Retrying IndexedDB access"),yield e(),n._u.delete(1),yield lw(n)}))}),kR.apply(this,arguments)}function oV(n,t){return t().catch(e=>qI(n,e,t))}function Qy(n){return RR.apply(this,arguments)}function RR(){return RR=(0,Me.Z)(function*(n){const t=mt(n),e=vf(t);let i=t.fu.length>0?t.fu[t.fu.length-1].batchId:-1;for(;ZW(t);)try{const r=yield PW(t.localStore,i);if(null===r){0===t.fu.length&&e.Fo();break}i=r.batchId,KW(t,r)}catch(r){yield qI(t,r)}aV(t)&&lV(t)}),RR.apply(this,arguments)}function ZW(n){return yf(n)&&n.fu.length<10}function KW(n,t){n.fu.push(t);const e=vf(n);e.ko()&&e.Yo&&e.Xo(t.mutations)}function aV(n){return yf(n)&&!vf(n).No()&&n.fu.length>0}function lV(n){vf(n).start()}function QW(n){return OR.apply(this,arguments)}function OR(){return OR=(0,Me.Z)(function*(n){vf(n).eu()}),OR.apply(this,arguments)}function XW(n){return PR.apply(this,arguments)}function PR(){return PR=(0,Me.Z)(function*(n){const t=vf(n);for(const e of n.fu)t.Xo(e.mutations)}),PR.apply(this,arguments)}function JW(n,t,e){return NR.apply(this,arguments)}function NR(){return NR=(0,Me.Z)(function*(n,t,e){const i=n.fu.shift(),r=rR.from(i,t,e);yield oV(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield Qy(n)}),NR.apply(this,arguments)}function e6(n,t){return FR.apply(this,arguments)}function FR(){return FR=(0,Me.Z)(function*(n,t){var e;t&&vf(n).Yo&&(yield(e=(0,Me.Z)(function*(i,r){if(WL(s=r.code)&&s!==be.ABORTED){const c=i.fu.shift();vf(i).Oo(),yield oV(i,()=>i.remoteSyncer.rejectFailedWrite(c.batchId,r)),yield Qy(i)}var s}),function(i,r){return e.apply(this,arguments)})(n,t)),aV(n)&&lV(n)}),FR.apply(this,arguments)}function cV(n,t){return LR.apply(this,arguments)}function LR(){return LR=(0,Me.Z)(function*(n,t){const e=mt(n);e.asyncQueue.verifyOperationInProgress(),Ze("RemoteStore","RemoteStore received new credentials");const i=yf(e);e._u.add(3),yield Ky(e),i&&e.gu.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e._u.delete(3),yield lw(e)}),LR.apply(this,arguments)}function BR(n,t){return VR.apply(this,arguments)}function VR(){return VR=(0,Me.Z)(function*(n,t){const e=mt(n);t?(e._u.delete(2),yield lw(e)):t||(e._u.add(2),yield Ky(e),e.gu.set("Unknown"))}),VR.apply(this,arguments)}function Xy(n){return n.pu||(n.pu=function(t,e,i){const r=mt(t);return r.su(),new HW(e,r.Vo,r.authCredentials,r.appCheckCredentials,r.It,i)}(n.datastore,n.asyncQueue,{Yr:WW.bind(null,n),Zr:qW.bind(null,n),Wo:YW.bind(null,n)}),n.wu.push(function(){var t=(0,Me.Z)(function*(e){e?(n.pu.Oo(),xR(n)?IR(n):n.gu.set("Unknown")):(yield n.pu.stop(),sV(n))});return function(e){return t.apply(this,arguments)}}())),n.pu}function vf(n){return n.Iu||(n.Iu=function(t,e,i){const r=mt(t);return r.su(),new jW(e,r.Vo,r.authCredentials,r.appCheckCredentials,r.It,i)}(n.datastore,n.asyncQueue,{Yr:QW.bind(null,n),Zr:e6.bind(null,n),tu:XW.bind(null,n),Zo:JW.bind(null,n)}),n.wu.push(function(){var t=(0,Me.Z)(function*(e){e?(n.Iu.Oo(),yield Qy(n)):(yield n.Iu.stop(),n.fu.length>0&&(Ze("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(e){return t.apply(this,arguments)}}())),n.Iu}class UR{constructor(t,e,i,r,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Yi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(t,e,i,r,s){const c=Date.now()+i,d=new UR(t,e,c,r,s);return d.start(i),d}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ze(be.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jy(n,t){if(qi("AsyncQueue",`${t}: ${n}`),od(n))return new ze(be.UNAVAILABLE,`${t}: ${n}`);throw n}class ev{constructor(t){this.comparator=t?(e,i)=>t(e,i)||at.comparator(e.key,i.key):(e,i)=>at.comparator(e.key,i.key),this.keyedMap=GC(),this.sortedSet=new S(this.comparator)}static emptySet(t){return new ev(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof ev)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const i=new ev;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}class uV{constructor(){this.Tu=new S(at.comparator)}track(t){const e=t.doc.key,i=this.Tu.get(e);i?0!==t.type&&3===i.type?this.Tu=this.Tu.insert(e,t):3===t.type&&1!==i.type?this.Tu=this.Tu.insert(e,{type:i.type,doc:t.doc}):2===t.type&&2===i.type?this.Tu=this.Tu.insert(e,{type:2,doc:t.doc}):2===t.type&&0===i.type?this.Tu=this.Tu.insert(e,{type:0,doc:t.doc}):1===t.type&&0===i.type?this.Tu=this.Tu.remove(e):1===t.type&&2===i.type?this.Tu=this.Tu.insert(e,{type:1,doc:i.doc}):0===t.type&&1===i.type?this.Tu=this.Tu.insert(e,{type:2,doc:t.doc}):wt():this.Tu=this.Tu.insert(e,t)}Eu(){const t=[];return this.Tu.inorderTraversal((e,i)=>{t.push(i)}),t}}class tv{constructor(t,e,i,r,s,c,d,p){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p}static fromInitialDocuments(t,e,i,r){const s=[];return e.forEach(c=>{s.push({type:0,doc:c})}),new tv(t,e,ev.emptySet(e),s,i,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&jC(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}}class t6{constructor(){this.Au=void 0,this.listeners=[]}}class n6{constructor(){this.queries=new pf(t=>AL(t),jC),this.onlineState="Unknown",this.Ru=new Set}}function HR(n,t){return jR.apply(this,arguments)}function jR(){return jR=(0,Me.Z)(function*(n,t){const e=mt(n),i=t.query;let r=!1,s=e.queries.get(i);if(s||(r=!0,s=new t6),r)try{s.Au=yield e.onListen(i)}catch(c){const d=Jy(c,`Initialization of query '${Kk(t.query)}' failed`);return void t.onError(d)}e.queries.set(i,s),s.listeners.push(t),t.bu(e.onlineState),s.Au&&t.Pu(s.Au)&&GR(e)}),jR.apply(this,arguments)}function zR(n,t){return $R.apply(this,arguments)}function $R(){return $R=(0,Me.Z)(function*(n,t){const e=mt(n),i=t.query;let r=!1;const s=e.queries.get(i);if(s){const c=s.listeners.indexOf(t);c>=0&&(s.listeners.splice(c,1),r=0===s.listeners.length)}if(r)return e.queries.delete(i),e.onUnlisten(i)}),$R.apply(this,arguments)}function r6(n,t){const e=mt(n);let i=!1;for(const r of t){const c=e.queries.get(r.query);if(c){for(const d of c.listeners)d.Pu(r)&&(i=!0);c.Au=r}}i&&GR(e)}function s6(n,t,e){const i=mt(n),r=i.queries.get(t);if(r)for(const s of r.listeners)s.onError(e);i.queries.delete(t)}function GR(n){n.Ru.forEach(t=>{t.next()})}class WR{constructor(t,e,i){this.query=t,this.vu=e,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=i||{}}Pu(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)3!==r.type&&i.push(r);t=new tv(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}let e=!1;return this.Vu?this.Du(t)&&(this.vu.next(t),e=!0):this.Cu(t,this.onlineState)&&(this.xu(t),e=!0),this.Su=t,e}onError(t){this.vu.error(t)}bu(t){this.onlineState=t;let e=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,t)&&(this.xu(this.Su),e=!0),e}Cu(t,e){return!t.fromCache||!(this.options.Nu&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)}Du(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(t){t=tv.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Vu=!0,this.vu.next(t)}}class o6{constructor(t,e){this.payload=t,this.byteLength=e}ku(){return"metadata"in this.payload}}class dV{constructor(t){this.It=t}Ji(t){return Gc(this.It,t)}Yi(t){return t.metadata.exists?aB(this.It,t.document,!1):Ci.newNoDocument(this.Ji(t.metadata.name),this.Xi(t.metadata.readTime))}Xi(t){return zr(t)}}class a6{constructor(t,e,i){this.Mu=t,this.localStore=e,this.It=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=hV(t)}Ou(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.payload.namedQuery)this.queries.push(t.payload.namedQuery);else if(t.payload.documentMetadata){this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e;const i=kn.fromString(t.payload.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}Fu(t){const e=new Map,i=new dV(this.It);for(const r of t)if(r.metadata.queries){const s=i.Ji(r.metadata.name);for(const c of r.metadata.queries){const d=(e.get(c)||pn()).add(s);e.set(c,d)}}return e}complete(){var t=this;return(0,Me.Z)(function*(){const e=yield function NW(n,t,e,i){return gR.apply(this,arguments)}(t.localStore,new dV(t.It),t.documents,t.Mu.id),i=t.Fu(t.documents);for(const r of t.queries)yield FW(t.localStore,r,i.get(r.name));return t.progress.taskState="Success",{progress:t.progress,$u:t.collectionGroups,Bu:e}})()}}function hV(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class fV{constructor(t){this.key=t}}class pV{constructor(t){this.key=t}}class mV{constructor(t,e){this.query=t,this.Lu=e,this.Uu=null,this.current=!1,this.qu=pn(),this.mutatedKeys=pn(),this.Ku=RL(t),this.Gu=new ev(this.Ku)}get Qu(){return this.Lu}ju(t,e){const i=e?e.Wu:new uV,r=e?e.Gu:this.Gu;let s=e?e.mutatedKeys:this.mutatedKeys,c=r,d=!1;const p="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,_="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((b,E)=>{const T=r.get(b),N=Qk(this.query,E)?E:null,V=!!T&&this.mutatedKeys.has(T.key),K=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let re=!1;T&&N?T.data.isEqual(N.data)?V!==K&&(i.track({type:3,doc:N}),re=!0):this.zu(T,N)||(i.track({type:2,doc:N}),re=!0,(p&&this.Ku(N,p)>0||_&&this.Ku(N,_)<0)&&(d=!0)):!T&&N?(i.track({type:0,doc:N}),re=!0):T&&!N&&(i.track({type:1,doc:T}),re=!0,(p||_)&&(d=!0)),re&&(N?(c=c.add(N),s=K?s.add(b):s.delete(b)):(c=c.delete(b),s=s.delete(b)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const b="F"===this.query.limitType?c.last():c.first();c=c.delete(b.key),s=s.delete(b.key),i.track({type:1,doc:b})}return{Gu:c,Wu:i,$i:d,mutatedKeys:s}}zu(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i){const r=this.Gu;this.Gu=t.Gu,this.mutatedKeys=t.mutatedKeys;const s=t.Wu.Eu();s.sort((_,b)=>function(E,T){const N=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return wt()}};return N(E)-N(T)}(_.type,b.type)||this.Ku(_.doc,b.doc)),this.Hu(i);const c=e?this.Ju():[],d=0===this.qu.size&&this.current?1:0,p=d!==this.Uu;return this.Uu=d,0!==s.length||p?{snapshot:new tv(this.query,t.Gu,r,s,t.mutatedKeys,0===d,p,!1),Yu:c}:{Yu:c}}bu(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Gu:this.Gu,Wu:new uV,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Yu:[]}}Xu(t){return!this.Lu.has(t)&&!!this.Gu.has(t)&&!this.Gu.get(t).hasLocalMutations}Hu(t){t&&(t.addedDocuments.forEach(e=>this.Lu=this.Lu.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Lu=this.Lu.delete(e)),this.current=t.current)}Ju(){if(!this.current)return[];const t=this.qu;this.qu=pn(),this.Gu.forEach(i=>{this.Xu(i.key)&&(this.qu=this.qu.add(i.key))});const e=[];return t.forEach(i=>{this.qu.has(i)||e.push(new pV(i))}),this.qu.forEach(i=>{t.has(i)||e.push(new fV(i))}),e}Zu(t){this.Lu=t.Hi,this.qu=pn();const e=this.ju(t.documents);return this.applyChanges(e,!0)}tc(){return tv.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.Uu)}}class l6{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class c6{constructor(t){this.key=t,this.ec=!1}}class u6{constructor(t,e,i,r,s,c){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=c,this.nc={},this.sc=new pf(d=>AL(d),jC),this.ic=new Map,this.rc=new Set,this.oc=new S(at.comparator),this.uc=new Map,this.cc=new cR,this.ac={},this.hc=new Map,this.lc=jm.vn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function d6(n,t){return qR.apply(this,arguments)}function qR(){return qR=(0,Me.Z)(function*(n,t){const e=gO(n);let i,r;const s=e.sc.get(t);if(s)i=s.targetId,e.sharedClientState.addLocalQueryTarget(i),r=s.view.tc();else{const c=yield Yy(e.localStore,ho(t));e.isPrimaryClient&&WI(e.remoteStore,c);const d=e.sharedClientState.addLocalQueryTarget(c.targetId);i=c.targetId,r=yield YR(e,t,i,"current"===d)}return r}),qR.apply(this,arguments)}function YR(n,t,e,i){return ZR.apply(this,arguments)}function ZR(){return ZR=(0,Me.Z)(function*(n,t,e,i){n.dc=(b,E,T)=>{return(N=(0,Me.Z)(function*(V,K,re,Ye){let rt=K.view.ju(re);rt.$i&&(rt=yield jI(V.localStore,K.query,!1).then(({documents:Lt})=>K.view.ju(Lt,rt)));const pt=Ye&&Ye.targetChanges.get(K.targetId),st=K.view.applyChanges(rt,V.isPrimaryClient,pt);return sO(V,K.targetId,st.Yu),st.snapshot}),function(V,K,re,Ye){return N.apply(this,arguments)})(n,b,E,T);var N};const r=yield jI(n.localStore,t,!0),s=new mV(t,r.Hi),c=s.ju(r.documents),d=YC.createSynthesizedTargetChangeForCurrentChange(e,i&&"Offline"!==n.onlineState),p=s.applyChanges(c,n.isPrimaryClient,d);sO(n,e,p.Yu);const _=new l6(t,e,s);return n.sc.set(t,_),n.ic.has(e)?n.ic.get(e).push(t):n.ic.set(e,[t]),p.snapshot}),ZR.apply(this,arguments)}function h6(n,t){return KR.apply(this,arguments)}function KR(){return KR=(0,Me.Z)(function*(n,t){const e=mt(n),i=e.sc.get(t),r=e.ic.get(i.targetId);if(r.length>1)return e.ic.set(i.targetId,r.filter(s=>!jC(s,t))),void e.sc.delete(t);e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(i.targetId),e.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Zy(e.localStore,i.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(i.targetId),cw(e.remoteStore,i.targetId),nv(e,i.targetId)}).catch(sd))):(nv(e,i.targetId),yield Zy(e.localStore,i.targetId,!0))}),KR.apply(this,arguments)}function QR(){return QR=(0,Me.Z)(function*(n,t,e){const i=_O(n);try{const r=yield function(s,c){const d=mt(s),p=mi.now(),_=c.reduce((T,N)=>T.add(N.key),pn());let b,E;return d.persistence.runTransaction("Locally write mutations","readwrite",T=>{let N=fo(),V=pn();return d.Gi.getEntries(T,_).next(K=>{N=K,N.forEach((re,Ye)=>{Ye.isValidDocument()||(V=V.add(re))})}).next(()=>d.localDocuments.getOverlayedDocuments(T,N)).next(K=>{b=K;const re=[];for(const Ye of c){const rt=wG(Ye,b.get(Ye.key).overlayedDocument);null!=rt&&re.push(new dd(Ye.key,rt,CL(rt.value.mapValue),Pi.exists(!0)))}return d.mutationQueue.addMutationBatch(T,p,re,c)}).next(K=>{E=K;const re=K.applyToLocalDocumentSet(b,V);return d.documentOverlayCache.saveOverlays(T,K.batchId,re)})}).then(()=>({batchId:E.batchId,changes:ZL(b)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(s,c,d){let p=s.ac[s.currentUser.toKey()];p||(p=new S(nn)),p=p.insert(c,d),s.ac[s.currentUser.toKey()]=p}(i,r.batchId,e),yield hd(i,r.changes),yield Qy(i.remoteStore)}catch(r){const s=Jy(r,"Failed to persist write");e.reject(s)}}),QR.apply(this,arguments)}function gV(n,t){return XR.apply(this,arguments)}function XR(){return XR=(0,Me.Z)(function*(n,t){const e=mt(n);try{const i=yield OW(e.localStore,t);t.targetChanges.forEach((r,s)=>{const c=e.uc.get(s);c&&(Kt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?c.ec=!0:r.modifiedDocuments.size>0?Kt(c.ec):r.removedDocuments.size>0&&(Kt(c.ec),c.ec=!1))}),yield hd(e,i,t)}catch(i){yield sd(i)}}),XR.apply(this,arguments)}function _V(n,t,e){const i=mt(n);if(i.isPrimaryClient&&0===e||!i.isPrimaryClient&&1===e){const r=[];i.sc.forEach((s,c)=>{const d=c.view.bu(t);d.snapshot&&r.push(d.snapshot)}),function(s,c){const d=mt(s);d.onlineState=c;let p=!1;d.queries.forEach((_,b)=>{for(const E of b.listeners)E.bu(c)&&(p=!0)}),p&&GR(d)}(i.eventManager,t),r.length&&i.nc.Wo(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}function p6(n,t,e){return JR.apply(this,arguments)}function JR(){return JR=(0,Me.Z)(function*(n,t,e){const i=mt(n);i.sharedClientState.updateQueryState(t,"rejected",e);const r=i.uc.get(t),s=r&&r.key;if(s){let c=new S(at.comparator);c=c.insert(s,Ci.newNoDocument(s,Gt.min()));const d=pn().add(s),p=new qC(Gt.min(),new Map,new z(nn),c,d);yield gV(i,p),i.oc=i.oc.remove(s),i.uc.delete(t),oO(i)}else yield Zy(i.localStore,t,!1).then(()=>nv(i,t,e)).catch(sd)}),JR.apply(this,arguments)}function m6(n,t){return eO.apply(this,arguments)}function eO(){return eO=(0,Me.Z)(function*(n,t){const e=mt(n),i=t.batch.batchId;try{const r=yield RW(e.localStore,t);rO(e,i,null),iO(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),yield hd(e,r)}catch(r){yield sd(r)}}),eO.apply(this,arguments)}function g6(n,t,e){return tO.apply(this,arguments)}function tO(){return tO=(0,Me.Z)(function*(n,t,e){const i=mt(n);try{const r=yield function(s,c){const d=mt(s);return d.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let _;return d.mutationQueue.lookupMutationBatch(p,c).next(b=>(Kt(null!==b),_=b.keys(),d.mutationQueue.removeMutationBatch(p,b))).next(()=>d.mutationQueue.performConsistencyCheck(p)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(p,_,c)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_)).next(()=>d.localDocuments.getDocuments(p,_))})}(i.localStore,t);rO(i,t,e),iO(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),yield hd(i,r)}catch(r){yield sd(r)}}),tO.apply(this,arguments)}function nO(){return nO=(0,Me.Z)(function*(n,t){const e=mt(n);yf(e.remoteStore)||Ze("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(s){const c=mt(s);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>c.mutationQueue.getHighestUnacknowledgedBatchId(d))}(e.localStore);if(-1===i)return void t.resolve();const r=e.hc.get(i)||[];r.push(t),e.hc.set(i,r)}catch(i){const r=Jy(i,"Initialization of waitForPendingWrites() operation failed");t.reject(r)}}),nO.apply(this,arguments)}function iO(n,t){(n.hc.get(t)||[]).forEach(e=>{e.resolve()}),n.hc.delete(t)}function rO(n,t,e){const i=mt(n);let r=i.ac[i.currentUser.toKey()];if(r){const s=r.get(t);s&&(e?s.reject(e):s.resolve(),r=r.remove(t)),i.ac[i.currentUser.toKey()]=r}}function nv(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.ic.get(t))n.sc.delete(i),e&&n.nc._c(i,e);n.ic.delete(t),n.isPrimaryClient&&n.cc.ls(t).forEach(i=>{n.cc.containsKey(i)||yV(n,i)})}function yV(n,t){n.rc.delete(t.path.canonicalString());const e=n.oc.get(t);null!==e&&(cw(n.remoteStore,e),n.oc=n.oc.remove(t),n.uc.delete(e),oO(n))}function sO(n,t,e){for(const i of e)i instanceof fV?(n.cc.addReference(i.key,t),y6(n,i)):i instanceof pV?(Ze("SyncEngine","Document no longer in limbo: "+i.key),n.cc.removeReference(i.key,t),n.cc.containsKey(i.key)||yV(n,i.key)):wt()}function y6(n,t){const e=t.key,i=e.path.canonicalString();n.oc.get(e)||n.rc.has(i)||(Ze("SyncEngine","New document in limbo: "+e),n.rc.add(i),oO(n))}function oO(n){for(;n.rc.size>0&&n.oc.size<n.maxConcurrentLimboResolutions;){const t=n.rc.values().next().value;n.rc.delete(t);const e=new at(kn.fromString(t)),i=n.lc.next();n.uc.set(i,new c6(e)),n.oc=n.oc.insert(e,i),WI(n.remoteStore,new mf(ho(By(e.path)),i,2,m.at))}}function hd(n,t,e){return aO.apply(this,arguments)}function aO(){return aO=(0,Me.Z)(function*(n,t,e){const i=mt(n),r=[],s=[],c=[];var d;i.sc.isEmpty()||(i.sc.forEach((d,p)=>{c.push(i.dc(p,t,e).then(_=>{if(_){i.isPrimaryClient&&i.sharedClientState.updateQueryState(p.targetId,_.fromCache?"not-current":"current"),r.push(_);const b=fR.Ci(p.targetId,_);s.push(b)}}))}),yield Promise.all(c),i.nc.Wo(r),yield(d=(0,Me.Z)(function*(p,_){const b=mt(p);try{yield b.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>_e.forEach(_,T=>_e.forEach(T.Si,N=>b.persistence.referenceDelegate.addReference(E,T.targetId,N)).next(()=>_e.forEach(T.Di,N=>b.persistence.referenceDelegate.removeReference(E,T.targetId,N)))))}catch(E){if(!od(E))throw E;Ze("LocalStore","Failed to update sequence numbers: "+E)}for(const E of _){const T=E.targetId;if(!E.fromCache){const N=b.Ui.get(T),K=N.withLastLimboFreeSnapshotVersion(N.snapshotVersion);b.Ui=b.Ui.insert(T,K)}}}),function(p,_){return d.apply(this,arguments)})(i.localStore,s))}),aO.apply(this,arguments)}function v6(n,t){return lO.apply(this,arguments)}function lO(){return lO=(0,Me.Z)(function*(n,t){const e=mt(n);if(!e.currentUser.isEqual(t)){Ze("SyncEngine","User change. New user:",t.toKey());const i=yield WB(e.localStore,t);e.currentUser=t,(r=e).hc.forEach(c=>{c.forEach(d=>{d.reject(new ze(be.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.hc.clear(),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),yield hd(e,i.ji)}var r}),lO.apply(this,arguments)}function b6(n,t){const e=mt(n),i=e.uc.get(t);if(i&&i.ec)return pn().add(i.key);{let r=pn();const s=e.ic.get(t);if(!s)return r;for(const c of s){const d=e.sc.get(c);r=r.unionWith(d.view.Qu)}return r}}function C6(n,t){return cO.apply(this,arguments)}function cO(){return cO=(0,Me.Z)(function*(n,t){const e=mt(n),i=yield jI(e.localStore,t.query,!0),r=t.view.Zu(i);return e.isPrimaryClient&&sO(e,t.targetId,r.Yu),r}),cO.apply(this,arguments)}function w6(n,t){return uO.apply(this,arguments)}function uO(){return uO=(0,Me.Z)(function*(n,t){const e=mt(n);return KB(e.localStore,t).then(i=>hd(e,i))}),uO.apply(this,arguments)}function D6(n,t,e,i){return dO.apply(this,arguments)}function dO(){return dO=(0,Me.Z)(function*(n,t,e,i){const r=mt(n),s=yield function(c,d){const p=mt(c),_=mt(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",b=>_.Tn(b,d).next(E=>E?p.localDocuments.getDocuments(b,E):_e.resolve(null)))}(r.localStore,t);var d;null!==s?("pending"===e?yield Qy(r.remoteStore):"acknowledged"===e||"rejected"===e?(rO(r,t,i||null),iO(r,t),d=t,mt(mt(r.localStore).mutationQueue).An(d)):wt(),yield hd(r,s)):Ze("SyncEngine","Cannot apply mutation batch with id: "+t)}),dO.apply(this,arguments)}function hO(){return hO=(0,Me.Z)(function*(n,t){const e=mt(n);if(gO(e),_O(e),!0===t&&!0!==e.fc){const i=e.sharedClientState.getAllActiveQueryTargets(),r=yield vV(e,i.toArray());e.fc=!0,yield BR(e.remoteStore,!0);for(const s of r)WI(e.remoteStore,s)}else if(!1===t&&!1!==e.fc){const i=[];let r=Promise.resolve();e.ic.forEach((s,c)=>{e.sharedClientState.isLocalQueryTarget(c)?i.push(c):r=r.then(()=>(nv(e,c),Zy(e.localStore,c,!0))),cw(e.remoteStore,c)}),yield r,yield vV(e,i),function(s){const c=mt(s);c.uc.forEach((d,p)=>{cw(c.remoteStore,p)}),c.cc.fs(),c.uc=new Map,c.oc=new S(at.comparator)}(e),e.fc=!1,yield BR(e.remoteStore,!1)}}),hO.apply(this,arguments)}function vV(n,t,e){return fO.apply(this,arguments)}function fO(){return fO=(0,Me.Z)(function*(n,t,e){const i=mt(n),r=[],s=[];for(const c of t){let d;const p=i.ic.get(c);if(p&&0!==p.length){d=yield Yy(i.localStore,ho(p[0]));for(const _ of p){const b=i.sc.get(_),E=yield C6(i,b);E.snapshot&&s.push(E.snapshot)}}else{const _=yield ZB(i.localStore,c);d=yield Yy(i.localStore,_),yield YR(i,bV(_),c,!1)}r.push(d)}return i.nc.Wo(s),r}),fO.apply(this,arguments)}function bV(n){return SL(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function M6(n){const t=mt(n);return mt(mt(t.localStore).persistence).vi()}function I6(n,t,e,i){return pO.apply(this,arguments)}function pO(){return pO=(0,Me.Z)(function*(n,t,e,i){const r=mt(n);if(r.fc)return void Ze("SyncEngine","Ignoring unexpected query state notification.");const s=r.ic.get(t);if(s&&s.length>0)switch(e){case"current":case"not-current":{const c=yield KB(r.localStore,kL(s[0])),d=qC.createSynthesizedRemoteEventForCurrentChange(t,"current"===e);yield hd(r,c,d);break}case"rejected":yield Zy(r.localStore,t,!0),nv(r,t,i);break;default:wt()}}),pO.apply(this,arguments)}function x6(n,t,e){return mO.apply(this,arguments)}function mO(){return mO=(0,Me.Z)(function*(n,t,e){const i=gO(n);if(i.fc){for(const r of t){if(i.ic.has(r)){Ze("SyncEngine","Adding an already active target "+r);continue}const s=yield ZB(i.localStore,r),c=yield Yy(i.localStore,s);yield YR(i,bV(s),c.targetId,!1),WI(i.remoteStore,c)}for(const r of e)i.ic.has(r)&&(yield Zy(i.localStore,r,!1).then(()=>{cw(i.remoteStore,r),nv(i,r)}).catch(sd))}}),mO.apply(this,arguments)}function gO(n){const t=mt(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=gV.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=b6.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=p6.bind(null,t),t.nc.Wo=r6.bind(null,t.eventManager),t.nc._c=s6.bind(null,t.eventManager),t}function _O(n){const t=mt(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=m6.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=g6.bind(null,t),t}class CV{constructor(){this.synchronizeTabs=!1}initialize(t){var e=this;return(0,Me.Z)(function*(){e.It=aw(t.databaseInfo.databaseId),e.sharedClientState=e.mc(t),e.persistence=e.gc(t),yield e.persistence.start(),e.localStore=e.yc(t),e.gcScheduler=e.Ic(t,e.localStore),e.indexBackfillerScheduler=e.Tc(t,e.localStore)})()}Ic(t,e){return null}Tc(t,e){return null}yc(t){return GB(this.persistence,new $B,t.initialUser,this.It)}gc(t){return new jB(UI.Bs,this.It)}mc(t){return new eV}terminate(){var t=this;return(0,Me.Z)(function*(){t.gcScheduler&&t.gcScheduler.stop(),yield t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}class wV extends CV{constructor(t,e,i){super(),this.Ec=t,this.cacheSizeBytes=e,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(t){var e=()=>super.initialize,i=this;return(0,Me.Z)(function*(){yield e().call(i,t),yield i.Ec.initialize(i,t),yield _O(i.Ec.syncEngine),yield Qy(i.Ec.remoteStore),yield i.persistence.li(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}yc(t){return GB(this.persistence,new $B,t.initialUser,this.It)}Ic(t,e){return new _W(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue,e)}Tc(t,e){const i=new f(e,this.persistence);return new h(t.asyncQueue,i)}gc(t){const e=hR(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?po.withCacheSize(this.cacheSizeBytes):po.DEFAULT;return new dR(this.synchronizeTabs,e,t.clientId,i,t.asyncQueue,nV(),GI(),this.It,this.sharedClientState,!!this.forceOwnership)}mc(t){return new eV}}class T6 extends wV{constructor(t,e){super(t,e,!1),this.Ec=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(t){var e=()=>super.initialize,i=this;return(0,Me.Z)(function*(){yield e().call(i,t);const r=i.Ec.syncEngine;i.sharedClientState instanceof CR&&(i.sharedClientState.syncEngine={Fr:D6.bind(null,r),$r:I6.bind(null,r),Br:x6.bind(null,r),vi:M6.bind(null,r),Or:w6.bind(null,r)},yield i.sharedClientState.start()),yield i.persistence.li(function(){var s=(0,Me.Z)(function*(c){yield function E6(n,t){return hO.apply(this,arguments)}(i.Ec.syncEngine,c),i.gcScheduler&&(c&&!i.gcScheduler.started?i.gcScheduler.start():c||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(c&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():c||i.indexBackfillerScheduler.stop())});return function(c){return s.apply(this,arguments)}}())})()}mc(t){const e=nV();if(!CR.C(e))throw new ze(be.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=hR(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new CR(e,t.asyncQueue,i,t.clientId,t.initialUser)}}class yO{initialize(t,e){var i=this;return(0,Me.Z)(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(e),i.remoteStore=i.createRemoteStore(e),i.eventManager=i.createEventManager(e),i.syncEngine=i.createSyncEngine(e,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>_V(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=v6.bind(null,i.syncEngine),yield BR(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new n6}createDatastore(t){const e=aw(t.databaseInfo.databaseId),i=new UW(t.databaseInfo);return new zW(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return e=this.localStore,i=this.datastore,r=t.asyncQueue,s=d=>_V(this.syncEngine,d,0),c=tV.C()?new tV:new LW,new GW(e,i,r,s,c);var e,i,r,s,c}createSyncEngine(t,e){return function(i,r,s,c,d,p,_){const b=new u6(i,r,s,c,d,p);return _&&(b.fc=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return(t=(0,Me.Z)(function*(e){const i=mt(e);Ze("RemoteStore","RemoteStore shutting down."),i._u.add(5),yield Ky(i),i.mu.shutdown(),i.gu.set("Unknown")}),function(e){return t.apply(this,arguments)})(this.remoteStore);var t}}function DV(n,t=10240){let e=0;return{read:()=>(0,Me.Z)(function*(){if(e<n.byteLength){const i={value:n.slice(e,e+t),done:!1};return e+=t,i}return{done:!0}})(),cancel:()=>(0,Me.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class YI{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ac(this.observer.next,t)}error(t){this.observer.error?this.Ac(this.observer.error,t):qi("Uncaught Error in snapshot listener:",t)}Rc(){this.muted=!0}Ac(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}class A6{constructor(t,e){this.bc=t,this.It=e,this.metadata=new Yi,this.buffer=new Uint8Array,this.Pc=new TextDecoder("utf-8"),this.vc().then(i=>{i&&i.ku()?this.metadata.resolve(i.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(i?.payload)}`))},i=>this.metadata.reject(i))}close(){return this.bc.cancel()}getMetadata(){var t=this;return(0,Me.Z)(function*(){return t.metadata.promise})()}wc(){var t=this;return(0,Me.Z)(function*(){return yield t.getMetadata(),t.vc()})()}vc(){var t=this;return(0,Me.Z)(function*(){const e=yield t.Vc();if(null===e)return null;const i=t.Pc.decode(e),r=Number(i);isNaN(r)&&t.Sc(`length string (${i}) is not valid number`);const s=yield t.Dc(r);return new o6(JSON.parse(s),e.length+r)})()}Cc(){return this.buffer.findIndex(t=>t==="{".charCodeAt(0))}Vc(){var t=this;return(0,Me.Z)(function*(){for(;t.Cc()<0&&!(yield t.xc()););if(0===t.buffer.length)return null;const e=t.Cc();e<0&&t.Sc("Reached the end of bundle when a length string is expected.");const i=t.buffer.slice(0,e);return t.buffer=t.buffer.slice(e),i})()}Dc(t){var e=this;return(0,Me.Z)(function*(){for(;e.buffer.length<t;)(yield e.xc())&&e.Sc("Reached the end of bundle when more is expected.");const i=e.Pc.decode(e.buffer.slice(0,t));return e.buffer=e.buffer.slice(t),i})()}Sc(t){throw this.bc.cancel(),new Error(`Invalid bundle format: ${t}`)}xc(){var t=this;return(0,Me.Z)(function*(){const e=yield t.bc.read();if(!e.done){const i=new Uint8Array(t.buffer.length+e.value.length);i.set(t.buffer),i.set(e.value,t.buffer.length),t.buffer=i}return e.done})()}}class k6{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(t){var e=this;return(0,Me.Z)(function*(){if(e.ensureCommitNotCalled(),e.mutations.length>0)throw new ze(be.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(r=(0,Me.Z)(function*(s,c){const d=mt(s),p=QC(d.It)+"/documents",_={documents:c.map(N=>KC(d.It,N))},b=yield d.fo("BatchGetDocuments",p,_,c.length),E=new Map;b.forEach(N=>{const V=function OG(n,t){return"found"in t?function(e,i){Kt(!!i.found);const r=Gc(e,i.found.name),s=zr(i.found.updateTime),c=new is({mapValue:{fields:i.found.fields}});return Ci.newFoundDocument(r,s,c)}(n,t):"missing"in t?function(e,i){Kt(!!i.missing),Kt(!!i.readTime);const r=Gc(e,i.missing),s=zr(i.readTime);return Ci.newNoDocument(r,s)}(n,t):wt()}(d.It,N);E.set(V.key.toString(),V)});const T=[];return c.forEach(N=>{const V=E.get(N.toString());Kt(!!V),T.push(V)}),T}),function(s,c){return r.apply(this,arguments)})(e.datastore,t);var r;return i.forEach(r=>e.recordVersion(r)),i})()}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new zy(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return(0,Me.Z)(function*(){if(t.ensureCommitNotCalled(),t.lastWriteError)throw t.lastWriteError;const e=t.readVersions;var i;t.mutations.forEach(i=>{e.delete(i.key.toString())}),e.forEach((i,r)=>{const s=at.fromPath(r);t.mutations.push(new Xk(s,t.precondition(s)))}),yield(i=(0,Me.Z)(function*(r,s){const c=mt(r),d=QC(c.It)+"/documents",p={writes:s.map(_=>XC(c.It,_))};yield c.co("Commit",d,p)}),function(r,s){return i.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw wt();e=Gt.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!e.isEqual(i))throw new ze(be.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?e.isEqual(Gt.min())?Pi.exists(!1):Pi.updateTime(e):Pi.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Gt.min()))throw new ze(be.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Pi.updateTime(e)}return Pi.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class R6{constructor(t,e,i,r,s){this.asyncQueue=t,this.datastore=e,this.options=i,this.updateFunction=r,this.deferred=s,this.Nc=i.maxAttempts,this.xo=new wR(this.asyncQueue,"transaction_retry")}run(){this.Nc-=1,this.kc()}kc(){var t=this;this.xo.Ao((0,Me.Z)(function*(){const e=new k6(t.datastore),i=t.Mc(e);i&&i.then(r=>{t.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{t.deferred.resolve(r)}).catch(s=>{t.Oc(s)}))}).catch(r=>{t.Oc(r)})}))}Mc(t){try{const e=this.updateFunction(t);return!ld(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Oc(t){this.Nc>0&&this.Fc(t)?(this.Nc-=1,this.asyncQueue.enqueueAndForget(()=>(this.kc(),Promise.resolve()))):this.deferred.reject(t)}Fc(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||!WL(e)}return!1}}class O6{constructor(t,e,i,r){var s=this;this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=hr.UNAUTHENTICATED,this.clientId=_I.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var c=(0,Me.Z)(function*(d){Ze("FirestoreClient","Received user=",d.uid),yield s.authCredentialListener(d),s.user=d});return function(d){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(i,c=>(Ze("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var t=this;return(0,Me.Z)(function*(){return{asyncQueue:t.asyncQueue,databaseInfo:t.databaseInfo,clientId:t.clientId,authCredentials:t.authCredentials,appCheckCredentials:t.appCheckCredentials,initialUser:t.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ze(be.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const e=new Yi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Me.Z)(function*(){try{t.onlineComponents&&(yield t.onlineComponents.terminate()),t.offlineComponents&&(yield t.offlineComponents.terminate()),t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),e.resolve()}catch(i){const r=Jy(i,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}function EV(n,t){return vO.apply(this,arguments)}function vO(){return vO=(0,Me.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress(),Ze("FirestoreClient","Initializing OfflineComponentProvider");const e=yield n.getConfiguration();yield t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(function(){var r=(0,Me.Z)(function*(s){i.isEqual(s)||(yield WB(t.localStore,s),i=s)});return function(s){return r.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=t}),vO.apply(this,arguments)}function MV(n,t){return bO.apply(this,arguments)}function bO(){return bO=(0,Me.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress();const e=yield CO(n);Ze("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield t.initialize(e,i),n.setCredentialChangeListener(r=>cV(t.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>cV(t.remoteStore,s)),n.onlineComponents=t}),bO.apply(this,arguments)}function CO(n){return wO.apply(this,arguments)}function wO(){return wO=(0,Me.Z)(function*(n){return n.offlineComponents||(Ze("FirestoreClient","Using default OfflineComponentProvider"),yield EV(n,new CV)),n.offlineComponents}),wO.apply(this,arguments)}function ZI(n){return DO.apply(this,arguments)}function DO(){return DO=(0,Me.Z)(function*(n){return n.onlineComponents||(Ze("FirestoreClient","Using default OnlineComponentProvider"),yield MV(n,new yO)),n.onlineComponents}),DO.apply(this,arguments)}function IV(n){return CO(n).then(t=>t.persistence)}function KI(n){return CO(n).then(t=>t.localStore)}function xV(n){return ZI(n).then(t=>t.remoteStore)}function EO(n){return ZI(n).then(t=>t.syncEngine)}function iv(n){return MO.apply(this,arguments)}function MO(){return MO=(0,Me.Z)(function*(n){const t=yield ZI(n),e=t.eventManager;return e.onListen=d6.bind(null,t.syncEngine),e.onUnlisten=h6.bind(null,t.syncEngine),e}),MO.apply(this,arguments)}function SV(n,t,e={}){const i=new Yi;return n.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return function(r,s,c,d,p){const _=new YI({next:E=>{s.enqueueAndForget(()=>zR(r,b));const T=E.docs.has(c);!T&&E.fromCache?p.reject(new ze(be.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&E.fromCache&&d&&"server"===d.source?p.reject(new ze(be.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(E)},error:E=>p.reject(E)}),b=new WR(By(c.path),_,{includeMetadataChanges:!0,Nu:!0});return HR(r,b)}(yield iv(n),n.asyncQueue,t,e,i)})),i.promise}function TV(n,t,e={}){const i=new Yi;return n.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return function(r,s,c,d,p){const _=new YI({next:E=>{s.enqueueAndForget(()=>zR(r,b)),E.fromCache&&"server"===d.source?p.reject(new ze(be.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(E)},error:E=>p.reject(E)}),b=new WR(c,_,{includeMetadataChanges:!0,Nu:!0});return HR(r,b)}(yield iv(n),n.asyncQueue,t,e,i)})),i.promise}const AV=new Map;function IO(n,t,e){if(!e)throw new ze(be.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function kV(n,t,e,i){if(!0===t&&!0===i)throw new ze(be.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function RV(n){if(!at.isDocumentKey(n))throw new ze(be.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function OV(n){if(at.isDocumentKey(n))throw new ze(be.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function QI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const t=(e=n).constructor?e.constructor.name:null;return t?`a custom ${t} object`:"an object"}}var e;return"function"==typeof n?"a function":wt()}function Pn(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new ze(be.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=QI(n);throw new ze(be.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function PV(n,t){if(t<=0)throw new ze(be.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${t}.`)}class NV{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new ze(be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new ze(be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,kV("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class uw{constructor(t,e,i,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new NV({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ze(be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new ze(be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new NV(t),void 0!==t.credentials&&(this._authCredentials=function(e){if(!e)return new Vk;switch(e.type){case"gapi":return new uL(e.client,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new ze(be.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=AV.get(t);e&&(Ze("ComponentProvider","Removing Datastore"),AV.delete(t),e.terminate())}(this),Promise.resolve()}}class ki{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qc(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ki(this.firestore,t,this._key)}}class vs{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new vs(this.firestore,t,this._query)}}class qc extends vs{constructor(t,e,i){super(t,e,By(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ki(this.firestore,null,new at(t))}withConverter(t){return new qc(this.firestore,t,this._path)}}function FV(n,t,...e){if(n=(0,te.m9)(n),IO("collection","path",t),n instanceof uw){const i=kn.fromString(t,...e);return OV(i),new qc(n,null,i)}{if(!(n instanceof ki||n instanceof qc))throw new ze(be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(kn.fromString(t,...e));return OV(i),new qc(n.firestore,null,i)}}function XI(n,t,...e){if(n=(0,te.m9)(n),1===arguments.length&&(t=_I.R()),IO("doc","path",t),n instanceof uw){const i=kn.fromString(t,...e);return RV(i),new ki(n,null,new at(i))}{if(!(n instanceof ki||n instanceof qc))throw new ze(be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(kn.fromString(t,...e));return RV(i),new ki(n.firestore,n instanceof qc?n.converter:null,new at(i))}}function LV(n,t){return n=(0,te.m9)(n),t=(0,te.m9)(t),(n instanceof ki||n instanceof qc)&&(t instanceof ki||t instanceof qc)&&n.firestore===t.firestore&&n.path===t.path&&n.converter===t.converter}function BV(n,t){return n=(0,te.m9)(n),t=(0,te.m9)(t),n instanceof vs&&t instanceof vs&&n.firestore===t.firestore&&jC(n._query,t._query)&&n.converter===t.converter}class $6{constructor(){this.$c=Promise.resolve(),this.Bc=[],this.Lc=!1,this.Uc=[],this.qc=null,this.Kc=!1,this.Gc=!1,this.Qc=[],this.xo=new wR(this,"async_queue_retry"),this.jc=()=>{const e=GI();e&&Ze("AsyncQueue","Visibility state changed to "+e.visibilityState),this.xo.bo()};const t=GI();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.jc)}get isShuttingDown(){return this.Lc}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Wc(),this.zc(t)}enterRestrictedMode(t){if(!this.Lc){this.Lc=!0,this.Gc=t||!1;const e=GI();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.jc)}}enqueue(t){if(this.Wc(),this.Lc)return new Promise(()=>{});const e=new Yi;return this.zc(()=>this.Lc&&this.Gc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Bc.push(t),this.Hc()))}Hc(){var t=this;return(0,Me.Z)(function*(){if(0!==t.Bc.length){try{yield t.Bc[0](),t.Bc.shift(),t.xo.reset()}catch(e){if(!od(e))throw e;Ze("AsyncQueue","Operation failed with retryable error: "+e)}t.Bc.length>0&&t.xo.Ao(()=>t.Hc())}})()}zc(t){const e=this.$c.then(()=>(this.Kc=!0,t().catch(i=>{throw this.qc=i,this.Kc=!1,qi("INTERNAL UNHANDLED ERROR: ",function(s){let c=s.message||"";return s.stack&&(c=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),c}(i)),i}).then(i=>(this.Kc=!1,i))));return this.$c=e,e}enqueueAfterDelay(t,e,i){this.Wc(),this.Qc.indexOf(t)>-1&&(e=0);const r=UR.createAndSchedule(this,t,e,i,s=>this.Jc(s));return this.Uc.push(r),r}Wc(){this.qc&&wt()}verifyOperationInProgress(){}Yc(){var t=this;return(0,Me.Z)(function*(){let e;do{e=t.$c,yield e}while(e!==t.$c)})()}Xc(t){for(const e of this.Uc)if(e.timerId===t)return!0;return!1}Zc(t){return this.Yc().then(()=>{this.Uc.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this.Uc)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.Yc()})}ta(t){this.Qc.push(t)}Jc(t){const e=this.Uc.indexOf(t);this.Uc.splice(e,1)}}function xO(n){return function(t,e){if("object"!=typeof t||null===t)return!1;const i=t;for(const r of["next","error","complete"])if(r in i&&"function"==typeof i[r])return!0;return!1}(n)}class G6{constructor(){this._progressObserver={},this._taskCompletionResolver=new Yi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,i){this._progressObserver={next:t,error:e,complete:i}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class Ni extends uw{constructor(t,e,i,r){super(t,e,i,r),this.type="firestore",this._queue=new $6,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||VV(this),this._firestoreClient.terminate()}}function q6(n,t){const e="object"==typeof n?n:(0,ii.getApp)(),i="string"==typeof n?n:t||"(default)";return(0,ii._getProvider)(e,"firestore").getImmediate({identifier:i})}function pr(n){return n._firestoreClient||VV(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function VV(n){var t;const e=n._freezeSettings(),i=(s=(null===(t=n._app)||void 0===t?void 0:t.options.appId)||"",new LC(n._databaseId,s,n._persistenceKey,(d=e).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,d.useFetchStreams));var s,d;n._firestoreClient=new O6(n._authCredentials,n._appCheckCredentials,n._queue,i)}function UV(n,t,e){const i=new Yi;return n.asyncQueue.enqueue((0,Me.Z)(function*(){try{yield EV(n,e),yield MV(n,t),i.resolve()}catch(r){const s=r;if(!("FirebaseError"===(c=s).name?c.code===be.FAILED_PRECONDITION||c.code===be.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw s;lf("Error enabling offline persistence. Falling back to persistence disabled: "+s),i.reject(s)}var c})).then(()=>i.promise)}function HV(n){if(n._initialized||n._terminated)throw new ze(be.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class fd{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new ze(be.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ai(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class Yc{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Yc(ot.fromBase64String(t))}catch(e){throw new ze(be.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Yc(ot.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class $m{constructor(t){this._methodName=t}}class JI{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new ze(be.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new ze(be.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return nn(this._lat,t._lat)||nn(this._long,t._long)}}const nq=/^__.*__$/;class iq{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return null!==this.fieldMask?new dd(t,this.data,this.fieldMask,e,this.fieldTransforms):new jy(t,this.data,e,this.fieldTransforms)}}class jV{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new dd(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function zV(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw wt()}}class ex{constructor(t,e,i,r,s,c){this.settings=t,this.databaseId=e,this.It=i,this.ignoreUndefinedProperties=r,void 0===s&&this.ea(),this.fieldTransforms=s||[],this.fieldMask=c||[]}get path(){return this.settings.path}get na(){return this.settings.na}sa(t){return new ex(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ia(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.sa({path:i,ra:!1});return r.oa(t),r}ua(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.sa({path:i,ra:!1});return r.ea(),r}ca(t){return this.sa({path:void 0,ra:!0})}aa(t){return ix(t,this.settings.methodName,this.settings.ha||!1,this.path,this.settings.la)}contains(t){return void 0!==this.fieldMask.find(e=>t.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>t.isPrefixOf(e.field))}ea(){if(this.path)for(let t=0;t<this.path.length;t++)this.oa(this.path.get(t))}oa(t){if(0===t.length)throw this.aa("Document fields must not be empty");if(zV(this.na)&&nq.test(t))throw this.aa('Document fields cannot begin and end with "__"')}}class rq{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.It=i||aw(t)}fa(t,e,i,r=!1){return new ex({na:t,methodName:e,la:i,path:Ai.emptyPath(),ra:!1,ha:r},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Gm(n){const t=n._freezeSettings(),e=aw(n._databaseId);return new rq(n._databaseId,!!t.ignoreUndefinedProperties,e)}function tx(n,t,e,i,r,s={}){const c=n.fa(s.merge||s.mergeFields?2:0,t,e,r);kO("Data must be an object, but it was:",c,i);const d=WV(i,c);let p,_;if(s.merge)p=new $e(c.fieldMask),_=c.fieldTransforms;else if(s.mergeFields){const b=[];for(const E of s.mergeFields){const T=RO(t,E,e);if(!c.contains(T))throw new ze(be.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);YV(b,T)||b.push(T)}p=new $e(b),_=c.fieldTransforms.filter(E=>p.covers(E.field))}else p=null,_=c.fieldTransforms;return new iq(new is(d),p,_)}class dw extends $m{_toFieldTransform(t){if(2!==t.na)throw t.aa(1===t.na?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof dw}}function $V(n,t,e){return new ex({na:3,la:t.settings.la,methodName:n._methodName,ra:e},t.databaseId,t.It,t.ignoreUndefinedProperties)}class SO extends $m{_toFieldTransform(t){return new zC(t.path,new Uy)}isEqual(t){return t instanceof SO}}class sq extends $m{constructor(t,e){super(t),this.da=e}_toFieldTransform(t){const e=$V(this,t,!0),i=this.da.map(s=>Wm(s,e)),r=new Pm(i);return new zC(t.path,r)}isEqual(t){return this===t}}class oq extends $m{constructor(t,e){super(t),this.da=e}_toFieldTransform(t){const e=$V(this,t,!0),i=this.da.map(s=>Wm(s,e)),r=new Nm(i);return new zC(t.path,r)}isEqual(t){return this===t}}class aq extends $m{constructor(t,e){super(t),this._a=e}_toFieldTransform(t){const e=new Hy(t.It,NL(t.It,this._a));return new zC(t.path,e)}isEqual(t){return this===t}}function TO(n,t,e,i){const r=n.fa(1,t,e);kO("Data must be an object, but it was:",r,i);const s=[],c=is.empty();w(i,(p,_)=>{const b=nx(t,p,e);_=(0,te.m9)(_);const E=r.ua(b);if(_ instanceof dw)s.push(b);else{const T=Wm(_,E);null!=T&&(s.push(b),c.set(b,T))}});const d=new $e(s);return new jV(c,d,r.fieldTransforms)}function AO(n,t,e,i,r,s){const c=n.fa(1,t,e),d=[RO(t,i,e)],p=[r];if(s.length%2!=0)throw new ze(be.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<s.length;T+=2)d.push(RO(t,s[T])),p.push(s[T+1]);const _=[],b=is.empty();for(let T=d.length-1;T>=0;--T)if(!YV(_,d[T])){const N=d[T];let V=p[T];V=(0,te.m9)(V);const K=c.ua(N);if(V instanceof dw)_.push(N);else{const re=Wm(V,K);null!=re&&(_.push(N),b.set(N,re))}}const E=new $e(_);return new jV(b,E,c.fieldTransforms)}function GV(n,t,e,i=!1){return Wm(e,n.fa(i?4:3,t))}function Wm(n,t){if(qV(n=(0,te.m9)(n)))return kO("Unsupported field value:",t,n),WV(n,t);if(n instanceof $m)return function(e,i){if(!zV(i.na))throw i.aa(`${e._methodName}() can only be used with update() and set()`);if(!i.path)throw i.aa(`${e._methodName}() is not currently supported inside arrays`);const r=e._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(n,t),null;if(void 0===n&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.ra&&4!==t.na)throw t.aa("Nested arrays are not supported");return function(e,i){const r=[];let s=0;for(const c of e){let d=Wm(c,i.ca(s));null==d&&(d={nullValue:"NULL_VALUE"}),r.push(d),s++}return{arrayValue:{values:r}}}(n,t)}return function(e,i){if(null===(e=(0,te.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return NL(i.It,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const r=mi.fromDate(e);return{timestampValue:ZC(i.It,r)}}if(e instanceof mi){const r=new mi(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:ZC(i.It,r)}}if(e instanceof JI)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Yc)return{bytesValue:nB(i.It,e._byteString)};if(e instanceof ki){const r=i.databaseId,s=e.firestore._databaseId;if(!s.isEqual(r))throw i.aa(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:Jk(e.firestore._databaseId||i.databaseId,e._key.path)}}throw i.aa(`Unsupported field value: ${QI(e)}`)}(n,t)}function WV(n,t){const e={};return M(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):w(n,(i,r)=>{const s=Wm(r,t.ia(i));null!=s&&(e[i]=s)}),{mapValue:{fields:e}}}function qV(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof mi||n instanceof JI||n instanceof Yc||n instanceof ki||n instanceof $m)}function kO(n,t,e){if(!qV(e)||"object"!=typeof(i=e)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=QI(e);throw t.aa("an object"===i?n+" a custom object":n+" "+i)}var i}function RO(n,t,e){if((t=(0,te.m9)(t))instanceof fd)return t._internalPath;if("string"==typeof t)return nx(n,t);throw ix("Field path arguments must be of type string or ",n,!1,void 0,e)}const lq=new RegExp("[~\\*/\\[\\]]");function nx(n,t,e){if(t.search(lq)>=0)throw ix(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new fd(...t.split("."))._internalPath}catch{throw ix(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function ix(n,t,e,i,r){const s=i&&!i.isEmpty(),c=void 0!==r;let d=`Function ${t}() called with invalid data`;e&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(s||c)&&(p+=" (found",s&&(p+=` in field ${i}`),c&&(p+=` in document ${r}`),p+=")"),new ze(be.INVALID_ARGUMENT,d+n+p)}function YV(n,t){return n.some(e=>e.isEqual(t))}class hw{constructor(t,e,i,r,s){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ki(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new cq(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(rx("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class cq extends hw{data(){return super.data()}}function rx(n,t){return"string"==typeof t?nx(n,t):t instanceof fd?t._internalPath:t._delegate._internalPath}class qm{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class pd extends hw{constructor(t,e,i,r,s,c){super(t,e,i,r,c),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new fw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(rx("DocumentSnapshot.get",t));if(null!==i)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}}class fw extends pd{data(t={}){return super.data(t)}}class bf{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new qm(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new fw(this._firestore,this._userDataWriter,i.key,i,new qm(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ze(be.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(c=>({type:"added",doc:new fw(i._firestore,i._userDataWriter,c.doc.key,c.doc,new qm(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>r||3!==c.type).map(c=>{const d=new fw(i._firestore,i._userDataWriter,c.doc.key,c.doc,new qm(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let p=-1,_=-1;return 0!==c.type&&(p=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),1!==c.type&&(s=s.add(c.doc),_=s.indexOf(c.doc.key)),{type:uq(c.type),doc:d,oldIndex:p,newIndex:_}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function uq(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return wt()}}function ZV(n,t){return n instanceof pd&&t instanceof pd?n._firestore===t._firestore&&n._key.isEqual(t._key)&&(null===n._document?null===t._document:n._document.isEqual(t._document))&&n._converter===t._converter:n instanceof bf&&t instanceof bf&&n._firestore===t._firestore&&BV(n.query,t.query)&&n.metadata.isEqual(t.metadata)&&n._snapshot.isEqual(t._snapshot)}function KV(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new ze(be.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class pw{}function Cf(n,...t){for(const e of t)n=e._apply(n);return n}class dq extends pw{constructor(t,e,i){super(),this.wa=t,this.ma=e,this.ga=i,this.type="where"}_apply(t){const e=Gm(t.firestore),i=function(r,s,c,d,p,_,b){let E;if(p.isKeyField()){if("array-contains"===_||"array-contains-any"===_)throw new ze(be.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if("in"===_||"not-in"===_){n2(b,_);const N=[];for(const V of b)N.push(t2(d,r,V));E={arrayValue:{values:N}}}else E=t2(d,r,b)}else"in"!==_&&"not-in"!==_&&"array-contains-any"!==_||n2(b,_),E=GV(c,"where",b,"in"===_||"not-in"===_);const T=rs.create(p,_,E);return function(N,V){if(V.dt()){const re=Yk(N);if(null!==re&&!re.isEqual(V.field))throw new ze(be.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${re.toString()}' and '${V.field.toString()}'`);const Ye=qk(N);null!==Ye&&r2(0,V.field,Ye)}const K=function(re,Ye){for(const rt of re.filters)if(Ye.indexOf(rt.op)>=0)return rt.op;return null}(N,function(re){switch(re){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(V.op));if(null!==K)throw new ze(be.INVALID_ARGUMENT,K===V.op?`Invalid query. You cannot use more than one '${V.op.toString()}' filter.`:`Invalid query. You cannot use '${V.op.toString()}' filters with '${K.toString()}' filters.`)}(r,T),T}(t._query,0,e,t.firestore._databaseId,this.wa,this.ma,this.ga);return new vs(t.firestore,t.converter,function(r,s){const c=r.filters.concat([s]);return new ud(r.path,r.collectionGroup,r.explicitOrderBy.slice(),c,r.limit,r.limitType,r.startAt,r.endAt)}(t._query,i))}}class fq extends pw{constructor(t,e){super(),this.wa=t,this.ya=e,this.type="orderBy"}_apply(t){const e=function(i,r,s){if(null!==i.startAt)throw new ze(be.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new ze(be.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Ly(r,s);return function(d,p){if(null===qk(d)){const _=Yk(d);null!==_&&r2(0,_,p.field)}}(i,c),c}(t._query,this.wa,this.ya);return new vs(t.firestore,t.converter,function(i,r){const s=i.explicitOrderBy.concat([r]);return new ud(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,e))}}class QV extends pw{constructor(t,e,i){super(),this.type=t,this.pa=e,this.Ia=i}_apply(t){return new vs(t.firestore,t.converter,II(t._query,this.pa,this.Ia))}}class XV extends pw{constructor(t,e,i){super(),this.type=t,this.Ta=e,this.Ea=i}_apply(t){const e=e2(t,this.type,this.Ta,this.Ea);return new vs(t.firestore,t.converter,(r=e,new ud((i=t._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,r,i.endAt)));var i,r}}class JV extends pw{constructor(t,e,i){super(),this.type=t,this.Ta=e,this.Ea=i}_apply(t){const e=e2(t,this.type,this.Ta,this.Ea);return new vs(t.firestore,t.converter,(r=e,new ud((i=t._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,r)));var i,r}}function e2(n,t,e,i){if(e[0]=(0,te.m9)(e[0]),e[0]instanceof hw)return function(r,s,c,d,p){if(!d)throw new ze(be.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const _=[];for(const b of Vy(r))if(b.field.isKeyField())_.push(Rm(s,d.key));else{const E=d.data.field(b.field);if(ai(E))throw new ze(be.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===E){const T=b.field.canonicalString();throw new ze(be.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${T}' (used as the orderBy) does not exist.`)}_.push(E)}return new ff(_,p)}(n._query,n.firestore._databaseId,t,e[0]._document,i);{const r=Gm(n.firestore);return function(s,c,d,p,_,b){const E=s.explicitOrderBy;if(_.length>E.length)throw new ze(be.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const T=[];for(let N=0;N<_.length;N++){const V=_[N];if(E[N].field.isKeyField()){if("string"!=typeof V)throw new ze(be.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof V}`);if(!Zk(s)&&-1!==V.indexOf("/"))throw new ze(be.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${V}' contains a slash.`);const K=s.path.child(kn.fromString(V));if(!at.isDocumentKey(K))throw new ze(be.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${K}' is not because it contains an odd number of segments.`);const re=new at(K);T.push(Rm(c,re))}else{const K=GV(d,p,V);T.push(K)}}return new ff(T,b)}(n._query,n.firestore._databaseId,r,t,e,i)}}function t2(n,t,e){if("string"==typeof(e=(0,te.m9)(e))){if(""===e)throw new ze(be.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Zk(t)&&-1!==e.indexOf("/"))throw new ze(be.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(kn.fromString(e));if(!at.isDocumentKey(i))throw new ze(be.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Rm(n,new at(i))}if(e instanceof ki)return Rm(n,e._key);throw new ze(be.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${QI(e)}.`)}function n2(n,t){if(!Array.isArray(n)||0===n.length)throw new ze(be.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(n.length>10)throw new ze(be.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function r2(n,t,e){if(!e.isEqual(t))throw new ze(be.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${e.toString()}' instead.`)}const Cq={maxAttempts:5};class OO{convertValue(t,e="none"){switch(Zl(t)){case 0:return null;case 1:return t.booleanValue;case 2:return bt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(wn(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw wt()}}convertObject(t,e){const i={};return w(t.fields,(r,s)=>{i[r]=this.convertValue(s,e)}),i}convertGeoPoint(t){return new JI(bt(t.latitude),bt(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=jc(t);return null==i?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(ad(t));default:return null}}convertTimestamp(t){const e=Fe(t);return new mi(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=kn.fromString(t);Kt(hB(i));const r=new $a(i.get(1),i.get(3)),s=new at(i.popFirst(5));return r.isEqual(e)||qi(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}}function sx(n,t,e){let i;return i=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,i}class wq extends OO{constructor(t){super(),this.firestore=t}convertBytes(t){return new Yc(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new ki(this.firestore,null,e)}}class s2{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Gm(t)}set(t,e,i){this._verifyNotCommitted();const r=wf(t,this._firestore),s=sx(r.converter,e,i),c=tx(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,i);return this._mutations.push(c.toMutation(r._key,Pi.none())),this}update(t,e,i,...r){this._verifyNotCommitted();const s=wf(t,this._firestore);let c;return c="string"==typeof(e=(0,te.m9)(e))||e instanceof fd?AO(this._dataReader,"WriteBatch.update",s._key,e,i,r):TO(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(c.toMutation(s._key,Pi.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=wf(t,this._firestore);return this._mutations=this._mutations.concat(new zy(e._key,Pi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ze(be.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function wf(n,t){if((n=(0,te.m9)(n)).firestore!==t)throw new ze(be.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Ym extends OO{constructor(t){super(),this.firestore=t}convertBytes(t){return new Yc(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new ki(this.firestore,null,e)}}function o2(n,t,e){n=Pn(n,ki);const i=Pn(n.firestore,Ni),r=sx(n.converter,t,e);return rv(i,[tx(Gm(i),"setDoc",n._key,r,null!==n.converter,e).toMutation(n._key,Pi.none())])}function a2(n,t,e,...i){n=Pn(n,ki);const r=Pn(n.firestore,Ni),s=Gm(r);let c;return c="string"==typeof(t=(0,te.m9)(t))||t instanceof fd?AO(s,"updateDoc",n._key,t,e,i):TO(s,"updateDoc",n._key,t),rv(r,[c.toMutation(n._key,Pi.exists(!0))])}function l2(n,...t){var e,i,r;n=(0,te.m9)(n);let s={includeMetadataChanges:!1},c=0;"object"!=typeof t[c]||xO(t[c])||(s=t[c],c++);const d={includeMetadataChanges:s.includeMetadataChanges};if(xO(t[c])){const E=t[c];t[c]=null===(e=E.next)||void 0===e?void 0:e.bind(E),t[c+1]=null===(i=E.error)||void 0===i?void 0:i.bind(E),t[c+2]=null===(r=E.complete)||void 0===r?void 0:r.bind(E)}let p,_,b;if(n instanceof ki)_=Pn(n.firestore,Ni),b=By(n._key.path),p={next:E=>{t[c]&&t[c](PO(_,n,E))},error:t[c+1],complete:t[c+2]};else{const E=Pn(n,vs);_=Pn(E.firestore,Ni),b=E._query;const T=new Ym(_);p={next:N=>{t[c]&&t[c](new bf(_,T,E,N))},error:t[c+1],complete:t[c+2]},KV(n._query)}return function(E,T,N,V){const K=new YI(V),re=new WR(T,K,N);return E.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return HR(yield iv(E),re)})),()=>{K.Rc(),E.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return zR(yield iv(E),re)}))}}(pr(_),b,d,p)}function rv(n,t){return function(e,i){const r=new Yi;return e.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return function f6(n,t,e){return QR.apply(this,arguments)}(yield EO(e),i,r)})),r.promise}(pr(n),t)}function PO(n,t,e){const i=e.docs.get(t._key),r=new Ym(n);return new pd(n,r,t._key,i,new qm(e.hasPendingWrites,e.fromCache),t.converter)}class Rq extends class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=Gm(t)}get(t){const e=wf(t,this._firestore),i=new wq(this._firestore);return this._transaction.lookup([e._key]).then(r=>{if(!r||1!==r.length)return wt();const s=r[0];if(s.isFoundDocument())return new hw(this._firestore,i,s.key,s,e.converter);if(s.isNoDocument())return new hw(this._firestore,i,e._key,null,e.converter);throw wt()})}set(t,e,i){const r=wf(t,this._firestore),s=sx(r.converter,e,i),c=tx(this._dataReader,"Transaction.set",r._key,s,null!==r.converter,i);return this._transaction.set(r._key,c),this}update(t,e,i,...r){const s=wf(t,this._firestore);let c;return c="string"==typeof(e=(0,te.m9)(e))||e instanceof fd?AO(this._dataReader,"Transaction.update",s._key,e,i,r):TO(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,c),this}delete(t){const e=wf(t,this._firestore);return this._transaction.delete(e._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=wf(t,this._firestore),i=new Ym(this._firestore);return super.get(t).then(r=>new pd(this._firestore,i,e._key,r._document,new qm(!1,!1),e.converter))}}function NO(n,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new ze("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return t}function u2(){if(typeof Uint8Array>"u")throw new ze("unimplemented","Uint8Arrays are not available in this environment.")}function d2(){if(!function lt(){return typeof atob<"u"}())throw new ze("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,t=!0){af=ii.SDK_VERSION,(0,ii._registerComponent)(new ps.wA("firestore",(e,{instanceIdentifier:i,options:r})=>{const s=e.getProvider("app").getImmediate(),c=new Ni(new PC(e.getProvider("auth-internal")),new dL(e.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ze(be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $a(d.options.projectId,p)}(s,i),s);return r=Object.assign({useFetchStreams:t},r),c._setSettings(r),c},"PUBLIC").setMultipleInstances(!0)),(0,ii.registerVersion)(kC,"3.5.0",n),(0,ii.registerVersion)(kC,"3.5.0","esm2017")}();class mw{constructor(t){this._delegate=t}static fromBase64String(t){return d2(),new mw(Yc.fromBase64String(t))}static fromUint8Array(t){return u2(),new mw(Yc.fromUint8Array(t))}toBase64(){return d2(),this._delegate.toBase64()}toUint8Array(){return u2(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function FO(n){return function Hq(n,t){if("object"!=typeof n||null===n)return!1;const e=n;for(const i of t)if(i in e&&"function"==typeof e[i])return!0;return!1}(n,["next","error","complete"])}class jq{enableIndexedDbPersistence(t,e){return function Y6(n,t){HV(n=Pn(n,Ni));const e=pr(n),i=n._freezeSettings(),r=new yO;return UV(e,r,new wV(r,i.cacheSizeBytes,t?.forceOwnership))}(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return function Z6(n){HV(n=Pn(n,Ni));const t=pr(n),e=n._freezeSettings(),i=new yO;return UV(t,i,new T6(i,e.cacheSizeBytes))}(t._delegate)}clearIndexedDbPersistence(t){return function K6(n){if(n._initialized&&!n._terminated)throw new ze(be.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Yi;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Me.Z)(function*(){try{yield(e=(0,Me.Z)(function*(i){if(!za.C())return Promise.resolve();const r=i+"main";yield za.delete(r)}),function(i){return e.apply(this,arguments)})(hR(n._databaseId,n._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var e})),t.promise}(t._delegate)}}class h2{constructor(t,e,i){this._delegate=e,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},t instanceof $a||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&lf("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)}useEmulator(t,e,i={}){!function j6(n,t,e,i={}){var r;const s=(n=Pn(n,uw))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==t&&lf("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${t}:${e}`,ssl:!1})),i.mockUserToken){let c,d;if("string"==typeof i.mockUserToken)c=i.mockUserToken,d=hr.MOCK_USER;else{c=(0,te.Sg)(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const p=i.mockUserToken.sub||i.mockUserToken.user_id;if(!p)throw new ze(be.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new hr(p)}n._authCredentials=new OC(new Ty(c,d))}}(this._delegate,t,e,i)}enableNetwork(){return function X6(n){return function P6(n){return n.asyncQueue.enqueue((0,Me.Z)(function*(){const t=yield IV(n),e=yield xV(n);return t.setNetworkEnabled(!0),function(i){const r=mt(i);return r._u.delete(0),lw(r)}(e)}))}(pr(n=Pn(n,Ni)))}(this._delegate)}disableNetwork(){return function J6(n){return function N6(n){return n.asyncQueue.enqueue((0,Me.Z)(function*(){const t=yield IV(n),e=yield xV(n);return t.setNetworkEnabled(!1),(i=(0,Me.Z)(function*(r){const s=mt(r);s._u.add(0),yield Ky(s),s.gu.set("Offline")}),function(r){return i.apply(this,arguments)})(e);var i}))}(pr(n=Pn(n,Ni)))}(this._delegate)}enablePersistence(t){let e=!1,i=!1;return t&&(e=!!t.synchronizeTabs,i=!!t.experimentalForceOwningTab,kV("synchronizeTabs",e,"experimentalForceOwningTab",i)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Q6(n){return function(t){const e=new Yi;return t.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return function _6(n,t){return nO.apply(this,arguments)}(yield EO(t),e)})),e.promise}(pr(n=Pn(n,Ni)))}(this._delegate)}onSnapshotsInSync(t){return function kq(n,t){return function B6(n,t){const e=new YI(t);return n.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return i=yield iv(n),r=e,mt(i).Ru.add(r),void r.next();var i,r})),()=>{e.Rc(),n.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return i=yield iv(n),r=e,void mt(i).Ru.delete(r);var i,r}))}}(pr(n=Pn(n,Ni)),xO(t)?t:{next:t})}(this._delegate,t)}get app(){if(!this._appCompat)throw new ze("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new sv(this,FV(this._delegate,t))}catch(e){throw zs(e,"collection()","Firestore.collection()")}}doc(t){try{return new Wa(this,XI(this._delegate,t))}catch(e){throw zs(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new $s(this,function z6(n,t){if(n=Pn(n,uw),IO("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new ze(be.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new vs(n,null,(e=t,new ud(kn.emptyPath(),e)));var e}(this._delegate,t))}catch(e){throw zs(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return function Oq(n,t,e){n=Pn(n,Ni);const i=Object.assign(Object.assign({},Cq),e);return function(r){if(r.maxAttempts<1)throw new ze(be.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function V6(n,t,e){const i=new Yi;return n.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){const r=yield(s=n,ZI(s).then(c=>c.datastore));var s;new R6(n.asyncQueue,r,e,t,i).run()})),i.promise}(pr(n),r=>t(new Rq(n,r)),i)}(this._delegate,e=>t(new f2(this,e)))}batch(){return pr(this._delegate),new p2(new s2(this._delegate,t=>rv(this._delegate,t)))}loadBundle(t){return function eq(n,t){const e=pr(n=Pn(n,Ni)),i=new G6;return function U6(n,t,e,i){const r=function(s,c){let d;return d="string"==typeof s?(new TextEncoder).encode(s):s,p=function(p,_){if(p instanceof Uint8Array)return DV(p,_);if(p instanceof ArrayBuffer)return DV(new Uint8Array(p),_);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),new A6(p,c);var p}(e,aw(t));n.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){!function S6(n,t,e){const i=mt(n);var r;(r=(0,Me.Z)(function*(s,c,d){try{const p=yield c.getMetadata();if(yield function(T,N){const V=mt(T),K=zr(N.createTime);return V.persistence.runTransaction("hasNewerBundle","readonly",re=>V.Ns.getBundleMetadata(re,N.id)).then(re=>!!re&&re.createTime.compareTo(K)>=0)}(s.localStore,p))return yield c.close(),d._completeWith({taskState:"Success",documentsLoaded:(T=p).totalDocuments,bytesLoaded:T.totalBytes,totalDocuments:T.totalDocuments,totalBytes:T.totalBytes}),Promise.resolve(new Set);d._updateProgress(hV(p));const _=new a6(p,s.localStore,c.It);let b=yield c.wc();for(;b;){const T=yield _.Ou(b);T&&d._updateProgress(T),b=yield c.wc()}const E=yield _.complete();return yield hd(s,E.Bu,void 0),yield function(T,N){const V=mt(T);return V.persistence.runTransaction("Save bundle","readwrite",K=>V.Ns.saveBundleMetadata(K,N))}(s.localStore,p),d._completeWith(E.progress),Promise.resolve(E.$u)}catch(p){return lf("SyncEngine",`Loading bundle failed with ${p}`),d._failWith(p),Promise.resolve(new Set)}var T}),function(s,c,d){return r.apply(this,arguments)})(i,t,e).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}(yield EO(n),r,i)}))}(e,n._databaseId,t,i),i}(this._delegate,t)}namedQuery(t){return function tq(n,t){return function H6(n,t){return n.asyncQueue.enqueue((0,Me.Z)(function*(){return function(e,i){const r=mt(e);return r.persistence.runTransaction("Get named query","readonly",s=>r.Ns.getNamedQuery(s,i))}(yield KI(n),t)}))}(pr(n=Pn(n,Ni)),t).then(e=>e?new vs(n,null,e.query):null)}(this._delegate,t).then(e=>e?new $s(this,e):null)}}class ox extends OO{constructor(t){super(),this.firestore=t}convertBytes(t){return new mw(new Yc(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return Wa.forKey(e,this.firestore,null)}}class f2{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new ox(t)}get(t){const e=Km(t);return this._delegate.get(e).then(i=>new gw(this._firestore,new pd(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,e.converter)))}set(t,e,i){const r=Km(t);return i?(NO("Transaction.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){const s=Km(t);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,i,...r),this}delete(t){const e=Km(t);return this._delegate.delete(e),this}}class p2{constructor(t){this._delegate=t}set(t,e,i){const r=Km(t);return i?(NO("WriteBatch.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){const s=Km(t);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,i,...r),this}delete(t){const e=Km(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class Zm{constructor(t,e,i){this._firestore=t,this._userDataWriter=e,this._delegate=i}fromFirestore(t,e){const i=new fw(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new _w(this._firestore,i),e??{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const i=Zm.INSTANCES;let r=i.get(t);r||(r=new WeakMap,i.set(t,r));let s=r.get(e);return s||(s=new Zm(t,new ox(t),e),r.set(e,s)),s}}Zm.INSTANCES=new WeakMap;class Wa{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new ox(t)}static forPath(t,e,i){if(t.length%2!=0)throw new ze("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new Wa(e,new ki(e._delegate,i,new at(t)))}static forKey(t,e,i){return new Wa(e,new ki(e._delegate,i,t))}get id(){return this._delegate.id}get parent(){return new sv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new sv(this.firestore,FV(this._delegate,t))}catch(e){throw zs(e,"collection()","DocumentReference.collection()")}}isEqual(t){return(t=(0,te.m9)(t))instanceof ki&&LV(this._delegate,t)}set(t,e){e=NO("DocumentReference.set",e);try{return e?o2(this._delegate,t,e):o2(this._delegate,t)}catch(i){throw zs(i,"setDoc()","DocumentReference.set()")}}update(t,e,...i){try{return 1===arguments.length?a2(this._delegate,t):a2(this._delegate,t,e,...i)}catch(r){throw zs(r,"updateDoc()","DocumentReference.update()")}}delete(){return function Tq(n){return rv(Pn(n.firestore,Ni),[new zy(n._key,Pi.none())])}(this._delegate)}onSnapshot(...t){const e=m2(t),i=g2(t,r=>new gw(this.firestore,new pd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return l2(this._delegate,e,i)}get(t){let e;return e="cache"===t?.source?function Eq(n){n=Pn(n,ki);const t=Pn(n.firestore,Ni),e=pr(t),i=new Ym(t);return function F6(n,t){const e=new Yi;return n.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return(i=(0,Me.Z)(function*(r,s,c){try{const d=yield function(p,_){const b=mt(p);return b.persistence.runTransaction("read document","readonly",E=>b.localDocuments.getDocument(E,_))}(r,s);d.isFoundDocument()?c.resolve(d):d.isNoDocument()?c.resolve(null):c.reject(new ze(be.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const p=Jy(d,`Failed to get document '${s} from cache`);c.reject(p)}}),function(r,s,c){return i.apply(this,arguments)})(yield KI(n),t,e);var i})),e.promise}(e,n._key).then(r=>new pd(t,i,n._key,r,new qm(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===t?.source?function Mq(n){n=Pn(n,ki);const t=Pn(n.firestore,Ni);return SV(pr(t),n._key,{source:"server"}).then(e=>PO(t,n,e))}(this._delegate):function Dq(n){n=Pn(n,ki);const t=Pn(n.firestore,Ni);return SV(pr(t),n._key).then(e=>PO(t,n,e))}(this._delegate),e.then(i=>new gw(this.firestore,new pd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(t){return new Wa(this.firestore,this._delegate.withConverter(t?Zm.getInstance(this.firestore,t):null))}}function zs(n,t,e){return n.message=n.message.replace(t,e),n}function m2(n){for(const t of n)if("object"==typeof t&&!FO(t))return t;return{}}function g2(n,t){var e,i;let r;return r=FO(n[0])?n[0]:FO(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{r.next&&r.next(t(s))},error:null===(e=r.error)||void 0===e?void 0:e.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class gw{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new Wa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return ZV(this._delegate,t._delegate)}}class _w extends gw{data(t){const e=this._delegate.data(t);return function Bk(n,t){n||wt()}(void 0!==e),e}}class $s{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new ox(t)}where(t,e,i){try{return new $s(this.firestore,Cf(this._delegate,function hq(n,t,e){const i=t,r=rx("where",n);return new dq(r,i,e)}(t,e,i)))}catch(r){throw zs(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new $s(this.firestore,Cf(this._delegate,function pq(n,t="asc"){const e=t,i=rx("orderBy",n);return new fq(i,e)}(t,e)))}catch(i){throw zs(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new $s(this.firestore,Cf(this._delegate,function mq(n){return PV("limit",n),new QV("limit",n,"F")}(t)))}catch(e){throw zs(e,"limit()","Query.limit()")}}limitToLast(t){try{return new $s(this.firestore,Cf(this._delegate,function gq(n){return PV("limitToLast",n),new QV("limitToLast",n,"L")}(t)))}catch(e){throw zs(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new $s(this.firestore,Cf(this._delegate,function _q(...n){return new XV("startAt",n,!0)}(...t)))}catch(e){throw zs(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new $s(this.firestore,Cf(this._delegate,function yq(...n){return new XV("startAfter",n,!1)}(...t)))}catch(e){throw zs(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new $s(this.firestore,Cf(this._delegate,function vq(...n){return new JV("endBefore",n,!1)}(...t)))}catch(e){throw zs(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new $s(this.firestore,Cf(this._delegate,function bq(...n){return new JV("endAt",n,!0)}(...t)))}catch(e){throw zs(e,"endAt()","Query.endAt()")}}isEqual(t){return BV(this._delegate,t._delegate)}get(t){let e;return e="cache"===t?.source?function xq(n){n=Pn(n,vs);const t=Pn(n.firestore,Ni),e=pr(t),i=new Ym(t);return function L6(n,t){const e=new Yi;return n.asyncQueue.enqueueAndForget((0,Me.Z)(function*(){return(i=(0,Me.Z)(function*(r,s,c){try{const d=yield jI(r,s,!0),p=new mV(s,d.Hi),_=p.ju(d.documents),b=p.applyChanges(_,!1);c.resolve(b.snapshot)}catch(d){const p=Jy(d,`Failed to execute query '${s} against cache`);c.reject(p)}}),function(r,s,c){return i.apply(this,arguments)})(yield KI(n),t,e);var i})),e.promise}(e,n._query).then(r=>new bf(t,i,n,r))}(this._delegate):"server"===t?.source?function Sq(n){n=Pn(n,vs);const t=Pn(n.firestore,Ni),e=pr(t),i=new Ym(t);return TV(e,n._query,{source:"server"}).then(r=>new bf(t,i,n,r))}(this._delegate):function Iq(n){n=Pn(n,vs);const t=Pn(n.firestore,Ni),e=pr(t),i=new Ym(t);return KV(n._query),TV(e,n._query).then(r=>new bf(t,i,n,r))}(this._delegate),e.then(i=>new LO(this.firestore,new bf(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...t){const e=m2(t),i=g2(t,r=>new LO(this.firestore,new bf(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return l2(this._delegate,e,i)}withConverter(t){return new $s(this.firestore,this._delegate.withConverter(t?Zm.getInstance(this.firestore,t):null))}}class $q{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new _w(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class LO{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new $s(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new _w(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new $q(this._firestore,e))}forEach(t,e){this._delegate.forEach(i=>{t.call(e,new _w(this._firestore,i))})}isEqual(t){return ZV(this._delegate,t._delegate)}}class sv extends $s{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new Wa(this.firestore,t):null}doc(t){try{return new Wa(this.firestore,void 0===t?XI(this._delegate):XI(this._delegate,t))}catch(e){throw zs(e,"doc()","CollectionReference.doc()")}}add(t){return function Aq(n,t){const e=Pn(n.firestore,Ni),i=XI(n),r=sx(n.converter,t);return rv(e,[tx(Gm(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,Pi.exists(!1))]).then(()=>i)}(this._delegate,t).then(e=>new Wa(this.firestore,e))}isEqual(t){return LV(this._delegate,t._delegate)}withConverter(t){return new sv(this.firestore,this._delegate.withConverter(t?Zm.getInstance(this.firestore,t):null))}}function Km(n){return Pn(n,ki)}class BO{constructor(...t){this._delegate=new fd(...t)}static documentId(){return new BO(Ai.keyField().canonicalString())}isEqual(t){return(t=(0,te.m9)(t))instanceof fd&&this._delegate._internalPath.isEqual(t._internalPath)}}class Qm{constructor(t){this._delegate=t}static serverTimestamp(){const t=function Nq(){return new SO("serverTimestamp")}();return t._methodName="FieldValue.serverTimestamp",new Qm(t)}static delete(){const t=function Pq(){return new dw("deleteField")}();return t._methodName="FieldValue.delete",new Qm(t)}static arrayUnion(...t){const e=function Fq(...n){return new sq("arrayUnion",n)}(...t);return e._methodName="FieldValue.arrayUnion",new Qm(e)}static arrayRemove(...t){const e=function Lq(...n){return new oq("arrayRemove",n)}(...t);return e._methodName="FieldValue.arrayRemove",new Qm(e)}static increment(t){const e=function Bq(n){return new aq("increment",n)}(t);return e._methodName="FieldValue.increment",new Qm(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}}const Gq={Firestore:h2,GeoPoint:JI,Timestamp:mi,Blob:mw,Transaction:f2,WriteBatch:p2,DocumentReference:Wa,DocumentSnapshot:gw,Query:$s,QueryDocumentSnapshot:_w,QuerySnapshot:LO,CollectionReference:sv,FieldPath:BO,FieldValue:Qm,setLogLevel:function zq(n){!function cL(n){Hc.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function qq(n){(function Wq(n,t){n.INTERNAL.registerComponent(new ps.wA("firestore-compat",e=>{const i=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(i,r)},"PUBLIC").setServiceProps(Object.assign({},Gq)))})(n,(t,e)=>new h2(t,e,new jq)),n.registerVersion("@firebase/firestore-compat","0.1.25")}(pk.Z);var Ut=F(7579),qa=F(6451),ax=F(5363),Xm=F(8421);function zn(n,t){return(0,Oi.e)((e,i)=>{let r=null,s=0,c=!1;const d=()=>c&&!r&&i.complete();e.subscribe((0,Vi.x)(i,p=>{r?.unsubscribe();let _=0;const b=s++;(0,Xm.Xf)(n(p,b)).subscribe(r=(0,Vi.x)(i,E=>i.next(t?t(p,E,b,_++):E),()=>{r=null,d()}))},()=>{c=!0,d()}))})}var Yq=F(6063);class Zq extends Ut.x{constructor(t=1/0,e=1/0,i=Yq.l){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:c}=this;e||(i.push(t),!r&&i.push(s.now()+c)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let c=0;c<s.length&&!t.closed;c+=i?1:2)t.next(s[c]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*t;if(t<1/0&&s<i.length&&i.splice(0,i.length-s),!r){const c=e.now();let d=0;for(let p=1;p<i.length&&i[p]<=c;p+=2)d=p;d&&i.splice(0,d+1)}}}var _2=F(3099);function y2(n,t,e){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:t=1/0,refCount:r=!1,scheduler:e}=n):i=n??1/0,(0,_2.B)({connector:()=>new Zq(i,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}const lx=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Df=F(515);function Zi(n){return n<=0?()=>Df.E:(0,Oi.e)((t,e)=>{let i=0;t.subscribe((0,Vi.x)(e,r=>{++i<=n&&(e.next(r),n<=i&&e.complete())}))})}function cx(n){return(0,Oi.e)((t,e)=>{let i=!1;t.subscribe((0,Vi.x)(e,r=>{i=!0,e.next(r)},()=>{i||e.next(n),e.complete()}))})}function v2(n=Qq){return(0,Oi.e)((t,e)=>{let i=!1;t.subscribe((0,Vi.x)(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(n())))})}function Qq(){return new lx}function md(n,t){const e=arguments.length>=2;return i=>i.pipe(n?Ti((r,s)=>n(r,s,i)):um.y,Zi(1),e?cx(t):v2(()=>new lx))}var Ya=F(576);function b2(n,t){return(0,Ya.m)(t)?zn(()=>n,t):zn(()=>n)}var VO=F(9468);F(127);const C2=new l.OlP("angularfire2.auth.use-emulator"),w2=new l.OlP("angularfire2.auth.settings"),D2=new l.OlP("angularfire2.auth.tenant-id"),E2=new l.OlP("angularfire2.auth.langugage-code"),M2=new l.OlP("angularfire2.auth.use-device-language"),I2=new l.OlP("angularfire.auth.persistence"),x2=(n,t,e,i,r,s,c,d)=>(0,Us.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const p=t.runOutsideAngular(()=>n.auth());if(e&&p.useEmulator(...e),i&&(p.tenantId=i),p.languageCode=r,s&&p.useDeviceLanguage(),c)for(const[_,b]of Object.entries(c))p.settings[_]=b;return d&&p.setPersistence(d),p},[e,i,r,s,c,d]);let UO=(()=>{class n{constructor(e,i,r,s,c,d,p,_,b,E,T,N){const V=new Ut.x,K=vt(void 0).pipe((0,ax.Q)(c.outsideAngular),zn(()=>s.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,5881)))),(0,Ct.U)(()=>(0,Us.on)(e,s,i)),(0,Ct.U)(re=>x2(re,s,d,_,b,E,p,T)),y2({bufferSize:1,refCount:!1}));if(na(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=vt(null);else{K.pipe(md()).subscribe();const Ye=K.pipe(zn(st=>st.getRedirectResult().then(Lt=>Lt,()=>null)),Zt.iC,y2({bufferSize:1,refCount:!1})),rt=K.pipe(zn(st=>new ns.y(Lt=>({unsubscribe:s.runOutsideAngular(()=>st.onAuthStateChanged(Ht=>Lt.next(Ht),Ht=>Lt.error(Ht),()=>Lt.complete()))})))),pt=K.pipe(zn(st=>new ns.y(Lt=>({unsubscribe:s.runOutsideAngular(()=>st.onIdTokenChanged(Ht=>Lt.next(Ht),Ht=>Lt.error(Ht),()=>Lt.complete()))}))));this.authState=Ye.pipe(b2(rt),(0,VO.R)(c.outsideAngular),(0,ax.Q)(c.insideAngular)),this.user=Ye.pipe(b2(pt),(0,VO.R)(c.outsideAngular),(0,ax.Q)(c.insideAngular)),this.idToken=this.user.pipe(zn(st=>st?(0,_n.D)(st.getIdToken()):vt(null))),this.idTokenResult=this.user.pipe(zn(st=>st?(0,_n.D)(st.getIdTokenResult()):vt(null))),this.credential=(0,qa.T)(Ye,V,this.authState.pipe(Ti(st=>!st))).pipe((0,Ct.U)(st=>st?.user?st:null),(0,VO.R)(c.outsideAngular),(0,ax.Q)(c.insideAngular))}return(0,Us.pX)(this,K,s,{spy:{apply:(re,Ye,rt)=>{(re.startsWith("signIn")||re.startsWith("createUser"))&&rt.then(pt=>V.next(pt))}}})}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Us.Dh),l.LFG(Us.xv,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(Zt.HU),l.LFG(C2,8),l.LFG(w2,8),l.LFG(D2,8),l.LFG(E2,8),l.LFG(M2,8),l.LFG(I2,8),l.LFG(no,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function S2(n,t){return function Jq(n,t=om.z){return new ns.y(e=>{let i;return null!=t?t.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},e)}):i=n.onSnapshot({includeMetadataChanges:!0},e),()=>{i?.()}})}(n,t)}function HO(n,t){return S2(n,t).pipe((0,Ct.U)(e=>({payload:e,type:"query"})))}function ux(n,t){return HO(n,t).pipe(lo(void 0),A0(),(0,Ct.U)(([e,i])=>{const r=i.payload.docChanges(),s=r.map(c=>({type:c.type,payload:c}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((c,d)=>{const p=r.find(b=>b.doc.ref.isEqual(c.ref)),_=e?.payload.docs.find(b=>b.ref.isEqual(c.ref));p&&JSON.stringify(p.doc.metadata)===JSON.stringify(c.metadata)||!p&&_&&JSON.stringify(_.metadata)===JSON.stringify(c.metadata)||s.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:c}})}),s}))}function T2(n,t,e){return ux(n,e).pipe(cm((i,r)=>function t5(n,t,e){return t.forEach(i=>{e.indexOf(i.type)>-1&&(n=function n5(n,t){switch(t.type){case"added":if(!n[t.newIndex]||!n[t.newIndex].doc.ref.isEqual(t.doc.ref))return jO(n,t.newIndex,0,t);break;case"modified":if(null==n[t.oldIndex]||n[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const e=n.slice();return e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t),e}return jO(n,t.newIndex,1,t)}break;case"removed":if(n[t.oldIndex]&&n[t.oldIndex].doc.ref.isEqual(t.doc.ref))return jO(n,t.oldIndex,1)}return n}(n,i))}),n}(i,r.map(s=>s.payload),t),[]),dm(),(0,Ct.U)(i=>i.map(r=>({type:r.type,payload:r}))))}function jO(n,t,e,...i){const r=n.slice();return r.splice(t,e,...i),r}function A2(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class k2{constructor(t,e,i){this.ref=t,this.query=e,this.afs=i}stateChanges(t){let e=ux(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,Ct.U)(i=>i.filter(r=>t.indexOf(r.type)>-1)))),e.pipe(lo(void 0),A0(),Ti(([i,r])=>r.length>0||!i),(0,Ct.U)(([i,r])=>r),Zt.iC)}auditTrail(t){return this.stateChanges(t).pipe(cm((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=A2(t);return T2(this.query,e,this.afs.schedulers.outsideAngular).pipe(Zt.iC)}valueChanges(t={}){return HO(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ct.U)(e=>e.payload.docs.map(i=>t.idField?Object.assign(Object.assign({},i.data()),{[t.idField]:i.id}):i.data())),Zt.iC)}get(t){return(0,_n.D)(this.query.get(t)).pipe(Zt.iC)}add(t){return this.ref.add(t)}doc(t){return new R2(this.ref.doc(t),this.afs)}}class R2{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const i=this.ref.collection(t),{ref:r,query:s}=O2(i,e);return new k2(r,s,this.afs)}snapshotChanges(){return function e5(n,t){return S2(n,t).pipe(lo(void 0),A0(),(0,Ct.U)(([e,i])=>i.exists?e?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Zt.iC)}valueChanges(t={}){return this.snapshotChanges().pipe((0,Ct.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,_n.D)(this.ref.get(t)).pipe(Zt.iC)}}class r5{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?ux(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ct.U)(e=>e.filter(i=>t.indexOf(i.type)>-1)),Ti(e=>e.length>0),Zt.iC):ux(this.query,this.afs.schedulers.outsideAngular).pipe(Zt.iC)}auditTrail(t){return this.stateChanges(t).pipe(cm((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=A2(t);return T2(this.query,e,this.afs.schedulers.outsideAngular).pipe(Zt.iC)}valueChanges(t={}){return HO(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ct.U)(i=>i.payload.docs.map(r=>t.idField?Object.assign({[t.idField]:r.id},r.data()):r.data())),Zt.iC)}get(t){return(0,_n.D)(this.query.get(t)).pipe(Zt.iC)}}const s5=new l.OlP("angularfire2.enableFirestorePersistence"),o5=new l.OlP("angularfire2.firestore.persistenceSettings"),a5=new l.OlP("angularfire2.firestore.settings"),l5=new l.OlP("angularfire2.firestore.use-emulator");function O2(n,t=(e=>e)){return{query:t(n),ref:n}}let c5=(()=>{class n{constructor(e,i,r,s,c,d,p,_,b,E,T,N,V,K,re,Ye,rt){this.schedulers=p;const pt=(0,Us.on)(e,d,i),st=b;E&&x2(pt,d,T,V,K,re,N,Ye),[this.firestore,this.persistenceEnabled$]=(0,Us.cc)(`${pt.name}.firestore`,"AngularFirestore",pt.name,()=>{const Lt=d.runOutsideAngular(()=>pt.firestore());if(s&&Lt.settings(s),st&&Lt.useEmulator(...st),r&&!na(c)){const Ht=()=>{try{return(0,_n.D)(Lt.enablePersistence(_||void 0).then(()=>!0,()=>!1))}catch(En){return typeof console<"u"&&console.warn(En),vt(!1)}};return[Lt,d.runOutsideAngular(Ht)]}return[Lt,vt(!1)]},[s,st,r])}collection(e,i){let r;r="string"==typeof e?this.firestore.collection(e):e;const{ref:s,query:c}=O2(r,i),d=this.schedulers.ngZone.run(()=>s);return new k2(d,c,this)}collectionGroup(e,i){const r=i||(c=>c),s=this.firestore.collectionGroup(e);return new r5(r(s),this)}doc(e){let i;i="string"==typeof e?this.firestore.doc(e):e;const r=this.schedulers.ngZone.run(()=>i);return new R2(r,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Us.Dh),l.LFG(Us.xv,8),l.LFG(s5,8),l.LFG(a5,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(Zt.HU),l.LFG(o5,8),l.LFG(l5,8),l.LFG(UO,8),l.LFG(C2,8),l.LFG(w2,8),l.LFG(D2,8),l.LFG(E2,8),l.LFG(M2,8),l.LFG(I2,8),l.LFG(no,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),ov=(()=>{class n{constructor(e,i){this.db=e,this.afsDB=i}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Y_),l.LFG(c5))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class zO{constructor(t,{_firstName:e,_lastName:i,_email:r,_displayName:s,_photoURL:c}){this._email="",this._photoURL="",this._uid=t||"",this._firstName=e||"",this._lastName=i||"",this._email=r||"",this._displayName=s||"",this._photoURL=c||""}get uid(){return this._uid||""}set uid(t){this._uid=t}get firstName(){return this._firstName||""}set firstName(t){this._firstName=t}get lastName(){return this._lastName||""}set lastName(t){this._lastName=t}get email(){return this._email}set email(t){this._email=t}get chatRooms(){return this._chatRooms}set chatRooms(t){this._chatRooms=t}get displayName(){return this._displayName||""}set displayName(t){this._displayName=t}get photoURL(){return this._photoURL}set photoURL(t){this._photoURL=t}}var li=F(8505);function Jm(n){return new ns.y(t=>{(0,Xm.Xf)(n()).subscribe(t)})}class Ui extends Ut.x{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:i}=this;if(t)throw e;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}}const{isArray:u5}=Array,{getPrototypeOf:d5,prototype:h5,keys:f5}=Object;function P2(n){if(1===n.length){const t=n[0];if(u5(t))return{args:t,keys:null};if(function p5(n){return n&&"object"==typeof n&&d5(n)===h5}(t)){const e=f5(t);return{args:e.map(i=>t[i]),keys:e}}}return{args:n,keys:null}}const{isArray:m5}=Array;function $O(n){return(0,Ct.U)(t=>function g5(n,t){return m5(t)?n(...t):n(t)}(n,t))}function N2(n,t){return n.reduce((e,i,r)=>(e[i]=t[r],e),{})}var _5=F(9672);function dx(...n){const t=(0,Gh.yG)(n),e=(0,Gh.jO)(n),{args:i,keys:r}=P2(n);if(0===i.length)return(0,_n.D)([],t);const s=new ns.y(function y5(n,t,e=um.y){return i=>{F2(t,()=>{const{length:r}=n,s=new Array(r);let c=r,d=r;for(let p=0;p<r;p++)F2(t,()=>{const _=(0,_n.D)(n[p],t);let b=!1;_.subscribe((0,Vi.x)(i,E=>{s[p]=E,b||(b=!0,d--),d||i.next(e(s.slice()))},()=>{--c||i.complete()}))},i)},i)}}(i,t,r?c=>N2(r,c):um.y));return e?s.pipe($O(e)):s}function F2(n,t,e){n?(0,_5.f)(e,n,t):t()}var v5=F(9635);function av(n,t){const e=(0,Ya.m)(n)?n:()=>n,i=r=>r.error(e());return new ns.y(t?r=>t.schedule(i,0,r):i)}var $o=F(727);function GO(){return(0,Oi.e)((n,t)=>{let e=null;n._refCount++;const i=(0,Vi.x)(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(e=null);const r=n._connection,s=e;e=null,r&&(!s||r===s)&&r.unsubscribe(),t.unsubscribe()});n.subscribe(i),i.closed||(e=n.connect())})}class WO extends ns.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,(0,Oi.A)(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new $o.w0;const e=this.getSubject();t.add(this.source.subscribe((0,Vi.x)(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=$o.w0.EMPTY)}return t}refCount(){return GO()(this)}}var er=F(5577);function Ef(n,t){return(0,Ya.m)(t)?(0,er.z)(n,t,1):(0,er.z)(n,1)}function Zc(n){return(0,Oi.e)((t,e)=>{let s,i=null,r=!1;i=t.subscribe((0,Vi.x)(e,void 0,void 0,c=>{s=(0,Xm.Xf)(n(c,Zc(n)(t))),i?(i.unsubscribe(),i=null,s.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(e))})}function qO(n){return n<=0?()=>Df.E:(0,Oi.e)((t,e)=>{let i=[];t.subscribe((0,Vi.x)(e,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function L2(n,t){const e=arguments.length>=2;return i=>i.pipe(n?Ti((r,s)=>n(r,s,i)):um.y,qO(1),e?cx(t):v2(()=>new lx))}function hx(n){return(0,Oi.e)((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}const Dn="primary",yw=Symbol("RouteTitle");class C5{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function lv(n){return new C5(n)}function w5(n,t,e){const i=e.path.split("/");if(i.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const c=i[s],d=n[s];if(c.startsWith(":"))r[c.substring(1)]=d;else if(c!==d.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Kc(n,t){const e=n?Object.keys(n):void 0,i=t?Object.keys(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!V2(n[r],t[r]))return!1;return!0}function V2(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),i=[...t].sort();return e.every((r,s)=>i[s]===r)}return n===t}function U2(n){return Array.prototype.concat.apply([],n)}function H2(n){return n.length>0?n[n.length-1]:null}function ss(n,t){for(const e in n)n.hasOwnProperty(e)&&t(n[e],e)}function Mf(n){return(0,l.CqO)(n)?n:(0,l.QGY)(n)?(0,_n.D)(Promise.resolve(n)):vt(n)}const M5={exact:function $2(n,t,e){if(!tg(n.segments,t.segments)||!fx(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const i in t.children)if(!n.children[i]||!$2(n.children[i],t.children[i],e))return!1;return!0},subset:G2},j2={exact:function I5(n,t){return Kc(n,t)},subset:function x5(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>V2(n[e],t[e]))},ignored:()=>!0};function z2(n,t,e){return M5[e.paths](n.root,t.root,e.matrixParams)&&j2[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function G2(n,t,e){return W2(n,t,t.segments,e)}function W2(n,t,e,i){if(n.segments.length>e.length){const r=n.segments.slice(0,e.length);return!(!tg(r,e)||t.hasChildren()||!fx(r,e,i))}if(n.segments.length===e.length){if(!tg(n.segments,e)||!fx(n.segments,e,i))return!1;for(const r in t.children)if(!n.children[r]||!G2(n.children[r],t.children[r],i))return!1;return!0}{const r=e.slice(0,n.segments.length),s=e.slice(n.segments.length);return!!(tg(n.segments,r)&&fx(n.segments,r,i)&&n.children[Dn])&&W2(n.children[Dn],t,s,i)}}function fx(n,t,e){return t.every((i,r)=>j2[e](n[r].parameters,i.parameters))}class eg{constructor(t,e,i){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=lv(this.queryParams)),this._queryParamMap}toString(){return A5.serialize(this)}}class xn{constructor(t,e){this.segments=t,this.children=e,this.parent=null,ss(e,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return px(this)}}class vw{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=lv(this.parameters)),this._parameterMap}toString(){return K2(this)}}function tg(n,t){return n.length===t.length&&n.every((e,i)=>e.path===t[i].path)}let q2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return new ZO},providedIn:"root"}),n})();class ZO{parse(t){const e=new V5(t);return new eg(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${bw(t.root,!0)}`,i=function O5(n){const t=Object.keys(n).map(e=>{const i=n[e];return Array.isArray(i)?i.map(r=>`${mx(e)}=${mx(r)}`).join("&"):`${mx(e)}=${mx(i)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams),r="string"==typeof t.fragment?`#${function k5(n){return encodeURI(n)}(t.fragment)}`:"";return`${e}${i}${r}`}}const A5=new ZO;function px(n){return n.segments.map(t=>K2(t)).join("/")}function bw(n,t){if(!n.hasChildren())return px(n);if(t){const e=n.children[Dn]?bw(n.children[Dn],!1):"",i=[];return ss(n.children,(r,s)=>{s!==Dn&&i.push(`${s}:${bw(r,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}{const e=function T5(n,t){let e=[];return ss(n.children,(i,r)=>{r===Dn&&(e=e.concat(t(i,r)))}),ss(n.children,(i,r)=>{r!==Dn&&(e=e.concat(t(i,r)))}),e}(n,(i,r)=>r===Dn?[bw(n.children[Dn],!1)]:[`${r}:${bw(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Dn]?`${px(n)}/${e[0]}`:`${px(n)}/(${e.join("//")})`}}function Y2(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function mx(n){return Y2(n).replace(/%3B/gi,";")}function KO(n){return Y2(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function gx(n){return decodeURIComponent(n)}function Z2(n){return gx(n.replace(/\+/g,"%20"))}function K2(n){return`${KO(n.path)}${function R5(n){return Object.keys(n).map(t=>`;${KO(t)}=${KO(n[t])}`).join("")}(n.parameters)}`}const P5=/^[^\/()?;=#]+/;function _x(n){const t=n.match(P5);return t?t[0]:""}const N5=/^[^=?&#]+/,L5=/^[^&#]+/;class V5{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new xn([],{}):new xn([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[Dn]=new xn(t,e)),i}parseSegment(){const t=_x(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new l.vHH(4009,!1);return this.capture(t),new vw(gx(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=_x(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const r=_x(this.remaining);r&&(i=r,this.capture(i))}t[gx(e)]=gx(i)}parseQueryParam(t){const e=function F5(n){const t=n.match(N5);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const c=function B5(n){const t=n.match(L5);return t?t[0]:""}(this.remaining);c&&(i=c,this.capture(i))}const r=Z2(e),s=Z2(i);if(t.hasOwnProperty(r)){let c=t[r];Array.isArray(c)||(c=[c],t[r]=c),c.push(s)}else t[r]=s}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=_x(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new l.vHH(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=Dn);const c=this.parseChildren();e[s]=1===Object.keys(c).length?c[Dn]:new xn([],c),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new l.vHH(4011,!1)}}function QO(n){return n.segments.length>0?new xn([],{[Dn]:n}):n}function yx(n){const t={};for(const i of Object.keys(n.children)){const s=yx(n.children[i]);(s.segments.length>0||s.hasChildren())&&(t[i]=s)}return function U5(n){if(1===n.numberOfChildren&&n.children[Dn]){const t=n.children[Dn];return new xn(n.segments.concat(t.segments),t.children)}return n}(new xn(n.segments,t))}function ng(n){return n instanceof eg}function z5(n,t,e,i,r){if(0===e.length)return cv(t.root,t.root,t.root,i,r);const s=function J2(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new X2(!0,0,n);let t=0,e=!1;const i=n.reduce((r,s,c)=>{if("object"==typeof s&&null!=s){if(s.outlets){const d={};return ss(s.outlets,(p,_)=>{d[_]="string"==typeof p?p.split("/"):p}),[...r,{outlets:d}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===c?(s.split("/").forEach((d,p)=>{0==p&&"."===d||(0==p&&""===d?e=!0:".."===d?t++:""!=d&&r.push(d))}),r):[...r,s]},[]);return new X2(e,t,i)}(e);return s.toRoot()?cv(t.root,t.root,new xn([],{}),i,r):function c(p){const _=function G5(n,t,e,i){if(n.isAbsolute)return new uv(t.root,!0,0);if(-1===i)return new uv(e,e===t.root,0);return function eU(n,t,e){let i=n,r=t,s=e;for(;s>r;){if(s-=r,i=i.parent,!i)throw new l.vHH(4005,!1);r=i.segments.length}return new uv(i,!1,r-s)}(e,i+(Cw(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,t,n.snapshot?._urlSegment,p),b=_.processChildren?Dw(_.segmentGroup,_.index,s.commands):JO(_.segmentGroup,_.index,s.commands);return cv(t.root,_.segmentGroup,b,i,r)}(n.snapshot?._lastPathIndex)}function Cw(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function ww(n){return"object"==typeof n&&null!=n&&n.outlets}function cv(n,t,e,i,r){let c,s={};i&&ss(i,(p,_)=>{s[_]=Array.isArray(p)?p.map(b=>`${b}`):`${p}`}),c=n===t?e:Q2(n,t,e);const d=QO(yx(c));return new eg(d,s,r)}function Q2(n,t,e){const i={};return ss(n.children,(r,s)=>{i[s]=r===t?e:Q2(r,t,e)}),new xn(n.segments,i)}class X2{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&Cw(i[0]))throw new l.vHH(4003,!1);const r=i.find(ww);if(r&&r!==H2(i))throw new l.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class uv{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}}function JO(n,t,e){if(n||(n=new xn([],{})),0===n.segments.length&&n.hasChildren())return Dw(n,t,e);const i=function q5(n,t,e){let i=0,r=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return s;const c=n.segments[r],d=e[i];if(ww(d))break;const p=`${d}`,_=i<e.length-1?e[i+1]:null;if(r>0&&void 0===p)break;if(p&&_&&"object"==typeof _&&void 0===_.outlets){if(!nU(p,_,c))return s;i+=2}else{if(!nU(p,{},c))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new xn(n.segments.slice(0,i.pathIndex),{});return s.children[Dn]=new xn(n.segments.slice(i.pathIndex),n.children),Dw(s,0,r)}return i.match&&0===r.length?new xn(n.segments,{}):i.match&&!n.hasChildren()?eP(n,t,e):i.match?Dw(n,0,r):eP(n,t,e)}function Dw(n,t,e){if(0===e.length)return new xn(n.segments,{});{const i=function W5(n){return ww(n[0])?n[0].outlets:{[Dn]:n}}(e),r={};return ss(i,(s,c)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[c]=JO(n.children[c],t,s))}),ss(n.children,(s,c)=>{void 0===i[c]&&(r[c]=s)}),new xn(n.segments,r)}}function eP(n,t,e){const i=n.segments.slice(0,t);let r=0;for(;r<e.length;){const s=e[r];if(ww(s)){const p=Y5(s.outlets);return new xn(i,p)}if(0===r&&Cw(e[0])){i.push(new vw(n.segments[t].path,tU(e[0]))),r++;continue}const c=ww(s)?s.outlets[Dn]:`${s}`,d=r<e.length-1?e[r+1]:null;c&&d&&Cw(d)?(i.push(new vw(c,tU(d))),r+=2):(i.push(new vw(c,{})),r++)}return new xn(i,{})}function Y5(n){const t={};return ss(n,(e,i)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[i]=eP(new xn([],{}),0,e))}),t}function tU(n){const t={};return ss(n,(e,i)=>t[i]=`${e}`),t}function nU(n,t,e){return n==e.path&&Kc(t,e.parameters)}class gd{constructor(t,e){this.id=t,this.url=e}}class tP extends gd{constructor(t,e,i="imperative",r=null){super(t,e),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ig extends gd{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class vx extends gd{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class iU extends gd{constructor(t,e,i,r){super(t,e),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Z5 extends gd{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class K5 extends gd{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Q5 extends gd{constructor(t,e,i,r,s){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class X5 extends gd{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class J5 extends gd{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class e4{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class t4{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class n4{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class r4{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class s4{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class o4{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rU{constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class sU{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=nP(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){const e=nP(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=iP(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return iP(t,this._root).map(e=>e.value)}}function nP(n,t){if(n===t.value)return t;for(const e of t.children){const i=nP(n,e);if(i)return i}return null}function iP(n,t){if(n===t.value)return[t];for(const e of t.children){const i=iP(n,e);if(i.length)return i.unshift(t),i}return[]}class _d{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function dv(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class oU extends sU{constructor(t,e){super(t),this.snapshot=e,rP(this,t)}toString(){return this.snapshot.toString()}}function aU(n,t){const e=function l4(n,t){const c=new bx([],{},{},"",{},Dn,t,null,n.root,-1,{});return new cU("",new _d(c,[]))}(n,t),i=new Ui([new vw("",{})]),r=new Ui({}),s=new Ui({}),c=new Ui({}),d=new Ui(""),p=new rg(i,r,c,d,s,Dn,t,e.root);return p.snapshot=e.root,new oU(new _d(p,[]),e)}class rg{constructor(t,e,i,r,s,c,d,p){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=c,this.component=d,this.title=this.data?.pipe((0,Ct.U)(_=>_[yw]))??vt(void 0),this._futureSnapshot=p}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ct.U)(t=>lv(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ct.U)(t=>lv(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function lU(n,t="emptyOnly"){const e=n.pathFromRoot;let i=0;if("always"!==t)for(i=e.length-1;i>=1;){const r=e[i],s=e[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function c4(n){return n.reduce((t,e)=>({params:{...t.params,...e.params},data:{...t.data,...e.data},resolve:{...e.data,...t.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(i))}class bx{constructor(t,e,i,r,s,c,d,p,_,b,E,T){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=c,this.component=d,this.title=this.data?.[yw],this.routeConfig=p,this._urlSegment=_,this._lastPathIndex=b,this._correctedLastPathIndex=T??b,this._resolve=E}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=lv(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=lv(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class cU extends sU{constructor(t,e){super(e),this.url=t,rP(this,e)}toString(){return uU(this._root)}}function rP(n,t){t.value._routerState=n,t.children.forEach(e=>rP(n,e))}function uU(n){const t=n.children.length>0?` { ${n.children.map(uU).join(", ")} } `:"";return`${n.value}${t}`}function sP(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,Kc(t.queryParams,e.queryParams)||n.queryParams.next(e.queryParams),t.fragment!==e.fragment&&n.fragment.next(e.fragment),Kc(t.params,e.params)||n.params.next(e.params),function D5(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!Kc(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.url.next(e.url),Kc(t.data,e.data)||n.data.next(e.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function oP(n,t){const e=Kc(n.params,t.params)&&function S5(n,t){return tg(n,t)&&n.every((e,i)=>Kc(e.parameters,t[i].parameters))}(n.url,t.url);return e&&!(!n.parent!=!t.parent)&&(!n.parent||oP(n.parent,t.parent))}function Ew(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const i=e.value;i._futureSnapshot=t.value;const r=function d4(n,t,e){return t.children.map(i=>{for(const r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Ew(n,i,r);return Ew(n,i)})}(n,t,e);return new _d(i,r)}{if(n.shouldAttach(t.value)){const s=n.retrieve(t.value);if(null!==s){const c=s.route;return c.value._futureSnapshot=t.value,c.children=t.children.map(d=>Ew(n,d)),c}}const i=function h4(n){return new rg(new Ui(n.url),new Ui(n.params),new Ui(n.queryParams),new Ui(n.fragment),new Ui(n.data),n.outlet,n.component,n)}(t.value),r=t.children.map(s=>Ew(n,s));return new _d(i,r)}}const aP="ngNavigationCancelingError";function dU(n,t){const{redirectTo:e,navigationBehaviorOptions:i}=ng(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=hU(!1,0,t);return r.url=e,r.navigationBehaviorOptions=i,r}function hU(n,t,e){const i=new Error("NavigationCancelingError: "+(n||""));return i[aP]=!0,i.cancellationCode=t,e&&(i.url=e),i}function fU(n){return pU(n)&&ng(n.url)}function pU(n){return n&&n[aP]}class f4{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Mw,this.attachRef=null}}let Mw=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(e,i){const r=this.getOrCreateContext(e);r.outlet=i,this.contexts.set(e,r)}onChildOutletDestroyed(e){const i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new f4,this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Cx=!1;let Iw=(()=>{class n{constructor(e,i,r,s,c){this.parentContexts=e,this.location=i,this.changeDetector=s,this.environmentInjector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new l.vpe,this.deactivateEvents=new l.vpe,this.attachEvents=new l.vpe,this.detachEvents=new l.vpe,this.name=r||Dn,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new l.vHH(4012,Cx);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new l.vHH(4012,Cx);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new l.vHH(4012,Cx);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new l.vHH(4013,Cx);this._activatedRoute=e;const r=this.location,c=e._futureSnapshot.component,d=this.parentContexts.getOrCreateContext(this.name).children,p=new p4(e,d,r.injector);if(i&&function m4(n){return!!n.resolveComponentFactory}(i)){const _=i.resolveComponentFactory(c);this.activated=r.createComponent(_,r.length,p)}else this.activated=r.createComponent(c,{index:r.length,injector:p,environmentInjector:i??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(Mw),l.Y36(l.s_b),l.$8M("name"),l.Y36(l.sBO),l.Y36(l.lqb))},n.\u0275dir=l.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class p4{constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i}get(t,e){return t===rg?this.route:t===Mw?this.childContexts:this.parent.get(t,e)}}let lP=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[l.jDz],decls:1,vars:0,template:function(e,i){1&e&&l._UZ(0,"router-outlet")},dependencies:[Iw],encapsulation:2}),n})();function mU(n,t){return n.providers&&!n._injector&&(n._injector=(0,l.MMx)(n.providers,t,`Route: ${n.path}`)),n._injector??t}function uP(n){const t=n.children&&n.children.map(uP),e=t?{...n,children:t}:{...n};return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==Dn&&(e.component=lP),e}function Za(n){return n.outlet||Dn}function gU(n,t){const e=n.filter(i=>Za(i)===t);return e.push(...n.filter(i=>Za(i)!==t)),e}function xw(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class b4{constructor(t,e,i,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r}activate(t){const e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),sP(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){const r=dv(e);t.children.forEach(s=>{const c=s.value.outlet;this.deactivateRoutes(s,r[c],i),delete r[c]}),ss(r,(s,c)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(t,e,i){const r=t.value,s=e?e.value:null;if(r===s)if(r.component){const c=i.getContext(r.outlet);c&&this.deactivateChildRoutes(t,e,c.children)}else this.deactivateChildRoutes(t,e,i);else s&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=dv(t);for(const c of Object.keys(s))this.deactivateRouteAndItsChildren(s[c],r);if(i&&i.outlet){const c=i.outlet.detach(),d=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:c,route:t,contexts:d})}}deactivateRouteAndOutlet(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=dv(t);for(const c of Object.keys(s))this.deactivateRouteAndItsChildren(s[c],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(t,e,i){const r=dv(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new o4(s.value.snapshot))}),t.children.length&&this.forwardEvent(new r4(t.value.snapshot))}activateRoutes(t,e,i){const r=t.value,s=e?e.value:null;if(sP(r),r===s)if(r.component){const c=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,c.children)}else this.activateChildRoutes(t,e,i);else if(r.component){const c=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const d=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),c.children.onOutletReAttached(d.contexts),c.attachRef=d.componentRef,c.route=d.route.value,c.outlet&&c.outlet.attach(d.componentRef,d.route.value),sP(d.route.value),this.activateChildRoutes(t,null,c.children)}else{const d=xw(r.snapshot),p=d?.get(l._Vd)??null;c.attachRef=null,c.route=r,c.resolver=p,c.injector=d,c.outlet&&c.outlet.activateWith(r,c.injector),this.activateChildRoutes(t,null,c.children)}}else this.activateChildRoutes(t,null,i)}}class _U{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class wx{constructor(t,e){this.component=t,this.route=e}}function C4(n,t,e){const i=n._root;return Sw(i,t?t._root:null,e,[i.value])}function hv(n,t){const e=Symbol(),i=t.get(n,e);return i===e?"function"!=typeof n||(0,l.Z0I)(n)?t.get(n):n:i}function Sw(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=dv(t);return n.children.forEach(c=>{(function D4(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,c=t?t.value:null,d=e?e.getContext(n.value.outlet):null;if(c&&s.routeConfig===c.routeConfig){const p=function E4(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!tg(n.url,t.url);case"pathParamsOrQueryParamsChange":return!tg(n.url,t.url)||!Kc(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!oP(n,t)||!Kc(n.queryParams,t.queryParams);default:return!oP(n,t)}}(c,s,s.routeConfig.runGuardsAndResolvers);p?r.canActivateChecks.push(new _U(i)):(s.data=c.data,s._resolvedData=c._resolvedData),Sw(n,t,s.component?d?d.children:null:e,i,r),p&&d&&d.outlet&&d.outlet.isActivated&&r.canDeactivateChecks.push(new wx(d.outlet.component,c))}else c&&Tw(t,d,r),r.canActivateChecks.push(new _U(i)),Sw(n,null,s.component?d?d.children:null:e,i,r)})(c,s[c.value.outlet],e,i.concat([c.value]),r),delete s[c.value.outlet]}),ss(s,(c,d)=>Tw(c,e.getContext(d),r)),r}function Tw(n,t,e){const i=dv(n),r=n.value;ss(i,(s,c)=>{Tw(s,r.component?t?t.children.getContext(c):null:t,e)}),e.canDeactivateChecks.push(new wx(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}function Aw(n){return"function"==typeof n}function dP(n){return n instanceof lx||"EmptyError"===n?.name}const Dx=Symbol("INITIAL_VALUE");function fv(){return zn(n=>dx(n.map(t=>t.pipe(Zi(1),lo(Dx)))).pipe((0,Ct.U)(t=>{for(const e of t)if(!0!==e){if(e===Dx)return Dx;if(!1===e||e instanceof eg)return e}return!0}),Ti(t=>t!==Dx),Zi(1)))}function yU(n){return(0,v5.z)((0,li.b)(t=>{if(ng(t))throw dU(0,t)}),(0,Ct.U)(t=>!0===t))}const hP={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function vU(n,t,e,i,r){const s=fP(n,t,e);return s.matched?function H4(n,t,e,i){const r=t.canMatch;return r&&0!==r.length?vt(r.map(c=>{const d=hv(c,n);return Mf(function A4(n){return n&&Aw(n.canMatch)}(d)?d.canMatch(t,e):n.runInContext(()=>d(t,e)))})).pipe(fv(),yU()):vt(!0)}(i=mU(t,i),t,e).pipe((0,Ct.U)(c=>!0===c?s:{...hP})):vt(s)}function fP(n,t,e){if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?{...hP}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const r=(t.matcher||w5)(e,n,t);if(!r)return{...hP};const s={};ss(r.posParams,(d,p)=>{s[p]=d.path});const c=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:c,positionalParamSegments:r.posParams??{}}}function Ex(n,t,e,i,r="corrected"){if(e.length>0&&function $4(n,t,e){return e.some(i=>Mx(n,t,i)&&Za(i)!==Dn)}(n,e,i)){const c=new xn(t,function z4(n,t,e,i){const r={};r[Dn]=i,i._sourceSegment=n,i._segmentIndexShift=t.length;for(const s of e)if(""===s.path&&Za(s)!==Dn){const c=new xn([],{});c._sourceSegment=n,c._segmentIndexShift=t.length,r[Za(s)]=c}return r}(n,t,i,new xn(e,n.children)));return c._sourceSegment=n,c._segmentIndexShift=t.length,{segmentGroup:c,slicedSegments:[]}}if(0===e.length&&function G4(n,t,e){return e.some(i=>Mx(n,t,i))}(n,e,i)){const c=new xn(n.segments,function j4(n,t,e,i,r,s){const c={};for(const d of i)if(Mx(n,e,d)&&!r[Za(d)]){const p=new xn([],{});p._sourceSegment=n,p._segmentIndexShift="legacy"===s?n.segments.length:t.length,c[Za(d)]=p}return{...r,...c}}(n,t,e,i,n.children,r));return c._sourceSegment=n,c._segmentIndexShift=t.length,{segmentGroup:c,slicedSegments:e}}const s=new xn(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:e}}function Mx(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function bU(n,t,e,i){return!!(Za(n)===i||i!==Dn&&Mx(t,e,n))&&("**"===n.path||fP(t,n,e).matched)}function CU(n,t,e){return 0===t.length&&!n.children[e]}const Ix=!1;class xx{constructor(t){this.segmentGroup=t||null}}class wU{constructor(t){this.urlTree=t}}function kw(n){return av(new xx(n))}function DU(n){return av(new wU(n))}class Z4{constructor(t,e,i,r,s){this.injector=t,this.configLoader=e,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0}apply(){const t=Ex(this.urlTree.root,[],[],this.config).segmentGroup,e=new xn(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,e,Dn).pipe((0,Ct.U)(s=>this.createUrlTree(yx(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Zc(s=>{if(s instanceof wU)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof xx?this.noMatchError(s):s}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,Dn).pipe((0,Ct.U)(r=>this.createUrlTree(yx(r),t.queryParams,t.fragment))).pipe(Zc(r=>{throw r instanceof xx?this.noMatchError(r):r}))}noMatchError(t){return new l.vHH(4002,Ix)}createUrlTree(t,e,i){const r=QO(t);return new eg(r,e,i)}expandSegmentGroup(t,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(t,e,i).pipe((0,Ct.U)(s=>new xn([],s))):this.expandSegment(t,i,e,i.segments,r,!0)}expandChildren(t,e,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return(0,_n.D)(r).pipe(Ef(s=>{const c=i.children[s],d=gU(e,s);return this.expandSegmentGroup(t,d,c,s).pipe((0,Ct.U)(p=>({segment:p,outlet:s})))}),cm((s,c)=>(s[c.outlet]=c.segment,s),{}),L2())}expandSegment(t,e,i,r,s,c){return(0,_n.D)(i).pipe(Ef(d=>this.expandSegmentAgainstRoute(t,e,i,d,r,s,c).pipe(Zc(_=>{if(_ instanceof xx)return vt(null);throw _}))),md(d=>!!d),Zc((d,p)=>{if(dP(d))return CU(e,r,s)?vt(new xn([],{})):kw(e);throw d}))}expandSegmentAgainstRoute(t,e,i,r,s,c,d){return bU(r,e,s,c)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,s,c):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,c):kw(e):kw(e)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,c){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,i,r,c):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,s,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?DU(s):this.lineralizeSegments(i,s).pipe((0,er.z)(c=>{const d=new xn(c,{});return this.expandSegment(t,d,e,c,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,s,c){const{matched:d,consumedSegments:p,remainingSegments:_,positionalParamSegments:b}=fP(e,r,s);if(!d)return kw(e);const E=this.applyRedirectCommands(p,r.redirectTo,b);return r.redirectTo.startsWith("/")?DU(E):this.lineralizeSegments(r,E).pipe((0,er.z)(T=>this.expandSegment(t,e,i,T.concat(_),c,!1)))}matchSegmentAgainstRoute(t,e,i,r,s){return"**"===i.path?(t=mU(i,t),i.loadChildren?(i._loadedRoutes?vt({routes:i._loadedRoutes,injector:i._loadedInjector}):this.configLoader.loadChildren(t,i)).pipe((0,Ct.U)(d=>(i._loadedRoutes=d.routes,i._loadedInjector=d.injector,new xn(r,{})))):vt(new xn(r,{}))):vU(e,i,r,t).pipe(zn(({matched:c,consumedSegments:d,remainingSegments:p})=>c?this.getChildConfig(t=i._injector??t,i,r).pipe((0,er.z)(b=>{const E=b.injector??t,T=b.routes,{segmentGroup:N,slicedSegments:V}=Ex(e,d,p,T),K=new xn(N.segments,N.children);if(0===V.length&&K.hasChildren())return this.expandChildren(E,T,K).pipe((0,Ct.U)(pt=>new xn(d,pt)));if(0===T.length&&0===V.length)return vt(new xn(d,{}));const re=Za(i)===s;return this.expandSegment(E,K,T,V,re?Dn:s,!0).pipe((0,Ct.U)(rt=>new xn(d.concat(rt.segments),rt.children)))})):kw(e)))}getChildConfig(t,e,i){return e.children?vt({routes:e.children,injector:t}):e.loadChildren?void 0!==e._loadedRoutes?vt({routes:e._loadedRoutes,injector:e._loadedInjector}):function U4(n,t,e,i){const r=t.canLoad;return void 0===r||0===r.length?vt(!0):vt(r.map(c=>{const d=hv(c,n);return Mf(function I4(n){return n&&Aw(n.canLoad)}(d)?d.canLoad(t,e):n.runInContext(()=>d(t,e)))})).pipe(fv(),yU())}(t,e,i).pipe((0,er.z)(r=>r?this.configLoader.loadChildren(t,e).pipe((0,li.b)(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):function q4(n){return av(hU(Ix,3))}())):vt({routes:[],injector:t})}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return vt(i);if(r.numberOfChildren>1||!r.children[Dn])return av(new l.vHH(4e3,Ix));r=r.children[Dn]}}applyRedirectCommands(t,e,i){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,i)}applyRedirectCreateUrlTree(t,e,i,r){const s=this.createSegmentGroup(t,e.root,i,r);return new eg(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const i={};return ss(t,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const d=r.substring(1);i[s]=e[d]}else i[s]=r}),i}createSegmentGroup(t,e,i,r){const s=this.createSegments(t,e.segments,i,r);let c={};return ss(e.children,(d,p)=>{c[p]=this.createSegmentGroup(t,d,i,r)}),new xn(s,c)}createSegments(t,e,i,r){return e.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,r):this.findOrReturn(s,i))}findPosParam(t,e,i){const r=i[e.path.substring(1)];if(!r)throw new l.vHH(4001,Ix);return r}findOrReturn(t,e){let i=0;for(const r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}}class Q4{}class eY{constructor(t,e,i,r,s,c,d,p){this.injector=t,this.rootComponentType=e,this.config=i,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=d,this.urlSerializer=p}recognize(){const t=Ex(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,Dn).pipe((0,Ct.U)(e=>{if(null===e)return null;const i=new bx([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Dn,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new _d(i,e),s=new cU(this.url,r);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(t){const e=t.value,i=lU(e,this.paramsInheritanceStrategy);e.params=Object.freeze(i.params),e.data=Object.freeze(i.data),t.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(t,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(t,e,i):this.processSegment(t,e,i,i.segments,r)}processChildren(t,e,i){return(0,_n.D)(Object.keys(i.children)).pipe(Ef(r=>{const s=i.children[r],c=gU(e,r);return this.processSegmentGroup(t,c,s,r)}),cm((r,s)=>r&&s?(r.push(...s),r):null),function b5(n,t=!1){return(0,Oi.e)((e,i)=>{let r=0;e.subscribe((0,Vi.x)(i,s=>{const c=n(s,r++);(c||t)&&i.next(s),!c&&i.complete()}))})}(r=>null!==r),cx(null),L2(),(0,Ct.U)(r=>{if(null===r)return null;const s=EU(r);return function tY(n){n.sort((t,e)=>t.value.outlet===Dn?-1:e.value.outlet===Dn?1:t.value.outlet.localeCompare(e.value.outlet))}(s),s}))}processSegment(t,e,i,r,s){return(0,_n.D)(e).pipe(Ef(c=>this.processSegmentAgainstRoute(c._injector??t,c,i,r,s)),md(c=>!!c),Zc(c=>{if(dP(c))return CU(i,r,s)?vt([]):vt(null);throw c}))}processSegmentAgainstRoute(t,e,i,r,s){if(e.redirectTo||!bU(e,i,r,s))return vt(null);let c;if("**"===e.path){const d=r.length>0?H2(r).parameters:{},p=IU(i)+r.length;c=vt({snapshot:new bx(r,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,SU(e),Za(e),e.component??e._loadedComponent??null,e,MU(i),p,TU(e),p),consumedSegments:[],remainingSegments:[]})}else c=vU(i,e,r,t).pipe((0,Ct.U)(({matched:d,consumedSegments:p,remainingSegments:_,parameters:b})=>{if(!d)return null;const E=IU(i)+p.length;return{snapshot:new bx(p,b,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,SU(e),Za(e),e.component??e._loadedComponent??null,e,MU(i),E,TU(e),E),consumedSegments:p,remainingSegments:_}}));return c.pipe(zn(d=>{if(null===d)return vt(null);const{snapshot:p,consumedSegments:_,remainingSegments:b}=d;t=e._injector??t;const E=e._loadedInjector??t,T=function nY(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(e),{segmentGroup:N,slicedSegments:V}=Ex(i,_,b,T.filter(re=>void 0===re.redirectTo),this.relativeLinkResolution);if(0===V.length&&N.hasChildren())return this.processChildren(E,T,N).pipe((0,Ct.U)(re=>null===re?null:[new _d(p,re)]));if(0===T.length&&0===V.length)return vt([new _d(p,[])]);const K=Za(e)===s;return this.processSegment(E,T,N,V,K?Dn:s).pipe((0,Ct.U)(re=>null===re?null:[new _d(p,re)]))}))}}function iY(n){const t=n.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function EU(n){const t=[],e=new Set;for(const i of n){if(!iY(i)){t.push(i);continue}const r=t.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),e.add(r)):t.push(i)}for(const i of e){const r=EU(i.children);t.push(new _d(i.value,r))}return t.filter(i=>!e.has(i))}function MU(n){let t=n;for(;t._sourceSegment;)t=t._sourceSegment;return t}function IU(n){let t=n,e=t._segmentIndexShift??0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift??0;return e-1}function SU(n){return n.data||{}}function TU(n){return n.resolve||{}}function oY(n,t){return(0,er.z)(e=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return vt(e);let s=0;return(0,_n.D)(r).pipe(Ef(c=>function aY(n,t,e,i){const r=n.routeConfig,s=n._resolve;return void 0!==r?.title&&!AU(r)&&(s[yw]=r.title),function lY(n,t,e,i){const r=function cY(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return vt({});const s={};return(0,_n.D)(r).pipe((0,er.z)(c=>function uY(n,t,e,i){const r=xw(t)??i,s=hv(n,r);return Mf(s.resolve?s.resolve(t,e):r.runInContext(()=>s(t,e)))}(n[c],t,e,i).pipe(md(),(0,li.b)(d=>{s[c]=d}))),qO(1),function B2(n){return(0,Ct.U)(()=>n)}(s),Zc(c=>dP(c)?Df.E:av(c)))}(s,n,t,i).pipe((0,Ct.U)(c=>(n._resolvedData=c,n.data=lU(n,e).resolve,r&&AU(r)&&(n.data[yw]=r.title),null)))}(c.route,i,n,t)),(0,li.b)(()=>s++),qO(1),(0,er.z)(c=>s===r.length?vt(e):Df.E))})}function AU(n){return"string"==typeof n.title||null===n.title}function pP(n){return zn(t=>{const e=n(t);return e?(0,_n.D)(e).pipe((0,Ct.U)(()=>t)):vt(t)})}let kU=(()=>{class n{buildTitle(e){let i,r=e.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===Dn);return i}getResolvedTitleForRoute(e){return e.data[yw]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return(0,l.f3M)(RU)},providedIn:"root"}),n})(),RU=(()=>{class n extends kU{constructor(e){super(),this.title=e}updateTitle(e){const i=this.buildTitle(e);void 0!==i&&this.title.setTitle(i)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ds))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class dY{}class fY extends class hY{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const Tx=new l.OlP("",{providedIn:"root",factory:()=>({})}),mP=new l.OlP("ROUTES");let gP=(()=>{class n{constructor(e,i){this.injector=e,this.compiler=i,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return vt(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const i=Mf(e.loadComponent()).pipe((0,li.b)(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),hx(()=>{this.componentLoaders.delete(e)})),r=new WO(i,()=>new Ut.x).pipe(GO());return this.componentLoaders.set(e,r),r}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return vt({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe((0,Ct.U)(d=>{this.onLoadEndListener&&this.onLoadEndListener(i);let p,_,b=!1;Array.isArray(d)?_=d:(p=d.create(e).injector,_=U2(p.get(mP,[],l.XFs.Self|l.XFs.Optional)));return{routes:_.map(uP),injector:p}}),hx(()=>{this.childrenLoaders.delete(i)})),c=new WO(s,()=>new Ut.x).pipe(GO());return this.childrenLoaders.set(i,c),c}loadModuleFactoryOrRoutes(e){return Mf(e()).pipe((0,er.z)(i=>i instanceof l.YKP||Array.isArray(i)?vt(i):(0,_n.D)(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(l.zs3),l.LFG(l.Sil))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class mY{}class gY{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function _Y(n){throw n}function yY(n,t,e){return t.parse("/")}const vY={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},bY={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function PU(){const n=(0,l.f3M)(q2),t=(0,l.f3M)(Mw),e=(0,l.f3M)(He),i=(0,l.f3M)(l.zs3),r=(0,l.f3M)(l.Sil),s=(0,l.f3M)(mP,{optional:!0})??[],c=(0,l.f3M)(Tx,{optional:!0})??{},d=(0,l.f3M)(RU),p=(0,l.f3M)(kU,{optional:!0}),_=(0,l.f3M)(mY,{optional:!0}),b=(0,l.f3M)(dY,{optional:!0}),E=new Hi(null,n,t,e,i,r,U2(s));return _&&(E.urlHandlingStrategy=_),b&&(E.routeReuseStrategy=b),E.titleStrategy=p??d,function CY(n,t){n.errorHandler&&(t.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(t.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(t.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(t.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(t.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(t.canceledNavigationResolution=n.canceledNavigationResolution)}(c,E),E}let Hi=(()=>{class n{constructor(e,i,r,s,c,d,p){this.rootComponentType=e,this.urlSerializer=i,this.rootContexts=r,this.location=s,this.config=p,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ut.x,this.errorHandler=_Y,this.malformedUriErrorHandler=yY,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>vt(void 0),this.urlHandlingStrategy=new gY,this.routeReuseStrategy=new fY,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=c.get(gP),this.configLoader.onLoadEndListener=T=>this.triggerEvent(new t4(T)),this.configLoader.onLoadStartListener=T=>this.triggerEvent(new e4(T)),this.ngModule=c.get(l.h0i),this.console=c.get(l.c2e);const E=c.get(l.R0b);this.isNgZoneEnabled=E instanceof l.R0b&&l.R0b.isInAngularZone(),this.resetConfig(p),this.currentUrlTree=function E5(){return new eg(new xn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=aU(this.currentUrlTree,this.rootComponentType),this.transitions=new Ui({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(e){const i=this.events;return e.pipe(Ti(r=>0!==r.id),(0,Ct.U)(r=>({...r,extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),zn(r=>{let s=!1,c=!1;return vt(r).pipe((0,li.b)(d=>{this.currentNavigation={id:d.id,initialUrl:d.rawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),zn(d=>{const p=this.browserUrlTree.toString(),_=!this.navigated||d.extractedUrl.toString()!==p||p!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||_)&&this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return NU(d.source)&&(this.browserUrlTree=d.extractedUrl),vt(d).pipe(zn(E=>{const T=this.transitions.getValue();return i.next(new tP(E.id,this.serializeUrl(E.extractedUrl),E.source,E.restoredState)),T!==this.transitions.getValue()?Df.E:Promise.resolve(E)}),function K4(n,t,e,i){return zn(r=>function Y4(n,t,e,i,r){return new Z4(n,t,e,i,r).apply()}(n,t,e,r.extractedUrl,i).pipe((0,Ct.U)(s=>({...r,urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,li.b)(E=>{this.currentNavigation={...this.currentNavigation,finalUrl:E.urlAfterRedirects},r.urlAfterRedirects=E.urlAfterRedirects}),function sY(n,t,e,i,r,s){return(0,er.z)(c=>function J4(n,t,e,i,r,s,c="emptyOnly",d="legacy"){return new eY(n,t,e,i,r,c,d,s).recognize().pipe(zn(p=>null===p?function X4(n){return new ns.y(t=>t.error(n))}(new Q4):vt(p)))}(n,t,e,c.urlAfterRedirects,i.serialize(c.urlAfterRedirects),i,r,s).pipe((0,Ct.U)(d=>({...c,targetSnapshot:d}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,li.b)(E=>{if(r.targetSnapshot=E.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!E.extras.skipLocationChange){const N=this.urlHandlingStrategy.merge(E.urlAfterRedirects,E.rawUrl);this.setBrowserUrl(N,E)}this.browserUrlTree=E.urlAfterRedirects}const T=new Z5(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(E.urlAfterRedirects),E.targetSnapshot);i.next(T)}));if(_&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:T,extractedUrl:N,source:V,restoredState:K,extras:re}=d,Ye=new tP(T,this.serializeUrl(N),V,K);i.next(Ye);const rt=aU(N,this.rootComponentType).snapshot;return vt(r={...d,targetSnapshot:rt,urlAfterRedirects:N,extras:{...re,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=d.rawUrl,d.resolve(null),Df.E}),(0,li.b)(d=>{const p=new K5(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(p)}),(0,Ct.U)(d=>r={...d,guards:C4(d.targetSnapshot,d.currentSnapshot,this.rootContexts)}),function R4(n,t){return(0,er.z)(e=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:c}}=e;return 0===c.length&&0===s.length?vt({...e,guardsResult:!0}):function O4(n,t,e,i){return(0,_n.D)(n).pipe((0,er.z)(r=>function V4(n,t,e,i,r){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return s&&0!==s.length?vt(s.map(d=>{const p=xw(t)??r,_=hv(d,p);return Mf(function T4(n){return n&&Aw(n.canDeactivate)}(_)?_.canDeactivate(n,t,e,i):p.runInContext(()=>_(n,t,e,i))).pipe(md())})).pipe(fv()):vt(!0)}(r.component,r.route,e,t,i)),md(r=>!0!==r,!0))}(c,i,r,n).pipe((0,er.z)(d=>d&&function M4(n){return"boolean"==typeof n}(d)?function P4(n,t,e,i){return(0,_n.D)(t).pipe(Ef(r=>lm(function F4(n,t){return null!==n&&t&&t(new n4(n)),vt(!0)}(r.route.parent,i),function N4(n,t){return null!==n&&t&&t(new s4(n)),vt(!0)}(r.route,i),function B4(n,t,e){const i=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(c=>function w4(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(c)).filter(c=>null!==c).map(c=>Jm(()=>vt(c.guards.map(p=>{const _=xw(c.node)??e,b=hv(p,_);return Mf(function S4(n){return n&&Aw(n.canActivateChild)}(b)?b.canActivateChild(i,n):_.runInContext(()=>b(i,n))).pipe(md())})).pipe(fv())));return vt(s).pipe(fv())}(n,r.path,e),function L4(n,t,e){const i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||0===i.length)return vt(!0);const r=i.map(s=>Jm(()=>{const c=xw(t)??e,d=hv(s,c);return Mf(function x4(n){return n&&Aw(n.canActivate)}(d)?d.canActivate(t,n):c.runInContext(()=>d(t,n))).pipe(md())}));return vt(r).pipe(fv())}(n,r.route,e))),md(r=>!0!==r,!0))}(i,s,n,t):vt(d)),(0,Ct.U)(d=>({...e,guardsResult:d})))})}(this.ngModule.injector,d=>this.triggerEvent(d)),(0,li.b)(d=>{if(r.guardsResult=d.guardsResult,ng(d.guardsResult))throw dU(0,d.guardsResult);const p=new Q5(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.triggerEvent(p)}),Ti(d=>!!d.guardsResult||(this.restoreHistory(d),this.cancelNavigationTransition(d,"",3),!1)),pP(d=>{if(d.guards.canActivateChecks.length)return vt(d).pipe((0,li.b)(p=>{const _=new X5(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(_)}),zn(p=>{let _=!1;return vt(p).pipe(oY(this.paramsInheritanceStrategy,this.ngModule.injector),(0,li.b)({next:()=>_=!0,complete:()=>{_||(this.restoreHistory(p),this.cancelNavigationTransition(p,"",2))}}))}),(0,li.b)(p=>{const _=new J5(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(_)}))}),pP(d=>{const p=_=>{const b=[];_.routeConfig?.loadComponent&&!_.routeConfig._loadedComponent&&b.push(this.configLoader.loadComponent(_.routeConfig).pipe((0,li.b)(E=>{_.component=E}),(0,Ct.U)(()=>{})));for(const E of _.children)b.push(...p(E));return b};return dx(p(d.targetSnapshot.root)).pipe(cx(),Zi(1))}),pP(()=>this.afterPreactivation()),(0,Ct.U)(d=>{const p=function u4(n,t,e){const i=Ew(n,t._root,e?e._root:void 0);return new oU(i,t)}(this.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return r={...d,targetRouterState:p}}),(0,li.b)(d=>{this.currentUrlTree=d.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl),this.routerState=d.targetRouterState,"deferred"===this.urlUpdateStrategy&&(d.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,d),this.browserUrlTree=d.urlAfterRedirects)}),((n,t,e)=>(0,Ct.U)(i=>(new b4(t,i.targetRouterState,i.currentRouterState,e).activate(n),i)))(this.rootContexts,this.routeReuseStrategy,d=>this.triggerEvent(d)),(0,li.b)({next(){s=!0},complete(){s=!0}}),hx(()=>{s||c||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Zc(d=>{if(c=!0,pU(d)){fU(d)||(this.navigated=!0,this.restoreHistory(r,!0));const p=new vx(r.id,this.serializeUrl(r.extractedUrl),d.message,d.cancellationCode);if(i.next(p),fU(d)){const _=this.urlHandlingStrategy.merge(d.url,this.rawUrlTree),b={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||NU(r.source)};this.scheduleNavigation(_,"imperative",null,b,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{this.restoreHistory(r,!0);const p=new iU(r.id,this.serializeUrl(r.extractedUrl),d,r.targetSnapshot??void 0);i.next(p);try{r.resolve(this.errorHandler(d))}catch(_){r.reject(_)}}return Df.E}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next({...this.transitions.value,...e})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const i="popstate"===e.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{const r={replaceUrl:!0},s=e.state?.navigationId?e.state:null;if(s){const d={...s};delete d.navigationId,delete d.\u0275routerPageId,0!==Object.keys(d).length&&(r.state=d)}const c=this.parseUrl(e.url);this.scheduleNavigation(c,i,s,r)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){this.config=e.map(uP),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,i={}){const{relativeTo:r,queryParams:s,fragment:c,queryParamsHandling:d,preserveFragment:p}=i,_=r||this.routerState.root,b=p?this.currentUrlTree.fragment:c;let E=null;switch(d){case"merge":E={...this.currentUrlTree.queryParams,...s};break;case"preserve":E=this.currentUrlTree.queryParams;break;default:E=s||null}return null!==E&&(E=this.removeEmptyProps(E)),z5(_,this.currentUrlTree,e,E,b??null)}navigateByUrl(e,i={skipLocationChange:!1}){const r=ng(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,i)}navigate(e,i={skipLocationChange:!1}){return function wY(n){for(let t=0;t<n.length;t++){if(null==n[t])throw new l.vHH(4008,false)}}(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let i;try{i=this.urlSerializer.parse(e)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return i}isActive(e,i){let r;if(r=!0===i?{...vY}:!1===i?{...bY}:i,ng(e))return z2(this.currentUrlTree,e,r);const s=this.parseUrl(e);return z2(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.keys(e).reduce((i,r)=>{const s=e[r];return null!=s&&(i[r]=s),i},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new ig(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,i,r,s,c){if(this.disposed)return Promise.resolve(!1);let d,p,_;c?(d=c.resolve,p=c.reject,_=c.promise):_=new Promise((T,N)=>{d=T,p=N});const b=++this.navigationId;let E;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),E=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):E=0,this.setTransition({id:b,targetPageId:E,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:s,resolve:d,reject:p,promise:_,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),_.catch(T=>Promise.reject(T))}setBrowserUrl(e,i){const r=this.urlSerializer.serialize(e),s={...i.extras.state,...this.generateNgRouterState(i.id,i.targetPageId)};this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(e,i=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===r?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===r&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(r)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,i,r){const s=new vx(e.id,this.serializeUrl(e.extractedUrl),i,r);this.triggerEvent(s),e.resolve(!1)}generateNgRouterState(e,i){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}}return n.\u0275fac=function(e){l.$Z()},n.\u0275prov=l.Yz7({token:n,factory:function(){return PU()},providedIn:"root"}),n})();function NU(n){return"imperative"!==n}let _P=(()=>{class n{constructor(e,i,r,s,c){this.router=e,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=c,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new Ut.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(e){this._preserveFragment=(0,l.D6c)(e)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(e){this._skipLocationChange=(0,l.D6c)(e)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(e){this._replaceUrl=(0,l.D6c)(e)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(e){if(null!=this.tabIndexAttribute)return;const i=this.renderer,r=this.el.nativeElement;null!==e?i.setAttribute(r,"tabindex",e):i.removeAttribute(r,"tabindex")}ngOnChanges(e){this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(Hi),l.Y36(rg),l.$8M("tabindex"),l.Y36(l.Qsj),l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,i){1&e&&l.NdJ("click",function(){return i.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[l.TTD]}),n})(),pv=(()=>{class n{constructor(e,i,r){this.router=e,this.route=i,this.locationStrategy=r,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new Ut.x,this.subscription=e.events.subscribe(s=>{s instanceof ig&&this.updateTargetUrlAndHref()})}set preserveFragment(e){this._preserveFragment=(0,l.D6c)(e)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(e){this._skipLocationChange=(0,l.D6c)(e)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(e){this._replaceUrl=(0,l.D6c)(e)}get replaceUrl(){return this._replaceUrl}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:null}ngOnChanges(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,i,r,s,c){return!!(0!==e||i||r||s||c||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(Hi),l.Y36(rg),l.Y36(Ie))},n.\u0275dir=l.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,i){1&e&&l.NdJ("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&e&&l.uIk("target",i.target)("href",i.href,l.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[l.TTD]}),n})(),FU=(()=>{class n{constructor(e,i,r,s,c,d){this.router=e,this.element=i,this.renderer=r,this.cdr=s,this.link=c,this.linkWithHref=d,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new l.vpe,this.routerEventsSubscription=e.events.subscribe(p=>{p instanceof ig&&this.update()})}ngAfterContentInit(){vt(this.links.changes,this.linksWithHrefs.changes,vt(null)).pipe((0,am.J)()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const e=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=(0,_n.D)(e).pipe((0,am.J)()).subscribe(i=>{this.isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(e){const i=Array.isArray(e)?e:e.split(" ");this.classes=i.filter(r=>!!r)}ngOnChanges(e){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const e=this.hasActiveLinks();this.isActive!==e&&(this.isActive=e,this.cdr.markForCheck(),this.classes.forEach(i=>{e?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),e&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(e))})}isLinkActive(e){const i=function DY(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return r=>!!r.urlTree&&e.isActive(r.urlTree,i)}hasActiveLinks(){const e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.linkWithHref&&e(this.linkWithHref)||this.links.some(e)||this.linksWithHrefs.some(e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(Hi),l.Y36(l.SBq),l.Y36(l.Qsj),l.Y36(l.sBO),l.Y36(_P,8),l.Y36(pv,8))},n.\u0275dir=l.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(e,i,r){if(1&e&&(l.Suo(r,_P,5),l.Suo(r,pv,5)),2&e){let s;l.iGM(s=l.CRH())&&(i.links=s),l.iGM(s=l.CRH())&&(i.linksWithHrefs=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[l.TTD]}),n})();class LU{}let EY=(()=>{class n{constructor(e,i,r,s,c){this.router=e,this.injector=r,this.preloadingStrategy=s,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(Ti(e=>e instanceof ig),Ef(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){const r=[];for(const s of i){s.providers&&!s._injector&&(s._injector=(0,l.MMx)(s.providers,e,`Route: ${s.path}`));const c=s._injector??e,d=s._loadedInjector??c;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?r.push(this.preloadConfig(c,s)):(s.children||s._loadedRoutes)&&r.push(this.processRoutes(d,s.children??s._loadedRoutes))}return(0,_n.D)(r).pipe((0,am.J)())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(e,i):vt(null);const s=r.pipe((0,er.z)(c=>null===c?vt(void 0):(i._loadedRoutes=c.routes,i._loadedInjector=c.injector,this.processRoutes(c.injector??e,c.routes))));if(i.loadComponent&&!i._loadedComponent){const c=this.loader.loadComponent(i);return(0,_n.D)([s,c]).pipe((0,am.J)())}return s})}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Hi),l.LFG(l.Sil),l.LFG(l.lqb),l.LFG(LU),l.LFG(gP))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const yP=new l.OlP("");let BU=(()=>{class n{constructor(e,i,r={}){this.router=e,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof tP?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof ig&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof rU&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.router.triggerEvent(new rU(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(e){l.$Z()},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function mv(n,t){return{\u0275kind:n,\u0275providers:t}}function vP(n){return[{provide:mP,multi:!0,useValue:n}]}function UU(){const n=(0,l.f3M)(l.zs3);return t=>{const e=n.get(l.z2F);if(t!==e.components[0])return;const i=n.get(Hi),r=n.get(HU);1===n.get(bP)&&i.initialNavigation(),n.get(jU,null,l.XFs.Optional)?.setUpPreloading(),n.get(yP,null,l.XFs.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),r.next(),r.complete()}}const HU=new l.OlP("",{factory:()=>new Ut.x}),bP=new l.OlP("",{providedIn:"root",factory:()=>1});const jU=new l.OlP("");function SY(n){return mv(0,[{provide:jU,useExisting:EY},{provide:LU,useExisting:n}])}const zU=new l.OlP("ROUTER_FORROOT_GUARD"),TY=[He,{provide:q2,useClass:ZO},{provide:Hi,useFactory:PU},Mw,{provide:rg,useFactory:function VU(n){return n.routerState.root},deps:[Hi]},gP];function AY(){return new l.PXZ("Router",Hi)}let CP=(()=>{class n{constructor(e){}static forRoot(e,i){return{ngModule:n,providers:[TY,[],vP(e),{provide:zU,useFactory:PY,deps:[[Hi,new l.FiY,new l.tp0]]},{provide:Tx,useValue:i||{}},i?.useHash?{provide:Ie,useClass:ft}:{provide:Ie,useClass:ht},{provide:yP,useFactory:()=>{const n=(0,l.f3M)(Hi),t=(0,l.f3M)(Fd),e=(0,l.f3M)(Tx);return e.scrollOffset&&t.setOffset(e.scrollOffset),new BU(n,t,e)}},i?.preloadingStrategy?SY(i.preloadingStrategy).\u0275providers:[],{provide:l.PXZ,multi:!0,useFactory:AY},i?.initialNavigation?NY(i):[],[{provide:$U,useFactory:UU},{provide:l.tb,multi:!0,useExisting:$U}]]}}static forChild(e){return{ngModule:n,providers:[vP(e)]}}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(zU,8))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[lP]}),n})();function PY(n){return"guarded"}function NY(n){return["disabled"===n.initialNavigation?mv(3,[{provide:l.ip1,multi:!0,useFactory:()=>{const t=(0,l.f3M)(Hi);return()=>{t.setUpLocationChangeListener()}}},{provide:bP,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?mv(2,[{provide:bP,useValue:0},{provide:l.ip1,multi:!0,deps:[l.zs3],useFactory:t=>{const e=t.get(q,Promise.resolve());let i=!1;return()=>e.then(()=>new Promise(s=>{const c=t.get(Hi),d=t.get(HU);(function r(s){t.get(Hi).events.pipe(Ti(d=>d instanceof ig||d instanceof vx||d instanceof iU),(0,Ct.U)(d=>d instanceof ig||d instanceof vx&&(0===d.code||1===d.code)&&null),Ti(d=>null!==d),Zi(1)).subscribe(()=>{s()})})(()=>{s(!0),i=!0}),c.afterPreactivation=()=>(s(!0),i||d.closed?vt(void 0):d),c.initialNavigation()}))}}]).\u0275providers:[]]}const $U=new l.OlP("");let wP;try{wP=typeof Intl<"u"&&Intl.v8BreakIterator}catch{wP=!1}let Rw,og,DP,bs=(()=>{class n{constructor(e){this._platformId=e,this.isBrowser=this._platformId?function Fr(n){return n===Nr}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!wP)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(l.Lbi))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function sg(n){return function LY(){if(null==Rw&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Rw=!0}))}finally{Rw=Rw||!1}return Rw}()?n:!!n.capture}function BY(){if(null==og){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return og=!1,og;if("scrollBehavior"in document.documentElement.style)og=!0;else{const n=Element.prototype.scrollTo;og=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return og}function WU(n){if(function VY(){if(null==DP){const n=typeof document<"u"?document.head:null;DP=!(!n||!n.createShadowRoot&&!n.attachShadow)}return DP}()){const t=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function EP(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const t=n.shadowRoot.activeElement;if(t===n)break;n=t}return n}function If(n){return n.composedPath?n.composedPath()[0]:n.target}function MP(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function Qc(n,...t){return t.length?t.some(e=>n[e]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function ZU(n){return Ti((t,e)=>n<=e)}var KU=F(5032);function mr(n){return(0,Oi.e)((t,e)=>{(0,Xm.Xf)(n).subscribe((0,Vi.x)(e,()=>e.complete(),KU.Z)),!e.closed&&t.subscribe(e)})}function Cn(n){return null!=n&&"false"!=`${n}`}function yd(n,t=0){return function JY(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):t}function Lx(n){return Array.isArray(n)?n:[n]}function gr(n){return null==n?"":"string"==typeof n?n:`${n}px`}function ag(n){return n instanceof l.SBq?n.nativeElement:n}let QU=(()=>{class n{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Bx=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[QU]}),n})();const XU=new Set;let _v,n8=(()=>{class n{constructor(e){this._platform=e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):s8}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function r8(n){if(!XU.has(n))try{_v||(_v=document.createElement("style"),_v.setAttribute("type","text/css"),document.head.appendChild(_v)),_v.sheet&&(_v.sheet.insertRule(`@media ${n} {body{ }}`,0),XU.add(n))}catch(t){console.error(t)}}(e),this._matchMedia(e)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(bs))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function s8(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let AP=(()=>{class n{constructor(e,i){this._mediaMatcher=e,this._zone=i,this._queries=new Map,this._destroySubject=new Ut.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return JU(Lx(e)).some(r=>this._registerQuery(r).mql.matches)}observe(e){let s=dx(JU(Lx(e)).map(c=>this._registerQuery(c).observable));return s=lm(s.pipe(Zi(1)),s.pipe(ZU(1),function TP(n,t=om.z){return(0,Oi.e)((e,i)=>{let r=null,s=null,c=null;const d=()=>{if(r){r.unsubscribe(),r=null;const _=s;s=null,i.next(_)}};function p(){const _=c+n,b=t.now();if(b<_)return r=this.schedule(void 0,_-b),void i.add(r);d()}e.subscribe((0,Vi.x)(i,_=>{s=_,c=t.now(),r||(r=t.schedule(p,n),i.add(r))},()=>{d(),i.complete()},void 0,()=>{s=r=null}))})}(0))),s.pipe((0,Ct.U)(c=>{const d={matches:!1,breakpoints:{}};return c.forEach(({matches:p,query:_})=>{d.matches=d.matches||p,d.breakpoints[_]=p}),d}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const i=this._mediaMatcher.matchMedia(e),s={observable:new ns.y(c=>{const d=p=>this._zone.run(()=>c.next(p));return i.addListener(d),()=>{i.removeListener(d)}}).pipe(lo(i),(0,Ct.U)(({matches:c})=>({query:e,matches:c})),mr(this._destroySubject)),mql:i};return this._queries.set(e,s),s}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(n8),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function JU(n){return n.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}let Vx=(()=>{class n{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function d8(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const i=function u8(n){try{return n.frameElement}catch{return null}}(function v8(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(e));if(i&&(-1===rH(i)||!this.isVisible(i)))return!1;let r=e.nodeName.toLowerCase(),s=rH(e);return e.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function _8(n){let t=n.nodeName.toLowerCase(),e="input"===t&&n.type;return"text"===e||"password"===e||"select"===t||"textarea"===t}(e))&&("audio"===r?!!e.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,i){return function y8(n){return!function f8(n){return function m8(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function h8(n){let t=n.nodeName.toLowerCase();return"input"===t||"select"===t||"button"===t||"textarea"===t}(n)||function p8(n){return function g8(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||iH(n))}(e)&&!this.isDisabled(e)&&(i?.ignoreVisibility||this.isVisible(e))}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(bs))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function iH(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let t=n.getAttribute("tabindex");return!(!t||isNaN(parseInt(t,10)))}function rH(n){if(!iH(n))return null;const t=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}class b8{constructor(t,e,i,r,s=!1){this._element=t,this._checker=e,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}destroy(){const t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){const e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){const i=this._getFirstTabbableElement(e);return i?.focus(t),!!i}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){const e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){const e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let i=0;i<e.length;i++){const r=e[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[i]):null;if(r)return r}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let i=e.length-1;i>=0;i--){const r=e[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[i]):null;if(r)return r}return null}_createAnchor(){const t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe(Zi(1)).subscribe(t)}}let kP=(()=>{class n{constructor(e,i,r){this._checker=e,this._ngZone=i,this._document=r}create(e,i=!1){return new b8(e,this._checker,this._ngZone,this._document,i)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Vx),l.LFG(l.R0b),l.LFG(se))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function sH(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function oH(n){const t=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}const C8=new l.OlP("cdk-input-modality-detector-options"),w8={ignoreKeys:[18,17,224,91,16]},yv=sg({passive:!0,capture:!0});let D8=(()=>{class n{constructor(e,i,r,s){this._platform=e,this._mostRecentTarget=null,this._modality=new Ui(null),this._lastTouchMs=0,this._onKeydown=c=>{this._options?.ignoreKeys?.some(d=>d===c.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=If(c))},this._onMousedown=c=>{Date.now()-this._lastTouchMs<650||(this._modality.next(sH(c)?"keyboard":"mouse"),this._mostRecentTarget=If(c))},this._onTouchstart=c=>{oH(c)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=If(c))},this._options={...w8,...s},this.modalityDetected=this._modality.pipe(ZU(1)),this.modalityChanged=this.modalityDetected.pipe(dm()),e.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,yv),r.addEventListener("mousedown",this._onMousedown,yv),r.addEventListener("touchstart",this._onTouchstart,yv)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,yv),document.removeEventListener("mousedown",this._onMousedown,yv),document.removeEventListener("touchstart",this._onTouchstart,yv))}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(bs),l.LFG(l.R0b),l.LFG(se),l.LFG(C8,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const E8=new l.OlP("liveAnnouncerElement",{providedIn:"root",factory:function M8(){return null}}),I8=new l.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let lH=(()=>{class n{constructor(e,i,r,s){this._ngZone=i,this._defaultOptions=s,this._document=r,this._liveElement=e||this._createLiveElement()}announce(e,...i){const r=this._defaultOptions;let s,c;return 1===i.length&&"number"==typeof i[0]?c=i[0]:[s,c]=i,this.clear(),clearTimeout(this._previousTimeout),s||(s=r&&r.politeness?r.politeness:"polite"),null==c&&r&&(c=r.duration),this._liveElement.setAttribute("aria-live",s),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(d=>this._currentResolve=d)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=e,"number"==typeof c&&(this._previousTimeout=setTimeout(()=>this.clear(),c)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const e="cdk-live-announcer-element",i=this._document.getElementsByClassName(e),r=this._document.createElement("div");for(let s=0;s<i.length;s++)i[s].remove();return r.classList.add(e),r.classList.add("cdk-visually-hidden"),r.setAttribute("aria-atomic","true"),r.setAttribute("aria-live","polite"),this._document.body.appendChild(r),r}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(E8,8),l.LFG(l.R0b),l.LFG(se),l.LFG(I8,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const x8=new l.OlP("cdk-focus-monitor-default-options"),Ux=sg({passive:!0,capture:!0});let xf=(()=>{class n{constructor(e,i,r,s,c){this._ngZone=e,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Ut.x,this._rootNodeFocusAndBlurListener=d=>{for(let _=If(d);_;_=_.parentElement)"focus"===d.type?this._onFocus(d,_):this._onBlur(d,_)},this._document=s,this._detectionMode=c?.detectionMode||0}monitor(e,i=!1){const r=ag(e);if(!this._platform.isBrowser||1!==r.nodeType)return vt(null);const s=WU(r)||this._getDocument(),c=this._elementInfo.get(r);if(c)return i&&(c.checkChildren=!0),c.subject;const d={checkChildren:i,subject:new Ut.x,rootNode:s};return this._elementInfo.set(r,d),this._registerGlobalListeners(d),d.subject}stopMonitoring(e){const i=ag(e),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(e,i,r){const s=ag(e);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([d,p])=>this._originChanged(d,i,p)):(this._setOrigin(i),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((e,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,i){e.classList.toggle("cdk-focused",!!i),e.classList.toggle("cdk-touch-focused","touch"===i),e.classList.toggle("cdk-keyboard-focused","keyboard"===i),e.classList.toggle("cdk-mouse-focused","mouse"===i),e.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(e,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,i){const r=this._elementInfo.get(i),s=If(e);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(e,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&e.relatedTarget instanceof Node&&i.contains(e.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(e,i){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(i))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const i=e.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,Ux),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,Ux)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(mr(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(e){const i=e.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Ux),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Ux),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,i,r){this._setClasses(e,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(e){const i=[];return this._elementInfo.forEach((r,s)=>{(s===e||r.checkChildren&&s.contains(e))&&i.push([s,r])}),i}_isLastInteractionFromInputLabel(e){const{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!i||i===e||"INPUT"!==e.nodeName&&"TEXTAREA"!==e.nodeName||e.disabled)return!1;const s=e.labels;if(s)for(let c=0;c<s.length;c++)if(s[c].contains(i))return!0;return!1}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(l.R0b),l.LFG(bs),l.LFG(D8),l.LFG(se,8),l.LFG(x8,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const cH="cdk-high-contrast-black-on-white",uH="cdk-high-contrast-white-on-black",RP="cdk-high-contrast-active";let dH=(()=>{class n{constructor(e,i){this._platform=e,this._document=i,this._breakpointSubscription=(0,l.f3M)(AP).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(e):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(e.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(RP,cH,uH),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?e.add(RP,cH):2===i&&e.add(RP,uH)}}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(bs),l.LFG(se))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ow=(()=>{class n{constructor(e){e._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(dH))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Bx]}),n})();var S8=F(1144);const T8=["addListener","removeListener"],A8=["addEventListener","removeEventListener"],k8=["on","off"];function vv(n,t,e,i){if((0,Ya.m)(e)&&(i=e,e=void 0),i)return vv(n,t,e).pipe($O(i));const[r,s]=function P8(n){return(0,Ya.m)(n.addEventListener)&&(0,Ya.m)(n.removeEventListener)}(n)?A8.map(c=>d=>n[c](t,d,e)):function R8(n){return(0,Ya.m)(n.addListener)&&(0,Ya.m)(n.removeListener)}(n)?T8.map(hH(n,t)):function O8(n){return(0,Ya.m)(n.on)&&(0,Ya.m)(n.off)}(n)?k8.map(hH(n,t)):[];if(!r&&(0,S8.z)(n))return(0,er.z)(c=>vv(c,t,e))((0,Xm.Xf)(n));if(!r)throw new TypeError("Invalid event target");return new ns.y(c=>{const d=(...p)=>c.next(1<p.length?p:p[0]);return r(d),()=>s(d)})}function hH(n,t){return e=>i=>n[e](t,i)}var fH=F(4408);const Pw={schedule(n){let t=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:i}=Pw;i&&(t=i.requestAnimationFrame,e=i.cancelAnimationFrame);const r=t(s=>{e=void 0,n(s)});return new $o.w0(()=>e?.(r))},requestAnimationFrame(...n){const{delegate:t}=Pw;return(t?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:t}=Pw;return(t?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};var pH=F(7565);new class F8 extends pH.v{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;t=t||i.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=i[0])&&t.id===e&&i.shift());if(this._active=!1,r){for(;(t=i[0])&&t.id===e&&i.shift();)t.unsubscribe();throw r}}}(class N8 extends fH.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,i=0){return null!==i&&i>0?super.requestAsyncId(t,e,i):(t.actions.push(this),t._scheduled||(t._scheduled=Pw.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,e,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(t,e,i);t.actions.some(r=>r.id===e)||(Pw.cancelAnimationFrame(e),t._scheduled=void 0)}});let OP,B8=1;const Hx={};function mH(n){return n in Hx&&(delete Hx[n],!0)}const V8={setImmediate(n){const t=B8++;return Hx[t]=!0,OP||(OP=Promise.resolve()),OP.then(()=>mH(t)&&n()),t},clearImmediate(n){mH(n)}},{setImmediate:U8,clearImmediate:H8}=V8,jx={setImmediate(...n){const{delegate:t}=jx;return(t?.setImmediate||U8)(...n)},clearImmediate(n){const{delegate:t}=jx;return(t?.clearImmediate||H8)(n)},delegate:void 0};new class z8 extends pH.v{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;t=t||i.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=i[0])&&t.id===e&&i.shift());if(this._active=!1,r){for(;(t=i[0])&&t.id===e&&i.shift();)t.unsubscribe();throw r}}}(class j8 extends fH.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,i=0){return null!==i&&i>0?super.requestAsyncId(t,e,i):(t.actions.push(this),t._scheduled||(t._scheduled=jx.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(t,e,i);t.actions.some(r=>r.id===e)||(jx.clearImmediate(e),t._scheduled=void 0)}});var W8=F(3532);function _H(n,t=om.z){return function G8(n){return(0,Oi.e)((t,e)=>{let i=!1,r=null,s=null,c=!1;const d=()=>{if(s?.unsubscribe(),s=null,i){i=!1;const _=r;r=null,e.next(_)}c&&e.complete()},p=()=>{s=null,c&&e.complete()};t.subscribe((0,Vi.x)(e,_=>{i=!0,r=_,s||(0,Xm.Xf)(n(_)).subscribe(s=(0,Vi.x)(e,d,p))},()=>{c=!0,(!i||!s||s.closed)&&e.complete()}))})}(()=>function gH(n=0,t,e=om.P){let i=-1;return null!=t&&((0,W8.K)(t)?e=t:i=t),new ns.y(r=>{let s=function q8(n){return n instanceof Date&&!isNaN(n)}(n)?+n-e.now():n;s<0&&(s=0);let c=0;return e.schedule(function(){r.closed||(r.next(c++),0<=i?this.schedule(void 0,i):r.complete())},s)})}(n,t))}const Y8=new l.OlP("cdk-dir-doc",{providedIn:"root",factory:function Z8(){return(0,l.f3M)(se)}}),K8=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let lg=(()=>{class n{constructor(e){if(this.value="ltr",this.change=new l.vpe,e){const r=e.documentElement?e.documentElement.dir:null;this.value=function Q8(n){const t=n?.toLowerCase()||"";return"auto"===t&&typeof navigator<"u"&&navigator?.language?K8.test(navigator.language)?"rtl":"ltr":"rtl"===t?"rtl":"ltr"}((e.body?e.body.dir:null)||r||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Y8,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Nw=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})(),J8=(()=>{class n{constructor(e,i,r){this._ngZone=e,this._platform=i,this._scrolled=new Ut.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const i=this.scrollContainers.get(e);i&&(i.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new ns.y(i=>{this._globalSubscription||this._addGlobalListener();const r=e>0?this._scrolled.pipe(_H(e)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):vt()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(e,i){const r=this.getAncestorScrollContainers(e);return this.scrolled(i).pipe(Ti(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(e){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,e)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,i){let r=ag(i),s=e.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>vv(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(l.R0b),l.LFG(bs),l.LFG(se,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Fw=(()=>{class n{constructor(e,i,r){this._platform=e,this._change=new Ut.x,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(e.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,i=this._getWindow(),r=e.documentElement,s=r.getBoundingClientRect();return{top:-s.top||e.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||e.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(_H(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(bs),l.LFG(l.R0b),l.LFG(se,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),vd=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})(),PP=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Nw,vd,Nw,vd]}),n})();class NP{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class Lw extends NP{constructor(t,e,i,r){super(),this.component=t,this.viewContainerRef=e,this.injector=i,this.componentFactoryResolver=r}}class zx extends NP{constructor(t,e,i,r){super(),this.templateRef=t,this.viewContainerRef=e,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class tZ extends NP{constructor(t){super(),this.element=t instanceof l.SBq?t.nativeElement:t}}class $x{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof Lw?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof zx?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof tZ?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class nZ extends $x{constructor(t,e,i,r,s){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=c=>{const d=c.element,p=this._document.createComment("dom-portal");d.parentNode.insertBefore(p,d),this.outletElement.appendChild(d),this._attachedPortal=c,super.setDisposeFn(()=>{p.parentNode&&p.parentNode.replaceChild(d,p)})},this._document=s}attachComponentPortal(t){const i=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let r;return t.viewContainerRef?(r=t.viewContainerRef.createComponent(i,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(()=>r.destroy())):(r=i.create(t.injector||this._defaultInjector||l.zs3.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=t,r}attachTemplatePortal(t){let e=t.viewContainerRef,i=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=e.indexOf(i);-1!==r&&e.remove(r)}),this._attachedPortal=t,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let Bw=(()=>{class n extends $x{constructor(e,i,r){super(),this._componentFactoryResolver=e,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new l.vpe,this.attachDomPortal=s=>{const c=s.element,d=this._document.createComment("dom-portal");s.setAttachedHost(this),c.parentNode.insertBefore(d,c),this._getRootNode().appendChild(c),this._attachedPortal=s,super.setDisposeFn(()=>{d.parentNode&&d.parentNode.replaceChild(c,d)})},this._document=r}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(e){e.setAttachedHost(this);const i=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,s=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),c=i.createComponent(s,i.length,e.injector||i.injector);return i!==this._viewContainerRef&&this._getRootNode().appendChild(c.hostView.rootNodes[0]),super.setDisposeFn(()=>c.destroy()),this._attachedPortal=e,this._attachedRef=c,this.attached.emit(c),c}attachTemplatePortal(e){e.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l._Vd),l.Y36(l.s_b),l.Y36(se))},n.\u0275dir=l.lG2({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[l.qOj]}),n})(),Xc=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();const yH=BY();class iZ{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=gr(-this._previousScrollPosition.left),t.style.top=gr(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,i=t.style,r=this._document.body.style,s=i.scrollBehavior||"",c=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),yH&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),yH&&(i.scrollBehavior=s,r.scrollBehavior=c)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,i=this._viewportRuler.getViewportSize();return e.scrollHeight>i.height||e.scrollWidth>i.width}}class rZ{constructor(t,e,i,r){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class vH{enable(){}disable(){}attach(){}}function FP(n,t){return t.some(e=>n.bottom<e.top||n.top>e.bottom||n.right<e.left||n.left>e.right)}function bH(n,t){return t.some(e=>n.top<e.top||n.bottom>e.bottom||n.left<e.left||n.right>e.right)}class sZ{constructor(t,e,i,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();FP(e,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let oZ=(()=>{class n{constructor(e,i,r,s){this._scrollDispatcher=e,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new vH,this.close=c=>new rZ(this._scrollDispatcher,this._ngZone,this._viewportRuler,c),this.block=()=>new iZ(this._viewportRuler,this._document),this.reposition=c=>new sZ(this._scrollDispatcher,this._viewportRuler,this._ngZone,c),this._document=s}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(J8),l.LFG(Fw),l.LFG(l.R0b),l.LFG(se))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Gx{constructor(t){if(this.scrollStrategy=new vH,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const i of e)void 0!==t[i]&&(this[i]=t[i])}}}class aZ{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}let CH=(()=>{class n{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const i=this._attachedOverlays.indexOf(e);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(se))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),lZ=(()=>{class n extends CH{constructor(e,i){super(e),this._ngZone=i,this._keydownListener=r=>{const s=this._attachedOverlays;for(let c=s.length-1;c>-1;c--)if(s[c]._keydownEvents.observers.length>0){const d=s[c]._keydownEvents;this._ngZone?this._ngZone.run(()=>d.next(r)):d.next(r);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(se),l.LFG(l.R0b,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),cZ=(()=>{class n extends CH{constructor(e,i,r){super(e),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=If(s)},this._clickListener=s=>{const c=If(s),d="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:c;this._pointerDownEventTarget=null;const p=this._attachedOverlays.slice();for(let _=p.length-1;_>-1;_--){const b=p[_];if(b._outsidePointerEvents.observers.length<1||!b.hasAttached())continue;if(b.overlayElement.contains(c)||b.overlayElement.contains(d))break;const E=b._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>E.next(s)):E.next(s)}}}add(e){if(super.add(e),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(se),l.LFG(bs),l.LFG(l.R0b,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Wx=(()=>{class n{constructor(e,i){this._platform=i,this._document=e}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||MP()){const r=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const i=this._document.createElement("div");i.classList.add(e),MP()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(se),l.LFG(bs))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Vw{constructor(t,e,i,r,s,c,d,p,_,b=!1){this._portalOutlet=t,this._host=e,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=c,this._document=d,this._location=p,this._outsideClickDispatcher=_,this._animationsDisabled=b,this._backdropElement=null,this._backdropClick=new Ut.x,this._attachments=new Ut.x,this._detachments=new Ut.x,this._locationChanges=$o.w0.EMPTY,this._backdropClickHandler=E=>this._backdropClick.next(E),this._backdropTransitionendHandler=E=>{this._disposeBackdrop(E.target)},this._keydownEvents=new Ut.x,this._outsidePointerEvents=new Ut.x,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Zi(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof e?.onDestroy&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config={...this._config,...t},this._updateElementSize()}setDirection(t){this._config={...this._config,direction:t},this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=gr(this._config.width),t.height=gr(this._config.height),t.minWidth=gr(this._config.minWidth),t.minHeight=gr(this._config.minHeight),t.maxWidth=gr(this._config.maxWidth),t.maxHeight=gr(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;if(t){if(this._animationsDisabled)return void this._disposeBackdrop(t);t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500))}}_toggleClasses(t,e,i){const r=Lx(e||[]).filter(s=>!!s);r.length&&(i?t.classList.add(...r):t.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(mr((0,qa.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const wH="cdk-overlay-connected-position-bounding-box",uZ=/([A-Za-z%]+)$/;class dZ{constructor(t,e,i,r,s){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Ut.x,this._resizeSubscription=$o.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){this._validatePositions(),t.hostElement.classList.add(wH),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._originRect,e=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[];let c;for(let d of this._preferredPositions){let p=this._getOriginPoint(t,r,d),_=this._getOverlayPoint(p,e,d),b=this._getOverlayFit(_,e,i,d);if(b.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(d,p);this._canFitWithFlexibleDimensions(b,_,i)?s.push({position:d,origin:p,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(p,d)}):(!c||c.overlayFit.visibleArea<b.visibleArea)&&(c={overlayFit:b,overlayPoint:_,originPoint:p,position:d,overlayRect:e})}if(s.length){let d=null,p=-1;for(const _ of s){const b=_.boundingBoxRect.width*_.boundingBoxRect.height*(_.position.weight||1);b>p&&(p=b,d=_)}return this._isPushed=!1,void this._applyPosition(d.position,d.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(c.position,c.originPoint);this._applyPosition(c.position,c.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&cg(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(wH),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,i){let r,s;if("center"==i.originX)r=t.left+t.width/2;else{const c=this._isRtl()?t.right:t.left,d=this._isRtl()?t.left:t.right;r="start"==i.originX?c:d}return e.left<0&&(r-=e.left),s="center"==i.originY?t.top+t.height/2:"top"==i.originY?t.top:t.bottom,e.top<0&&(s-=e.top),{x:r,y:s}}_getOverlayPoint(t,e,i){let r,s;return r="center"==i.overlayX?-e.width/2:"start"===i.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,s="center"==i.overlayY?-e.height/2:"top"==i.overlayY?0:-e.height,{x:t.x+r,y:t.y+s}}_getOverlayFit(t,e,i,r){const s=EH(e);let{x:c,y:d}=t,p=this._getOffset(r,"x"),_=this._getOffset(r,"y");p&&(c+=p),_&&(d+=_);let T=0-d,N=d+s.height-i.height,V=this._subtractOverflows(s.width,0-c,c+s.width-i.width),K=this._subtractOverflows(s.height,T,N),re=V*K;return{visibleArea:re,isCompletelyWithinViewport:s.width*s.height===re,fitsInViewportVertically:K===s.height,fitsInViewportHorizontally:V==s.width}}_canFitWithFlexibleDimensions(t,e,i){if(this._hasFlexibleDimensions){const r=i.bottom-e.y,s=i.right-e.x,c=DH(this._overlayRef.getConfig().minHeight),d=DH(this._overlayRef.getConfig().minWidth),_=t.fitsInViewportHorizontally||null!=d&&d<=s;return(t.fitsInViewportVertically||null!=c&&c<=r)&&_}return!1}_pushOverlayOnScreen(t,e,i){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const r=EH(e),s=this._viewportRect,c=Math.max(t.x+r.width-s.width,0),d=Math.max(t.y+r.height-s.height,0),p=Math.max(s.top-i.top-t.y,0),_=Math.max(s.left-i.left-t.x,0);let b=0,E=0;return b=r.width<=s.width?_||-c:t.x<this._viewportMargin?s.left-i.left-t.x:0,E=r.height<=s.height?p||-d:t.y<this._viewportMargin?s.top-i.top-t.y:0,this._previousPushAmount={x:b,y:E},{x:t.x+b,y:t.y+E}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new aZ(t,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=t.overlayY;i="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let s=0;s<e.length;s++)e[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(t,e){const i=this._viewportRect,r=this._isRtl();let s,c,d,b,E,T;if("top"===e.overlayY)c=t.y,s=i.height-c+this._viewportMargin;else if("bottom"===e.overlayY)d=i.height-t.y+2*this._viewportMargin,s=i.height-d+this._viewportMargin;else{const N=Math.min(i.bottom-t.y+i.top,t.y),V=this._lastBoundingBoxSize.height;s=2*N,c=t.y-N,s>V&&!this._isInitialRender&&!this._growAfterOpen&&(c=t.y-V/2)}if("end"===e.overlayX&&!r||"start"===e.overlayX&&r)T=i.width-t.x+this._viewportMargin,b=t.x-this._viewportMargin;else if("start"===e.overlayX&&!r||"end"===e.overlayX&&r)E=t.x,b=i.right-t.x;else{const N=Math.min(i.right-t.x+i.left,t.x),V=this._lastBoundingBoxSize.width;b=2*N,E=t.x-N,b>V&&!this._isInitialRender&&!this._growAfterOpen&&(E=t.x-V/2)}return{top:c,left:E,bottom:d,right:T,width:b,height:s}}_setBoundingBoxStyles(t,e){const i=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,c=this._overlayRef.getConfig().maxWidth;r.height=gr(i.height),r.top=gr(i.top),r.bottom=gr(i.bottom),r.width=gr(i.width),r.left=gr(i.left),r.right=gr(i.right),r.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",r.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=gr(s)),c&&(r.maxWidth=gr(c))}this._lastBoundingBoxSize=i,cg(this._boundingBox.style,r)}_resetBoundingBoxStyles(){cg(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){cg(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,c=this._overlayRef.getConfig();if(r){const b=this._viewportRuler.getViewportScrollPosition();cg(i,this._getExactOverlayY(e,t,b)),cg(i,this._getExactOverlayX(e,t,b))}else i.position="static";let d="",p=this._getOffset(e,"x"),_=this._getOffset(e,"y");p&&(d+=`translateX(${p}px) `),_&&(d+=`translateY(${_}px)`),i.transform=d.trim(),c.maxHeight&&(r?i.maxHeight=gr(c.maxHeight):s&&(i.maxHeight="")),c.maxWidth&&(r?i.maxWidth=gr(c.maxWidth):s&&(i.maxWidth="")),cg(this._pane.style,i)}_getExactOverlayY(t,e,i){let r={top:"",bottom:""},s=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),"bottom"===t.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=gr(s.y),r}_getExactOverlayX(t,e,i){let c,r={left:"",right:""},s=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),c=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===c?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=gr(s.x),r}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:bH(t,i),isOriginOutsideView:FP(t,i),isOverlayClipped:bH(e,i),isOverlayOutsideView:FP(e,i)}}_subtractOverflows(t,...e){return e.reduce((i,r)=>i-Math.max(r,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+t-this._viewportMargin,bottom:i.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?t.offsetX??this._offsetX:t.offsetY??this._offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&Lx(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof l.SBq)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,i=t.height||0;return{top:t.y,bottom:t.y+i,left:t.x,right:t.x+e,height:i,width:e}}}function cg(n,t){for(let e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function DH(n){if("number"!=typeof n&&null!=n){const[t,e]=n.split(uZ);return e&&"px"!==e?null:parseFloat(t)}return n||null}function EH(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const MH="cdk-global-overlay-wrapper";class hZ{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(MH),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:c,maxHeight:d}=i,p=!("100%"!==r&&"100vw"!==r||c&&"100%"!==c&&"100vw"!==c),_=!("100%"!==s&&"100vh"!==s||d&&"100%"!==d&&"100vh"!==d),b=this._xPosition,E=this._xOffset,T="rtl"===this._overlayRef.getConfig().direction;let N="",V="",K="";p?K="flex-start":"center"===b?(K="center",T?V=E:N=E):T?"left"===b||"end"===b?(K="flex-end",N=E):("right"===b||"start"===b)&&(K="flex-start",V=E):"left"===b||"start"===b?(K="flex-start",N=E):("right"===b||"end"===b)&&(K="flex-end",V=E),t.position=this._cssPosition,t.marginLeft=p?"0":N,t.marginTop=_?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=p?"0":V,e.justifyContent=K,e.alignItems=_?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,i=e.style;e.classList.remove(MH),i.justifyContent=i.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let fZ=(()=>{class n{constructor(e,i,r,s){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new hZ}flexibleConnectedTo(e){return new dZ(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Fw),l.LFG(se),l.LFG(bs),l.LFG(Wx))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),pZ=0,mo=(()=>{class n{constructor(e,i,r,s,c,d,p,_,b,E,T,N){this.scrollStrategies=e,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=c,this._injector=d,this._ngZone=p,this._document=_,this._directionality=b,this._location=E,this._outsideClickDispatcher=T,this._animationsModuleType=N}create(e){const i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),c=new Gx(e);return c.direction=c.direction||this._directionality.value,new Vw(s,i,r,c,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(e){const i=this._document.createElement("div");return i.id="cdk-overlay-"+pZ++,i.classList.add("cdk-overlay-pane"),e.appendChild(i),i}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(l.z2F)),new nZ(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(oZ),l.LFG(Wx),l.LFG(l._Vd),l.LFG(fZ),l.LFG(lZ),l.LFG(l.zs3),l.LFG(l.R0b),l.LFG(se),l.LFG(lg),l.LFG(He),l.LFG(cZ),l.LFG(l.QbO,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const _Z={provide:new l.OlP("cdk-connected-overlay-scroll-strategy"),deps:[mo],useFactory:function gZ(n){return()=>n.scrollStrategies.reposition()}};let Jc=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[mo,_Z],imports:[Nw,Xc,PP,PP]}),n})();function yZ(n,t){}class qx{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0}}let IH=(()=>{class n extends $x{constructor(e,i,r,s,c,d,p,_){super(),this._elementRef=e,this._focusTrapFactory=i,this._config=s,this._interactivityChecker=c,this._ngZone=d,this._overlayRef=p,this._focusMonitor=_,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=b=>{this._portalOutlet.hasAttached();const E=this._portalOutlet.attachDomPortal(b);return this._contentAttached(),E},this._ariaLabelledBy=this._config.ariaLabelledBy||null,this._document=r}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(e){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachComponentPortal(e);return this._contentAttached(),i}attachTemplatePortal(e){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachTemplatePortal(e);return this._contentAttached(),i}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(e,i){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{e.removeEventListener("blur",r),e.removeEventListener("mousedown",r),e.removeAttribute("tabindex")};e.addEventListener("blur",r),e.addEventListener("mousedown",r)})),e.focus(i)}_focusByCssSelector(e,i){let r=this._elementRef.nativeElement.querySelector(e);r&&this._forceFocus(r,i)}_trapFocus(){const e=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||e.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const e=this._config.restoreFocus;let i=null;if("string"==typeof e?i=this._document.querySelector(e):"boolean"==typeof e?i=e?this._elementFocusedBeforeDialogWasOpened:null:e&&(i=e),this._config.restoreFocus&&i&&"function"==typeof i.focus){const r=EP(),s=this._elementRef.nativeElement;(!r||r===this._document.body||r===s||s.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const e=this._elementRef.nativeElement,i=EP();return e===i||e.contains(i)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=EP())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(kP),l.Y36(se,8),l.Y36(qx),l.Y36(Vx),l.Y36(l.R0b),l.Y36(Vw),l.Y36(xf))},n.\u0275cmp=l.Xpm({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(e,i){if(1&e&&l.Gf(Bw,7),2&e){let r;l.iGM(r=l.CRH())&&(i._portalOutlet=r.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(e,i){2&e&&l.uIk("id",i._config.id||null)("role",i._config.role)("aria-modal",i._config.ariaModal)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null)},features:[l.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,i){1&e&&l.YNc(0,yZ,0,0,"ng-template",0)},dependencies:[Bw],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2}),n})();class LP{constructor(t,e){this.overlayRef=t,this.config=e,this.closed=new Ut.x,this.disableClose=e.disableClose,this.backdropClick=t.backdropClick(),this.keydownEvents=t.keydownEvents(),this.outsidePointerEvents=t.outsidePointerEvents(),this.id=e.id,this.keydownEvents.subscribe(i=>{27===i.keyCode&&!this.disableClose&&!Qc(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})})}close(t,e){if(this.containerInstance){const i=this.closed;this.containerInstance._closeInteractionType=e?.focusOrigin||"program",this.overlayRef.dispose(),i.next(t),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(t="",e=""){return this.overlayRef.updateSize({width:t,height:e}),this}addPanelClass(t){return this.overlayRef.addPanelClass(t),this}removePanelClass(t){return this.overlayRef.removePanelClass(t),this}}const xH=new l.OlP("DialogScrollStrategy"),vZ=new l.OlP("DialogData"),bZ=new l.OlP("DefaultDialogConfig"),wZ={provide:xH,deps:[mo],useFactory:function CZ(n){return()=>n.scrollStrategies.block()}};let DZ=0,SH=(()=>{class n{constructor(e,i,r,s,c,d){this._overlay=e,this._injector=i,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=c,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Ut.x,this._afterOpenedAtThisLevel=new Ut.x,this._ariaHiddenElements=new Map,this.afterAllClosed=Jm(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(lo(void 0))),this._scrollStrategy=d}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}open(e,i){(i={...this._defaultOptions||new qx,...i}).id=i.id||"cdk-dialog-"+DZ++,i.id&&this.getDialogById(i.id);const s=this._getOverlayConfig(i),c=this._overlay.create(s),d=new LP(c,i),p=this._attachContainer(c,d,i);return d.containerInstance=p,this._attachDialogContent(e,d,p,i),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(d),d.closed.subscribe(()=>this._removeOpenDialog(d,!0)),this.afterOpened.next(d),d}closeAll(){BP(this.openDialogs,e=>e.close())}getDialogById(e){return this.openDialogs.find(i=>i.id===e)}ngOnDestroy(){BP(this._openDialogsAtThisLevel,e=>{!1===e.config.closeOnDestroy&&this._removeOpenDialog(e,!1)}),BP(this._openDialogsAtThisLevel,e=>e.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(e){const i=new Gx({positionStrategy:e.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,width:e.width,height:e.height,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(i.backdropClass=e.backdropClass),i}_attachContainer(e,i,r){const s=r.injector||r.viewContainerRef?.injector,c=[{provide:qx,useValue:r},{provide:LP,useValue:i},{provide:Vw,useValue:e}];let d;r.container?"function"==typeof r.container?d=r.container:(d=r.container.type,c.push(...r.container.providers(r))):d=IH;const p=new Lw(d,r.viewContainerRef,l.zs3.create({parent:s||this._injector,providers:c}),r.componentFactoryResolver);return e.attach(p).instance}_attachDialogContent(e,i,r,s){if(e instanceof l.Rgc){const c=this._createInjector(s,i,r,void 0);let d={$implicit:s.data,dialogRef:i};s.templateContext&&(d={...d,..."function"==typeof s.templateContext?s.templateContext():s.templateContext}),r.attachTemplatePortal(new zx(e,null,d,c))}else{const c=this._createInjector(s,i,r,this._injector),d=r.attachComponentPortal(new Lw(e,s.viewContainerRef,c,s.componentFactoryResolver));i.componentInstance=d.instance}}_createInjector(e,i,r,s){const c=e.injector||e.viewContainerRef?.injector,d=[{provide:vZ,useValue:e.data},{provide:LP,useValue:i}];return e.providers&&("function"==typeof e.providers?d.push(...e.providers(i,e,r)):d.push(...e.providers)),e.direction&&(!c||!c.get(lg,null,l.XFs.Optional))&&d.push({provide:lg,useValue:{value:e.direction,change:vt()}}),l.zs3.create({parent:c||s,providers:d})}_removeOpenDialog(e,i){const r=this.openDialogs.indexOf(e);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,c)=>{s?c.setAttribute("aria-hidden",s):c.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const e=this._overlayContainer.getContainerElement();if(e.parentElement){const i=e.parentElement.children;for(let r=i.length-1;r>-1;r--){const s=i[r];s!==e&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(mo),l.LFG(l.zs3),l.LFG(bZ,8),l.LFG(n,12),l.LFG(Wx),l.LFG(xH))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function BP(n,t){let e=n.length;for(;e--;)t(n[e])}let EZ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[SH,wZ],imports:[Jc,Xc,Ow,Xc]}),n})();const SZ=new l.OlP("mat-sanity-checks",{providedIn:"root",factory:function xZ(){return!0}});let Pt=(()=>{class n{constructor(e,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!MP()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(dH),l.LFG(SZ,8),l.LFG(se))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Nw,Nw]}),n})();function VP(n){return class extends n{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=Cn(t)}}}function Uw(n,t){return class extends n{constructor(...e){super(...e),this.defaultColor=t,this.color=t}get color(){return this._color}set color(e){const i=e||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}}}function ug(n){return class extends n{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=Cn(t)}}}const AZ=new l.OlP("MAT_DATE_LOCALE",{providedIn:"root",factory:function kZ(){return(0,l.f3M)(l.soG)}});class eu{constructor(){this._localeChanges=new Ut.x,this.localeChanges=this._localeChanges}getValidDateOrNull(t){return this.isDateInstance(t)&&this.isValid(t)?t:null}deserialize(t){return null==t||this.isDateInstance(t)&&this.isValid(t)?t:this.invalid()}setLocale(t){this.locale=t,this._localeChanges.next()}compareDate(t,e){return this.getYear(t)-this.getYear(e)||this.getMonth(t)-this.getMonth(e)||this.getDate(t)-this.getDate(e)}sameDate(t,e){if(t&&e){let i=this.isValid(t),r=this.isValid(e);return i&&r?!this.compareDate(t,e):i==r}return t==e}clampDate(t,e,i){return e&&this.compareDate(t,e)<0?e:i&&this.compareDate(t,i)>0?i:t}}const UP=new l.OlP("mat-date-formats"),RZ=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/;function HP(n,t){const e=Array(n);for(let i=0;i<n;i++)e[i]=t(i);return e}let OZ=(()=>{class n extends eu{constructor(e,i){super(),this.useUtcForDisplay=!1,super.setLocale(e)}getYear(e){return e.getFullYear()}getMonth(e){return e.getMonth()}getDate(e){return e.getDate()}getDayOfWeek(e){return e.getDay()}getMonthNames(e){const i=new Intl.DateTimeFormat(this.locale,{month:e,timeZone:"utc"});return HP(12,r=>this._format(i,new Date(2017,r,1)))}getDateNames(){const e=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return HP(31,i=>this._format(e,new Date(2017,0,i+1)))}getDayOfWeekNames(e){const i=new Intl.DateTimeFormat(this.locale,{weekday:e,timeZone:"utc"});return HP(7,r=>this._format(i,new Date(2017,0,r+1)))}getYearName(e){const i=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._format(i,e)}getFirstDayOfWeek(){return 0}getNumDaysInMonth(e){return this.getDate(this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+1,0))}clone(e){return new Date(e.getTime())}createDate(e,i,r){let s=this._createDateWithOverflow(e,i,r);return s.getMonth(),s}today(){return new Date}parse(e,i){return"number"==typeof e?new Date(e):e?new Date(Date.parse(e)):null}format(e,i){if(!this.isValid(e))throw Error("NativeDateAdapter: Cannot format invalid date.");const r=new Intl.DateTimeFormat(this.locale,{...i,timeZone:"utc"});return this._format(r,e)}addCalendarYears(e,i){return this.addCalendarMonths(e,12*i)}addCalendarMonths(e,i){let r=this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+i,this.getDate(e));return this.getMonth(r)!=((this.getMonth(e)+i)%12+12)%12&&(r=this._createDateWithOverflow(this.getYear(r),this.getMonth(r),0)),r}addCalendarDays(e,i){return this._createDateWithOverflow(this.getYear(e),this.getMonth(e),this.getDate(e)+i)}toIso8601(e){return[e.getUTCFullYear(),this._2digit(e.getUTCMonth()+1),this._2digit(e.getUTCDate())].join("-")}deserialize(e){if("string"==typeof e){if(!e)return null;if(RZ.test(e)){let i=new Date(e);if(this.isValid(i))return i}}return super.deserialize(e)}isDateInstance(e){return e instanceof Date}isValid(e){return!isNaN(e.getTime())}invalid(){return new Date(NaN)}_createDateWithOverflow(e,i,r){const s=new Date;return s.setFullYear(e,i,r),s.setHours(0,0,0,0),s}_2digit(e){return("00"+e).slice(-2)}_format(e,i){const r=new Date;return r.setUTCFullYear(i.getFullYear(),i.getMonth(),i.getDate()),r.setUTCHours(i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()),e.format(r)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(AZ,8),l.LFG(bs))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const PZ={parse:{dateInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}};let NZ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[{provide:eu,useClass:OZ}]}),n})(),kH=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[{provide:UP,useValue:PZ}],imports:[NZ]}),n})(),jP=(()=>{class n{isErrorState(e,i){return!!(e&&e.invalid&&(e.touched||i&&i.submitted))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Zx=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Pt,Pt]}),n})();class BZ{constructor(t,e,i,r=!1){this._renderer=t,this.element=e,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const RH={enterDuration:225,exitDuration:150},zP=sg({passive:!0}),OH=["mousedown","touchstart"],PH=["mouseup","mouseleave","touchend","touchcancel"];class NH{constructor(t,e,i,r){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=ag(i))}fadeInRipple(t,e,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...RH,...i.animation};i.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);const c=i.radius||function UZ(n,t,e){const i=Math.max(Math.abs(n-e.left),Math.abs(n-e.right)),r=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(i*i+r*r)}(t,e,r),d=t-r.left,p=e-r.top,_=s.enterDuration,b=document.createElement("div");b.classList.add("mat-ripple-element"),b.style.left=d-c+"px",b.style.top=p-c+"px",b.style.height=2*c+"px",b.style.width=2*c+"px",null!=i.color&&(b.style.backgroundColor=i.color),b.style.transitionDuration=`${_}ms`,this._containerElement.appendChild(b);const E=window.getComputedStyle(b),N=E.transitionDuration,V="none"===E.transitionProperty||"0s"===N||"0s, 0s"===N,K=new BZ(this,b,i,V);b.style.transform="scale3d(1, 1, 1)",K.state=0,i.persistent||(this._mostRecentTransientRipple=K);let re=null;return!V&&(_||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const Ye=()=>this._finishRippleTransition(K),rt=()=>this._destroyRipple(K);b.addEventListener("transitionend",Ye),b.addEventListener("transitioncancel",rt),re={onTransitionEnd:Ye,onTransitionCancel:rt}}),this._activeRipples.set(K,re),(V||!_)&&this._finishRippleTransition(K),K}fadeOutRipple(t){if(2===t.state||3===t.state)return;const e=t.element,i={...RH,...t.config.animation};e.style.transitionDuration=`${i.exitDuration}ms`,e.style.opacity="0",t.state=2,(t._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=ag(t);!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(OH))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(PH),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){0===t.state?this._startFadeOutTransition(t):2===t.state&&this._destroyRipple(t)}_startFadeOutTransition(t){const e=t===this._mostRecentTransientRipple,{persistent:i}=t.config;t.state=1,!i&&(!e||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){const e=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=3,null!==e&&(t.element.removeEventListener("transitionend",e.onTransitionEnd),t.element.removeEventListener("transitioncancel",e.onTransitionCancel)),t.element.remove()}_onMousedown(t){const e=sH(t),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!i&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!oH(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let i=0;i<e.length;i++)this.fadeInRipple(e[i].clientX,e[i].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(e=>{this._triggerElement.addEventListener(e,this,zP)})})}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){this._triggerElement&&(OH.forEach(t=>{this._triggerElement.removeEventListener(t,this,zP)}),this._pointerUpEventsRegistered&&PH.forEach(t=>{this._triggerElement.removeEventListener(t,this,zP)}))}}const FH=new l.OlP("mat-ripple-global-options");let dg=(()=>{class n{constructor(e,i,r,s,c){this._elementRef=e,this._animationMode=c,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new NH(this,i,e,r)}get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,i=0,r){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,i,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...e})}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(l.R0b),l.Y36(bs),l.Y36(FH,8),l.Y36(l.QbO,8))},n.\u0275dir=l.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,i){2&e&&l.ekj("mat-ripple-unbounded",i.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),tu=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Pt,Pt]}),n})(),$P=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Pt]}),n})(),Kx=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[tu,Mi,Pt,$P]}),n})();class LH{}const bd="*";function _r(n,t){return{type:7,name:n,definitions:t,options:{}}}function $n(n,t=null){return{type:4,styles:t,timings:n}}function BH(n,t=null){return{type:3,steps:n,options:t}}function VH(n,t=null){return{type:2,steps:n,options:t}}function xt(n){return{type:6,styles:n,offset:null}}function Nn(n,t,e){return{type:0,name:n,styles:t,options:e}}function Bn(n,t,e=null){return{type:1,expr:n,animation:t,options:e}}function Qx(n=null){return{type:9,options:n}}function Xx(n,t,e=null){return{type:11,selector:n,animation:t,options:e}}function UH(n){Promise.resolve().then(n)}class jw{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){UH(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class HH{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,i=0,r=0;const s=this.players.length;0==s?UH(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++e==s&&this._onFinish()}),c.onDestroy(()=>{++i==s&&this._onDestroy()}),c.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((c,d)=>Math.max(c,d.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,e/i.totalTime):1;i.setPosition(r)})}getPosition(){const t=this.players.reduce((e,i)=>null===e||i.totalTime>e.totalTime?i:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}function WZ(n,t){}const bv={params:{enterAnimationDuration:"150ms",exitAnimationDuration:"75ms"}},qZ={dialogContainer:_r("dialogContainer",[Nn("void, exit",xt({opacity:0,transform:"scale(0.7)"})),Nn("enter",xt({transform:"none"})),Bn("* => enter",BH([$n("{{enterAnimationDuration}} cubic-bezier(0, 0, 0.2, 1)",xt({transform:"none",opacity:1})),Xx("@*",Qx(),{optional:!0})]),bv),Bn("* => void, * => exit",BH([$n("{{exitAnimationDuration}} cubic-bezier(0.4, 0.0, 0.2, 1)",xt({opacity:0})),Xx("@*",Qx(),{optional:!0})]),bv)])};class Jx{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0,this.enterAnimationDuration=bv.params.enterAnimationDuration,this.exitAnimationDuration=bv.params.exitAnimationDuration}}let YZ=(()=>{class n extends IH{constructor(e,i,r,s,c,d,p,_){super(e,i,r,s,c,d,p,_),this._animationStateChanged=new l.vpe}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(e){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:e})}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(kP),l.Y36(se,8),l.Y36(Jx),l.Y36(Vx),l.Y36(l.R0b),l.Y36(Vw),l.Y36(xf))},n.\u0275cmp=l.Xpm({type:n,selectors:[["ng-component"]],features:[l.qOj],decls:0,vars:0,template:function(e,i){},encapsulation:2}),n})(),ZZ=(()=>{class n extends YZ{constructor(e,i,r,s,c,d,p,_,b){super(e,i,r,s,c,d,p,b),this._changeDetectorRef=_,this._state="enter"}_onAnimationDone({toState:e,totalTime:i}){"enter"===e?this._openAnimationDone(i):"exit"===e&&this._animationStateChanged.next({state:"closed",totalTime:i})}_onAnimationStart({toState:e,totalTime:i}){"enter"===e?this._animationStateChanged.next({state:"opening",totalTime:i}):("exit"===e||"void"===e)&&this._animationStateChanged.next({state:"closing",totalTime:i})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}_getAnimationState(){return{value:this._state,params:{enterAnimationDuration:this._config.enterAnimationDuration||bv.params.enterAnimationDuration,exitAnimationDuration:this._config.exitAnimationDuration||bv.params.exitAnimationDuration}}}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(kP),l.Y36(se,8),l.Y36(Jx),l.Y36(Vx),l.Y36(l.R0b),l.Y36(Vw),l.Y36(l.sBO),l.Y36(xf))},n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-dialog-container"],hostVars:7,hostBindings:function(e,i){1&e&&l.WFA("@dialogContainer.start",function(s){return i._onAnimationStart(s)})("@dialogContainer.done",function(s){return i._onAnimationDone(s)}),2&e&&(l.Ikx("id",i._config.id),l.uIk("aria-modal",i._config.ariaModal)("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),l.d8E("@dialogContainer",i._getAnimationState()))},features:[l.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,i){1&e&&l.YNc(0,WZ,0,0,"ng-template",0)},dependencies:[Bw],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions.mat-dialog-actions-align-center,.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions.mat-dialog-actions-align-end,.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}"],encapsulation:2,data:{animation:[qZ.dialogContainer]}}),n})();class eS{constructor(t,e,i){this._ref=t,this._containerInstance=i,this._afterOpened=new Ut.x,this._beforeClosed=new Ut.x,this._state=0,this.disableClose=e.disableClose,this.id=t.id,i._animationStateChanged.pipe(Ti(r=>"opened"===r.state),Zi(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(Ti(r=>"closed"===r.state),Zi(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),t.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),(0,qa.T)(this.backdropClick(),this.keydownEvents().pipe(Ti(r=>27===r.keyCode&&!this.disableClose&&!Qc(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),jH(this,"keydown"===r.type?"keyboard":"mouse"))})}close(t){this._result=t,this._containerInstance._animationStateChanged.pipe(Ti(e=>"closing"===e.state),Zi(1)).subscribe(e=>{this._beforeClosed.next(t),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(t){let e=this._ref.config.positionStrategy;return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._ref.updatePosition(),this}updateSize(t="",e=""){return this._ref.updateSize(t,e),this}addPanelClass(t){return this._ref.addPanelClass(t),this}removePanelClass(t){return this._ref.removePanelClass(t),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}function jH(n,t,e){return n._closeInteractionType=t,n.close(e)}const zH=new l.OlP("MatDialogData"),KZ=new l.OlP("mat-dialog-default-options"),$H=new l.OlP("mat-dialog-scroll-strategy"),XZ={provide:$H,deps:[mo],useFactory:function QZ(n){return()=>n.scrollStrategies.block()}};let JZ=0,eK=(()=>{class n{constructor(e,i,r,s,c,d,p,_,b,E){this._overlay=e,this._defaultOptions=r,this._parentDialog=s,this._dialogRefConstructor=p,this._dialogContainerType=_,this._dialogDataToken=b,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Ut.x,this._afterOpenedAtThisLevel=new Ut.x,this._idPrefix="mat-dialog-",this.afterAllClosed=Jm(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(lo(void 0))),this._scrollStrategy=d,this._dialog=i.get(SH)}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(e,i){let r;(i={...this._defaultOptions||new Jx,...i}).id=i.id||`${this._idPrefix}${JZ++}`,i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();const s=this._dialog.open(e,{...i,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:Jx,useValue:i},{provide:qx,useValue:i}]},templateContext:()=>({dialogRef:r}),providers:(c,d,p)=>(r=new this._dialogRefConstructor(c,i,p),r.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:p},{provide:this._dialogDataToken,useValue:d.data},{provide:this._dialogRefConstructor,useValue:r}])});return r.componentInstance=s.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{const c=this.openDialogs.indexOf(r);c>-1&&(this.openDialogs.splice(c,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(i=>i.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(e){let i=e.length;for(;i--;)e[i].close()}}return n.\u0275fac=function(e){l.$Z()},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),tS=(()=>{class n extends eK{constructor(e,i,r,s,c,d,p,_){super(e,i,s,d,p,c,eS,ZZ,zH,_)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(mo),l.LFG(l.zs3),l.LFG(He,8),l.LFG(KZ,8),l.LFG($H),l.LFG(n,12),l.LFG(Wx),l.LFG(l.QbO,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),tK=0,nK=(()=>{class n{constructor(e,i,r){this.dialogRef=e,this._elementRef=i,this._dialog=r,this.type="button"}ngOnInit(){this.dialogRef||(this.dialogRef=GH(this._elementRef,this._dialog.openDialogs))}ngOnChanges(e){const i=e._matDialogClose||e._matDialogCloseResult;i&&(this.dialogResult=i.currentValue)}_onButtonClick(e){jH(this.dialogRef,0===e.screenX&&0===e.screenY?"keyboard":"mouse",this.dialogResult)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(eS,8),l.Y36(l.SBq),l.Y36(tS))},n.\u0275dir=l.lG2({type:n,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(e,i){1&e&&l.NdJ("click",function(s){return i._onButtonClick(s)}),2&e&&l.uIk("aria-label",i.ariaLabel||null)("type",i.type)},inputs:{ariaLabel:["aria-label","ariaLabel"],type:"type",dialogResult:["mat-dialog-close","dialogResult"],_matDialogClose:["matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],features:[l.TTD]}),n})(),iK=(()=>{class n{constructor(e,i,r){this._dialogRef=e,this._elementRef=i,this._dialog=r,this.id="mat-dialog-title-"+tK++}ngOnInit(){this._dialogRef||(this._dialogRef=GH(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{const e=this._dialogRef._containerInstance;e&&!e._ariaLabelledBy&&(e._ariaLabelledBy=this.id)})}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(eS,8),l.Y36(l.SBq),l.Y36(tS))},n.\u0275dir=l.lG2({type:n,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-dialog-title"],hostVars:1,hostBindings:function(e,i){2&e&&l.Ikx("id",i.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]}),n})(),rK=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=l.lG2({type:n,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-dialog-content"]}),n})(),sK=(()=>{class n{constructor(){this.align="start"}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=l.lG2({type:n,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-dialog-actions"],hostVars:4,hostBindings:function(e,i){2&e&&l.ekj("mat-dialog-actions-align-center","center"===i.align)("mat-dialog-actions-align-end","end"===i.align)},inputs:{align:"align"}}),n})();function GH(n,t){let e=n.nativeElement.parentElement;for(;e&&!e.classList.contains("mat-dialog-container");)e=e.parentElement;return e?t.find(i=>i.id===e.id):null}let WH=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[tS,XZ],imports:[EZ,Jc,Xc,Pt,Pt]}),n})();const oK=["mat-button",""],aK=["*"],cK=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],uK=Uw(VP(ug(class{constructor(n){this._elementRef=n}})));let qH=(()=>{class n extends uK{constructor(e,i,r){super(e),this._focusMonitor=i,this._animationMode=r,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of cK)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);e.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e,i){e?this._focusMonitor.focusVia(this._getHostElement(),e,i):this._getHostElement().focus(i)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...e){return e.some(i=>this._getHostElement().hasAttribute(i))}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(xf),l.Y36(l.QbO,8))},n.\u0275cmp=l.Xpm({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(e,i){if(1&e&&l.Gf(dg,5),2&e){let r;l.iGM(r=l.CRH())&&(i.ripple=r.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(e,i){2&e&&(l.uIk("disabled",i.disabled||null),l.ekj("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-button-disabled",i.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[l.qOj],attrs:oK,ngContentSelectors:aK,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(e,i){1&e&&(l.F$t(),l.TgZ(0,"span",0),l.Hsn(1),l.qZA(),l._UZ(2,"span",1)(3,"span",2)),2&e&&(l.xp6(2),l.ekj("mat-button-ripple-round",i.isRoundButton||i.isIconButton),l.Q6J("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",i.isIconButton)("matRippleTrigger",i._getHostElement()))},dependencies:[dg],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}.mat-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.mat-flat-button::before,.mat-raised-button::before,.mat-fab::before,.mat-mini-fab::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-stroked-button::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px) * -1)}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}"],encapsulation:2,changeDetection:0}),n})(),zw=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[tu,Pt,Pt]}),n})(),dK=(()=>{class n{constructor(e,i){this.dialogRef=e,this.data=i}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(eS),l.Y36(zH))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-angular-mat-dialog"]],decls:8,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions","",1,"action"],["mat-button","","color","primary","mat-raised-button","",3,"matDialogClose"]],template:function(e,i){1&e&&(l.TgZ(0,"h1",0),l._uU(1),l.qZA(),l.TgZ(2,"div",1)(3,"p"),l._uU(4),l.qZA()(),l.TgZ(5,"div",2)(6,"button",3),l._uU(7," Ok "),l.qZA()()),2&e&&(l.xp6(1),l.Oqu(i.data.title),l.xp6(3),l.Oqu(i.data.message))},dependencies:[qH,nK,iK,rK,sK],styles:[".action[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:right}"]}),n})();function hK(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",2)(1,"button",3),l.NdJ("click",function(){l.CHM(e);const r=l.oxw();return l.KtG(r.action())}),l._uU(2),l.qZA()()}if(2&n){const e=l.oxw();l.xp6(2),l.Oqu(e.data.action)}}function fK(n,t){}const YH=new l.OlP("MatSnackBarData");class nS{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}const pK=Math.pow(2,31)-1;class WP{constructor(t,e){this._overlayRef=e,this._afterDismissed=new Ut.x,this._afterOpened=new Ut.x,this._onAction=new Ut.x,this._dismissedByAction=!1,this.containerInstance=t,t._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(t){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(t,pK))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}let mK=(()=>{class n{constructor(e,i){this.snackBarRef=e,this.data=i}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(WP),l.Y36(YH))},n.\u0275cmp=l.Xpm({type:n,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-simple-snackbar"],decls:3,vars:2,consts:[[1,"mat-simple-snack-bar-content"],["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(e,i){1&e&&(l.TgZ(0,"span",0),l._uU(1),l.qZA(),l.YNc(2,hK,3,1,"div",1)),2&e&&(l.xp6(1),l.Oqu(i.data.message),l.xp6(1),l.Q6J("ngIf",i.hasAction))},dependencies:[Yn,qH],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}.mat-simple-snack-bar-content{overflow:hidden;text-overflow:ellipsis}"],encapsulation:2,changeDetection:0}),n})();const gK={snackBarState:_r("state",[Nn("void, hidden",xt({transform:"scale(0.8)",opacity:0})),Nn("visible",xt({transform:"scale(1)",opacity:1})),Bn("* => visible",$n("150ms cubic-bezier(0, 0, 0.2, 1)")),Bn("* => void, * => hidden",$n("75ms cubic-bezier(0.4, 0.0, 1, 1)",xt({opacity:0})))])};let _K=(()=>{class n extends $x{constructor(e,i,r,s,c){super(),this._ngZone=e,this._elementRef=i,this._changeDetectorRef=r,this._platform=s,this.snackBarConfig=c,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new Ut.x,this._onExit=new Ut.x,this._onEnter=new Ut.x,this._animationState="void",this.attachDomPortal=d=>{this._assertNotAttached();const p=this._portalOutlet.attachDomPortal(d);return this._afterPortalAttached(),p},this._live="assertive"!==c.politeness||c.announcementMessage?"off"===c.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(e){this._assertNotAttached();const i=this._portalOutlet.attachComponentPortal(e);return this._afterPortalAttached(),i}attachTemplatePortal(e){this._assertNotAttached();const i=this._portalOutlet.attachTemplatePortal(e);return this._afterPortalAttached(),i}onAnimationEnd(e){const{fromState:i,toState:r}=e;if(("void"===r&&"void"!==i||"hidden"===r)&&this._completeExit(),"visible"===r){const s=this._onEnter;this._ngZone.run(()=>{s.next(),s.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe(Zi(1)).subscribe(()=>{this._ngZone.run(()=>{this._onExit.next(),this._onExit.complete()})})}_afterPortalAttached(){const e=this._elementRef.nativeElement,i=this.snackBarConfig.panelClass;i&&(Array.isArray(i)?i.forEach(r=>e.classList.add(r)):e.classList.add(i))}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const e=this._elementRef.nativeElement.querySelector("[aria-hidden]"),i=this._elementRef.nativeElement.querySelector("[aria-live]");if(e&&i){let r=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&e.contains(document.activeElement)&&(r=document.activeElement),e.removeAttribute("aria-hidden"),i.appendChild(e),r?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.R0b),l.Y36(l.SBq),l.Y36(l.sBO),l.Y36(bs),l.Y36(nS))},n.\u0275dir=l.lG2({type:n,viewQuery:function(e,i){if(1&e&&l.Gf(Bw,7),2&e){let r;l.iGM(r=l.CRH())&&(i._portalOutlet=r.first)}},features:[l.qOj]}),n})(),yK=(()=>{class n extends _K{_afterPortalAttached(){super._afterPortalAttached(),"center"===this.snackBarConfig.horizontalPosition&&this._elementRef.nativeElement.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&this._elementRef.nativeElement.classList.add("mat-snack-bar-top")}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=l.n5z(n)))(i||n)}}(),n.\u0275cmp=l.Xpm({type:n,selectors:[["snack-bar-container"]],hostAttrs:[1,"mat-snack-bar-container"],hostVars:1,hostBindings:function(e,i){1&e&&l.WFA("@state.done",function(s){return i.onAnimationEnd(s)}),2&e&&l.d8E("@state",i._animationState)},features:[l.qOj],decls:3,vars:2,consts:[["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(e,i){1&e&&(l.TgZ(0,"div",0),l.YNc(1,fK,0,0,"ng-template",1),l.qZA(),l._UZ(2,"div")),2&e&&(l.xp6(2),l.uIk("aria-live",i._live)("role",i._role))},dependencies:[Bw],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}"],encapsulation:2,data:{animation:[gK.snackBarState]}}),n})(),qP=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Jc,Xc,Mi,zw,Pt,Pt]}),n})();const ZH=new l.OlP("mat-snack-bar-default-options",{providedIn:"root",factory:function vK(){return new nS}});let bK=(()=>{class n{constructor(e,i,r,s,c,d){this._overlay=e,this._live=i,this._injector=r,this._breakpointObserver=s,this._parentSnackBar=c,this._defaultConfig=d,this._snackBarRefAtThisLevel=null}get _openedSnackBarRef(){const e=this._parentSnackBar;return e?e._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(e){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=e:this._snackBarRefAtThisLevel=e}openFromComponent(e,i){return this._attach(e,i)}openFromTemplate(e,i){return this._attach(e,i)}open(e,i="",r){const s={...this._defaultConfig,...r};return s.data={message:e,action:i},s.announcementMessage===e&&(s.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,s)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(e,i){const s=l.zs3.create({parent:i&&i.viewContainerRef&&i.viewContainerRef.injector||this._injector,providers:[{provide:nS,useValue:i}]}),c=new Lw(this.snackBarContainerComponent,i.viewContainerRef,s),d=e.attach(c);return d.instance.snackBarConfig=i,d.instance}_attach(e,i){const r={...new nS,...this._defaultConfig,...i},s=this._createOverlay(r),c=this._attachSnackBarContainer(s,r),d=new WP(c,s);if(e instanceof l.Rgc){const p=new zx(e,null,{$implicit:r.data,snackBarRef:d});d.instance=c.attachTemplatePortal(p)}else{const p=this._createInjector(r,d),_=new Lw(e,void 0,p),b=c.attachComponentPortal(_);d.instance=b.instance}return this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait)").pipe(mr(s.detachments())).subscribe(p=>{s.overlayElement.classList.toggle(this.handsetCssClass,p.matches)}),r.announcementMessage&&c._onAnnounce.subscribe(()=>{this._live.announce(r.announcementMessage,r.politeness)}),this._animateSnackBar(d,r),this._openedSnackBarRef=d,this._openedSnackBarRef}_animateSnackBar(e,i){e.afterDismissed().subscribe(()=>{this._openedSnackBarRef==e&&(this._openedSnackBarRef=null),i.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{e.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):e.containerInstance.enter(),i.duration&&i.duration>0&&e.afterOpened().subscribe(()=>e._dismissAfter(i.duration))}_createOverlay(e){const i=new Gx;i.direction=e.direction;let r=this._overlay.position().global();const s="rtl"===e.direction,c="left"===e.horizontalPosition||"start"===e.horizontalPosition&&!s||"end"===e.horizontalPosition&&s,d=!c&&"center"!==e.horizontalPosition;return c?r.left("0"):d?r.right("0"):r.centerHorizontally(),"top"===e.verticalPosition?r.top("0"):r.bottom("0"),i.positionStrategy=r,this._overlay.create(i)}_createInjector(e,i){return l.zs3.create({parent:e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,providers:[{provide:WP,useValue:i},{provide:YH,useValue:e.data}]})}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(mo),l.LFG(lH),l.LFG(l.zs3),l.LFG(AP),l.LFG(n,12),l.LFG(ZH))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),CK=(()=>{class n extends bK{constructor(e,i,r,s,c,d){super(e,i,r,s,c,d),this.simpleSnackBarComponent=mK,this.snackBarContainerComponent=yK,this.handsetCssClass="mat-snack-bar-handset"}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(mo),l.LFG(lH),l.LFG(l.zs3),l.LFG(AP),l.LFG(n,12),l.LFG(ZH))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:qP}),n})(),YP=(()=>{class n{constructor(e,i){this.dialog=e,this._snackBar=i}openDialog(){this.dialog.open(dK,{data:this.data})}openSnackBar(e,i){console.log("toast open"),this._snackBar.open(e,i,{duration:3e3})}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(tS),l.LFG(CK))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class iS{constructor(){}static newMessage(t,e){let i=new iS;return i._senderID=t,i._timeStamp=(new Date).getTime(),i._message=e,i}get message(){return this._message?this._message:""}set message(t){this._message=t}get timeStamp(){return this._timeStamp||0}set senderID(t){this._senderID=t}}let Cv=(()=>{class n{constructor(e){this._id=e}get lastMessage(){return this._lastMessage}set type(e){this._type=e}get type(){return this._type||""}set id(e){this._id=e}get id(){return this._id||""}set members(e){this._members=e}get members(){return this._members||[]}set lastMessage(e){this._lastMessage=e||new iS}}return n.TYPE_ONE="ONE",n.TYPE_MANY="MANY",n})();class rS{constructor(){}get chatRoom(){return this._chatRoom||new Cv}set chatRoom(t){this._chatRoom=t}get members(){return this._members||[]}set members(t){this._members=t}static newChatRoomNUUserInfoFromChatRoom(t,e){let i=new rS;return i.chatRoom=t.chatRoom,i.members=e,i}}class ZP{constructor(){}get chatRoom(){return this._chatRoom||new Cv}set chatRoom(t){this._chatRoom=t}get members(){return this._members||[]}set members(t){this._members=t}static newChatRoomNUIDFromChatRoom(t){let e=new ZP;return e.chatRoom=t,e.members=t._members||[],e}}const DK=(n,t)=>(n.push(t),n);let Sf=(()=>{class n{constructor(e){this.db=e,this.db_Users_Collection="users",this.db_Messages_Collection="messages",this.db_ChatRooms_Collection="chatRooms",this.db_UserChatRooms_Collection="userChatRoom",this.currentChatRoom$=new Ui(""),this.messages=new Ui([]),this.chatRoomsNUserInfo$=new Ui([]),this.userChatRoomsNInfo=[],this.messagesSubject=new Ui([]),this.selectedChatRoomNUserInfoSubject=new Ui(new rS)}getUserChatRoomList(e){return this.db.afsDB.collection(this.db_Users_Collection).doc(e).get().pipe((0,Ct.U)(i=>i.data()._chatRooms))}getUserChatRoomInfo(e){return this.getUserChatRoomList(e).pipe((0,Ct.U)(i=>i.map(r=>this.getChatRoomInfo(r).pipe((0,Ct.U)(s=>ZP.newChatRoomNUIDFromChatRoom(s)),(0,er.z)(s=>{let c=s.members.filter(d=>d!==e);return this.getMultiUsersInfo(c).pipe((0,Ct.U)(d=>rS.newChatRoomNUUserInfoFromChatRoom(s,d)))})))),zn(i=>dx(i)),(0,li.b)(i=>this.chatRoomsNUserInfo$?.next(i)),dm())}setUserInfo(e){let i=e._uid;return this.db.afsDB.collection(this.db_Users_Collection).doc(i).get().pipe(zn(r=>(0,_n.D)(r.exists?this.db.afsDB.collection(this.db_Users_Collection).doc(i).update(Object.assign({},e)):this.db.afsDB.collection(this.db_Users_Collection).doc(i).set(Object.assign({},e)))))}getContacts(e){return this.db.afsDB.collection(this.db_Users_Collection,i=>i.where("_uid","!=",e)).valueChanges().pipe((0,Ct.U)(i=>i.map(r=>{let s=new zO(r._uid,r);return s.chatRooms=r._chatRooms||[],s})))}getChatMessage(e){return console.log(e),this.currentChatRoom$.next(e),this.db.afsDB.collection(this.db_ChatRooms_Collection).doc(e).collection(this.db_Messages_Collection,i=>i.orderBy("_timeStamp","desc")).valueChanges().pipe(Zc(()=>Df.E),(0,li.b)(i=>this.messagesSubject.next(i)))}checkIfUserRoomExists(e,i){return this.db.afsDB.collection(this.db_ChatRooms_Collection).doc(`${e}${i}`).get().pipe(zn(r=>this.db.afsDB.collection(this.db_ChatRooms_Collection).doc(`${i}${e}`).get().pipe((0,Ct.U)(s=>r.exists?r.id:s.exists?s.id:""))))}openChatRoomInContacts(e,i){return this.checkIfUserRoomExists(e,i).pipe(zn(r=>r?this.getChatMessage(r):this.createNewChatRoom([e,i],Cv.TYPE_ONE).pipe(zn(s=>this.getChatMessage(s))))).pipe((0,li.b)(r=>this.messagesSubject.next(r)))}createNewChatRoom(e,i){if(i===Cv.TYPE_MANY)return(0,_n.D)(this.db.afsDB.collection(this.db_ChatRooms_Collection).add({_id:"1",_lastMessage:2})).pipe(zn(r=>(0,_n.D)(e).pipe((0,er.z)(s=>(this.addChatRoom2UserChatRooms(s,r.id).subscribe(),(0,_n.D)(r.id))))));{let r=new Cv(`${e[0]}${e[1]}`);return r.members=e,r.type=Cv.TYPE_ONE,(0,qa.T)((0,_n.D)(e).pipe((0,er.z)(c=>this.addChatRoom2UserChatRooms(c,`${e[0]}${e[1]}`))),(0,_n.D)(this.db.afsDB.collection(this.db_ChatRooms_Collection).doc(r.id).set(Object.assign({},r)).then(()=>"chatRoomCreated")).pipe(c=>(0,_n.D)(this.db.afsDB.collection(this.db_ChatRooms_Collection).doc(r.id).collection(this.db_Messages_Collection).doc("1").set({})))).pipe(zn(()=>vt(r.id)))}}addChatRoom2UserChatRooms(e,i){return this.getUserChatRoomList(e).pipe((0,Ct.U)(r=>(r.push(i),r)),zn(r=>(0,_n.D)(this.db.afsDB.collection(this.db_Users_Collection).doc(`${e}`).update({_chatRooms:r}).then(()=>"chatRoomCreated"))))}createMessage(e,i){return this.db.afsDB.collection(this.db_ChatRooms_Collection).doc(e).collection(this.db_Messages_Collection).add(Object.assign({},i)).then(()=>this.updateLastMessage(e,i)).catch(r=>console.log(r))}getUserInfo(e){return this.db.afsDB.collection(this.db_Users_Collection).doc(e).get().pipe((0,Ct.U)(i=>i.data()))}getMultiUsersInfo(e){return(0,_n.D)(e).pipe((0,er.z)(i=>this.getUserInfo(i)),function EK(){return(0,Oi.e)((n,t)=>{(function wK(n,t){return(0,Oi.e)(_M(n,t,arguments.length>=2,!1,!0))})(DK,[])(n).subscribe(t)})}())}updateLastMessage(e,i){return this.db.afsDB.collection(this.db_ChatRooms_Collection).doc(e).update({_lastMessage:Object.assign({},i)})}getChatRoomInfo(e){return this.db.afsDB.collection(this.db_ChatRooms_Collection).doc(e).valueChanges()}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ov))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),nu=(()=>{class n{constructor(e,i,r,s,c){this.auth=e,this.router=i,this.showToast=r,this.db=s,this.manipulateDB=c,this.object={firstName:"1",lastName:"2",email:"13"}}googleSignIn(){return(0,_n.D)(this.auth.signInWithPopup(new yD.Q)).pipe(zn(e=>{let i={_firstName:"",_lastName:"",_uid:e.user?.uid||"",_displayName:e.user?.displayName||"",_email:e.user?.email||"",_photoURL:e.user?.photoURL||""};return localStorage.setItem("user",JSON.stringify(i)),this.manipulateDB.setUserInfo(new zO(e.user.uid,i))}),(0,li.b)(e=>this.router.navigate(["/homepage"])))}currentUser(){if(this.isLoggedIn())return JSON.parse(String(localStorage.getItem("user")))}currentUserID(){if(this.currentUser())return this.currentUser()._uid}signOut(){return this.auth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["/loginPage"])})}isLoggedIn(){return!!localStorage.getItem("user")}checkIfLoggedAndRedirect(){this.isLoggedIn()&&this.router.navigate(["/homepage"])}signUp(e,i){return Jm(()=>(0,_n.D)(this.auth.createUserWithEmailAndPassword(e,i)))}signInWithEmail(e,i){return Jm(()=>(0,_n.D)(this.auth.signInWithEmailAndPassword(e,i)))}openDialog(){this.showToast.data={title:"Failed",message:"Password is incorrect, please try again"},this.showToast.openDialog()}forgotPassword(e){return this.auth.sendPasswordResetEmail(e).then(i=>{this.showToast.openSnackBar("Successfully Please check your email","")}).catch(i=>{console.log(i)})}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(UO),l.LFG(Hi),l.LFG(YP),l.LFG(ov),l.LFG(Sf))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),MK=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[nu],imports:[Mi]}),n})(),e1=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();function XH(...n){const t=(0,Gh.jO)(n),{args:e,keys:i}=P2(n),r=new ns.y(s=>{const{length:c}=e;if(!c)return void s.complete();const d=new Array(c);let p=c,_=c;for(let b=0;b<c;b++){let E=!1;(0,Xm.Xf)(e[b]).subscribe((0,Vi.x)(s,T=>{E||(E=!0,_--),d[b]=T},()=>p--,void 0,()=>{(!p||!E)&&(_||s.next(i?N2(i,d):d),s.complete())}))}});return t?r.pipe($O(t)):r}let JH=(()=>{class n{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.Qsj),l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n}),n})(),fg=(()=>{class n extends JH{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=l.n5z(n)))(i||n)}}(),n.\u0275dir=l.lG2({type:n,features:[l.qOj]}),n})();const Cs=new l.OlP("NgValueAccessor"),RK={provide:Cs,useExisting:(0,l.Gpc)(()=>wv),multi:!0},PK=new l.OlP("CompositionEventMode");let wv=(()=>{class n extends JH{constructor(e,i,r){super(e,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function OK(){const n=P()?P().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.Qsj),l.Y36(l.SBq),l.Y36(PK,8))},n.\u0275dir=l.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,i){1&e&&l.NdJ("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[l._Bn([RK]),l.qOj]}),n})();function Tf(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function tj(n){return null!=n&&"number"==typeof n.length}const Wr=new l.OlP("NgValidators"),Af=new l.OlP("NgAsyncValidators"),FK=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Kl{static min(t){return function nj(n){return t=>{if(Tf(t.value)||Tf(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}(t)}static max(t){return function ij(n){return t=>{if(Tf(t.value)||Tf(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}(t)}static required(t){return rj(t)}static requiredTrue(t){return function sj(n){return!0===n.value?null:{required:!0}}(t)}static email(t){return function oj(n){return Tf(n.value)||FK.test(n.value)?null:{email:!0}}(t)}static minLength(t){return function aj(n){return t=>Tf(t.value)||!tj(t.value)?null:t.value.length<n?{minlength:{requiredLength:n,actualLength:t.value.length}}:null}(t)}static maxLength(t){return function lj(n){return t=>tj(t.value)&&t.value.length>n?{maxlength:{requiredLength:n,actualLength:t.value.length}}:null}(t)}static pattern(t){return function cj(n){if(!n)return cS;let t,e;return"string"==typeof n?(e="","^"!==n.charAt(0)&&(e+="^"),e+=n,"$"!==n.charAt(n.length-1)&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),i=>{if(Tf(i.value))return null;const r=i.value;return t.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}(t)}static nullValidator(t){return null}static compose(t){return mj(t)}static composeAsync(t){return gj(t)}}function rj(n){return Tf(n.value)?{required:!0}:null}function cS(n){return null}function uj(n){return null!=n}function dj(n){return(0,l.QGY)(n)?(0,_n.D)(n):n}function hj(n){let t={};return n.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function fj(n,t){return t.map(e=>e(n))}function pj(n){return n.map(t=>function LK(n){return!n.validate}(t)?t:e=>t.validate(e))}function mj(n){if(!n)return null;const t=n.filter(uj);return 0==t.length?null:function(e){return hj(fj(e,t))}}function t1(n){return null!=n?mj(pj(n)):null}function gj(n){if(!n)return null;const t=n.filter(uj);return 0==t.length?null:function(e){return XH(fj(e,t).map(dj)).pipe((0,Ct.U)(hj))}}function n1(n){return null!=n?gj(pj(n)):null}function _j(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function yj(n){return n._rawValidators}function vj(n){return n._rawAsyncValidators}function r1(n){return n?Array.isArray(n)?n:[n]:[]}function uS(n,t){return Array.isArray(n)?n.includes(t):n===t}function bj(n,t){const e=r1(t);return r1(n).forEach(r=>{uS(e,r)||e.push(r)}),e}function Cj(n,t){return r1(t).filter(e=>!uS(n,e))}class wj{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=t1(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=n1(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class Gs extends wj{get formDirective(){return null}get path(){return null}}class wd extends wj{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Dj{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let dS=(()=>{class n extends Dj{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(wd,2))},n.\u0275dir=l.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,i){2&e&&l.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[l.qOj]}),n})(),Ww=(()=>{class n extends Dj{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(Gs,10))},n.\u0275dir=l.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,i){2&e&&l.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[l.qOj]}),n})();const qw="VALID",fS="INVALID",Dv="PENDING",Yw="DISABLED";function l1(n){return(pS(n)?n.validators:n)||null}function Mj(n){return Array.isArray(n)?t1(n):n||null}function c1(n,t){return(pS(t)?t.asyncValidators:n)||null}function Ij(n){return Array.isArray(n)?n1(n):n||null}function pS(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class Tj{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=Mj(this._rawValidators),this._composedAsyncValidatorFn=Ij(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===qw}get invalid(){return this.status===fS}get pending(){return this.status==Dv}get disabled(){return this.status===Yw}get enabled(){return this.status!==Yw}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=Mj(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=Ij(t)}addValidators(t){this.setValidators(bj(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(bj(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(Cj(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(Cj(t,this._rawAsyncValidators))}hasValidator(t){return uS(this._rawValidators,t)}hasAsyncValidator(t){return uS(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Dv,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Yw,this.errors=null,this._forEachChild(i=>{i.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=qw,this._forEachChild(i=>{i.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===qw||this.status===Dv)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Yw:qw}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Dv,this._hasOwnPendingAsyncValidator=!0;const e=dj(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(t,e){const i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new l.vpe,this.statusChanges=new l.vpe}_calculateStatus(){return this._allControlsDisabled()?Yw:this.errors?fS:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Dv)?Dv:this._anyControlsHaveStatus(fS)?fS:qw}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){pS(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}}class Ql extends Tj{constructor(t,e,i){super(l1(e),c1(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){(function Sj(n,t,e){n._forEachChild((i,r)=>{if(void 0===e[r])throw new l.vHH(1002,"")})})(this,0,t),Object.keys(t).forEach(i=>{(function xj(n,t,e){const i=n.controls;if(!(t?Object.keys(i):i).length)throw new l.vHH(1e3,"");if(!i[e])throw new l.vHH(1001,"")})(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(i=>{const r=this.controls[i];r&&r.patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>!!i._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const[e,i]of Object.entries(this.controls))if(this.contains(e)&&t(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,i,r)=>((i.enabled||this.disabled)&&(e[r]=i.value),e))}_reduceChildren(t,e){let i=t;return this._forEachChild((r,s)=>{i=e(i,r,s)}),i}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}}function Zw(n,t){u1(n,t),t.valueAccessor.writeValue(n.value),n.disabled&&t.valueAccessor.setDisabledState?.(!0),function WK(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Aj(n,t)})}(n,t),function YK(n,t){const e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function qK(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Aj(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function GK(n,t){if(t.valueAccessor.setDisabledState){const e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function gS(n,t,e=!0){const i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),yS(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function _S(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function u1(n,t){const e=yj(n);null!==t.validator?n.setValidators(_j(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const i=vj(n);null!==t.asyncValidator?n.setAsyncValidators(_j(i,t.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();_S(t._rawValidators,r),_S(t._rawAsyncValidators,r)}function yS(n,t){let e=!1;if(null!==n){if(null!==t.validator){const r=yj(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(c=>c!==t.validator);s.length!==r.length&&(e=!0,n.setValidators(s))}}if(null!==t.asyncValidator){const r=vj(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(c=>c!==t.asyncValidator);s.length!==r.length&&(e=!0,n.setAsyncValidators(s))}}}const i=()=>{};return _S(t._rawValidators,i),_S(t._rawAsyncValidators,i),e}function Aj(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Pj(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}function Nj(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Ka=class extends Tj{constructor(t=null,e,i){super(l1(e),c1(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),pS(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=Nj(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Pj(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Pj(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){Nj(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};let bS=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=l.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),Hj=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();const f1=new l.OlP("NgModelWithFormControlWarning"),c7={provide:Gs,useExisting:(0,l.Gpc)(()=>kf)};let kf=(()=>{class n extends Gs{constructor(e,i){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new l.vpe,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(yS(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const i=this.form.get(e.path);return Zw(i,e),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){gS(e.control||null,e,!1),function XK(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this.submitted=!0,function Oj(n,t){n._syncPendingControls(),t.forEach(e=>{const i=e.control;"submit"===i.updateOn&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const i=e.control,r=this.form.get(e.path);i!==r&&(gS(i||null,e),(n=>n instanceof Ka)(r)&&(Zw(r,e),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const i=this.form.get(e.path);(function kj(n,t){u1(n,t)})(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const i=this.form.get(e.path);i&&function ZK(n,t){return yS(n,t)}(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){u1(this.form,this),this._oldForm&&yS(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(Wr,10),l.Y36(Af,10))},n.\u0275dir=l.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(e,i){1&e&&l.NdJ("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[l._Bn([c7]),l.qOj,l.TTD]}),n})();const h7={provide:wd,useExisting:(0,l.Gpc)(()=>Qw)};let Qw=(()=>{class n extends wd{constructor(e,i,r,s,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new l.vpe,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function h1(n,t){if(!t)return null;let e,i,r;return Array.isArray(t),t.forEach(s=>{s.constructor===wv?e=s:function QK(n){return Object.getPrototypeOf(n.constructor)===fg}(s)?i=s:r=s}),r||i||e||null}(0,s)}set isDisabled(e){}ngOnChanges(e){this._added||this._setUpControl(),function d1(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return function mS(n,t){return[...t.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(e){return new(e||n)(l.Y36(Gs,13),l.Y36(Wr,10),l.Y36(Af,10),l.Y36(Cs,10),l.Y36(f1,8))},n.\u0275dir=l.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[l._Bn([h7]),l.qOj,l.TTD]}),n})(),pg=(()=>{class n{constructor(){this._validator=cS}ngOnChanges(e){if(this.inputName in e){const i=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):cS,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return null!=e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=l.lG2({type:n,features:[l.TTD]}),n})();const C7={provide:Wr,useExisting:(0,l.Gpc)(()=>CS),multi:!0};let CS=(()=>{class n extends pg{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=l.D6c,this.createValidator=e=>rj}enabled(e){return e}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=l.n5z(n)))(i||n)}}(),n.\u0275dir=l.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(e,i){2&e&&l.uIk("required",i._enabled?"":null)},inputs:{required:"required"},features:[l._Bn([C7]),l.qOj]}),n})(),nz=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Hj]}),n})(),iz=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[nz]}),n})(),v1=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:f1,useValue:e.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[nz]}),n})(),Xw=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Mi,Pt,Bx,Pt]}),n})();const B7={provide:new l.OlP("mat-autocomplete-scroll-strategy"),deps:[mo],useFactory:function L7(n){return()=>n.scrollStrategies.reposition()}};let az=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[B7],imports:[Jc,Kx,Pt,Mi,vd,Kx,Pt]}),n})(),hz=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Pt,tu,Pt]}),n})(),fz=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Pt,Pt]}),n})(),gz=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})(),_z=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[tu,Pt,Bx,gz,Pt,gz]}),n})();const Cz=new l.OlP("mat-chips-default-options");let wz=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[jP,{provide:Cz,useValue:{separatorKeyCodes:[13]}}],imports:[Pt]}),n})(),C1=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Pt,Pt]}),n})(),vQ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})(),Ez=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Mi,Pt,vQ,Xc]}),n})();class bQ{}class Rf{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const i=e.indexOf(":");if(i>0){const r=e.slice(0,i),s=r.toLowerCase(),c=e.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(c):this.headers.set(s,[c])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let i=t[e];const r=e.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(r,i),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Rf?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Rf;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Rf?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...i),this.headers.set(e,r);break;case"d":const s=t.value;if(s){let c=this.headers.get(e);if(!c)return;c=c.filter(d=>-1===s.indexOf(d)),0===c.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,c)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class CQ{encodeKey(t){return Mz(t)}encodeValue(t){return Mz(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const DQ=/%(\d[a-f0-9])/gi,EQ={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Mz(n){return encodeURIComponent(n).replace(DQ,(t,e)=>EQ[e]??t)}function wS(n){return`${n}`}class Of{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new CQ,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function wQ(n,t){const e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[c,d]=-1==s?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,s)),t.decodeValue(r.slice(s+1))],p=e.get(c)||[];p.push(d),e.set(c,p)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const i=t.fromObject[e],r=Array.isArray(i)?i.map(wS):[wS(i)];this.map.set(e,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(i=>{const r=t[i];Array.isArray(r)?r.forEach(s=>{e.push({param:i,value:s,op:"a"})}):e.push({param:i,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new Of({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(wS(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let i=this.map.get(t.param)||[];const r=i.indexOf(wS(t.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class MQ{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function Iz(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function xz(n){return typeof Blob<"u"&&n instanceof Blob}function Sz(n){return typeof FormData<"u"&&n instanceof FormData}class Jw{constructor(t,e,i,r){let s;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function IQ(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Rf),this.context||(this.context=new MQ),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=e;else{const d=e.indexOf("?");this.urlWithParams=e+(-1===d?"?":d<e.length-1?"&":"")+c}}else this.params=new Of,this.urlWithParams=e}serializeBody(){return null===this.body?null:Iz(this.body)||xz(this.body)||Sz(this.body)||function xQ(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Of?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Sz(this.body)?null:xz(this.body)?this.body.type||null:Iz(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Of?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const e=t.method||this.method,i=t.url||this.url,r=t.responseType||this.responseType,s=void 0!==t.body?t.body:this.body,c=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,d=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let p=t.headers||this.headers,_=t.params||this.params;const b=t.context??this.context;return void 0!==t.setHeaders&&(p=Object.keys(t.setHeaders).reduce((E,T)=>E.set(T,t.setHeaders[T]),p)),t.setParams&&(_=Object.keys(t.setParams).reduce((E,T)=>E.set(T,t.setParams[T]),_)),new Jw(e,i,s,{params:_,headers:p,context:b,reportProgress:d,responseType:r,withCredentials:c})}}var os=(()=>((os=os||{})[os.Sent=0]="Sent",os[os.UploadProgress=1]="UploadProgress",os[os.ResponseHeader=2]="ResponseHeader",os[os.DownloadProgress=3]="DownloadProgress",os[os.Response=4]="Response",os[os.User=5]="User",os))();class w1 extends class SQ{constructor(t,e=200,i="OK"){this.headers=t.headers||new Rf,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(t={}){super(t),this.type=os.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new w1({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}function D1(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Az=(()=>{class n{constructor(e){this.handler=e}request(e,i,r={}){let s;if(e instanceof Jw)s=e;else{let p,_;p=r.headers instanceof Rf?r.headers:new Rf(r.headers),r.params&&(_=r.params instanceof Of?r.params:new Of({fromObject:r.params})),s=new Jw(e,i,void 0!==r.body?r.body:null,{headers:p,context:r.context,params:_,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const c=vt(s).pipe(Ef(p=>this.handler.handle(p)));if(e instanceof Jw||"events"===r.observe)return c;const d=c.pipe(Ti(p=>p instanceof w1));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return d.pipe((0,Ct.U)(p=>{if(null!==p.body&&!(p.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return p.body}));case"blob":return d.pipe((0,Ct.U)(p=>{if(null!==p.body&&!(p.body instanceof Blob))throw new Error("Response is not a Blob.");return p.body}));case"text":return d.pipe((0,Ct.U)(p=>{if(null!==p.body&&"string"!=typeof p.body)throw new Error("Response is not a string.");return p.body}));default:return d.pipe((0,Ct.U)(p=>p.body))}case"response":return d;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:(new Of).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,r={}){return this.request("PATCH",e,D1(r,i))}post(e,i,r={}){return this.request("POST",e,D1(r,i))}put(e,i,r={}){return this.request("PUT",e,D1(r,i))}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(bQ))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const AQ=["*"];let DS;function eD(n){return function kQ(){if(void 0===DS&&(DS=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(DS=n.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return DS}()?.createHTML(n)||n}function kz(n){return Error(`Unable to find icon with the name "${n}"`)}function Rz(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function Oz(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class mg{constructor(t,e,i){this.url=t,this.svgText=e,this.options=i}}let ES=(()=>{class n{constructor(e,i,r,s){this._httpClient=e,this._sanitizer=i,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(e,i,r){return this.addSvgIconInNamespace("",e,i,r)}addSvgIconLiteral(e,i,r){return this.addSvgIconLiteralInNamespace("",e,i,r)}addSvgIconInNamespace(e,i,r,s){return this._addSvgIconConfig(e,i,new mg(r,null,s))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,i,r,s){const c=this._sanitizer.sanitize(l.q3G.HTML,r);if(!c)throw Oz(r);const d=eD(c);return this._addSvgIconConfig(e,i,new mg("",d,s))}addSvgIconSet(e,i){return this.addSvgIconSetInNamespace("",e,i)}addSvgIconSetLiteral(e,i){return this.addSvgIconSetLiteralInNamespace("",e,i)}addSvgIconSetInNamespace(e,i,r){return this._addSvgIconSetConfig(e,new mg(i,null,r))}addSvgIconSetLiteralInNamespace(e,i,r){const s=this._sanitizer.sanitize(l.q3G.HTML,i);if(!s)throw Oz(i);const c=eD(s);return this._addSvgIconSetConfig(e,new mg("",c,r))}registerFontClassAlias(e,i=e){return this._fontCssClassesByAlias.set(e,i),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(...e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const i=this._sanitizer.sanitize(l.q3G.RESOURCE_URL,e);if(!i)throw Rz(e);const r=this._cachedIconsByUrl.get(i);return r?vt(MS(r)):this._loadSvgIconFromConfig(new mg(e,null)).pipe((0,li.b)(s=>this._cachedIconsByUrl.set(i,s)),(0,Ct.U)(s=>MS(s)))}getNamedSvgIcon(e,i=""){const r=Pz(i,e);let s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(i,e),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);const c=this._iconSetConfigs.get(i);return c?this._getSvgFromIconSetConfigs(e,c):av(kz(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?vt(MS(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe((0,Ct.U)(i=>MS(i)))}_getSvgFromIconSetConfigs(e,i){const r=this._extractIconWithNameFromAnySet(e,i);return r?vt(r):XH(i.filter(c=>!c.svgText).map(c=>this._loadSvgIconSetFromConfig(c).pipe(Zc(d=>{const _=`Loading icon set URL: ${this._sanitizer.sanitize(l.q3G.RESOURCE_URL,c.url)} failed: ${d.message}`;return this._errorHandler.handleError(new Error(_)),vt(null)})))).pipe((0,Ct.U)(()=>{const c=this._extractIconWithNameFromAnySet(e,i);if(!c)throw kz(e);return c}))}_extractIconWithNameFromAnySet(e,i){for(let r=i.length-1;r>=0;r--){const s=i[r];if(s.svgText&&s.svgText.toString().indexOf(e)>-1){const c=this._svgElementFromConfig(s),d=this._extractSvgIconFromSet(c,e,s.options);if(d)return d}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe((0,li.b)(i=>e.svgText=i),(0,Ct.U)(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?vt(null):this._fetchIcon(e).pipe((0,li.b)(i=>e.svgText=i))}_extractSvgIconFromSet(e,i,r){const s=e.querySelector(`[id="${i}"]`);if(!s)return null;const c=s.cloneNode(!0);if(c.removeAttribute("id"),"svg"===c.nodeName.toLowerCase())return this._setSvgAttributes(c,r);if("symbol"===c.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(c),r);const d=this._svgElementFromString(eD("<svg></svg>"));return d.appendChild(c),this._setSvgAttributes(d,r)}_svgElementFromString(e){const i=this._document.createElement("DIV");i.innerHTML=e;const r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(e){const i=this._svgElementFromString(eD("<svg></svg>")),r=e.attributes;for(let s=0;s<r.length;s++){const{name:c,value:d}=r[s];"id"!==c&&i.setAttribute(c,d)}for(let s=0;s<e.childNodes.length;s++)e.childNodes[s].nodeType===this._document.ELEMENT_NODE&&i.appendChild(e.childNodes[s].cloneNode(!0));return i}_setSvgAttributes(e,i){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),i&&i.viewBox&&e.setAttribute("viewBox",i.viewBox),e}_fetchIcon(e){const{url:i,options:r}=e,s=r?.withCredentials??!1;if(!this._httpClient)throw function RQ(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==i)throw Error(`Cannot fetch icon from URL "${i}".`);const c=this._sanitizer.sanitize(l.q3G.RESOURCE_URL,i);if(!c)throw Rz(i);const d=this._inProgressUrlFetches.get(c);if(d)return d;const p=this._httpClient.get(c,{responseType:"text",withCredentials:s}).pipe((0,Ct.U)(_=>eD(_)),hx(()=>this._inProgressUrlFetches.delete(c)),(0,_2.B)());return this._inProgressUrlFetches.set(c,p),p}_addSvgIconConfig(e,i,r){return this._svgIconConfigs.set(Pz(e,i),r),this}_addSvgIconSetConfig(e,i){const r=this._iconSetConfigs.get(e);return r?r.push(i):this._iconSetConfigs.set(e,[i]),this}_svgElementFromConfig(e){if(!e.svgElement){const i=this._svgElementFromString(e.svgText);this._setSvgAttributes(i,e.options),e.svgElement=i}return e.svgElement}_getIconConfigFromResolvers(e,i){for(let r=0;r<this._resolvers.length;r++){const s=this._resolvers[r](i,e);if(s)return PQ(s)?new mg(s.url,null,s.options):new mg(s,null)}}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Az,8),l.LFG(Ao),l.LFG(se,8),l.LFG(l.qLn))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function MS(n){return n.cloneNode(!0)}function Pz(n,t){return n+":"+t}function PQ(n){return!(!n.url||!n.options)}const NQ=Uw(class{constructor(n){this._elementRef=n}}),FQ=new l.OlP("MAT_ICON_DEFAULT_OPTIONS"),LQ=new l.OlP("mat-icon-location",{providedIn:"root",factory:function BQ(){const n=(0,l.f3M)(se),t=n?n.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}}),Nz=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],VQ=Nz.map(n=>`[${n}]`).join(", "),UQ=/^url\(['"]?#(.*?)['"]?\)$/;let Ev=(()=>{class n extends NQ{constructor(e,i,r,s,c,d){super(e),this._iconRegistry=i,this._location=s,this._errorHandler=c,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=$o.w0.EMPTY,d&&(d.color&&(this.color=this.defaultColor=d.color),d.fontSet&&(this.fontSet=d.fontSet)),r||e.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(e){this._inline=Cn(e)}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){const i=this._cleanupFontValue(e);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){const i=this._cleanupFontValue(e);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}_splitIconName(e){if(!e)return["",""];const i=e.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const e=this._elementsWithExternalReferences;if(e&&e.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){const e=this._elementRef.nativeElement;let i=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const r=e.childNodes[i];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const e=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>e.classList.remove(r)),i.forEach(r=>e.classList.add(r)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return"string"==typeof e?e.trim().split(" ")[0]:e}_prependPathToReferences(e){const i=this._elementsWithExternalReferences;i&&i.forEach((r,s)=>{r.forEach(c=>{s.setAttribute(c.name,`url('${e}#${c.value}')`)})})}_cacheChildrenWithExternalReferences(e){const i=e.querySelectorAll(VQ),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<i.length;s++)Nz.forEach(c=>{const d=i[s],p=d.getAttribute(c),_=p?p.match(UQ):null;if(_){let b=r.get(d);b||(b=[],r.set(d,b)),b.push({name:c,value:_[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){const[i,r]=this._splitIconName(e);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(Zi(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${r}! ${s.message}`))})}}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(ES),l.$8M("aria-hidden"),l.Y36(LQ),l.Y36(l.qLn),l.Y36(FQ,8))},n.\u0275cmp=l.Xpm({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(e,i){2&e&&(l.uIk("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet),l.ekj("mat-icon-inline",i.inline)("mat-icon-no-color","primary"!==i.color&&"accent"!==i.color&&"warn"!==i.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[l.qOj],ngContentSelectors:AQ,decls:1,vars:0,template:function(e,i){1&e&&(l.F$t(),l.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),n})(),Fz=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Pt,Pt]}),n})(),Lz=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})(),Bz=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[jP],imports:[Lz,Xw,Pt,Lz,Xw]}),n})(),Uz=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Zx,tu,Pt,$P,Mi,Zx,Pt,$P,C1]}),n})();const s9={provide:new l.OlP("mat-menu-scroll-strategy"),deps:[mo],useFactory:function r9(n){return()=>n.scrollStrategies.reposition()}};let IS=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[s9],imports:[Mi,Pt,tu,Jc,vd,Pt]}),n})();const u9={provide:new l.OlP("mat-select-scroll-strategy"),deps:[mo],useFactory:function c9(n){return()=>n.scrollStrategies.reposition()}};let E1=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[u9],imports:[Mi,Jc,Kx,Pt,vd,Xw,Kx,Pt]}),n})();const p9={provide:new l.OlP("mat-tooltip-scroll-strategy"),deps:[mo],useFactory:function f9(n){return()=>n.scrollStrategies.reposition({scrollThrottle:20})}};let M1=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[p9],imports:[Ow,Mi,Jc,Pt,Pt,vd]}),n})(),I1=(()=>{class n{constructor(){this.changes=new Ut.x,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(e,i,r)=>{if(0==r||0==i)return`0 of ${r}`;const s=e*i;return`${s+1} \u2013 ${s<(r=Math.max(r,0))?Math.min(s+i,r):s+i} of ${r}`}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const b9={provide:I1,deps:[[new l.FiY,new l.tp0,I1]],useFactory:function v9(n){return n||new I1}};let zz=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[b9],imports:[Mi,zw,E1,M1,Pt]}),n})();function C9(n,t){if(1&n&&(l.O4$(),l._UZ(0,"circle",4)),2&n){const e=l.oxw(),i=l.MAs(1);l.Udp("animation-name","mat-progress-spinner-stroke-rotate-"+e._spinnerAnimationLabel)("stroke-dashoffset",e._getStrokeDashOffset(),"px")("stroke-dasharray",e._getStrokeCircumference(),"px")("stroke-width",e._getCircleStrokeWidth(),"%")("transform-origin",e._getCircleTransformOrigin(i)),l.uIk("r",e._getCircleRadius())}}function w9(n,t){if(1&n&&(l.O4$(),l._UZ(0,"circle",4)),2&n){const e=l.oxw(),i=l.MAs(1);l.Udp("stroke-dashoffset",e._getStrokeDashOffset(),"px")("stroke-dasharray",e._getStrokeCircumference(),"px")("stroke-width",e._getCircleStrokeWidth(),"%")("transform-origin",e._getCircleTransformOrigin(i)),l.uIk("r",e._getCircleRadius())}}const E9=Uw(class{constructor(n){this._elementRef=n}},"primary"),M9=new l.OlP("mat-progress-spinner-default-options",{providedIn:"root",factory:function I9(){return{diameter:100}}});class Pf extends E9{constructor(t,e,i,r,s,c,d,p){super(t),this._document=i,this._diameter=100,this._value=0,this._resizeSubscription=$o.w0.EMPTY,this.mode="determinate";const _=Pf._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),_.has(i.head)||_.set(i.head,new Set([100])),this._noopAnimations="NoopAnimations"===r&&!!s&&!s._forceAnimations,"mat-spinner"===t.nativeElement.nodeName.toLowerCase()&&(this.mode="indeterminate"),s&&(s.color&&(this.color=this.defaultColor=s.color),s.diameter&&(this.diameter=s.diameter),s.strokeWidth&&(this.strokeWidth=s.strokeWidth)),e.isBrowser&&e.SAFARI&&d&&c&&p&&(this._resizeSubscription=d.change(150).subscribe(()=>{"indeterminate"===this.mode&&p.run(()=>c.markForCheck())}))}get diameter(){return this._diameter}set diameter(t){this._diameter=yd(t),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(t){this._strokeWidth=yd(t)}get value(){return"determinate"===this.mode?this._value:0}set value(t){this._value=Math.max(0,Math.min(100,yd(t)))}ngOnInit(){const t=this._elementRef.nativeElement;this._styleRoot=WU(t)||this._document.head,this._attachStyleNode(),t.classList.add("mat-progress-spinner-indeterminate-animation")}ngOnDestroy(){this._resizeSubscription.unsubscribe()}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const t=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${t} ${t}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_getCircleTransformOrigin(t){const e=50*(t.currentScale??1);return`${e}% ${e}%`}_attachStyleNode(){const t=this._styleRoot,e=this._diameter,i=Pf._diameters;let r=i.get(t);if(!r||!r.has(e)){const s=this._document.createElement("style");s.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),s.textContent=this._getAnimationText(),t.appendChild(s),r||(r=new Set,i.set(t,r)),r.add(e)}}_getAnimationText(){const t=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*t).replace(/END_VALUE/g,""+.2*t).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}Pf._diameters=new WeakMap,Pf.\u0275fac=function(t){return new(t||Pf)(l.Y36(l.SBq),l.Y36(bs),l.Y36(se,8),l.Y36(l.QbO,8),l.Y36(M9),l.Y36(l.sBO),l.Y36(Fw),l.Y36(l.R0b))},Pf.\u0275cmp=l.Xpm({type:Pf,selectors:[["mat-progress-spinner"],["mat-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner","mat-spinner"],hostVars:10,hostBindings:function(t,e){2&t&&(l.uIk("aria-valuemin","determinate"===e.mode?0:null)("aria-valuemax","determinate"===e.mode?100:null)("aria-valuenow","determinate"===e.mode?e.value:null)("mode",e.mode),l.Udp("width",e.diameter,"px")("height",e.diameter,"px"),l.ekj("_mat-animation-noopable",e._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[l.qOj],decls:4,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["svg",""],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(t,e){1&t&&(l.O4$(),l.TgZ(0,"svg",0,1),l.YNc(2,C9,1,11,"circle",2),l.YNc(3,w9,1,9,"circle",3),l.qZA()),2&t&&(l.Udp("width",e.diameter,"px")("height",e.diameter,"px"),l.Q6J("ngSwitch","indeterminate"===e.mode),l.uIk("viewBox",e._getViewBox()),l.xp6(2),l.Q6J("ngSwitchCase",!0),l.xp6(1),l.Q6J("ngSwitchCase",!1))},dependencies:[wo,tc],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:rgba(0,0,0,0);transition:stroke-dashoffset 225ms linear}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}.mat-progress-spinner[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}.mat-progress-spinner._mat-animation-noopable svg,.mat-progress-spinner._mat-animation-noopable circle{animation:none;transition:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}"],encapsulation:2,changeDetection:0});let $z=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Pt,Mi,Pt]}),n})(),Gz=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Mi,Pt,vd,vd,Pt]}),n})(),S1=(()=>{class n{constructor(){this.changes=new Ut.x}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const A9={provide:S1,deps:[[new l.FiY,new l.tp0,S1]],useFactory:function T9(n){return n||new S1}};let Wz=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[A9],imports:[Mi,Pt]}),n})(),$9=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[PP]}),n})(),r3=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[$9,Pt,Pt]}),n})(),s3=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Mi,Pt,Xc,tu,Bx,Ow,Pt]}),n})(),o3=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Pt,Pt]}),n})(),a3=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[e1,Pt,Pt]}),n})(),l3=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Ow,Pt,Pt]}),n})(),u3=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Zx,Pt,Zx,Pt]}),n})(),p3=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[tu,Pt,Pt]}),n})(),NX=(()=>{class n{constructor(){this.changes=new Ut.x,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.closeCalendarLabel="Close calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 24 years",this.nextMultiYearLabel="Next 24 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year",this.startDateLabel="Start date",this.endDateLabel="End date"}formatYearRange(e,i){return`${e} \u2013 ${i}`}formatYearRangeLabel(e,i){return`${e} to ${i}`}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const GX={provide:new l.OlP("mat-datepicker-scroll-strategy"),deps:[mo],useFactory:function $X(n){return()=>n.scrollStrategies.reposition()}};let y3=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[NX,GX],imports:[Mi,zw,Jc,Ow,Xc,Pt,vd]}),n})(),v3=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Mi,Pt,Pt]}),n})();const QX=[e1,az,zw,fz,_z,wz,C1,Ez,Fz,Bz,Uz,IS,$z,zz,tu,WH,E1,Gz,qP,Wz,r3,s3,o3,Xw,hz,a3,Jc,Xc,iz,l3,u3,p3,y3,M1,kH,IS,v3,v1];let XX=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Mi,QX,e1,az,zw,fz,_z,wz,C1,Ez,Fz,Bz,Uz,IS,$z,zz,tu,WH,E1,Gz,qP,Wz,r3,s3,o3,Xw,hz,a3,Jc,Xc,iz,l3,u3,p3,y3,M1,kH,IS,v3,v1]}),n})(),JX=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["sidebar-content-profile"]],decls:32,vars:0,consts:[[1,"profile-container"],[1,"title"],[1,"user-profile"],["src","https://picsum.photos/200","alt","",1,"user-img"],[1,"status"],[1,"user-name"],[1,"personal-info"]],template:function(e,i){1&e&&(l.TgZ(0,"div",0)(1,"div",1),l._uU(2,"Profile"),l.qZA(),l.TgZ(3,"div",2),l._UZ(4,"img",3),l.TgZ(5,"div",4)(6,"div"),l._uU(7,"Online"),l.qZA()(),l.TgZ(8,"div",5),l._uU(9,"Duc Phuong"),l.qZA()(),l.TgZ(10,"div",6)(11,"table")(12,"tr")(13,"td"),l._uU(14,"Phone number:"),l.qZA(),l.TgZ(15,"td"),l._uU(16,"0968 267 621"),l.qZA()(),l.TgZ(17,"tr")(18,"td"),l._uU(19,"Date of birth:"),l.qZA(),l.TgZ(20,"td"),l._uU(21,"21st March"),l.qZA()(),l.TgZ(22,"tr")(23,"td"),l._uU(24,"Email:"),l.qZA(),l.TgZ(25,"td"),l._uU(26,"dphuong2103@gmail.com"),l.qZA()(),l.TgZ(27,"tr")(28,"td"),l._uU(29,"Gender:"),l.qZA(),l.TgZ(30,"td"),l._uU(31,"Male"),l.qZA()()()()())},styles:[".profile-container[_ngcontent-%COMP%]{height:100vh;display:flex;flex-direction:column;width:100%}.title[_ngcontent-%COMP%]{color:#1273eb;font-size:2em;padding:.5em 1em 0}.user-profile[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column}.user-profile[_ngcontent-%COMP%]   .user-img[_ngcontent-%COMP%]{width:7rem;height:7rem;border-radius:50%}.user-profile[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{padding:.5rem 0 0;color:green;font-style:italic;font-weight:200}.user-profile[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{padding:1rem;font-weight:500}.personal-info[_ngcontent-%COMP%]{display:flex;justify-content:center}.personal-info[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:.9rem;padding:10px}"]}),n})(),b3=(()=>{class n{constructor(){this._subscription=new $o.w0}ngOnDestroy(){this._subscription.unsubscribe()}set anotherSubscription(e){this._subscription.add(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),iD=(()=>{class n extends b3{constructor(e,i){super(),this.manipulateDB=e,this.auth=i,this.contactsSubject=new Ui([]),this.isShowChatRoom=new Ui(!0),this.chatRoomNUserInfoSubject=new Ui([]),this.chatRoomNUserInfoTestSubject=new Ui([])}getContacts(){this.anotherSubscription=this.manipulateDB.getContacts(this.auth.currentUserID()).subscribe(e=>this.contactsSubject.next(e))}selectContact(e,i){this.anotherSubscription=this.manipulateDB.openChatRoomInContacts(e,i).subscribe()}getMessages(e){this.anotherSubscription=this.manipulateDB.getChatMessage(e).subscribe()}getCurrentChatRoomID(){return this.manipulateDB.currentChatRoom$.value}updateIsShowChatRoom(e){this.isShowChatRoom.next(e)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Sf),l.LFG(nu))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function eJ(n,t){if(1&n&&(l.ynx(0),l.TgZ(1,"div",18)(2,"span"),l._uU(3),l.qZA()(),l.BQk()),2&n){const e=l.oxw(2).$implicit;l.xp6(3),l.hij(" ",e.members[0]._displayName," ")}}function tJ(n,t){if(1&n){const e=l.EpF();l.ynx(0),l.TgZ(1,"a",11),l.NdJ("click",function(){l.CHM(e);const r=l.oxw().$implicit,s=l.oxw(2);return l.KtG(s.selectChatRoom(r.chatRoom._id,r))}),l._UZ(2,"img",12),l.TgZ(3,"div",13),l.YNc(4,eJ,4,1,"ng-container",7),l.TgZ(5,"div",14)(6,"span"),l._uU(7),l.qZA()()(),l.TgZ(8,"div",15)(9,"div",16),l._uU(10,"7"),l.qZA(),l.TgZ(11,"div",17)(12,"span"),l._uU(13,"5 mins"),l.qZA()()()(),l.BQk()}if(2&n){const e=l.oxw().$implicit;l.xp6(2),l.s9C("src",e.members[0]._photoURL,l.LSH),l.xp6(2),l.Q6J("ngIf",e.members[0]),l.xp6(3),l.hij(" ",e.chatRoom._lastMessage._message," ")}}function nJ(n,t){if(1&n&&(l.TgZ(0,"li",10),l.YNc(1,tJ,14,3,"ng-container",7),l.qZA()),2&n){const e=t.$implicit;l.xp6(1),l.Q6J("ngIf","ONE"==(null==e._chatRoom?null:e._chatRoom._type))}}function iJ(n,t){if(1&n&&(l.ynx(0),l.TgZ(1,"ul",8),l.YNc(2,nJ,2,1,"li",9),l.qZA(),l.BQk()),2&n){const e=t.ngIf;l.xp6(2),l.Q6J("ngForOf",e)}}let rJ=(()=>{class n{constructor(e,i,r,s){this.manipulateDB=e,this.db=i,this.auth=r,this.getData=s}ngOnInit(){this.getChatRooms()}getChatRooms(){this.chatRoomsNUserInfo$=this.manipulateDB.chatRoomsNUserInfo$?.asObservable()}log(){}selectChatRoom(e,i){console.log("123"),this.getData.updateIsShowChatRoom(!0),this.manipulateDB.getChatMessage(e).subscribe(),this.manipulateDB.selectedChatRoomNUserInfoSubject.next(i)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(Sf),l.Y36(ov),l.Y36(nu),l.Y36(iD))},n.\u0275cmp=l.Xpm({type:n,selectors:[["sidebar-content-chat-list"]],decls:13,vars:3,consts:[[1,"chatList-container"],[1,"title"],[1,"search-section"],[1,"search-container"],["type","text","placeholder","Search Chat"],[1,"title-2"],[1,"chatList-section"],[4,"ngIf"],[1,"chatList"],["class","message-container",4,"ngFor","ngForOf"],[1,"message-container"],[1,"message-wrapper",3,"click"],[1,"message-avatar",3,"src"],[1,"message-content"],[1,"last-message"],[1,"message-more-info"],[1,"numberof-unseen-message"],[1,"last-message-time"],[1,"name"]],template:function(e,i){1&e&&(l.TgZ(0,"div",0)(1,"div",1),l._uU(2,"Chats"),l.qZA(),l.TgZ(3,"div",2)(4,"div",3)(5,"mat-icon"),l._uU(6,"search"),l.qZA(),l._UZ(7,"input",4),l.qZA()(),l.TgZ(8,"div",5),l._uU(9,"Recent"),l.qZA(),l.TgZ(10,"div",6),l.YNc(11,iJ,3,1,"ng-container",7),l.ALo(12,"async"),l.qZA()()),2&e&&(l.xp6(11),l.Q6J("ngIf",l.lcZ(12,1,i.chatRoomsNUserInfo$)))},dependencies:[ls,Yn,Ev,nc],styles:[".chatList-container[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;width:100%}.chatList-container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#1273eb;font-size:2em;padding:.5em 1em 0}.search-section[_ngcontent-%COMP%]{padding:1em}.search-section[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]{display:flex;align-items:center;border-radius:5px;background:white;padding:.5em}.search-section[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{background:white}.search-section[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;outline:none;font-weight:lighter}.search-section[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#1185e0}.chatList-container[_ngcontent-%COMP%]   .title-2[_ngcontent-%COMP%]{font-size:1.5rem}.chatList-section[_ngcontent-%COMP%]   .chatList[_ngcontent-%COMP%]{padding:0;list-style-type:none}.chatList-section[_ngcontent-%COMP%]   .message-container[_ngcontent-%COMP%]{padding:.5em 1em;display:flex;border-bottom:1px solid rgb(204,222,228)}.chatList-section[_ngcontent-%COMP%]   .message-container.active[_ngcontent-%COMP%]{background-color:#c5d4f0}.chatList-section[_ngcontent-%COMP%]   .message-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{cursor:pointer}.chatList-section[_ngcontent-%COMP%]   .message-container[_ngcontent-%COMP%]:not(.active):hover{background-color:#f0f4fb}.chatList-section[_ngcontent-%COMP%]   .message-wrapper[_ngcontent-%COMP%]{text-decoration:none;color:#000;display:flex;align-items:center;justify-content:space-around;width:100%}.chatList-section[_ngcontent-%COMP%]   .message-avatar[_ngcontent-%COMP%]{background-color:#00f;min-height:2.5rem;min-width:2.5rem;border-radius:50%;max-width:2.5rem;max-height:2.5rem}.chatList-section[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:5px;min-width:0;max-width:90%}.chatList-section[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:.9rem;white-space:nowrap;word-wrap:break-word;font-weight:lighter;text-overflow:ellipsis;font-weight:500;overflow:hidden}.chatList-section[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]   .last-message[_ngcontent-%COMP%]{font-size:.9rem;white-space:nowrap;word-wrap:break-word;font-weight:lighter;text-overflow:ellipsis;overflow:hidden}.chatList-section[_ngcontent-%COMP%]   .message-more-info[_ngcontent-%COMP%]{margin-left:auto;display:flex;flex-direction:column;align-items:center;justify-content:center;white-space:normal;padding:10px}.chatList-section[_ngcontent-%COMP%]   .message-more-info[_ngcontent-%COMP%]   .numberof-unseen-message[_ngcontent-%COMP%]{background-color:#1273eb;width:1.5em;height:1.5em;text-align:center;border-radius:50%;color:#fff}.chatList-section[_ngcontent-%COMP%]   .message-more-info[_ngcontent-%COMP%]   .last-message-time[_ngcontent-%COMP%]{white-space:nowrap;font-weight:lighter;font-size:.7rem}@media (min-width: 768px){.chatList-container[_ngcontent-%COMP%]{width:20rem}}"]}),n})(),sJ=(()=>{class n{constructor(e,i){this.auth=e,this.router=i}canActivateChild(e,i){return this.auth.isLoggedIn()?this.auth.isLoggedIn():this.router.createUrlTree(["/loginPage"])}canActivate(e,i){return this.auth.isLoggedIn()?this.auth.isLoggedIn():this.router.createUrlTree(["/loginPage"])}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(nu),l.LFG(Hi))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function oJ(n,t){if(1&n){const e=l.EpF();l.ynx(0),l.TgZ(1,"div",10)(2,"button",11),l.NdJ("click",function(){l.CHM(e);const r=l.oxw(2);return l.KtG(r.getData.updateIsShowChatRoom(!1))}),l.TgZ(3,"mat-icon"),l._uU(4,"keyboard_backspace"),l.qZA()(),l._UZ(5,"img",12),l.TgZ(6,"div",13)(7,"div",14),l._uU(8),l.qZA()(),l.TgZ(9,"div",15)(10,"a"),l._UZ(11,"img",16),l.qZA(),l.TgZ(12,"a"),l._UZ(13,"img",17),l.qZA()()(),l.BQk()}if(2&n){const e=l.oxw().ngIf;l.xp6(5),l.s9C("src",e.members[0]._photoURL,l.LSH),l.xp6(3),l.hij(" ",e.members[0]._displayName," ")}}function aJ(n,t){if(1&n&&(l.ynx(0),l.YNc(1,oJ,14,2,"ng-container",1),l.BQk()),2&n){const e=t.ngIf;l.xp6(1),l.Q6J("ngIf","ONE"==(null==e._chatRoom?null:e._chatRoom._type))}}const lJ=function(n,t){return{right:n,left:t,chat:!0}};function cJ(n,t){if(1&n&&(l.TgZ(0,"li",20)(1,"div",21),l._UZ(2,"img",22),l.qZA(),l.TgZ(3,"div",23)(4,"p"),l._uU(5),l.qZA(),l.TgZ(6,"div",24),l._uU(7," 08:57 "),l.TgZ(8,"span"),l._uU(9,"\u2713"),l.qZA()()()()),2&n){const e=t.$implicit,i=l.oxw(3);l.Q6J("ngClass",l.WLB(2,lJ,e._senderID==i.auth.currentUserID(),e._senderID!==i.auth.currentUserID())),l.xp6(5),l.hij(" ",e._message," ")}}function uJ(n,t){if(1&n&&(l.ynx(0),l.TgZ(1,"ul",18),l.YNc(2,cJ,10,5,"li",19),l.qZA(),l.BQk()),2&n){const e=l.oxw().ngIf;l.xp6(2),l.Q6J("ngForOf",e)}}function dJ(n,t){if(1&n&&(l.ynx(0),l.YNc(1,uJ,3,1,"ng-container",1),l.BQk()),2&n){const e=t.ngIf;l.xp6(1),l.Q6J("ngIf",e[0])}}let hJ=(()=>{class n{constructor(e,i,r){this.getData=e,this.manipulateDB=i,this.auth=r,this.messageForm=new Ql({})}ngOnInit(){this.messages$=this.manipulateDB.messagesSubject.asObservable(),this.createMessageForm(),this.selectedChatRoomNUserInfo$=this.manipulateDB.selectedChatRoomNUserInfoSubject.asObservable()}createMessageForm(){this.messageForm=new Ql({_message:new Ka(null,[Kl.required])})}sendMessage(){if(this.messageForm.valid){let e=iS.newMessage(this.auth.currentUserID(),this.messageForm?.value._message);this.messageForm?.controls._message.setValue(""),this.manipulateDB.createMessage(this.manipulateDB.currentChatRoom$.value,e)}}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(iD),l.Y36(Sf),l.Y36(nu))},n.\u0275cmp=l.Xpm({type:n,selectors:[["homepage-chatroom"]],decls:15,vars:7,consts:[[1,"chat-room-container"],[4,"ngIf"],[1,"chat-section"],[1,"chat-container-scroll"],[3,"formGroup","ngSubmit"],[1,"action-bar"],["placeholder","Type your message...","formControlName","_message",1,"message"],["src","../assets/imgs/emoji.svg",1,"select-emoji","icon"],["src","../assets/imgs/attach.svg",1,"attach","icon"],["type","submit",1,"submit"],[1,"info-bar"],[1,"btn-back",3,"click"],["alt","34",1,"message-avatar",3,"src"],[1,"info"],[1,"name"],[1,"action-menu"],["src","../assets/imgs/video-call.svg","alt","video"],["src","../assets/imgs/call.svg","alt","video"],[1,"chat-box"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"chat-avatar"],["src","https://picsum.photos/200",1,"chat-avatar-img"],[1,"chat-text"],[1,"chat-hour"]],template:function(e,i){1&e&&(l.TgZ(0,"div",0),l.YNc(1,aJ,2,1,"ng-container",1),l.ALo(2,"async"),l.TgZ(3,"div",2)(4,"div",3),l.YNc(5,dJ,2,1,"ng-container",1),l.ALo(6,"async"),l.qZA()(),l.TgZ(7,"form",4),l.NdJ("ngSubmit",function(){return i.sendMessage()}),l.TgZ(8,"div",5),l._UZ(9,"input",6)(10,"img",7)(11,"img",8),l.TgZ(12,"button",9)(13,"mat-icon"),l._uU(14,"send"),l.qZA()()()()()),2&e&&(l.xp6(1),l.Q6J("ngIf",l.lcZ(2,3,i.selectedChatRoomNUserInfo$)),l.xp6(4),l.Q6J("ngIf",l.lcZ(6,5,i.messages$)),l.xp6(2),l.Q6J("formGroup",i.messageForm))},dependencies:[Mn,ls,Yn,Ev,bS,wv,dS,Ww,kf,Qw,nc],styles:[".chat-room-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;width:100%;position:relative;grid-auto-flow:hidden}.info-bar[_ngcontent-%COMP%]{padding:1rem;display:flex;align-items:center;gap:.7rem;border-bottom:1px solid lightblue}.info-bar[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{background-color:transparent;border:none}.info-bar[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]:hover{cursor:pointer;color:pink}.info-bar[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}.info-bar[_ngcontent-%COMP%]   .message-avatar[_ngcontent-%COMP%]{width:3rem;height:3rem;border-radius:50%}.info-bar[_ngcontent-%COMP%]   .message-avatar[_ngcontent-%COMP%]:hover{cursor:pointer}.info-bar[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{margin-right:auto}.info-bar[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-weight:500}.info-bar[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .isTyping[_ngcontent-%COMP%]{font-weight:lighter;font-style:italic;font-size:.8rem}.info-bar[_ngcontent-%COMP%]   .action-menu[_ngcontent-%COMP%]{margin-left:auto;display:flex;gap:.5rem;padding:0 0 0 1em}.info-bar[_ngcontent-%COMP%]   .action-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{box-sizing:content-box;padding:10px;border-radius:50%;box-shadow:0 0 20px -10px #add8e6}.info-bar[_ngcontent-%COMP%]   .action-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:var(--lightblue2)}.info-bar[_ngcontent-%COMP%]   .action-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:1.5rem;width:1.5rem}.chat-section[_ngcontent-%COMP%]{overflow:hidden;flex:1}.chat-section[_ngcontent-%COMP%]   .chat-container-scroll[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column}.chat-section[_ngcontent-%COMP%]   .chat-box[_ngcontent-%COMP%]{overflow-y:auto;list-style-type:none;padding:0rem 1rem;display:flex;flex-direction:column-reverse}.chat-section[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:1em 0}.chat-section[_ngcontent-%COMP%]   .chat.right[_ngcontent-%COMP%]{justify-content:end;flex-direction:row-reverse}.chat-section[_ngcontent-%COMP%]   .chat.right[_ngcontent-%COMP%]   .chat-text[_ngcontent-%COMP%]{background-color:var(--lightgray)}.chat-section[_ngcontent-%COMP%]   .chat.right[_ngcontent-%COMP%]   .chat-hour[_ngcontent-%COMP%]{text-align:right}.chat-section[_ngcontent-%COMP%]   .chat-text[_ngcontent-%COMP%]{padding:.5rem;background-color:var(--lightblue);border-radius:5px;max-width:70%}.chat-section[_ngcontent-%COMP%]   .chat-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:4px}.chat-section[_ngcontent-%COMP%]   .chat-text[_ngcontent-%COMP%]   .chat-hour[_ngcontent-%COMP%]{font-size:.75rem;color:#8796af}.chat-section[_ngcontent-%COMP%]   .chat-avatar[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem}.chat-section[_ngcontent-%COMP%]   .chat-avatar[_ngcontent-%COMP%]   .chat-avatar-img[_ngcontent-%COMP%]{width:2rem;height:2rem;width:2.5rem;height:2.5rem;border-radius:50%}.action-bar[_ngcontent-%COMP%]{background-color:#fff;margin-top:auto;border-top:1px solid lightblue;padding:1em;display:flex;gap:.2em;align-items:center}.action-bar[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{padding:.5em;flex:1;border-radius:10px;outline:none;border:none;width:max(80%,10rem);resize:none}.action-bar[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]{background-color:transparent;border:none}.action-bar[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], .action-bar[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{background-color:transparent;box-sizing:content-box;width:1.5rem;height:1.5rem;border-radius:20%;padding:10px}.action-bar[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]:hover, .action-bar[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:var(--lightblue2)}.action-bar[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-left:auto}.action-bar[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]:hover{color:#e2f2f8}@media (min-width: 768px){.btn-back[_ngcontent-%COMP%]{display:none}}"]}),n})(),fJ=(()=>{class n{constructor(e,i){this.auth=e,this.router=i,this.menuLink={chatList:"chat",profile:"profile",contact:"contact",friends:"friend"}}ngOnInit(){}signOut(){this.auth.signOut()}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(nu),l.Y36(Hi))},n.\u0275cmp=l.Xpm({type:n,selectors:[["homepage-sidebar"]],decls:13,vars:0,consts:[[1,"sidebar-container"],["src","../assets/imgs/logo.svg","alt","",1,"logo"],[1,"menu"],["routerLinkActive","active-link","routerLink","chat"],["src","assets/imgs/home.svg","alt","",1,"menu-item-img"],["routerLink","profile","routerLinkActive","active-link"],["src","assets/imgs/profile.svg","alt","",1,"menu-item-img"],["routerLinkActive","active-link","routerLink","contact"],["src","assets/imgs/contact.svg","alt","",1,"menu-item-img"],["routerLinkActive","active-link"],["src","assets/imgs/friends.svg","alt","",1,"menu-item-img"],["routerLinkActive","active-link",3,"click"],["src","assets/imgs/settings.svg","alt","",1,"menu-item-img"]],template:function(e,i){1&e&&(l.TgZ(0,"div",0),l._UZ(1,"img",1),l.TgZ(2,"div",2)(3,"a",3),l._UZ(4,"img",4),l.qZA(),l.TgZ(5,"a",5),l._UZ(6,"img",6),l.qZA(),l.TgZ(7,"a",7),l._UZ(8,"img",8),l.qZA(),l.TgZ(9,"a",9),l._UZ(10,"img",10),l.qZA(),l.TgZ(11,"a",11),l.NdJ("click",function(){return i.signOut()}),l._UZ(12,"img",12),l.qZA()()())},dependencies:[pv,FU],styles:[".sidebar-container[_ngcontent-%COMP%]{height:100%;background-color:#fff;display:flex;padding:2em;flex-direction:column;align-items:center;max-width:5rem}.sidebar-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:3rem;height:3rem;margin-bottom:4rem}.sidebar-container[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;gap:1rem}.sidebar-container[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{box-sizing:content-box;width:1.5rem;height:1.5rem;padding:1rem;display:flex;align-items:center;justify-content:center;border-radius:50%}.sidebar-container[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%] > *.active-link[_ngcontent-%COMP%]{background-color:var(--lightblue)}.sidebar-container[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:hover{cursor:pointer}.sidebar-container[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   .menu-item-img[_ngcontent-%COMP%]{width:1rem;height:1rem}"]}),n})(),pJ=(()=>{class n{constructor(e){this.router=e}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(Hi))},n.\u0275cmp=l.Xpm({type:n,selectors:[["homepage-sidebar-content"]],decls:2,vars:0,consts:[[1,"sidebar-content-container"]],template:function(e,i){1&e&&(l.TgZ(0,"div",0),l._UZ(1,"router-outlet"),l.qZA())},dependencies:[Iw],styles:[".sidebar-content-container[_ngcontent-%COMP%]{display:flex;flex-direction:row}router-outlet[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{background-color:red}"]}),n})();function mJ(n,t){1&n&&l.GkF(0)}const C3=function(n){return{isHidden:n}},gJ=function(n){return{isHidden:n,"sidebar-content":!0}};let _J=(()=>{class n extends b3{constructor(e,i,r){super(),this.auth=e,this.getData=i,this.manipulateDB=r}ngOnInit(){this.getChatRooms(),this.getContacts()}getContacts(){this.getData.getContacts()}getChatRooms(){console.log(123),this.anotherSubscription=this.manipulateDB.getUserChatRoomInfo(this.auth.currentUserID()).subscribe()}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(nu),l.Y36(iD),l.Y36(Sf))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-home-page"]],features:[l.qOj],decls:8,vars:15,consts:[[1,"home-page-container"],[3,"ngClass"],[4,"ngIf"]],template:function(e,i){1&e&&(l.TgZ(0,"div",0),l._UZ(1,"homepage-sidebar",1),l.ALo(2,"async"),l._UZ(3,"homepage-sidebar-content",1),l.ALo(4,"async"),l._UZ(5,"homepage-chatroom",1),l.ALo(6,"async"),l.qZA(),l.YNc(7,mJ,1,0,"ng-container",2)),2&e&&(l.xp6(1),l.Q6J("ngClass",l.VKq(9,C3,l.lcZ(2,3,i.getData.isShowChatRoom.asObservable()))),l.xp6(2),l.Q6J("ngClass",l.VKq(11,gJ,l.lcZ(4,5,i.getData.isShowChatRoom.asObservable()))),l.xp6(2),l.Q6J("ngClass",l.VKq(13,C3,!l.lcZ(6,7,i.getData.isShowChatRoom.asObservable()))))},dependencies:[Mn,Yn,hJ,fJ,pJ,nc],styles:[".home-page-container[_ngcontent-%COMP%]{height:100vh;width:100%;display:flex}.home-page-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:last-child{flex:1}.home-page-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(2){flex:1;min-width:0}.isHidden[_ngcontent-%COMP%]{display:none}.sidebar-content[_ngcontent-%COMP%]{background-color:var(--sidebarContent_lightblue)}@media (min-width: 768px){.isHidden[_ngcontent-%COMP%]{display:flex}.home-page-container[_ngcontent-%COMP%]{height:100vh;width:100%;display:flex}.home-page-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(2){display:flex;flex:0;min-width:20rem}}"]}),n})();const yJ=function(n,t){return{toast:!0,show:n,hide:t}};let w3=(()=>{class n{constructor(){this.toast={isShown:!1,message:"",title:"",time:0}}ngOnInit(){}showToast(e){e.isShown=!0,this.toast=e,setTimeout(()=>{this.toast.isShown=!1},e.time)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["toast"]],decls:8,vars:6,consts:[[1,"position-fixed","bottom-0","end-0","p-3",2,"z-index","11"],["id","liveToast","role","alert","aria-live","assertive","aria-atomic","true",3,"ngClass"],[1,"toast-header"],[1,"toast-title"],["type","button","data-bs-dismiss","toast","aria-label","Close",1,"btn-close","ms-auto","text-white"],[1,"toast-body"]],template:function(e,i){1&e&&(l.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),l._uU(4),l.qZA(),l._UZ(5,"button",4),l.qZA(),l.TgZ(6,"div",5),l._uU(7),l.qZA()()()),2&e&&(l.xp6(1),l.Q6J("ngClass",l.WLB(3,yJ,i.toast.isShown,!i.toast.isShown)),l.xp6(3),l.hij(" ",i.toast.title," "),l.xp6(3),l.Oqu(i.toast.message))},dependencies:[Mn],styles:[".toast-header[_ngcontent-%COMP%]{background-color:red;color:#fff}.toast-header[_ngcontent-%COMP%]   .toast-title[_ngcontent-%COMP%]{text-align:center}"]}),n})();class D3{constructor(){}static mustMatch(t,e){return i=>{const r=i,s=r.get(t),c=r.get(e);return s?.value==c?.value?null:{mustMatch:!0}}}static isError_Required(t){let e=!1;return Object.keys(t.controls).forEach(i=>{if(t.get(i)){const r=t.get(i);r instanceof Ql||r instanceof Ka&&r.errors&&r.errors.required&&(e=!0)}}),e}}let vJ=(()=>{class n{constructor(){this.toast_error_required={message:"Please input required fields.",title:"Fail!",time:3e3,isShown:!1},this.toast_error_passwordNotMatch={message:"Confirm password not match. Please try again!",title:"Failed!",time:3e3,isShown:!1}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),E3=(()=>{class n{constructor(){}spliceError(e){let i=e.message;return i=i.replace("Firebase: ",""),i=i.replace(` (${e.code}).`,""),i}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const bJ=function(){return{"input-container":!0}},M3=function(n){return{focusAnimation:n,"signup-block__content__label":!0}},CJ=function(n){return{"input-group":!0,"isError-required":n}};let I3=(()=>{class n{constructor(){this.parentFormGroup=new Ql({}),this.myFormControlName="",this.isFocus=!1,this.label="",this.matIconName="",this.placeHolder=";",this.type="",this.inputId="",this.inputClassList="",this.labelClassList="",this.isRequired="false"}ngOnInit(){""!=this.myFormControlName&&(this.formControl=this.parentFormGroup.get(this.myFormControlName))}setFocus(e){this.isFocus=1==e.isFocus}log(e){console.log(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-input"]],inputs:{parentFormGroup:"parentFormGroup",myFormControlName:"myFormControlName",label:"label",matIconName:"matIconName",placeHolder:"placeHolder",type:"type",inputId:"inputId",inputClassList:"inputClassList",labelClassList:"labelClassList",isRequired:"isRequired"},decls:7,vars:21,consts:[[1,"input-container",3,"formGroup","ngClass"],["for","input",3,"ngClass"],[1,"input-group",3,"ngClass"],[3,"ngClass"],["inputFocus","",3,"formControlName","type","id","placeholder","required","isFocusElement"]],template:function(e,i){1&e&&(l.TgZ(0,"div",0)(1,"label",1),l._uU(2),l.qZA(),l.TgZ(3,"div",2)(4,"mat-icon",3),l._uU(5),l.qZA(),l.TgZ(6,"input",4),l.NdJ("isFocusElement",function(s){return i.setFocus(s)}),l.qZA()()()),2&e&&(l.Q6J("formGroup",i.parentFormGroup)("ngClass",l.DdM(14,bJ)),l.xp6(1),l.Q6J("ngClass",l.VKq(15,M3,i.isFocus)),l.xp6(1),l.Oqu(i.label),l.xp6(1),l.Q6J("ngClass",l.VKq(17,CJ,i.formControl&&i.formControl.touched&&i.formControl.errors&&i.formControl.errors.required)),l.xp6(1),l.Q6J("ngClass",l.VKq(19,M3,i.isFocus)),l.xp6(1),l.Oqu(i.matIconName),l.xp6(1),l.Tol(i.inputClassList),l.Q6J("formControlName",i.myFormControlName)("type",i.type)("id",i.inputId)("placeholder",i.placeHolder)("required",i.isRequired))},dependencies:[Mn,Ev,wv,dS,Ww,CS,kf,Qw],styles:[".input-container[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{border-bottom:1px solid #ced4da;padding:.5em 0;margin-bottom:1em;display:flex;align-items:center}label[_ngcontent-%COMP%], mat-icon[_ngcontent-%COMP%]{transition:color .3s}.input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.375rem .75rem;border:none;outline:none;flex:1;font-weight:200}.focusAnimation[_ngcontent-%COMP%]{color:violet;transition:color .4s}.isError-required[_ngcontent-%COMP%]{box-shadow:-4px 0 2px -2px red}"]}),n})(),wJ=(()=>{class n{constructor(e,i,r,s,c,d,p,_){this.doc=e,this.toastList=i,this.auth=r,this.showToastService=s,this.router=c,this.manipulateString=d,this.db=p,this.manipulateDB=_,this.signUpForm=new Ql({})}ngOnInit(){this.createForm()}log(){console.log(this.signUpForm.controls)}createForm(){this.signUpForm=new Ql({_firstName:new Ka(null,[Kl.required]),_lastName:new Ka(null,[Kl.required]),_email:new Ka(null,[Kl.required]),_password:new Ka(null,[Kl.required]),_confirmPassword:new Ka(null,[Kl.required])},D3.mustMatch("_password","_confirmPassword"))}onSignUpSubmit(){1==this.validateForm()&&this.auth.signUp(this.signUpForm.controls._email.value,this.signUpForm.controls._password.value).pipe((0,li.b)(e=>console.log("result",e)),zn(e=>{let i=new zO(e.user.uid,this.signUpForm.value);return localStorage.setItem("user",JSON.stringify(i)),console.log("user",i),this.manipulateDB.setUserInfo(i)}),(0,li.b)(()=>{this.showToastService.openSnackBar("Signed in successfully",""),this.router.navigate(["/homepage"])})).subscribe({next:()=>{},error:e=>{console.log(e),this.showToastService.openSnackBar(this.manipulateString.spliceError(e),"")}})}checkConfirmPassword(){return!this.signUpForm.errors||!this.signUpForm.errors.mustMatch||(this.toast.showToast(this.toastList.toast_error_passwordNotMatch),!1)}checkIfError_required(){return!D3.isError_Required(this.signUpForm)||(this.toast.showToast(this.toastList.toast_error_required),!1)}validateForm(){return!(0==this.checkIfError_required()||0==this.checkConfirmPassword())}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(se),l.Y36(vJ),l.Y36(nu),l.Y36(YP),l.Y36(Hi),l.Y36(E3),l.Y36(ov),l.Y36(Sf))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-signup"]],viewQuery:function(e,i){if(1&e&&l.Gf(w3,5),2&e){let r;l.iGM(r=l.CRH())&&(i.toast=r.first)}},decls:21,vars:6,consts:[[1,"signup-block-container"],[1,"signup-block__title-container","signup-block__title"],["routerLink","/loginPage/login"],[1,"btn-back"],[1,"signup-block__form",3,"formGroup","ngSubmit"],[1,"signup-block__content"],["label","First Name","matIconName","person","placeHolder","Type your first name","type","text","inputID","firstName","inputClassList","firstName","myFormControlName","_firstName","isRequired","true",3,"parentFormGroup"],["label","Last Name","matIconName","person","placeHolder","Type your last name","type","text","inputID","lastName","inputClassList","lastName","myFormControlName","_lastName",3,"parentFormGroup"],["label","Email","matIconName","email","placeHolder","Type your email","type","email","inputID","email","inputClassList","email","myFormControlName","_email","isRequired","true",3,"parentFormGroup"],["label","Password","matIconName","lock","placeHolder","Type your password","type","password","inputID","password","inputClassList","password","myFormControlName","_password","isRequired","true",3,"parentFormGroup"],["label","Confirm Password","matIconName","lock","placeHolder","Confirm your password","type","password","inputID","confirmPassword","inputClassList","confirmPassword","myFormControlName","_confirmPassword","isRequired","true",3,"parentFormGroup"],["type","submit",1,"btn-login"],[1,"toast-container"],[1,"toast-header"],[1,"toast-body"]],template:function(e,i){1&e&&(l.TgZ(0,"div",0)(1,"div",1)(2,"a",2)(3,"mat-icon",3),l._uU(4,"keyboard_backspace"),l.qZA()(),l._uU(5," Sign up "),l.qZA(),l.TgZ(6,"form",4),l.NdJ("ngSubmit",function(){return i.onSignUpSubmit()}),l.TgZ(7,"div",5),l._UZ(8,"app-input",6)(9,"app-input",7)(10,"app-input",8)(11,"app-input",9)(12,"app-input",10),l.TgZ(13,"button",11),l._uU(14,"Sign up"),l.qZA()()()(),l.TgZ(15,"toast")(16,"div",12)(17,"div",13),l._uU(18,"Header"),l.qZA(),l.TgZ(19,"div",14),l._uU(20,"Body 12341324"),l.qZA()()()),2&e&&(l.xp6(6),l.Q6J("formGroup",i.signUpForm),l.xp6(2),l.Q6J("parentFormGroup",i.signUpForm),l.xp6(1),l.Q6J("parentFormGroup",i.signUpForm),l.xp6(1),l.Q6J("parentFormGroup",i.signUpForm),l.xp6(1),l.Q6J("parentFormGroup",i.signUpForm),l.xp6(1),l.Q6J("parentFormGroup",i.signUpForm))},dependencies:[pv,Ev,bS,Ww,kf,w3,I3],styles:["*[_ngcontent-%COMP%]:not(mat-icon){font-family:Open Sans,sans-serif}.signup-block-container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column}.signup-block__title-container[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{float:left;color:#8a2be2;border-radius:50%}.signup-block__title-container[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]:hover{box-shadow:0 0 20px #8a2be2}.signup-block__title[_ngcontent-%COMP%]{font-weight:600;font-size:2em;text-align:center}.signup-block__content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:400}.signup-block__content[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{border-bottom:1px solid #ced4da;padding:.3em 0;margin-bottom:1em;display:flex;align-items:center}.signup-block__content[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.375rem .75rem;border:none;outline:none;flex:1;font-weight:200}.signup-block__content[_ngcontent-%COMP%]   .btn-login[_ngcontent-%COMP%]{width:100%;padding:.5em;border:none;border-radius:30px;color:#fff;font-weight:500;background-image:linear-gradient(to right,#00b7ea 0%,#a600bc 100%);opacity:.7;transition:opacity .5s ease-in}.signup-block__content[_ngcontent-%COMP%]   .btn-login[_ngcontent-%COMP%]:hover{opacity:1}label.focusAnimation[_ngcontent-%COMP%], mat-icon.focusAnimation[_ngcontent-%COMP%]{color:violet;transition:color .4s}label[_ngcontent-%COMP%], mat-icon[_ngcontent-%COMP%]{transition:color .4s}"]}),n})(),x3=(()=>{class n{constructor(e,i,r,s,c,d){this.document=e,this.auth=i,this.router=r,this.showToastService=s,this.manipulateString=c,this.manipulateDB=d,this.isEmailFocus=!1,this.isPasswordFocus=!1}ngOnDestroy(){}ngOnInit(){this.auth.checkIfLoggedAndRedirect(),this.createForm()}log(e){console.log(e)}toggleForgotPasswordModal(){this.document.querySelector(".forgotPassword-modal")?.classList.contains("show")?this.document.querySelector(".forgotPassword-modal")?.classList.remove("show"):this.document.querySelector(".forgotPassword-modal")?.classList.add("show")}createForm(){this.loginForm=new Ql({email:new Ka(null,Kl.required),password:new Ka(null,Kl.required)}),this.forgotPasswordForm=new Ql({email:new Ka(null,Kl.required)})}signInWithEmail(){this.auth.signInWithEmail(this.loginForm.controls.email.value,this.loginForm.controls.password.value).pipe(Zi(1),zn(e=>this.manipulateDB.getUserInfo(e.user?.uid)),(0,li.b)(e=>{localStorage.setItem("user",JSON.stringify(e)),this.router.navigate(["/homepage"]),this.showToastService.openSnackBar("Welcome back","")})).subscribe({next:()=>{},error:e=>{"Firebase: Error (auth/missing-email)."!=e.message&&this.showToastService.openSnackBar(this.manipulateString.spliceError(e),"")}})}forgotPassword(){this.auth.forgotPassword(this.forgotPasswordForm.controls.email.value)}googleSignIn(){this.googleSignInSubscription=this.auth.googleSignIn().subscribe()}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(se),l.Y36(nu),l.Y36(Hi),l.Y36(YP),l.Y36(E3),l.Y36(Sf))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-login"]],decls:42,vars:4,consts:[[1,"login-block-container"],[1,"login-block__title"],[1,"login-block__email-form",3,"formGroup","ngSubmit"],[1,"login-block__email"],["label","Email","matIconName","email","placeHolder","Type your email","type","email","inputID","email","inputClassList","email","myFormControlName","email","isRequired","true",3,"parentFormGroup"],["label","Password","matIconName","lock","placeHolder","Type your password","type","password","inputID","password","inputClassList","password","myFormControlName","password","isRequired","true",3,"parentFormGroup"],[1,"forgot-password-container"],[1,"forgot-password",3,"click"],["type","submit",1,"btn-login"],[1,"forgotPassword-modal"],[1,"title"],[3,"click"],[1,"close"],[3,"formGroup","ngSubmit"],[1,"body"],["type","email","placeholder","Email address","formControlName","email"],["type","submit"],[1,"reset-password-request"],[1,"login-block__other"],[1,"other-container"],["href","#"],["src","assets/imgs/facebook.png","alt","facebook"],["src","assets/imgs/google.png","alt","google"],["src","assets/imgs/twitter.png","alt","twitter"],[1,"sign-up"],["routerLink","/loginPage/signup"]],template:function(e,i){1&e&&(l.TgZ(0,"div",0)(1,"div")(2,"p",1),l._uU(3,"Login"),l.qZA()(),l.TgZ(4,"form",2),l.NdJ("ngSubmit",function(){return i.signInWithEmail()}),l.TgZ(5,"div",3),l._UZ(6,"app-input",4)(7,"app-input",5),l.TgZ(8,"div",6)(9,"a",7),l.NdJ("click",function(){return i.toggleForgotPasswordModal()}),l._uU(10,"Forgot password?"),l.qZA()(),l.TgZ(11,"button",8),l._uU(12,"LOGIN"),l.qZA(),l.TgZ(13,"div",9)(14,"div",10)(15,"div"),l._uU(16,"Forgot password?"),l.qZA(),l.TgZ(17,"a",11),l.NdJ("click",function(){return i.toggleForgotPasswordModal()}),l.TgZ(18,"mat-icon",12),l._uU(19,"close"),l.qZA()()(),l.TgZ(20,"form",13),l.NdJ("ngSubmit",function(){return i.forgotPassword()}),l.TgZ(21,"div",14)(22,"mat-icon"),l._uU(23,"email"),l.qZA(),l._UZ(24,"input",15),l.TgZ(25,"button",16)(26,"mat-icon",17),l._uU(27,"send"),l.qZA()()()()()()(),l.TgZ(28,"div",18)(29,"p"),l._uU(30,"Or sign up using"),l.qZA(),l.TgZ(31,"div",19)(32,"a",20),l._UZ(33,"img",21),l.qZA(),l.TgZ(34,"a",11),l.NdJ("click",function(){return i.googleSignIn()}),l._UZ(35,"img",22),l.qZA(),l.TgZ(36,"a",20),l._UZ(37,"img",23),l.qZA()()(),l.TgZ(38,"div",24),l._uU(39," Don't have an account? "),l.TgZ(40,"a",25),l._uU(41,"Sign up"),l.qZA()()()),2&e&&(l.xp6(4),l.Q6J("formGroup",i.loginForm),l.xp6(2),l.Q6J("parentFormGroup",i.loginForm),l.xp6(1),l.Q6J("parentFormGroup",i.loginForm),l.xp6(13),l.Q6J("formGroup",i.forgotPasswordForm))},dependencies:[pv,Ev,bS,wv,dS,Ww,kf,Qw,I3],styles:["*[_ngcontent-%COMP%]:not(mat-icon){font-family:Open Sans,sans-serif}.login-block-container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column}.login-block__title[_ngcontent-%COMP%]{font-weight:600;font-size:2em;text-align:center}.login-block__email[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:400}.login-block__email[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{border-bottom:1px solid #ced4da;padding:.5em 0;margin-bottom:1em;display:flex;align-items:center}.login-block__email__label[_ngcontent-%COMP%]{transition:color .3s}.login-block__email[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.375rem .75rem;border:none;outline:none;flex:1;font-weight:200}mat-icon[_ngcontent-%COMP%]{transition:color .3s}.login-block__email[_ngcontent-%COMP%]   .forgot-password-container[_ngcontent-%COMP%]{text-align:right}.login-block__email[_ngcontent-%COMP%]   .forgot-password-container[_ngcontent-%COMP%]   .forgot-password[_ngcontent-%COMP%]{color:gray;text-decoration:none}.login-block__email[_ngcontent-%COMP%]   .forgot-password-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{cursor:pointer}.forgotPassword-modal[_ngcontent-%COMP%]{border-radius:1em;height:8em;width:24em;position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);display:none;background-color:#fff;box-shadow:0 0 40px -10px gray}.forgotPassword-modal[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fff;border:none}.forgotPassword-modal.show[_ngcontent-%COMP%]{padding:1em;display:flex;justify-content:center;flex-direction:column;gap:1em}.forgotPassword-modal[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:larger;display:flex;justify-content:space-between}.forgotPassword-modal[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-weight:500}.forgotPassword-modal[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]{display:flex;align-items:center}.forgotPassword-modal[_ngcontent-%COMP%]   .reset-password-request[_ngcontent-%COMP%]:hover, .forgotPassword-modal[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover{cursor:pointer;color:violet}.login-block__email[_ngcontent-%COMP%]   .btn-login[_ngcontent-%COMP%]{width:100%;padding:.5em;border:none;border-radius:30px;margin-top:min(2em,3vh);color:#fff;font-weight:500;background-image:linear-gradient(to right,#00b7ea 0%,#a600bc 100%);opacity:.7;transition:opacity .5s ease-in}.login-block__email[_ngcontent-%COMP%]   .btn-login[_ngcontent-%COMP%]:hover{opacity:1}.login-block__other[_ngcontent-%COMP%]{padding-top:2em}.login-block__other[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}.login-block__other[_ngcontent-%COMP%]   .other-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:3em}.login-block__other[_ngcontent-%COMP%]   .other-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:2.5em;height:2.5em;transition:transform .5 ease-out}.login-block__other[_ngcontent-%COMP%]   .other-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{cursor:pointer;transform:scale(1.2)}.login-block-container[_ngcontent-%COMP%]   .sign-up[_ngcontent-%COMP%]{margin-top:auto;margin-left:auto}"]}),n})(),DJ=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["login-page"]],decls:3,vars:0,consts:[[1,"background"],[1,"content-block"]],template:function(e,i){1&e&&(l.TgZ(0,"div",0)(1,"div",1),l._UZ(2,"router-outlet"),l.qZA()())},dependencies:[Iw],styles:["*[_ngcontent-%COMP%]:not(mat-icon){font-family:Open Sans,sans-serif}.background[_ngcontent-%COMP%]{height:100vh;width:100vw;display:flex;align-items:center;justify-content:center;background:linear-gradient(to right,rgb(0,183,234) 0%,rgb(197,159,201) 51%)}.background[_ngcontent-%COMP%]   .content-block[_ngcontent-%COMP%]{border-radius:1em;padding:2em;background-color:#fff;height:38em;width:min(22em,90%);position:relative;box-shadow:10px 10px 20px -10px;overflow:hidden}"]}),n})();function EJ(n,t){if(1&n&&(l.ynx(0),l._uU(1),l.BQk()),2&n){const e=l.oxw().$implicit;l.xp6(1),l.hij(" ",e.displayName,"")}}function MJ(n,t){if(1&n&&(l.ynx(0),l._uU(1),l.BQk()),2&n){const e=l.oxw().$implicit;l.xp6(1),l.AsE(" ",e.firstName," ",e.lastName,"")}}function IJ(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"li",9)(1,"a",10),l.NdJ("click",function(){const s=l.CHM(e).$implicit,c=l.oxw(2);return l.KtG(c.selectContact(s._uid))}),l._UZ(2,"img",11),l.TgZ(3,"div",12)(4,"div",13),l.YNc(5,EJ,2,1,"ng-container",6),l.YNc(6,MJ,2,2,"ng-container",6),l.qZA()()()()}if(2&n){const e=t.$implicit;l.xp6(2),l.s9C("src",e.photoURL,l.LSH),l.xp6(3),l.Q6J("ngIf",e.displayName),l.xp6(1),l.Q6J("ngIf",!e.displayName)}}function xJ(n,t){if(1&n&&(l.ynx(0),l.TgZ(1,"ul",7),l.YNc(2,IJ,7,3,"li",8),l.qZA(),l.BQk()),2&n){const e=t.ngIf;l.xp6(2),l.Q6J("ngForOf",e)}}let SJ=(()=>{class n{constructor(e,i,r,s){this.db=e,this.auth=i,this.manipulateDB=r,this.getData=s}ngOnInit(){this.getContacts()}getContacts(){this.contacts$=this.getData.contactsSubject.asObservable()}selectContact(e){this.getData.selectContact(this.auth.currentUserID(),e),this.getData.updateIsShowChatRoom(!0)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(ov),l.Y36(nu),l.Y36(Sf),l.Y36(iD))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-sidebar-content-contact"]],decls:11,vars:3,consts:[[1,"contact-list-container"],[1,"title"],[1,"search-section"],[1,"search-container"],["type","text","placeholder","Search"],[1,"searched-contacts-section"],[4,"ngIf"],[1,"searched-contacts"],["class","contact-container",4,"ngFor","ngForOf"],[1,"contact-container"],[1,"contact-wrapper",3,"click"],["alt","",1,"contact-avatar",3,"src"],[1,"contact-content"],[1,"contact-name"]],template:function(e,i){1&e&&(l.TgZ(0,"div",0)(1,"div",1),l._uU(2,"Contacts"),l.qZA(),l.TgZ(3,"div",2)(4,"div",3)(5,"mat-icon"),l._uU(6,"search"),l.qZA(),l._UZ(7,"input",4),l.qZA()(),l.TgZ(8,"div",5),l.YNc(9,xJ,3,1,"ng-container",6),l.ALo(10,"async"),l.qZA()()),2&e&&(l.xp6(9),l.Q6J("ngIf",l.lcZ(10,1,i.contacts$)))},dependencies:[ls,Yn,Ev,nc],styles:[".contact-list-container[_ngcontent-%COMP%]{height:100vh;display:flex;flex-direction:column;width:100%}.contact-list-container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#1273eb;font-size:2em;padding:.5em 1em 0}.search-section[_ngcontent-%COMP%]{padding:1em}.search-section[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]{display:flex;align-items:center;border-radius:5px;background:white;padding:.5em}.search-section[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{background:white}.search-section[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;outline:none;font-weight:lighter}.search-section[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#1185e0}.searched-contacts-section[_ngcontent-%COMP%]   .searched-contacts[_ngcontent-%COMP%]{box-sizing:content-box;padding:0;list-style-type:none}.searched-contacts-section[_ngcontent-%COMP%]   .contact-container[_ngcontent-%COMP%]{padding:1rem;border-bottom:1px solid rgb(204,222,228)}.searched-contacts-section[_ngcontent-%COMP%]   .contact-container.active[_ngcontent-%COMP%]{background-color:#c5d4f0}.searched-contacts-section[_ngcontent-%COMP%]   .contact-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{cursor:pointer}.searched-contacts-section[_ngcontent-%COMP%]   .contact-container[_ngcontent-%COMP%]:not(.active):hover{background-color:#f0f4fb}.searched-contacts-section[_ngcontent-%COMP%]   .contact-wrapper[_ngcontent-%COMP%]{text-decoration:none;color:#000;display:flex;align-items:center}.searched-contacts-section[_ngcontent-%COMP%]   .contact-avatar[_ngcontent-%COMP%]{background-color:#00f;width:2.5rem;height:2.5rem;border-radius:50%}.searched-contacts-section[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:5px}"]}),n})();const S3=[{path:"",redirectTo:"/loginPage",pathMatch:"full"},{path:"loginPage",component:DJ,children:[{path:"",component:x3},{path:"login",component:x3},{path:"signup",component:wJ}]},{path:"homepage",component:_J,canActivate:[sJ],children:[{path:"chat",component:rJ},{path:"profile",component:JX},{path:"contact",component:SJ},{path:"",redirectTo:"chat",pathMatch:"full"}]}];let TJ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[CP.forRoot(S3),CP.forChild(S3),CP]}),n})(),AJ=(()=>{class n{constructor(){this.title="ChatApp"}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(e,i){1&e&&l._UZ(0,"router-outlet")},dependencies:[Iw]}),n})();function T3(n){return new l.vHH(3e3,!1)}function dee(){return typeof window<"u"&&typeof window.document<"u"}function U1(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Ff(n){switch(n.length){case 0:return new jw;case 1:return n[0];default:return new HH(n)}}function A3(n,t,e,i,r=new Map,s=new Map){const c=[],d=[];let p=-1,_=null;if(i.forEach(b=>{const E=b.get("offset"),T=E==p,N=T&&_||new Map;b.forEach((V,K)=>{let re=K,Ye=V;if("offset"!==K)switch(re=t.normalizePropertyName(re,c),Ye){case"!":Ye=r.get(K);break;case bd:Ye=s.get(K);break;default:Ye=t.normalizeStyleValue(K,re,Ye,c)}N.set(re,Ye)}),T||d.push(N),_=N,p=E}),c.length)throw function JJ(n){return new l.vHH(3502,!1)}();return d}function H1(n,t,e,i){switch(t){case"start":n.onStart(()=>i(e&&j1(e,"start",n)));break;case"done":n.onDone(()=>i(e&&j1(e,"done",n)));break;case"destroy":n.onDestroy(()=>i(e&&j1(e,"destroy",n)))}}function j1(n,t,e){const s=z1(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,e.totalTime??n.totalTime,!!e.disabled),c=n._data;return null!=c&&(s._data=c),s}function z1(n,t,e,i,r="",s=0,c){return{element:n,triggerName:t,fromState:e,toState:i,phaseName:r,totalTime:s,disabled:!!c}}function Go(n,t,e){let i=n.get(t);return i||n.set(t,i=e),i}function k3(n){const t=n.indexOf(":");return[n.substring(1,t),n.slice(t+1)]}let $1=(n,t)=>!1,R3=(n,t,e)=>[],O3=null;function G1(n){const t=n.parentNode||n.host;return t===O3?null:t}(U1()||typeof Element<"u")&&(dee()?(O3=(()=>document.documentElement)(),$1=(n,t)=>{for(;t;){if(t===n)return!0;t=G1(t)}return!1}):$1=(n,t)=>n.contains(t),R3=(n,t,e)=>{if(e)return Array.from(n.querySelectorAll(t));const i=n.querySelector(t);return i?[i]:[]});let _g=null,P3=!1;const N3=$1,F3=R3;let L3=(()=>{class n{validateStyleProperty(e){return function fee(n){_g||(_g=function pee(){return typeof document<"u"?document.body:null}()||{},P3=!!_g.style&&"WebkitAppearance"in _g.style);let t=!0;return _g.style&&!function hee(n){return"ebkit"==n.substring(1,6)}(n)&&(t=n in _g.style,!t&&P3&&(t="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in _g.style)),t}(e)}matchesElement(e,i){return!1}containsElement(e,i){return N3(e,i)}getParentElement(e){return G1(e)}query(e,i,r){return F3(e,i,r)}computeStyle(e,i,r){return r||""}animate(e,i,r,s,c,d=[],p){return new jw(r,s)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),W1=(()=>{class n{}return n.NOOP=new L3,n})();const q1="ng-enter",VS="ng-leave",US="ng-trigger",HS=".ng-trigger",V3="ng-animating",Y1=".ng-animating";function Md(n){if("number"==typeof n)return n;const t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:Z1(parseFloat(t[1]),t[2])}function Z1(n,t){return"s"===t?1e3*n:n}function jS(n,t,e){return n.hasOwnProperty("duration")?n:function _ee(n,t,e){let r,s=0,c="";if("string"==typeof n){const d=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===d)return t.push(T3()),{duration:0,delay:0,easing:""};r=Z1(parseFloat(d[1]),d[2]);const p=d[3];null!=p&&(s=Z1(parseFloat(p),d[4]));const _=d[5];_&&(c=_)}else r=n;if(!e){let d=!1,p=t.length;r<0&&(t.push(function kJ(){return new l.vHH(3100,!1)}()),d=!0),s<0&&(t.push(function RJ(){return new l.vHH(3101,!1)}()),d=!0),d&&t.splice(p,0,T3())}return{duration:r,delay:s,easing:c}}(n,t,e)}function rD(n,t={}){return Object.keys(n).forEach(e=>{t[e]=n[e]}),t}function U3(n){const t=new Map;return Object.keys(n).forEach(e=>{t.set(e,n[e])}),t}function Lf(n,t=new Map,e){if(e)for(let[i,r]of e)t.set(i,r);for(let[i,r]of n)t.set(i,r);return t}function j3(n,t,e){return e?t+":"+e+";":""}function z3(n){let t="";for(let e=0;e<n.style.length;e++){const i=n.style.item(e);t+=j3(0,i,n.style.getPropertyValue(i))}for(const e in n.style)n.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=j3(0,Cee(e),n.style[e]));n.setAttribute("style",t)}function ru(n,t,e){n.style&&(t.forEach((i,r)=>{const s=Q1(r);e&&!e.has(r)&&e.set(r,n.style[s]),n.style[s]=i}),U1()&&z3(n))}function yg(n,t){n.style&&(t.forEach((e,i)=>{const r=Q1(i);n.style[r]=""}),U1()&&z3(n))}function sD(n){return Array.isArray(n)?1==n.length?n[0]:VH(n):n}const K1=new RegExp("{{\\s*(.+?)\\s*}}","g");function $3(n){let t=[];if("string"==typeof n){let e;for(;e=K1.exec(n);)t.push(e[1]);K1.lastIndex=0}return t}function oD(n,t,e){const i=n.toString(),r=i.replace(K1,(s,c)=>{let d=t[c];return null==d&&(e.push(function PJ(n){return new l.vHH(3003,!1)}()),d=""),d.toString()});return r==i?n:r}function zS(n){const t=[];let e=n.next();for(;!e.done;)t.push(e.value),e=n.next();return t}const bee=/-+([a-z0-9])/g;function Q1(n){return n.replace(bee,(...t)=>t[1].toUpperCase())}function Cee(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Wo(n,t,e){switch(t.type){case 7:return n.visitTrigger(t,e);case 0:return n.visitState(t,e);case 1:return n.visitTransition(t,e);case 2:return n.visitSequence(t,e);case 3:return n.visitGroup(t,e);case 4:return n.visitAnimate(t,e);case 5:return n.visitKeyframes(t,e);case 6:return n.visitStyle(t,e);case 8:return n.visitReference(t,e);case 9:return n.visitAnimateChild(t,e);case 10:return n.visitAnimateRef(t,e);case 11:return n.visitQuery(t,e);case 12:return n.visitStagger(t,e);default:throw function NJ(n){return new l.vHH(3004,!1)}()}}function G3(n,t){return window.getComputedStyle(n)[t]}function xee(n,t){const e=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function See(n,t,e){if(":"==n[0]){const p=function Tee(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,i)=>parseFloat(i)>parseFloat(e);case":decrement":return(e,i)=>parseFloat(i)<parseFloat(e);default:return t.push(function ZJ(n){return new l.vHH(3016,!1)}()),"* => *"}}(n,e);if("function"==typeof p)return void t.push(p);n=p}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return e.push(function YJ(n){return new l.vHH(3015,!1)}()),t;const r=i[1],s=i[2],c=i[3];t.push(W3(r,c));"<"==s[0]&&!("*"==r&&"*"==c)&&t.push(W3(c,r))}(i,e,t)):e.push(n),e}const qS=new Set(["true","1"]),YS=new Set(["false","0"]);function W3(n,t){const e=qS.has(n)||YS.has(n),i=qS.has(t)||YS.has(t);return(r,s)=>{let c="*"==n||n==r,d="*"==t||t==s;return!c&&e&&"boolean"==typeof r&&(c=r?qS.has(n):YS.has(n)),!d&&i&&"boolean"==typeof s&&(d=s?qS.has(t):YS.has(t)),c&&d}}const Aee=new RegExp("s*:selfs*,?","g");function X1(n,t,e,i){return new kee(n).build(t,e,i)}class kee{constructor(t){this._driver=t}build(t,e,i){const r=new Pee(e);return this._resetContextStyleTimingState(r),Wo(this,sD(t),r)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles=new Map,t.collectedStyles.set("",new Map),t.currentTime=0}visitTrigger(t,e){let i=e.queryCount=0,r=e.depCount=0;const s=[],c=[];return"@"==t.name.charAt(0)&&e.errors.push(function LJ(){return new l.vHH(3006,!1)}()),t.definitions.forEach(d=>{if(this._resetContextStyleTimingState(e),0==d.type){const p=d,_=p.name;_.toString().split(/\s*,\s*/).forEach(b=>{p.name=b,s.push(this.visitState(p,e))}),p.name=_}else if(1==d.type){const p=this.visitTransition(d,e);i+=p.queryCount,r+=p.depCount,c.push(p)}else e.errors.push(function BJ(){return new l.vHH(3007,!1)}())}),{type:7,name:t.name,states:s,transitions:c,queryCount:i,depCount:r,options:null}}visitState(t,e){const i=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(i.containsDynamicStyles){const s=new Set,c=r||{};i.styles.forEach(d=>{d instanceof Map&&d.forEach(p=>{$3(p).forEach(_=>{c.hasOwnProperty(_)||s.add(_)})})}),s.size&&(zS(s.values()),e.errors.push(function VJ(n,t){return new l.vHH(3008,!1)}()))}return{type:0,name:t.name,style:i,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const i=Wo(this,sD(t.animation),e);return{type:1,matchers:xee(t.expr,e.errors),animation:i,queryCount:e.queryCount,depCount:e.depCount,options:vg(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(i=>Wo(this,i,e)),options:vg(t.options)}}visitGroup(t,e){const i=e.currentTime;let r=0;const s=t.steps.map(c=>{e.currentTime=i;const d=Wo(this,c,e);return r=Math.max(r,e.currentTime),d});return e.currentTime=r,{type:3,steps:s,options:vg(t.options)}}visitAnimate(t,e){const i=function Fee(n,t){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return J1(jS(n,t).duration,0,"");const e=n;if(e.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=J1(0,0,"");return s.dynamic=!0,s.strValue=e,s}const r=jS(e,t);return J1(r.duration,r.delay,r.easing)}(t.timings,e.errors);e.currentAnimateTimings=i;let r,s=t.styles?t.styles:xt({});if(5==s.type)r=this.visitKeyframes(s,e);else{let c=t.styles,d=!1;if(!c){d=!0;const _={};i.easing&&(_.easing=i.easing),c=xt(_)}e.currentTime+=i.duration+i.delay;const p=this.visitStyle(c,e);p.isEmptyStep=d,r=p}return e.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(t,e){const i=this._makeStyleAst(t,e);return this._validateStyleAst(i,e),i}_makeStyleAst(t,e){const i=[],r=Array.isArray(t.styles)?t.styles:[t.styles];for(let d of r)"string"==typeof d?d===bd?i.push(d):e.errors.push(new l.vHH(3002,!1)):i.push(U3(d));let s=!1,c=null;return i.forEach(d=>{if(d instanceof Map&&(d.has("easing")&&(c=d.get("easing"),d.delete("easing")),!s))for(let p of d.values())if(p.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:i,easing:c,offset:t.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(t,e){const i=e.currentAnimateTimings;let r=e.currentTime,s=e.currentTime;i&&s>0&&(s-=i.duration+i.delay),t.styles.forEach(c=>{"string"!=typeof c&&c.forEach((d,p)=>{const _=e.collectedStyles.get(e.currentQuerySelector),b=_.get(p);let E=!0;b&&(s!=r&&s>=b.startTime&&r<=b.endTime&&(e.errors.push(function HJ(n,t,e,i,r){return new l.vHH(3010,!1)}()),E=!1),s=b.startTime),E&&_.set(p,{startTime:s,endTime:r}),e.options&&function vee(n,t,e){const i=t.params||{},r=$3(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||e.push(function OJ(n){return new l.vHH(3001,!1)}())})}(d,e.options,e.errors)})})}visitKeyframes(t,e){const i={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function jJ(){return new l.vHH(3011,!1)}()),i;let s=0;const c=[];let d=!1,p=!1,_=0;const b=t.steps.map(Ye=>{const rt=this._makeStyleAst(Ye,e);let pt=null!=rt.offset?rt.offset:function Nee(n){if("string"==typeof n)return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(e instanceof Map&&e.has("offset")){const i=e;t=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const e=n;t=parseFloat(e.get("offset")),e.delete("offset")}return t}(rt.styles),st=0;return null!=pt&&(s++,st=rt.offset=pt),p=p||st<0||st>1,d=d||st<_,_=st,c.push(st),rt});p&&e.errors.push(function zJ(){return new l.vHH(3012,!1)}()),d&&e.errors.push(function $J(){return new l.vHH(3200,!1)}());const E=t.steps.length;let T=0;s>0&&s<E?e.errors.push(function GJ(){return new l.vHH(3202,!1)}()):0==s&&(T=1/(E-1));const N=E-1,V=e.currentTime,K=e.currentAnimateTimings,re=K.duration;return b.forEach((Ye,rt)=>{const pt=T>0?rt==N?1:T*rt:c[rt],st=pt*re;e.currentTime=V+K.delay+st,K.duration=st,this._validateStyleAst(Ye,e),Ye.offset=pt,i.styles.push(Ye)}),i}visitReference(t,e){return{type:8,animation:Wo(this,sD(t.animation),e),options:vg(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:vg(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:vg(t.options)}}visitQuery(t,e){const i=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[s,c]=function Ree(n){const t=!!n.split(/\s*,\s*/).find(e=>":self"==e);return t&&(n=n.replace(Aee,"")),n=n.replace(/@\*/g,HS).replace(/@\w+/g,e=>HS+"-"+e.slice(1)).replace(/:animating/g,Y1),[n,t]}(t.selector);e.currentQuerySelector=i.length?i+" "+s:s,Go(e.collectedStyles,e.currentQuerySelector,new Map);const d=Wo(this,sD(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:c,animation:d,originalSelector:t.selector,options:vg(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(function WJ(){return new l.vHH(3013,!1)}());const i="full"===t.timings?{duration:0,delay:0,easing:"full"}:jS(t.timings,e.errors,!0);return{type:12,animation:Wo(this,sD(t.animation),e),timings:i,options:null}}}class Pee{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function vg(n){return n?(n=rD(n)).params&&(n.params=function Oee(n){return n?rD(n):null}(n.params)):n={},n}function J1(n,t,e){return{duration:n,delay:t,easing:e}}function eN(n,t,e,i,r,s,c=null,d=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:c,subTimeline:d}}class ZS{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let i=this._map.get(t);i||this._map.set(t,i=[]),i.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const Vee=new RegExp(":enter","g"),Hee=new RegExp(":leave","g");function tN(n,t,e,i,r,s=new Map,c=new Map,d,p,_=[]){return(new jee).buildKeyframes(n,t,e,i,r,s,c,d,p,_)}class jee{buildKeyframes(t,e,i,r,s,c,d,p,_,b=[]){_=_||new ZS;const E=new nN(t,e,_,r,s,b,[]);E.options=p;const T=p.delay?Md(p.delay):0;E.currentTimeline.delayNextStep(T),E.currentTimeline.setStyles([c],null,E.errors,p),Wo(this,i,E);const N=E.timelines.filter(V=>V.containsAnimation());if(N.length&&d.size){let V;for(let K=N.length-1;K>=0;K--){const re=N[K];if(re.element===e){V=re;break}}V&&!V.allowOnlyTimelineStyles()&&V.setStyles([d],null,E.errors,p)}return N.length?N.map(V=>V.buildKeyframes()):[eN(e,[],[],[],0,T,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const i=e.subInstructions.get(e.element);if(i){const r=e.createSubContext(t.options),s=e.currentTimeline.currentTime,c=this._visitSubInstructions(i,r,r.options);s!=c&&e.transformIntoNewTimeline(c)}e.previousNode=t}visitAnimateRef(t,e){const i=e.createSubContext(t.options);i.transformIntoNewTimeline(),this._applyAnimateRefDelay(t.animation,e,i),this.visitReference(t.animation,i),e.transformIntoNewTimeline(i.currentTimeline.currentTime),e.previousNode=t}_applyAnimateRefDelay(t,e,i){const r=t.options?.delay;if(!r)return;let s;s="string"==typeof r?Md(oD(r,t.options?.params??{},e.errors)):r,i.delayNextStep(s)}_visitSubInstructions(t,e,i){let s=e.currentTimeline.currentTime;const c=null!=i.duration?Md(i.duration):null,d=null!=i.delay?Md(i.delay):null;return 0!==c&&t.forEach(p=>{const _=e.appendInstructionToTimeline(p,c,d);s=Math.max(s,_.duration+_.delay)}),s}visitReference(t,e){e.updateOptions(t.options,!0),Wo(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const i=e.subContextCount;let r=e;const s=t.options;if(s&&(s.params||s.delay)&&(r=e.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=KS);const c=Md(s.delay);r.delayNextStep(c)}t.steps.length&&(t.steps.forEach(c=>Wo(this,c,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const i=[];let r=e.currentTimeline.currentTime;const s=t.options&&t.options.delay?Md(t.options.delay):0;t.steps.forEach(c=>{const d=e.createSubContext(t.options);s&&d.delayNextStep(s),Wo(this,c,d),r=Math.max(r,d.currentTimeline.currentTime),i.push(d.currentTimeline)}),i.forEach(c=>e.currentTimeline.mergeTimelineCollectedStyles(c)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const i=t.strValue;return jS(e.params?oD(i,e.params,e.errors):i,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const i=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;i.delay&&(e.incrementTime(i.delay),r.snapshotCurrentStyles());const s=t.style;5==s.type?this.visitKeyframes(s,e):(e.incrementTime(i.duration),this.visitStyle(s,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const i=e.currentTimeline,r=e.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const s=r&&r.easing||t.easing;t.isEmptyStep?i.applyEmptyStep(s):i.setStyles(t.styles,s,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const i=e.currentAnimateTimings,r=e.currentTimeline.duration,s=i.duration,d=e.createSubContext().currentTimeline;d.easing=i.easing,t.styles.forEach(p=>{d.forwardTime((p.offset||0)*s),d.setStyles(p.styles,p.easing,e.errors,e.options),d.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(d),e.transformIntoNewTimeline(r+s),e.previousNode=t}visitQuery(t,e){const i=e.currentTimeline.currentTime,r=t.options||{},s=r.delay?Md(r.delay):0;s&&(6===e.previousNode.type||0==i&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=KS);let c=i;const d=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=d.length;let p=null;d.forEach((_,b)=>{e.currentQueryIndex=b;const E=e.createSubContext(t.options,_);s&&E.delayNextStep(s),_===e.element&&(p=E.currentTimeline),Wo(this,t.animation,E),E.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,E.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(c),p&&(e.currentTimeline.mergeTimelineCollectedStyles(p),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const i=e.parentContext,r=e.currentTimeline,s=t.timings,c=Math.abs(s.duration),d=c*(e.currentQueryTotal-1);let p=c*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":p=d-p;break;case"full":p=i.currentStaggerTime}const b=e.currentTimeline;p&&b.delayNextStep(p);const E=b.currentTime;Wo(this,t.animation,e),e.previousNode=t,i.currentStaggerTime=r.currentTime-E+(r.startTime-i.currentTimeline.startTime)}}const KS={};class nN{constructor(t,e,i,r,s,c,d,p){this._driver=t,this.element=e,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=c,this.timelines=d,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=KS,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=p||new QS(this._driver,e,0),d.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const i=t;let r=this.options;null!=i.duration&&(r.duration=Md(i.duration)),null!=i.delay&&(r.delay=Md(i.delay));const s=i.params;if(s){let c=r.params;c||(c=this.options.params={}),Object.keys(s).forEach(d=>{(!e||!c.hasOwnProperty(d))&&(c[d]=oD(s[d],c,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const i=t.params={};Object.keys(e).forEach(r=>{i[r]=e[r]})}}return t}createSubContext(t=null,e,i){const r=e||this.element,s=new nN(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(t),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(t){return this.previousNode=KS,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,i){const r={duration:e??t.duration,delay:this.currentTimeline.currentTime+(i??0)+t.delay,easing:""},s=new zee(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,i,r,s,c){let d=[];if(r&&d.push(this.element),t.length>0){t=(t=t.replace(Vee,"."+this._enterClassName)).replace(Hee,"."+this._leaveClassName);let _=this._driver.query(this.element,t,1!=i);0!==i&&(_=i<0?_.slice(_.length+i,_.length):_.slice(0,i)),d.push(..._)}return!s&&0==d.length&&c.push(function qJ(n){return new l.vHH(3014,!1)}()),d}}class QS{constructor(t,e,i,r){this._driver=t,this.element=e,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new QS(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,i]of this._globalTimelineStyles)this._backFill.set(e,i||bd),this._currentKeyframe.set(e,bd);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,i,r){e&&this._previousKeyframe.set("easing",e);const s=r&&r.params||{},c=function $ee(n,t){const e=new Map;let i;return n.forEach(r=>{if("*"===r){i=i||t.keys();for(let s of i)e.set(s,bd)}else Lf(r,e)}),e}(t,this._globalTimelineStyles);for(let[d,p]of c){const _=oD(p,s,i);this._pendingStyles.set(d,_),this._localTimelineStyles.has(d)||this._backFill.set(d,this._globalTimelineStyles.get(d)??bd),this._updateStyle(d,_)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,i)=>{const r=this._styleSummary.get(i);(!r||e.time>r.time)&&this._updateStyle(i,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((d,p)=>{const _=Lf(d,new Map,this._backFill);_.forEach((b,E)=>{"!"===b?t.add(E):b===bd&&e.add(E)}),i||_.set("offset",p/this.duration),r.push(_)});const s=t.size?zS(t.values()):[],c=e.size?zS(e.values()):[];if(i){const d=r[0],p=new Map(d);d.set("offset",0),p.set("offset",1),r=[d,p]}return eN(this.element,r,s,c,this.duration,this.startTime,this.easing,!1)}}class zee extends QS{constructor(t,e,i,r,s,c,d=!1){super(t,e,c.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=d,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const s=[],c=i+e,d=e/c,p=Lf(t[0]);p.set("offset",0),s.push(p);const _=Lf(t[0]);_.set("offset",Z3(d)),s.push(_);const b=t.length-1;for(let E=1;E<=b;E++){let T=Lf(t[E]);const N=T.get("offset");T.set("offset",Z3((e+N*i)/c)),s.push(T)}i=c,e=0,r="",t=s}return eN(this.element,t,this.preStyleProps,this.postStyleProps,i,e,r,!0)}}function Z3(n,t=3){const e=Math.pow(10,t-1);return Math.round(n*e)/e}class iN{}const Gee=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Wee extends iN{normalizePropertyName(t,e){return Q1(t)}normalizeStyleValue(t,e,i,r){let s="";const c=i.toString().trim();if(Gee.has(e)&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const d=i.match(/^[+-]?[\d\.]+([a-z]*)$/);d&&0==d[1].length&&r.push(function FJ(n,t){return new l.vHH(3005,!1)}())}return c+s}}function K3(n,t,e,i,r,s,c,d,p,_,b,E,T){return{type:0,element:n,triggerName:t,isRemovalTransition:r,fromState:e,fromStyles:s,toState:i,toStyles:c,timelines:d,queriedElements:p,preStyleProps:_,postStyleProps:b,totalTime:E,errors:T}}const rN={};class Q3{constructor(t,e,i){this._triggerName=t,this.ast=e,this._stateStyles=i}match(t,e,i,r){return function qee(n,t,e,i,r){return n.some(s=>s(t,e,i,r))}(this.ast.matchers,t,e,i,r)}buildStyles(t,e,i){let r=this._stateStyles.get("*");return void 0!==t&&(r=this._stateStyles.get(t?.toString())||r),r?r.buildStyles(e,i):new Map}build(t,e,i,r,s,c,d,p,_,b){const E=[],T=this.ast.options&&this.ast.options.params||rN,V=this.buildStyles(i,d&&d.params||rN,E),K=p&&p.params||rN,re=this.buildStyles(r,K,E),Ye=new Set,rt=new Map,pt=new Map,st="void"===r,Lt={params:Yee(K,T),delay:this.ast.options?.delay},Ht=b?[]:tN(t,e,this.ast.animation,s,c,V,re,Lt,_,E);let En=0;if(Ht.forEach(qo=>{En=Math.max(qo.duration+qo.delay,En)}),E.length)return K3(e,this._triggerName,i,r,st,V,re,[],[],rt,pt,En,E);Ht.forEach(qo=>{const Sd=qo.element,$$=Go(rt,Sd,new Set);qo.preStyleProps.forEach(Cg=>$$.add(Cg));const hD=Go(pt,Sd,new Set);qo.postStyleProps.forEach(Cg=>hD.add(Cg)),Sd!==e&&Ye.add(Sd)});const tr=zS(Ye.values());return K3(e,this._triggerName,i,r,st,V,re,Ht,tr,rt,pt,En)}}function Yee(n,t){const e=rD(t);for(const i in n)n.hasOwnProperty(i)&&null!=n[i]&&(e[i]=n[i]);return e}class Zee{constructor(t,e,i){this.styles=t,this.defaultParams=e,this.normalizer=i}buildStyles(t,e){const i=new Map,r=rD(this.defaultParams);return Object.keys(t).forEach(s=>{const c=t[s];null!==c&&(r[s]=c)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((c,d)=>{c&&(c=oD(c,r,e));const p=this.normalizer.normalizePropertyName(d,e);c=this.normalizer.normalizeStyleValue(d,p,c,e),i.set(p,c)})}),i}}class Qee{constructor(t,e,i){this.name=t,this.ast=e,this._normalizer=i,this.transitionFactories=[],this.states=new Map,e.states.forEach(r=>{this.states.set(r.name,new Zee(r.style,r.options&&r.options.params||{},i))}),X3(this.states,"true","1"),X3(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new Q3(t,r,this.states))}),this.fallbackTransition=function Xee(n,t,e){return new Q3(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,d)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,i,r){return this.transitionFactories.find(c=>c.match(t,e,i,r))||null}matchStyles(t,e,i){return this.fallbackTransition.buildStyles(t,e,i)}}function X3(n,t,e){n.has(t)?n.has(e)||n.set(e,n.get(t)):n.has(e)&&n.set(t,n.get(e))}const Jee=new ZS;class ete{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(t,e){const i=[],s=X1(this._driver,e,i,[]);if(i.length)throw function eee(n){return new l.vHH(3503,!1)}();this._animations.set(t,s)}_buildPlayer(t,e,i){const r=t.element,s=A3(0,this._normalizer,0,t.keyframes,e,i);return this._driver.animate(r,s,t.duration,t.delay,t.easing,[],!0)}create(t,e,i={}){const r=[],s=this._animations.get(t);let c;const d=new Map;if(s?(c=tN(this._driver,e,s,q1,VS,new Map,new Map,i,Jee,r),c.forEach(b=>{const E=Go(d,b.element,new Map);b.postStyleProps.forEach(T=>E.set(T,null))})):(r.push(function tee(){return new l.vHH(3300,!1)}()),c=[]),r.length)throw function nee(n){return new l.vHH(3504,!1)}();d.forEach((b,E)=>{b.forEach((T,N)=>{b.set(N,this._driver.computeStyle(E,N,bd))})});const _=Ff(c.map(b=>{const E=d.get(b.element);return this._buildPlayer(b,new Map,E)}));return this._playersById.set(t,_),_.onDestroy(()=>this.destroy(t)),this.players.push(_),_}destroy(t){const e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);const i=this.players.indexOf(e);i>=0&&this.players.splice(i,1)}_getPlayer(t){const e=this._playersById.get(t);if(!e)throw function iee(n){return new l.vHH(3301,!1)}();return e}listen(t,e,i,r){const s=z1(e,"","","");return H1(this._getPlayer(t),i,s,r),()=>{}}command(t,e,i,r){if("register"==i)return void this.register(t,r[0]);if("create"==i)return void this.create(t,e,r[0]||{});const s=this._getPlayer(t);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const J3="ng-animate-queued",sN="ng-animate-disabled",ste=[],e$={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},ote={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Qa="__ng_removed";class oN{constructor(t,e=""){this.namespaceId=e;const i=t&&t.hasOwnProperty("value");if(this.value=function ute(n){return n??null}(i?t.value:t),i){const s=rD(t);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const i=this.options.params;Object.keys(e).forEach(r=>{null==i[r]&&(i[r]=e[r])})}}}const aD="void",aN=new oN(aD);class ate{constructor(t,e,i){this.id=t,this.hostElement=e,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Xa(e,this._hostClassName)}listen(t,e,i,r){if(!this._triggers.has(e))throw function ree(n,t){return new l.vHH(3302,!1)}();if(null==i||0==i.length)throw function see(n){return new l.vHH(3303,!1)}();if(!function dte(n){return"start"==n||"done"==n}(i))throw function oee(n,t){return new l.vHH(3400,!1)}();const s=Go(this._elementListeners,t,[]),c={name:e,phase:i,callback:r};s.push(c);const d=Go(this._engine.statesByElement,t,new Map);return d.has(e)||(Xa(t,US),Xa(t,US+"-"+e),d.set(e,aN)),()=>{this._engine.afterFlush(()=>{const p=s.indexOf(c);p>=0&&s.splice(p,1),this._triggers.has(e)||d.delete(e)})}}register(t,e){return!this._triggers.has(t)&&(this._triggers.set(t,e),!0)}_getTrigger(t){const e=this._triggers.get(t);if(!e)throw function aee(n){return new l.vHH(3401,!1)}();return e}trigger(t,e,i,r=!0){const s=this._getTrigger(e),c=new lN(this.id,e,t);let d=this._engine.statesByElement.get(t);d||(Xa(t,US),Xa(t,US+"-"+e),this._engine.statesByElement.set(t,d=new Map));let p=d.get(e);const _=new oN(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&p&&_.absorbOptions(p.options),d.set(e,_),p||(p=aN),_.value!==aD&&p.value===_.value){if(!function pte(n,t){const e=Object.keys(n),i=Object.keys(t);if(e.length!=i.length)return!1;for(let r=0;r<e.length;r++){const s=e[r];if(!t.hasOwnProperty(s)||n[s]!==t[s])return!1}return!0}(p.params,_.params)){const K=[],re=s.matchStyles(p.value,p.params,K),Ye=s.matchStyles(_.value,_.params,K);K.length?this._engine.reportError(K):this._engine.afterFlush(()=>{yg(t,re),ru(t,Ye)})}return}const T=Go(this._engine.playersByElement,t,[]);T.forEach(K=>{K.namespaceId==this.id&&K.triggerName==e&&K.queued&&K.destroy()});let N=s.matchTransition(p.value,_.value,t,_.params),V=!1;if(!N){if(!r)return;N=s.fallbackTransition,V=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:N,fromState:p,toState:_,player:c,isFallbackTransition:V}),V||(Xa(t,J3),c.onStart(()=>{Tv(t,J3)})),c.onDone(()=>{let K=this.players.indexOf(c);K>=0&&this.players.splice(K,1);const re=this._engine.playersByElement.get(t);if(re){let Ye=re.indexOf(c);Ye>=0&&re.splice(Ye,1)}}),this.players.push(c),T.push(c),c}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,i)=>{this._elementListeners.set(i,e.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(i=>i.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const i=this._engine.driver.query(t,HS,!0);i.forEach(r=>{if(r[Qa])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(c=>c.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,e,i,r){const s=this._engine.statesByElement.get(t),c=new Map;if(s){const d=[];if(s.forEach((p,_)=>{if(c.set(_,p.value),this._triggers.has(_)){const b=this.trigger(t,_,aD,r);b&&d.push(b)}}),d.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,c),i&&Ff(d).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),i=this._engine.statesByElement.get(t);if(e&&i){const r=new Set;e.forEach(s=>{const c=s.name;if(r.has(c))return;r.add(c);const p=this._triggers.get(c).fallbackTransition,_=i.get(c)||aN,b=new oN(aD),E=new lN(this.id,c,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:c,transition:p,fromState:_,toState:b,player:E,isFallbackTransition:!0})})}}removeNode(t,e){const i=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(t):[];if(s&&s.length)r=!0;else{let c=t;for(;c=c.parentNode;)if(i.statesByElement.get(c)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)i.markElementAsRemoved(this.id,t,!1,e);else{const s=t[Qa];(!s||s===e$)&&(i.afterFlush(()=>this.clearElementCache(t)),i.destroyInnerAnimations(t),i._onRemovalComplete(t,e))}}insertNode(t,e){Xa(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,c=this._elementListeners.get(s);c&&c.forEach(d=>{if(d.name==i.triggerName){const p=z1(s,i.triggerName,i.fromState.value,i.toState.value);p._data=t,H1(i.player,d.phase,p,d.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(i)}),this._queue=[],e.sort((i,r)=>{const s=i.transition.ast.depCount,c=r.transition.ast.depCount;return 0==s||0==c?s-c:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(i=>i.element===t)||e,e}}class lte{constructor(t,e,i){this.bodyNode=t,this.driver=e,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(i=>{i.queued&&t.push(i)})}),t}createNamespace(t,e){const i=new ate(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(i,e):(this.newHostElements.set(e,i),this.collectEnterElement(e)),this._namespaceLookup[t]=i}_balanceNamespaceList(t,e){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let c=!1,d=this.driver.getParentElement(e);for(;d;){const p=r.get(d);if(p){const _=i.indexOf(p);i.splice(_+1,0,t),c=!0;break}d=this.driver.getParentElement(d)}c||i.unshift(t)}else i.push(t);return r.set(e,t),t}register(t,e){let i=this._namespaceLookup[t];return i||(i=this.createNamespace(t,e)),i}registerTrigger(t,e,i){let r=this._namespaceLookup[t];r&&r.register(e,i)&&this.totalAnimations++}destroy(t,e){if(!t)return;const i=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[t];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,i=this.statesByElement.get(t);if(i)for(let r of i.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&e.add(s)}return e}trigger(t,e,i,r){if(XS(e)){const s=this._fetchNamespace(t);if(s)return s.trigger(e,i,r),!0}return!1}insertNode(t,e,i,r){if(!XS(e))return;const s=e[Qa];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const c=this.collectedLeaveElements.indexOf(e);c>=0&&this.collectedLeaveElements.splice(c,1)}if(t){const c=this._fetchNamespace(t);c&&c.insertNode(e,i)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Xa(t,sN)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Tv(t,sN))}removeNode(t,e,i,r){if(XS(e)){const s=t?this._fetchNamespace(t):null;if(s?s.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),i){const c=this.namespacesByHostElement.get(e);c&&c.id!==t&&c.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,i,r,s){this.collectedLeaveElements.push(e),e[Qa]={namespaceId:t,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(t,e,i,r,s){return XS(e)?this._fetchNamespace(t).listen(e,i,r,s):()=>{}}_buildInstruction(t,e,i,r,s){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,i,r,t.fromState.options,t.toState.options,e,s)}destroyInnerAnimations(t){let e=this.driver.query(t,HS,!0);e.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,Y1,!0),e.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Ff(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[Qa];if(e&&e.setForRemoval){if(t[Qa]=e$,e.namespaceId){this.destroyInnerAnimations(t);const i=this._fetchNamespace(e.namespaceId);i&&i.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(sN)&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)Xa(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{e=this._flushAnimations(i,t)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],e.length?Ff(e).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(t){throw function lee(n){return new l.vHH(3402,!1)}()}_flushAnimations(t,e){const i=new ZS,r=[],s=new Map,c=[],d=new Map,p=new Map,_=new Map,b=new Set;this.disabledNodes.forEach(At=>{b.add(At);const Wt=this.driver.query(At,".ng-animate-queued",!0);for(let Jt=0;Jt<Wt.length;Jt++)b.add(Wt[Jt])});const E=this.bodyNode,T=Array.from(this.statesByElement.keys()),N=i$(T,this.collectedEnterElements),V=new Map;let K=0;N.forEach((At,Wt)=>{const Jt=q1+K++;V.set(Wt,Jt),At.forEach(Vn=>Xa(Vn,Jt))});const re=[],Ye=new Set,rt=new Set;for(let At=0;At<this.collectedLeaveElements.length;At++){const Wt=this.collectedLeaveElements[At],Jt=Wt[Qa];Jt&&Jt.setForRemoval&&(re.push(Wt),Ye.add(Wt),Jt.hasAnimation?this.driver.query(Wt,".ng-star-inserted",!0).forEach(Vn=>Ye.add(Vn)):rt.add(Wt))}const pt=new Map,st=i$(T,Array.from(Ye));st.forEach((At,Wt)=>{const Jt=VS+K++;pt.set(Wt,Jt),At.forEach(Vn=>Xa(Vn,Jt))}),t.push(()=>{N.forEach((At,Wt)=>{const Jt=V.get(Wt);At.forEach(Vn=>Tv(Vn,Jt))}),st.forEach((At,Wt)=>{const Jt=pt.get(Wt);At.forEach(Vn=>Tv(Vn,Jt))}),re.forEach(At=>{this.processLeaveNode(At)})});const Lt=[],Ht=[];for(let At=this._namespaceList.length-1;At>=0;At--)this._namespaceList[At].drainQueuedTransitions(e).forEach(Jt=>{const Vn=Jt.player,qr=Jt.element;if(Lt.push(Vn),this.collectedEnterElements.length){const ws=qr[Qa];if(ws&&ws.setForMove){if(ws.previousTriggersValues&&ws.previousTriggersValues.has(Jt.triggerName)){const wg=ws.previousTriggersValues.get(Jt.triggerName),Ja=this.statesByElement.get(Jt.element);if(Ja&&Ja.has(Jt.triggerName)){const oT=Ja.get(Jt.triggerName);oT.value=wg,Ja.set(Jt.triggerName,oT)}}return void Vn.destroy()}}const au=!E||!this.driver.containsElement(E,qr),Yo=pt.get(qr),Vf=V.get(qr),ji=this._buildInstruction(Jt,i,Vf,Yo,au);if(ji.errors&&ji.errors.length)return void Ht.push(ji);if(au)return Vn.onStart(()=>yg(qr,ji.fromStyles)),Vn.onDestroy(()=>ru(qr,ji.toStyles)),void r.push(Vn);if(Jt.isFallbackTransition)return Vn.onStart(()=>yg(qr,ji.fromStyles)),Vn.onDestroy(()=>ru(qr,ji.toStyles)),void r.push(Vn);const q$=[];ji.timelines.forEach(ws=>{ws.stretchStartingKeyframe=!0,this.disabledNodes.has(ws.element)||q$.push(ws)}),ji.timelines=q$,i.append(qr,ji.timelines),c.push({instruction:ji,player:Vn,element:qr}),ji.queriedElements.forEach(ws=>Go(d,ws,[]).push(Vn)),ji.preStyleProps.forEach((ws,wg)=>{if(ws.size){let Ja=p.get(wg);Ja||p.set(wg,Ja=new Set),ws.forEach((oT,SN)=>Ja.add(SN))}}),ji.postStyleProps.forEach((ws,wg)=>{let Ja=_.get(wg);Ja||_.set(wg,Ja=new Set),ws.forEach((oT,SN)=>Ja.add(SN))})});if(Ht.length){const At=[];Ht.forEach(Wt=>{At.push(function cee(n,t){return new l.vHH(3505,!1)}())}),Lt.forEach(Wt=>Wt.destroy()),this.reportError(At)}const En=new Map,tr=new Map;c.forEach(At=>{const Wt=At.element;i.has(Wt)&&(tr.set(Wt,Wt),this._beforeAnimationBuild(At.player.namespaceId,At.instruction,En))}),r.forEach(At=>{const Wt=At.element;this._getPreviousPlayers(Wt,!1,At.namespaceId,At.triggerName,null).forEach(Vn=>{Go(En,Wt,[]).push(Vn),Vn.destroy()})});const qo=re.filter(At=>s$(At,p,_)),Sd=new Map;n$(Sd,this.driver,rt,_,bd).forEach(At=>{s$(At,p,_)&&qo.push(At)});const hD=new Map;N.forEach((At,Wt)=>{n$(hD,this.driver,new Set(At),p,"!")}),qo.forEach(At=>{const Wt=Sd.get(At),Jt=hD.get(At);Sd.set(At,new Map([...Array.from(Wt?.entries()??[]),...Array.from(Jt?.entries()??[])]))});const Cg=[],G$=[],W$={};c.forEach(At=>{const{element:Wt,player:Jt,instruction:Vn}=At;if(i.has(Wt)){if(b.has(Wt))return Jt.onDestroy(()=>ru(Wt,Vn.toStyles)),Jt.disabled=!0,Jt.overrideTotalTime(Vn.totalTime),void r.push(Jt);let qr=W$;if(tr.size>1){let Yo=Wt;const Vf=[];for(;Yo=Yo.parentNode;){const ji=tr.get(Yo);if(ji){qr=ji;break}Vf.push(Yo)}Vf.forEach(ji=>tr.set(ji,qr))}const au=this._buildAnimation(Jt.namespaceId,Vn,En,s,hD,Sd);if(Jt.setRealPlayer(au),qr===W$)Cg.push(Jt);else{const Yo=this.playersByElement.get(qr);Yo&&Yo.length&&(Jt.parentPlayer=Ff(Yo)),r.push(Jt)}}else yg(Wt,Vn.fromStyles),Jt.onDestroy(()=>ru(Wt,Vn.toStyles)),G$.push(Jt),b.has(Wt)&&r.push(Jt)}),G$.forEach(At=>{const Wt=s.get(At.element);if(Wt&&Wt.length){const Jt=Ff(Wt);At.setRealPlayer(Jt)}}),r.forEach(At=>{At.parentPlayer?At.syncPlayerEvents(At.parentPlayer):At.destroy()});for(let At=0;At<re.length;At++){const Wt=re[At],Jt=Wt[Qa];if(Tv(Wt,VS),Jt&&Jt.hasAnimation)continue;let Vn=[];if(d.size){let au=d.get(Wt);au&&au.length&&Vn.push(...au);let Yo=this.driver.query(Wt,Y1,!0);for(let Vf=0;Vf<Yo.length;Vf++){let ji=d.get(Yo[Vf]);ji&&ji.length&&Vn.push(...ji)}}const qr=Vn.filter(au=>!au.destroyed);qr.length?hte(this,Wt,qr):this.processLeaveNode(Wt)}return re.length=0,Cg.forEach(At=>{this.players.push(At),At.onDone(()=>{At.destroy();const Wt=this.players.indexOf(At);this.players.splice(Wt,1)}),At.play()}),Cg}elementContainsData(t,e){let i=!1;const r=e[Qa];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(e)&&(i=!0),this.playersByQueriedElement.has(e)&&(i=!0),this.statesByElement.has(e)&&(i=!0),this._fetchNamespace(t).elementContainsData(e)||i}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,i,r,s){let c=[];if(e){const d=this.playersByQueriedElement.get(t);d&&(c=d)}else{const d=this.playersByElement.get(t);if(d){const p=!s||s==aD;d.forEach(_=>{_.queued||!p&&_.triggerName!=r||c.push(_)})}}return(i||r)&&(c=c.filter(d=>!(i&&i!=d.namespaceId||r&&r!=d.triggerName))),c}_beforeAnimationBuild(t,e,i){const s=e.element,c=e.isRemovalTransition?void 0:t,d=e.isRemovalTransition?void 0:e.triggerName;for(const p of e.timelines){const _=p.element,b=_!==s,E=Go(i,_,[]);this._getPreviousPlayers(_,b,c,d,e.toState).forEach(N=>{const V=N.getRealPlayer();V.beforeDestroy&&V.beforeDestroy(),N.destroy(),E.push(N)})}yg(s,e.fromStyles)}_buildAnimation(t,e,i,r,s,c){const d=e.triggerName,p=e.element,_=[],b=new Set,E=new Set,T=e.timelines.map(V=>{const K=V.element;b.add(K);const re=K[Qa];if(re&&re.removedBeforeQueried)return new jw(V.duration,V.delay);const Ye=K!==p,rt=function fte(n){const t=[];return r$(n,t),t}((i.get(K)||ste).map(En=>En.getRealPlayer())).filter(En=>!!En.element&&En.element===K),pt=s.get(K),st=c.get(K),Lt=A3(0,this._normalizer,0,V.keyframes,pt,st),Ht=this._buildPlayer(V,Lt,rt);if(V.subTimeline&&r&&E.add(K),Ye){const En=new lN(t,d,K);En.setRealPlayer(Ht),_.push(En)}return Ht});_.forEach(V=>{Go(this.playersByQueriedElement,V.element,[]).push(V),V.onDone(()=>function cte(n,t,e){let i=n.get(t);if(i){if(i.length){const r=i.indexOf(e);i.splice(r,1)}0==i.length&&n.delete(t)}return i}(this.playersByQueriedElement,V.element,V))}),b.forEach(V=>Xa(V,V3));const N=Ff(T);return N.onDestroy(()=>{b.forEach(V=>Tv(V,V3)),ru(p,e.toStyles)}),E.forEach(V=>{Go(r,V,[]).push(N)}),N}_buildPlayer(t,e,i){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,i):new jw(t.duration,t.delay)}}class lN{constructor(t,e,i){this.namespaceId=t,this.triggerName=e,this.element=i,this._player=new jw,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,i)=>{e.forEach(r=>H1(t,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){Go(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function XS(n){return n&&1===n.nodeType}function t$(n,t){const e=n.style.display;return n.style.display=t??"none",e}function n$(n,t,e,i,r){const s=[];e.forEach(p=>s.push(t$(p)));const c=[];i.forEach((p,_)=>{const b=new Map;p.forEach(E=>{const T=t.computeStyle(_,E,r);b.set(E,T),(!T||0==T.length)&&(_[Qa]=ote,c.push(_))}),n.set(_,b)});let d=0;return e.forEach(p=>t$(p,s[d++])),c}function i$(n,t){const e=new Map;if(n.forEach(d=>e.set(d,[])),0==t.length)return e;const r=new Set(t),s=new Map;function c(d){if(!d)return 1;let p=s.get(d);if(p)return p;const _=d.parentNode;return p=e.has(_)?_:r.has(_)?1:c(_),s.set(d,p),p}return t.forEach(d=>{const p=c(d);1!==p&&e.get(p).push(d)}),e}function Xa(n,t){n.classList?.add(t)}function Tv(n,t){n.classList?.remove(t)}function hte(n,t,e){Ff(e).onDone(()=>n.processLeaveNode(t))}function r$(n,t){for(let e=0;e<n.length;e++){const i=n[e];i instanceof HH?r$(i.players,t):t.push(i)}}function s$(n,t,e){const i=e.get(n);if(!i)return!1;let r=t.get(n);return r?i.forEach(s=>r.add(s)):t.set(n,i),e.delete(n),!0}class JS{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new lte(t,e,i),this._timelineEngine=new ete(t,e,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(t,e,i,r,s){const c=t+"-"+r;let d=this._triggerCache[c];if(!d){const p=[],b=X1(this._driver,s,p,[]);if(p.length)throw function XJ(n,t){return new l.vHH(3404,!1)}();d=function Kee(n,t,e){return new Qee(n,t,e)}(r,b,this._normalizer),this._triggerCache[c]=d}this._transitionEngine.registerTrigger(e,r,d)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,i,r){this._transitionEngine.insertNode(t,e,i,r)}onRemove(t,e,i,r){this._transitionEngine.removeNode(t,e,r||!1,i)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,i,r){if("@"==i.charAt(0)){const[s,c]=k3(i);this._timelineEngine.command(s,e,c,r)}else this._transitionEngine.trigger(t,e,i,r)}listen(t,e,i,r,s){if("@"==i.charAt(0)){const[c,d]=k3(i);return this._timelineEngine.listen(c,e,d,s)}return this._transitionEngine.listen(t,e,i,r,s)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let gte=(()=>{class n{constructor(e,i,r){this._element=e,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(e);s||n.initialStylesByElement.set(e,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&ru(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ru(this._element,this._initialStyles),this._endStyles&&(ru(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(yg(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(yg(this._element,this._endStyles),this._endStyles=null),ru(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function cN(n){let t=null;return n.forEach((e,i)=>{(function _te(n){return"display"===n||"position"===n})(i)&&(t=t||new Map,t.set(i,e))}),t}class o${constructor(t,e,i,r){this.element=t,this.keyframes=e,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){const e=[];return t.forEach(i=>{e.push(Object.fromEntries(i))}),e}_triggerWebAnimation(t,e,i){return t.animate(this._convertKeyframesToObject(e),i)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&t.set(r,this._finished?i:G3(this.element,r))}),this.currentSnapshot=t}triggerCallback(t){const e="start"===t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class yte{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}matchesElement(t,e){return!1}containsElement(t,e){return N3(t,e)}getParentElement(t){return G1(t)}query(t,e,i){return F3(t,e,i)}computeStyle(t,e,i){return window.getComputedStyle(t)[e]}animate(t,e,i,r,s,c=[]){const p={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(p.easing=s);const _=new Map,b=c.filter(N=>N instanceof o$);(function wee(n,t){return 0===n||0===t})(i,r)&&b.forEach(N=>{N.currentSnapshot.forEach((V,K)=>_.set(K,V))});let E=function yee(n){return n.length?n[0]instanceof Map?n:n.map(t=>U3(t)):[]}(e).map(N=>Lf(N));E=function Dee(n,t,e){if(e.size&&t.length){let i=t[0],r=[];if(e.forEach((s,c)=>{i.has(c)||r.push(c),i.set(c,s)}),r.length)for(let s=1;s<t.length;s++){let c=t[s];r.forEach(d=>c.set(d,G3(n,d)))}}return t}(t,E,_);const T=function mte(n,t){let e=null,i=null;return Array.isArray(t)&&t.length?(e=cN(t[0]),t.length>1&&(i=cN(t[t.length-1]))):t instanceof Map&&(e=cN(t)),e||i?new gte(n,e,i):null}(t,E);return new o$(t,E,p,T)}}let vte=(()=>{class n extends LH{constructor(e,i){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(i.body,{id:"0",encapsulation:l.ifc.None,styles:[],data:{animation:[]}})}build(e){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(e)?VH(e):e;return a$(this._renderer,null,i,"register",[r]),new bte(i,this._renderer)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(l.FYo),l.LFG(se))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class bte extends class GZ{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new Cte(this._id,t,e||{},this._renderer)}}class Cte{constructor(t,e,i,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return a$(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function a$(n,t,e,i,r){return n.setProperty(t,`@@${e}:${i}`,r)}const l$="@.disabled";let wte=(()=>{class n{constructor(e,i,r){this.delegate=e,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(s,c)=>{const d=c?.parentNode(s);d&&c.removeChild(d,s)}}createRenderer(e,i){const s=this.delegate.createRenderer(e,i);if(!(e&&i&&i.data&&i.data.animation)){let b=this._rendererCache.get(s);return b||(b=new c$("",s,this.engine),this._rendererCache.set(s,b)),b}const c=i.id,d=i.id+"-"+this._currentId;this._currentId++,this.engine.register(d,e);const p=b=>{Array.isArray(b)?b.forEach(p):this.engine.registerTrigger(c,d,e,b.name,b)};return i.data.animation.forEach(p),new Dte(this,d,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,i,r){e>=0&&e<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[c,d]=s;c(d)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(l.FYo),l.LFG(JS),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class c${constructor(t,e,i){this.namespaceId=t,this.delegate=e,this.engine=i,this.destroyNode=this.delegate.destroyNode?r=>e.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,i,r=!0){this.delegate.insertBefore(t,e,i),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,i){this.engine.onRemove(this.namespaceId,e,this.delegate,i)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,i,r){this.delegate.setAttribute(t,e,i,r)}removeAttribute(t,e,i){this.delegate.removeAttribute(t,e,i)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,i,r){this.delegate.setStyle(t,e,i,r)}removeStyle(t,e,i){this.delegate.removeStyle(t,e,i)}setProperty(t,e,i){"@"==e.charAt(0)&&e==l$?this.disableAnimations(t,!!i):this.delegate.setProperty(t,e,i)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,i){return this.delegate.listen(t,e,i)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class Dte extends c${constructor(t,e,i,r){super(e,i,r),this.factory=t,this.namespaceId=e}setProperty(t,e,i){"@"==e.charAt(0)?"."==e.charAt(1)&&e==l$?this.disableAnimations(t,i=void 0===i||!!i):this.engine.process(this.namespaceId,t,e.slice(1),i):this.delegate.setProperty(t,e,i)}listen(t,e,i){if("@"==e.charAt(0)){const r=function Ete(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(t);let s=e.slice(1),c="";return"@"!=s.charAt(0)&&([s,c]=function Mte(n){const t=n.indexOf(".");return[n.substring(0,t),n.slice(t+1)]}(s)),this.engine.listen(this.namespaceId,r,s,c,d=>{this.factory.scheduleListenerCallback(d._data||-1,i,d)})}return this.delegate.listen(t,e,i)}}let Ite=(()=>{class n extends JS{constructor(e,i,r,s){super(e.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(se),l.LFG(W1),l.LFG(iN),l.LFG(l.z2F))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const u$=[{provide:LH,useClass:vte},{provide:iN,useFactory:function xte(){return new Wee}},{provide:JS,useClass:Ite},{provide:l.FYo,useFactory:function Ste(n,t,e){return new wte(n,t,e)},deps:[gl,JS,l.R0b]}],uN=[{provide:W1,useFactory:()=>new yte},{provide:l.QbO,useValue:"BrowserAnimations"},...u$],d$=[{provide:W1,useClass:L3},{provide:l.QbO,useValue:"NoopAnimations"},...u$];let Tte=(()=>{class n{static withConfig(e){return{ngModule:n,providers:e.disableAnimations?d$:uN}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:uN,imports:[So]}),n})();F(3037);let Ate=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Mi,v1]}),n})();const dN_firebase={projectId:"chat-app-2103",appId:"1:386679545738:web:e39c4d64de496170063273",storageBucket:"chat-app-2103.appspot.com",apiKey:"AIzaSyCaZ9KLwVET_ZGBhn863v1ijSpwwZiGOlg",authDomain:"chat-app-2103.firebaseapp.com",messagingSenderId:"386679545738",measurementId:"G-JYGL79079Z"};class hN{constructor(t){return t}}const h$="firestore",fN=new l.OlP("angularfire2.firestore-instances");function Ote(n){return(t,e)=>{const i=t.runOutsideAngular(()=>n(e));return new hN(i)}}const Pte={provide:class kte{constructor(){return(0,Zt.vb)(h$)}},deps:[[new l.FiY,fN]]},Nte={provide:hN,useFactory:function Rte(n,t){const e=(0,Zt.JM)(h$,n,t);return e&&new hN(e)},deps:[[new l.FiY,fN],fs]};let Fte=(()=>{class n{constructor(){(0,Mr.KN)("angularfire",Zt.q4.full,"fst")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[Nte,Pte]}),n})();function Lte(n,...t){return{ngModule:Fte,providers:[{provide:fN,useFactory:Ote(n),multi:!0,deps:[l.R0b,l.zs3,Zt.HU,Da,[new l.FiY,Gg],[new l.FiY,no],...t]}]}}const Bte=(0,Zt.u3)(q6,!0),f$="firebasestorage.googleapis.com";class Ki extends te.ZR{constructor(t,e){super(pN(t),`Firebase Storage: ${e} (${pN(t)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ki.prototype)}_codeEquals(t){return pN(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function pN(n){return"storage/"+n}function gN(n){return new Ki("invalid-argument",n)}function _$(){return new Ki("app-deleted","The Firebase app was deleted.")}class Ws{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let i;try{i=Ws.makeFromUrl(t,e)}catch{return new Ws(t,"")}if(""===i.path)return i;throw function Yte(n){return new Ki("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(t)}static makeFromUrl(t,e){let i=null;const r="([A-Za-z0-9.\\-_]+)",d=new RegExp("^gs://"+r+"(/(.*))?$","i");function _(st){st.path_=decodeURIComponent(st.path)}const E=e.replace(/[.]/g,"\\."),pt=[{regex:d,indices:{bucket:1,path:3},postModify:function s(st){"/"===st.path.charAt(st.path.length-1)&&(st.path_=st.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${E}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:_},{regex:new RegExp(`^https?://${e===f$?"(?:storage.googleapis.com|storage.cloud.google.com)":e}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:_}];for(let st=0;st<pt.length;st++){const Lt=pt[st],Ht=Lt.regex.exec(t);if(Ht){let tr=Ht[Lt.indices.path];tr||(tr=""),i=new Ws(Ht[Lt.indices.bucket],tr),Lt.postModify(i);break}}if(null==i)throw function qte(n){return new Ki("invalid-url","Invalid URL '"+n+"'.")}(t);return i}}class Jte{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}function yN(n,t,e,i){if(i<t)throw gN(`Invalid value for '${n}'. Expected ${t} or greater.`);if(i>e)throw gN(`Invalid value for '${n}'. Expected ${e} or less.`)}var Bf=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Bf||(Bf={})),Bf))();class sne{constructor(t,e,i,r,s,c,d,p,_,b,E){this.url_=t,this.method_=e,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=c,this.callback_=d,this.errorCallback_=p,this.timeout_=_,this.progressCallback_=b,this.connectionFactory_=E,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((T,N)=>{this.resolve_=T,this.reject_=N,this.start_()})}start_(){const e=(i,r)=>{const s=this.resolve_,c=this.reject_,d=r.connection;if(r.wasSuccessCode)try{const p=this.callback_(d,d.getResponse());!function nne(n){return void 0!==n}(p)?s():s(p)}catch(p){c(p)}else if(null!==d){const p=function mN(){return new Ki("unknown","An unknown error occurred, please check the error payload for server response.")}();p.serverResponse=d.getErrorText(),c(this.errorCallback_?this.errorCallback_(d,p):p)}else c(r.canceled?this.appDelete_?_$():function m$(){return new Ki("canceled","User canceled the upload/download.")}():function Wte(){return new Ki("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?e(0,new nT(!1,null,!0)):this.backoffId_=function ene(n,t,e){let i=1,r=null,s=null,c=!1,d=0;function p(){return 2===d}let _=!1;function b(...re){_||(_=!0,t.apply(null,re))}function E(re){r=setTimeout(()=>{r=null,n(N,p())},re)}function T(){s&&clearTimeout(s)}function N(re,...Ye){if(_)return void T();if(re)return T(),void b.call(null,re,...Ye);if(p()||c)return T(),void b.call(null,re,...Ye);let pt;i<64&&(i*=2),1===d?(d=2,pt=0):pt=1e3*(i+Math.random()),E(pt)}let V=!1;function K(re){V||(V=!0,T(),!_&&(null!==r?(re||(d=2),clearTimeout(r),E(0)):re||(d=1)))}return E(0),s=setTimeout(()=>{c=!0,K(!0)},e),K}((i,r)=>{if(r)return void i(!1,new nT(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const c=d=>{null!==this.progressCallback_&&this.progressCallback_(d.loaded,d.lengthComputable?d.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(c),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(c),this.pendingConnection_=null;const d=s.getErrorCode()===Bf.NO_ERROR,p=s.getStatus();if(!d||this.isRetryStatusCode_(p)){const b=s.getErrorCode()===Bf.ABORT;return void i(!1,new nT(!1,null,b))}const _=-1!==this.successCodes_.indexOf(p);i(!0,new nT(_,s))})},e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function tne(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(t){const e=t>=500&&t<600,r=-1!==[408,429].indexOf(t),s=-1!==this.additionalRetryCodes_.indexOf(t);return e||r||s}}class nT{constructor(t,e,i){this.wasSuccessCode=t,this.connection=e,this.canceled=!!i}}class bg{constructor(t,e){this._service=t,this._location=e instanceof Ws?e:Ws.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new bg(t,e)}get root(){const t=new Ws(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return function E$(n){const t=n.lastIndexOf("/",n.length-2);return-1===t?n:n.slice(t+1)}(this._location.path)}get storage(){return this._service}get parent(){const t=function vne(n){if(0===n.length)return null;const t=n.lastIndexOf("/");return-1===t?"":n.slice(0,t)}(this._location.path);if(null===t)return null;const e=new Ws(this._location.bucket,t);return new bg(this._service,e)}_throwIfRoot(t){if(""===this._location.path)throw function Xte(n){return new Ki("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(t)}}function V$(n,t){const e=t?.storageBucket;return null==e?null:Ws.makeFromBucketSpec(e,n)}class MN{constructor(t,e,i,r,s){this.app=t,this._authProvider=e,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=f$,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Ws.makeFromBucketSpec(r,this._host):V$(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._bucket=null!=this._url?Ws.makeFromBucketSpec(this._url,t):V$(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){yN("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){yN("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}_getAuthToken(){var t=this;return(0,Me.Z)(function*(){if(t._overrideAuthToken)return t._overrideAuthToken;const e=t._authProvider.getImmediate({optional:!0});if(e){const i=yield e.getToken();if(null!==i)return i.accessToken}return null})()}_getAppCheckToken(){var t=this;return(0,Me.Z)(function*(){const e=t._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new bg(this,t)}_makeRequest(t,e,i,r){if(this._deleted)return new Jte(_$());{const s=function une(n,t,e,i,r,s){const c=function v$(n){const t=encodeURIComponent;let e="?";for(const i in n)n.hasOwnProperty(i)&&(e=e+(t(i)+"=")+t(n[i])+"&");return e=e.slice(0,-1),e}(n.urlParams),d=n.url+c,p=Object.assign({},n.headers);return function lne(n,t){t&&(n["X-Firebase-GMPID"]=t)}(p,t),function one(n,t){null!==t&&t.length>0&&(n.Authorization="Firebase "+t)}(p,e),function ane(n,t){n["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}(p,s),function cne(n,t){null!==t&&(n["X-Firebase-AppCheck"]=t)}(p,i),new sne(d,n.method,p,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r)}(t,this._appId,i,r,e,this._firebaseVersion);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(t,e){var i=this;return(0,Me.Z)(function*(){const[r,s]=yield Promise.all([i._getAuthToken(),i._getAppCheckToken()]);return i._makeRequest(t,e,r,s).getPromise()})()}}const U$="@firebase/storage",j$="storage";function rie(n=(0,ii.getApp)(),t){return n=(0,te.m9)(n),(0,ii._getProvider)(n,j$).getImmediate({identifier:t})}function sie(n,{instanceIdentifier:t}){const e=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new MN(e,i,r,t,ii.SDK_VERSION)}!function oie(){(0,ii._registerComponent)(new ps.wA(j$,sie,"PUBLIC").setMultipleInstances(!0)),(0,ii.registerVersion)(U$,"0.9.9",""),(0,ii.registerVersion)(U$,"0.9.9","esm2017")}();class IN{constructor(t){return t}}const z$="storage",xN=new l.OlP("angularfire2.storage-instances");function cie(n){return(t,e)=>{const i=t.runOutsideAngular(()=>n(e));return new IN(i)}}const uie={provide:class aie{constructor(){return(0,Zt.vb)(z$)}},deps:[[new l.FiY,xN]]},die={provide:IN,useFactory:function lie(n,t){const e=(0,Zt.JM)(z$,n,t);return e&&new IN(e)},deps:[[new l.FiY,xN],fs]};let hie=(()=>{class n{constructor(){(0,Mr.KN)("angularfire",Zt.q4.full,"gcs")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[die,uie]}),n})();function fie(n,...t){return{ngModule:hie,providers:[{provide:xN,useFactory:cie(n),multi:!0,deps:[l.R0b,l.zs3,Zt.HU,Da,[new l.FiY,Gg],[new l.FiY,no],...t]}]}}const pie=(0,Zt.u3)(rie,!0);let mie=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n,bootstrap:[AJ]}),n.\u0275inj=l.cJS({providers:[ov,iD],imports:[So,TJ,Tte,XX,Ate,Us.hO.initializeApp(dN_firebase),np(()=>rr(dN_firebase)),Yv(()=>Ou()),sm(()=>rk()),Lte(()=>Bte()),fie(()=>pie()),MK]}),n})();(0,l.G48)(),bl().bootstrapModule(mie).catch(n=>console.error(n))},5867:(Dt,Oe,F)=>{"use strict";F.d(Oe,{C6:()=>l.getApps,KN:()=>l.registerVersion,Mq:()=>l.getApp,ZF:()=>l.initializeApp});var l=F(9681);(0,l.registerVersion)("firebase","9.10.0","app")},127:(Dt,Oe,F)=>{"use strict";F.d(Oe,{Z:()=>l.Z});var l=F(3942);l.Z.registerVersion("firebase","9.10.0","app-compat")},5881:(Dt,Oe,F)=>{"use strict";F.r(Oe);var l=F(5861),H=F(3942),P=F(7143),ae=F(2090),se=(F(9681),F(1877),F(4859));function pe(){return window}function Y(){return(Y=(0,l.Z)(function*(oe,$,W){var xe;const{BuildInfo:nt}=pe();(0,P.aq)($.sessionId,"AuthEvent did not contain a session ID");const kt=yield we($.sessionId),Bt={};return(0,P.ar)()?Bt.ibi=nt.packageName:(0,P.as)()?Bt.apn=nt.packageName:(0,P.at)(oe,"operation-not-supported-in-this-environment"),nt.displayName&&(Bt.appDisplayName=nt.displayName),Bt.sessionId=kt,(0,P.au)(oe,W,$.type,void 0,null!==(xe=$.eventId)&&void 0!==xe?xe:void 0,Bt)})).apply(this,arguments)}function Ke(){return(Ke=(0,l.Z)(function*(oe){const{BuildInfo:$}=pe(),W={};(0,P.ar)()?W.iosBundleId=$.packageName:(0,P.as)()?W.androidPackageName=$.packageName:(0,P.at)(oe,"operation-not-supported-in-this-environment"),yield(0,P.av)(oe,W)})).apply(this,arguments)}function gt(){return(gt=(0,l.Z)(function*(oe,$,W){const{cordova:xe}=pe();let nt=()=>{};try{yield new Promise((kt,Bt)=>{let je=null;function _t(){var en;kt();const Fn=null===(en=xe.plugins.browsertab)||void 0===en?void 0:en.close;"function"==typeof Fn&&Fn(),"function"==typeof W?.close&&W.close()}function hn(){je||(je=window.setTimeout(()=>{Bt((0,P.aw)(oe,"redirect-cancelled-by-user"))},2e3))}function ei(){"visible"===document?.visibilityState&&hn()}$.addPassiveListener(_t),document.addEventListener("resume",hn,!1),(0,P.as)()&&document.addEventListener("visibilitychange",ei,!1),nt=()=>{$.removePassiveListener(_t),document.removeEventListener("resume",hn,!1),document.removeEventListener("visibilitychange",ei,!1),je&&window.clearTimeout(je)}})}finally{nt()}})).apply(this,arguments)}function we(oe){return ht.apply(this,arguments)}function ht(){return(ht=(0,l.Z)(function*(oe){const $=ft(oe),W=yield crypto.subtle.digest("SHA-256",$);return Array.from(new Uint8Array(W)).map(nt=>nt.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function ft(oe){if((0,P.aq)(/[0-9a-zA-Z]+/.test(oe),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(oe);const $=new ArrayBuffer(oe.length),W=new Uint8Array($);for(let xe=0;xe<oe.length;xe++)W[xe]=oe.charCodeAt(xe);return W}class Ve extends P.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise($=>{this.resolveInialized=$})}addPassiveListener($){this.passiveListeners.add($)}removePassiveListener($){this.passiveListeners.delete($)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent($){return this.resolveInialized(),this.passiveListeners.forEach(W=>W($)),super.onEvent($)}initialized(){var $=this;return(0,l.Z)(function*(){yield $.initPromise})()}}function ce(oe){return me.apply(this,arguments)}function me(){return(me=(0,l.Z)(function*(oe){const $=yield ie()._get(ye(oe));return $&&(yield ie()._remove(ye(oe))),$})).apply(this,arguments)}function J(){const oe=[],$="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let W=0;W<20;W++){const xe=Math.floor(Math.random()*$.length);oe.push($.charAt(xe))}return oe.join("")}function ie(){return(0,P.ay)(P.b)}function ye(oe){return(0,P.az)("authEvent",oe.config.apiKey,oe.name)}function qe(oe){if(!oe?.includes("?"))return{};const[$,...W]=oe.split("?");return(0,ae.zd)(W.join("?"))}function Qe(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,P.aw)("no-auth-event")}}function sn(){var oe;return(null===(oe=self?.location)||void 0===oe?void 0:oe.protocol)||null}function Un(oe=(0,ae.z$)()){return!("file:"!==sn()&&"ionic:"!==sn()&&"capacitor:"!==sn()||!oe.toLowerCase().match(/iphone|ipad|ipod|android/))}function yr(){try{const oe=self.localStorage,$=P.aI();if(oe)return oe.setItem($,"1"),oe.removeItem($),!function Yr(oe=(0,ae.z$)()){return function Qn(){return(0,ae.w1)()&&11===document?.documentMode}()||function Hn(oe=(0,ae.z$)()){return/Edge\/\d+/.test(oe)}(oe)}()||(0,ae.hl)()}catch{return Qi()&&(0,ae.hl)()}return!1}function Qi(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Xn(){return(function Qt(){return"http:"===sn()||"https:"===sn()}()||(0,ae.ru)()||Un())&&!function as(){return(0,ae.b$)()||(0,ae.UG)()}()&&yr()&&!Qi()}function vr(){return Un()&&typeof document<"u"}function ct(){return(ct=(0,l.Z)(function*(){return!!vr()&&new Promise(oe=>{const $=setTimeout(()=>{oe(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout($),oe(!0)})})})).apply(this,arguments)}const Jn={LOCAL:"local",NONE:"none",SESSION:"session"},Tn=P.ax,gi="persistence";function Ce(oe){return Re.apply(this,arguments)}function Re(){return(Re=(0,l.Z)(function*(oe){yield oe._initializationPromise;const $=Ne(),W=P.az(gi,oe.config.apiKey,oe.name);$&&$.setItem(W,oe._getPersistence())})).apply(this,arguments)}function Ne(){var oe;try{return(null===(oe=function wi(){return typeof window<"u"?window:null}())||void 0===oe?void 0:oe.sessionStorage)||null}catch{return null}}const ut=P.ax;class Je{constructor(){this.browserResolver=P.ay(P.k),this.cordovaResolver=P.ay(class cn{constructor(){this._redirectPersistence=P.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=P.aB,this._overrideRedirectResult=P.aC}_initialize($){var W=this;return(0,l.Z)(function*(){const xe=$._key();let nt=W.eventManagers.get(xe);return nt||(nt=new Ve($),W.eventManagers.set(xe,nt),W.attachCallbackListeners($,nt)),nt})()}_openPopup($){(0,P.at)($,"operation-not-supported-in-this-environment")}_openRedirect($,W,xe,nt){var kt=this;return(0,l.Z)(function*(){!function Ie(oe){var $,W,xe,nt,kt,Bt,je,_t,hn,ei;const en=pe();(0,P.ax)("function"==typeof(null===($=en?.universalLinks)||void 0===$?void 0:$.subscribe),oe,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,P.ax)(typeof(null===(W=en?.BuildInfo)||void 0===W?void 0:W.packageName)<"u",oe,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,P.ax)("function"==typeof(null===(kt=null===(nt=null===(xe=en?.cordova)||void 0===xe?void 0:xe.plugins)||void 0===nt?void 0:nt.browsertab)||void 0===kt?void 0:kt.openUrl),oe,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,P.ax)("function"==typeof(null===(_t=null===(je=null===(Bt=en?.cordova)||void 0===Bt?void 0:Bt.plugins)||void 0===je?void 0:je.browsertab)||void 0===_t?void 0:_t.isAvailable),oe,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,P.ax)("function"==typeof(null===(ei=null===(hn=en?.cordova)||void 0===hn?void 0:hn.InAppBrowser)||void 0===ei?void 0:ei.open),oe,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}($);const Bt=yield kt._initialize($);yield Bt.initialized(),Bt.resetRedirect(),(0,P.aD)(),yield kt._originValidation($);const je=function Ae(oe,$,W=null){return{type:$,eventId:W,urlResponse:null,sessionId:J(),postBody:null,tenantId:oe.tenantId,error:(0,P.aw)(oe,"no-auth-event")}}($,xe,nt);yield function et(oe,$){return ie()._set(ye(oe),$)}($,je);const _t=yield function q(oe,$,W){return Y.apply(this,arguments)}($,je,W),hn=yield function Be(oe){const{cordova:$}=pe();return new Promise(W=>{$.plugins.browsertab.isAvailable(xe=>{let nt=null;xe?$.plugins.browsertab.openUrl(oe):nt=$.InAppBrowser.open(oe,(0,P.ap)()?"_blank":"_system","location=yes"),W(nt)})})}(_t);return function Te(oe,$,W){return gt.apply(this,arguments)}($,Bt,hn)})()}_isIframeWebStorageSupported($,W){throw new Error("Method not implemented.")}_originValidation($){const W=$._key();return this.originValidationPromises[W]||(this.originValidationPromises[W]=function ee(oe){return Ke.apply(this,arguments)}($)),this.originValidationPromises[W]}attachCallbackListeners($,W){const{universalLinks:xe,handleOpenURL:nt,BuildInfo:kt}=pe(),Bt=setTimeout((0,l.Z)(function*(){yield ce($),W.onEvent(Qe())}),500),je=function(){var ei=(0,l.Z)(function*(en){clearTimeout(Bt);const Fn=yield ce($);let Ds=null;Fn&&en?.url&&(Ds=function De(oe,$){var W,xe;const nt=function Ge(oe){const $=qe(oe),W=$.link?decodeURIComponent($.link):void 0,xe=qe(W).link,nt=$.deep_link_id?decodeURIComponent($.deep_link_id):void 0;return qe(nt).link||nt||xe||W||oe}($);if(nt.includes("/__/auth/callback")){const kt=qe(nt),Bt=kt.firebaseError?function he(oe){try{return JSON.parse(oe)}catch{return null}}(decodeURIComponent(kt.firebaseError)):null,je=null===(xe=null===(W=Bt?.code)||void 0===W?void 0:W.split("auth/"))||void 0===xe?void 0:xe[1],_t=je?(0,P.aw)(je):null;return _t?{type:oe.type,eventId:oe.eventId,tenantId:oe.tenantId,error:_t,urlResponse:null,sessionId:null,postBody:null}:{type:oe.type,eventId:oe.eventId,tenantId:oe.tenantId,sessionId:oe.sessionId,urlResponse:nt,postBody:null}}return null}(Fn,en.url)),W.onEvent(Ds||Qe())});return function(Fn){return ei.apply(this,arguments)}}();typeof xe<"u"&&"function"==typeof xe.subscribe&&xe.subscribe(null,je);const _t=nt,hn=`${kt.packageName.toLowerCase()}://`;pe().handleOpenURL=function(){var ei=(0,l.Z)(function*(en){if(en.toLowerCase().startsWith(hn)&&je({url:en}),"function"==typeof _t)try{_t(en)}catch(Fn){console.error(Fn)}});return function(en){return ei.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=P.a,this._completeRedirectFn=P.aB,this._overrideRedirectResult=P.aC}_initialize($){var W=this;return(0,l.Z)(function*(){return yield W.selectUnderlyingResolver(),W.assertedUnderlyingResolver._initialize($)})()}_openPopup($,W,xe,nt){var kt=this;return(0,l.Z)(function*(){return yield kt.selectUnderlyingResolver(),kt.assertedUnderlyingResolver._openPopup($,W,xe,nt)})()}_openRedirect($,W,xe,nt){var kt=this;return(0,l.Z)(function*(){return yield kt.selectUnderlyingResolver(),kt.assertedUnderlyingResolver._openRedirect($,W,xe,nt)})()}_isIframeWebStorageSupported($,W){this.assertedUnderlyingResolver._isIframeWebStorageSupported($,W)}_originValidation($){return this.assertedUnderlyingResolver._originValidation($)}get _shouldInitProactively(){return vr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ut(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var $=this;return(0,l.Z)(function*(){if($.underlyingResolver)return;const W=yield function kr(){return ct.apply(this,arguments)}();$.underlyingResolver=W?$.cordovaResolver:$.browserResolver})()}}function Nt(oe){return oe.unwrap()}function jt(oe){return qn(oe)}function qn(oe){const{_tokenResponse:$}=oe instanceof ae.ZR?oe.customData:oe;if(!$)return null;if(!(oe instanceof ae.ZR)&&"temporaryProof"in $&&"phoneNumber"in $)return P.P.credentialFromResult(oe);const W=$.providerId;if(!W||W===P.o.PASSWORD)return null;let xe;switch(W){case P.o.GOOGLE:xe=P.Q;break;case P.o.FACEBOOK:xe=P.N;break;case P.o.GITHUB:xe=P.T;break;case P.o.TWITTER:xe=P.W;break;default:const{oauthIdToken:nt,oauthAccessToken:kt,oauthTokenSecret:Bt,pendingToken:je,nonce:_t}=$;return kt||Bt||nt||je?je?W.startsWith("saml.")?P.aL._create(W,je):P.J._fromParams({providerId:W,signInMethod:W,pendingToken:je,idToken:nt,accessToken:kt}):new P.U(W).credential({idToken:nt,accessToken:kt,rawNonce:_t}):null}return oe instanceof ae.ZR?xe.credentialFromError(oe):xe.credentialFromResult(oe)}function qt(oe,$){return $.catch(W=>{throw W instanceof ae.ZR&&function tt(oe,$){var W,xe;const nt=null===(W=$.customData)||void 0===W?void 0:W._tokenResponse;if("auth/multi-factor-auth-required"===(null===(xe=$)||void 0===xe?void 0:xe.code))$.resolver=new X(oe,P.an(oe,$));else if(nt){const kt=qn($),Bt=$;kt&&(Bt.credential=kt,Bt.tenantId=nt.tenantId||void 0,Bt.email=nt.email||void 0,Bt.phoneNumber=nt.phoneNumber||void 0)}}(oe,W),W}).then(W=>{const nt=W.user;return{operationType:W.operationType,credential:jt(W),additionalUserInfo:P.al(W),user:G.getOrCreate(nt)}})}function br(oe,$){return un.apply(this,arguments)}function un(){return(un=(0,l.Z)(function*(oe,$){const W=yield $;return{verificationId:W.verificationId,confirm:xe=>qt(oe,W.confirm(xe))}})).apply(this,arguments)}class X{constructor($,W){this.resolver=W,this.auth=function yt(oe){return oe.wrapped()}($)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn($){return qt(Nt(this.auth),this.resolver.resolveSignIn($))}}class G{constructor($){this._delegate=$,this.multiFactor=P.ao($)}static getOrCreate($){return G.USER_MAP.has($)||G.USER_MAP.set($,new G($)),G.USER_MAP.get($)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult($){return this._delegate.getIdTokenResult($)}getIdToken($){return this._delegate.getIdToken($)}linkAndRetrieveDataWithCredential($){return this.linkWithCredential($)}linkWithCredential($){var W=this;return(0,l.Z)(function*(){return qt(W.auth,P.Z(W._delegate,$))})()}linkWithPhoneNumber($,W){var xe=this;return(0,l.Z)(function*(){return br(xe.auth,P.l(xe._delegate,$,W))})()}linkWithPopup($){var W=this;return(0,l.Z)(function*(){return qt(W.auth,P.d(W._delegate,$,Je))})()}linkWithRedirect($){var W=this;return(0,l.Z)(function*(){return yield Ce(P.aE(W.auth)),P.g(W._delegate,$,Je)})()}reauthenticateAndRetrieveDataWithCredential($){return this.reauthenticateWithCredential($)}reauthenticateWithCredential($){var W=this;return(0,l.Z)(function*(){return qt(W.auth,P._(W._delegate,$))})()}reauthenticateWithPhoneNumber($,W){return br(this.auth,P.r(this._delegate,$,W))}reauthenticateWithPopup($){return qt(this.auth,P.e(this._delegate,$,Je))}reauthenticateWithRedirect($){var W=this;return(0,l.Z)(function*(){return yield Ce(P.aE(W.auth)),P.h(W._delegate,$,Je)})()}sendEmailVerification($){return P.ab(this._delegate,$)}unlink($){var W=this;return(0,l.Z)(function*(){return yield P.ak(W._delegate,$),W})()}updateEmail($){return P.ag(this._delegate,$)}updatePassword($){return P.ah(this._delegate,$)}updatePhoneNumber($){return P.u(this._delegate,$)}updateProfile($){return P.af(this._delegate,$)}verifyBeforeUpdateEmail($,W){return P.ac(this._delegate,$,W)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}G.USER_MAP=new WeakMap;const j=P.ax;let Z=(()=>{class oe{constructor(W,xe){if(this.app=W,xe.isInitialized())return this._delegate=xe.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:nt}=W.options;j(nt,"invalid-api-key",{appName:W.name}),j(nt,"invalid-api-key",{appName:W.name});const kt=typeof window<"u"?Je:void 0;this._delegate=xe.initialize({options:{persistence:Pe(nt,W.name),popupRedirectResolver:kt}}),this._delegate._updateErrorMap(P.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?G.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(W){this._delegate.languageCode=W}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(W){this._delegate.tenantId=W}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(W,xe){P.G(this._delegate,W,xe)}applyActionCode(W){return P.a2(this._delegate,W)}checkActionCode(W){return P.a3(this._delegate,W)}confirmPasswordReset(W,xe){return P.a1(this._delegate,W,xe)}createUserWithEmailAndPassword(W,xe){var nt=this;return(0,l.Z)(function*(){return qt(nt._delegate,P.a5(nt._delegate,W,xe))})()}fetchProvidersForEmail(W){return this.fetchSignInMethodsForEmail(W)}fetchSignInMethodsForEmail(W){return P.aa(this._delegate,W)}isSignInWithEmailLink(W){return P.a8(this._delegate,W)}getRedirectResult(){var W=this;return(0,l.Z)(function*(){j(Xn(),W._delegate,"operation-not-supported-in-this-environment");const xe=yield P.j(W._delegate,Je);return xe?qt(W._delegate,Promise.resolve(xe)):{credential:null,user:null}})()}addFrameworkForLogging(W){!function Rn(oe,$){(0,P.aE)(oe)._logFramework($)}(this._delegate,W)}onAuthStateChanged(W,xe,nt){const{next:kt,error:Bt,complete:je}=Q(W,xe,nt);return this._delegate.onAuthStateChanged(kt,Bt,je)}onIdTokenChanged(W,xe,nt){const{next:kt,error:Bt,complete:je}=Q(W,xe,nt);return this._delegate.onIdTokenChanged(kt,Bt,je)}sendSignInLinkToEmail(W,xe){return P.a7(this._delegate,W,xe)}sendPasswordResetEmail(W,xe){return P.a0(this._delegate,W,xe||void 0)}setPersistence(W){var xe=this;return(0,l.Z)(function*(){let nt;switch(function de(oe,$){Tn(Object.values(Jn).includes($),oe,"invalid-persistence-type"),(0,ae.b$)()?Tn($!==Jn.SESSION,oe,"unsupported-persistence-type"):(0,ae.UG)()?Tn($===Jn.NONE,oe,"unsupported-persistence-type"):Qi()?Tn($===Jn.NONE||$===Jn.LOCAL&&(0,ae.hl)(),oe,"unsupported-persistence-type"):Tn($===Jn.NONE||yr(),oe,"unsupported-persistence-type")}(xe._delegate,W),W){case Jn.SESSION:nt=P.a;break;case Jn.LOCAL:nt=(yield P.ay(P.i)._isAvailable())?P.i:P.b;break;case Jn.NONE:nt=P.L;break;default:return P.at("argument-error",{appName:xe._delegate.name})}return xe._delegate.setPersistence(nt)})()}signInAndRetrieveDataWithCredential(W){return this.signInWithCredential(W)}signInAnonymously(){return qt(this._delegate,P.X(this._delegate))}signInWithCredential(W){return qt(this._delegate,P.Y(this._delegate,W))}signInWithCustomToken(W){return qt(this._delegate,P.$(this._delegate,W))}signInWithEmailAndPassword(W,xe){return qt(this._delegate,P.a6(this._delegate,W,xe))}signInWithEmailLink(W,xe){return qt(this._delegate,P.a9(this._delegate,W,xe))}signInWithPhoneNumber(W,xe){return br(this._delegate,P.s(this._delegate,W,xe))}signInWithPopup(W){var xe=this;return(0,l.Z)(function*(){return j(Xn(),xe._delegate,"operation-not-supported-in-this-environment"),qt(xe._delegate,P.c(xe._delegate,W,Je))})()}signInWithRedirect(W){var xe=this;return(0,l.Z)(function*(){return j(Xn(),xe._delegate,"operation-not-supported-in-this-environment"),yield Ce(xe._delegate),P.f(xe._delegate,W,Je)})()}updateCurrentUser(W){return this._delegate.updateCurrentUser(W)}verifyPasswordResetCode(W){return P.a4(this._delegate,W)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return oe.Persistence=Jn,oe})();function Q(oe,$,W){let xe=oe;"function"!=typeof oe&&({next:xe,error:$,complete:W}=oe);const nt=xe;return{next:Bt=>nt(Bt&&G.getOrCreate(Bt)),error:$,complete:W}}function Pe(oe,$){const W=function We(oe,$){const W=Ne();if(!W)return[];const xe=P.az(gi,oe,$);switch(W.getItem(xe)){case Jn.NONE:return[P.L];case Jn.LOCAL:return[P.i,P.a];case Jn.SESSION:return[P.a];default:return[]}}(oe,$);if(typeof self<"u"&&!W.includes(P.i)&&W.push(P.i),typeof window<"u")for(const xe of[P.b,P.a])W.includes(xe)||W.push(xe);return W.includes(P.L)||W.push(P.L),W}class Xe{constructor(){this.providerId="phone",this._delegate=new P.P(Nt(H.Z.auth()))}static credential($,W){return P.P.credential($,W)}verifyPhoneNumber($,W){return this._delegate.verifyPhoneNumber($,W)}unwrap(){return this._delegate}}Xe.PHONE_SIGN_IN_METHOD=P.P.PHONE_SIGN_IN_METHOD,Xe.PROVIDER_ID=P.P.PROVIDER_ID;const Ft=P.ax;class An{constructor($,W,xe=H.Z.app()){var nt;Ft(null===(nt=xe.options)||void 0===nt?void 0:nt.apiKey,"invalid-api-key",{appName:xe.name}),this._delegate=new P.R($,W,xe.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Di(oe){oe.INTERNAL.registerComponent(new se.wA("auth-compat",$=>{const W=$.getProvider("app-compat").getImmediate(),xe=$.getProvider("auth");return new Z(W,xe)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:P.A.EMAIL_SIGNIN,PASSWORD_RESET:P.A.PASSWORD_RESET,RECOVER_EMAIL:P.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:P.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:P.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:P.A.VERIFY_EMAIL}},EmailAuthProvider:P.M,FacebookAuthProvider:P.N,GithubAuthProvider:P.T,GoogleAuthProvider:P.Q,OAuthProvider:P.U,SAMLAuthProvider:P.V,PhoneAuthProvider:Xe,PhoneMultiFactorGenerator:P.m,RecaptchaVerifier:An,TwitterAuthProvider:P.W,Auth:Z,AuthCredential:P.H,Error:ae.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),oe.registerVersion("@firebase/auth-compat","0.2.20")}(H.Z)},3037:()=>{var Dt,Oe;Oe=Dt||(Dt={}),function(F){var l="object"==typeof global?global:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),H=P(Oe);function P(ae,fe){return function(ve,se){"function"!=typeof ae[ve]&&Object.defineProperty(ae,ve,{configurable:!0,writable:!0,value:se}),fe&&fe(ve,se)}}typeof l.Reflect>"u"?l.Reflect=Oe:H=P(l.Reflect,H),function(F){var l=Object.prototype.hasOwnProperty,H="function"==typeof Symbol,P=H&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",ae=H&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",fe="function"==typeof Object.create,ve={__proto__:[]}instanceof Array,se=!fe&&!ve,pe={create:fe?function(){return gi(Object.create(null))}:ve?function(){return gi({__proto__:null})}:function(){return gi({})},has:se?function(de,Ce){return l.call(de,Ce)}:function(de,Ce){return Ce in de},get:se?function(de,Ce){return l.call(de,Ce)?de[Ce]:void 0}:function(de,Ce){return de[Ce]}},Ee=Object.getPrototypeOf(Function),q="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,Y=q||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function wi(){var de={},Ce=[],Re=function(){function Je(Nt,yt,jt){this._index=0,this._keys=Nt,this._values=yt,this._selector=jt}return Je.prototype["@@iterator"]=function(){return this},Je.prototype[ae]=function(){return this},Je.prototype.next=function(){var Nt=this._index;if(Nt>=0&&Nt<this._keys.length){var yt=this._selector(this._keys[Nt],this._values[Nt]);return Nt+1>=this._keys.length?(this._index=-1,this._keys=Ce,this._values=Ce):this._index++,{value:yt,done:!1}}return{value:void 0,done:!0}},Je.prototype.throw=function(Nt){throw this._index>=0&&(this._index=-1,this._keys=Ce,this._values=Ce),Nt},Je.prototype.return=function(Nt){return this._index>=0&&(this._index=-1,this._keys=Ce,this._values=Ce),{value:Nt,done:!0}},Je}();return function(){function Je(){this._keys=[],this._values=[],this._cacheKey=de,this._cacheIndex=-2}return Object.defineProperty(Je.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),Je.prototype.has=function(Nt){return this._find(Nt,!1)>=0},Je.prototype.get=function(Nt){var yt=this._find(Nt,!1);return yt>=0?this._values[yt]:void 0},Je.prototype.set=function(Nt,yt){var jt=this._find(Nt,!0);return this._values[jt]=yt,this},Je.prototype.delete=function(Nt){var yt=this._find(Nt,!1);if(yt>=0){for(var jt=this._keys.length,tt=yt+1;tt<jt;tt++)this._keys[tt-1]=this._keys[tt],this._values[tt-1]=this._values[tt];return this._keys.length--,this._values.length--,Nt===this._cacheKey&&(this._cacheKey=de,this._cacheIndex=-2),!0}return!1},Je.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=de,this._cacheIndex=-2},Je.prototype.keys=function(){return new Re(this._keys,this._values,We)},Je.prototype.values=function(){return new Re(this._keys,this._values,Ne)},Je.prototype.entries=function(){return new Re(this._keys,this._values,ut)},Je.prototype["@@iterator"]=function(){return this.entries()},Je.prototype[ae]=function(){return this.entries()},Je.prototype._find=function(Nt,yt){return this._cacheKey!==Nt&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=Nt)),this._cacheIndex<0&&yt&&(this._cacheIndex=this._keys.length,this._keys.push(Nt),this._values.push(void 0)),this._cacheIndex},Je}();function We(Je,Nt){return Je}function Ne(Je,Nt){return Nt}function ut(Je,Nt){return[Je,Nt]}}():Map,ee=q||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function Jn(){return function(){function de(){this._map=new Y}return Object.defineProperty(de.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),de.prototype.has=function(Ce){return this._map.has(Ce)},de.prototype.add=function(Ce){return this._map.set(Ce,Ce),this},de.prototype.delete=function(Ce){return this._map.delete(Ce)},de.prototype.clear=function(){this._map.clear()},de.prototype.keys=function(){return this._map.keys()},de.prototype.values=function(){return this._map.values()},de.prototype.entries=function(){return this._map.entries()},de.prototype["@@iterator"]=function(){return this.keys()},de.prototype[ae]=function(){return this.keys()},de}()}():Set,Be=new(q||"function"!=typeof WeakMap?function Tn(){var Ce=pe.create(),Re=We();return function(){function yt(){this._key=We()}return yt.prototype.has=function(jt){var tt=Ne(jt,!1);return void 0!==tt&&pe.has(tt,this._key)},yt.prototype.get=function(jt){var tt=Ne(jt,!1);return void 0!==tt?pe.get(tt,this._key):void 0},yt.prototype.set=function(jt,tt){return Ne(jt,!0)[this._key]=tt,this},yt.prototype.delete=function(jt){var tt=Ne(jt,!1);return void 0!==tt&&delete tt[this._key]},yt.prototype.clear=function(){this._key=We()},yt}();function We(){var yt;do{yt="@@WeakMap@@"+Nt()}while(pe.has(Ce,yt));return Ce[yt]=!0,yt}function Ne(yt,jt){if(!l.call(yt,Re)){if(!jt)return;Object.defineProperty(yt,Re,{value:pe.create()})}return yt[Re]}function ut(yt,jt){for(var tt=0;tt<jt;++tt)yt[tt]=255*Math.random()|0;return yt}function Nt(){var yt=function Je(yt){return"function"==typeof Uint8Array?typeof crypto<"u"?crypto.getRandomValues(new Uint8Array(yt)):typeof msCrypto<"u"?msCrypto.getRandomValues(new Uint8Array(yt)):ut(new Uint8Array(yt),yt):ut(new Array(yt),yt)}(16);yt[6]=79&yt[6]|64,yt[8]=191&yt[8]|128;for(var jt="",tt=0;tt<16;++tt){var qn=yt[tt];(4===tt||6===tt||8===tt)&&(jt+="-"),qn<16&&(jt+="0"),jt+=qn.toString(16).toLowerCase()}return jt}}():WeakMap);function De(de,Ce,Re){var We=Be.get(de);if(Mt(We)){if(!Re)return;We=new Y,Be.set(de,We)}var Ne=We.get(Ce);if(Mt(Ne)){if(!Re)return;Ne=new Y,We.set(Ce,Ne)}return Ne}function J(de,Ce,Re){if(ie(de,Ce,Re))return!0;var Ne=ct(Ce);return!Qe(Ne)&&J(de,Ne,Re)}function ie(de,Ce,Re){var We=De(Ce,Re,!1);return!Mt(We)&&function sn(de){return!!de}(We.has(de))}function ye(de,Ce,Re){if(ie(de,Ce,Re))return he(de,Ce,Re);var Ne=ct(Ce);return Qe(Ne)?void 0:ye(de,Ne,Re)}function he(de,Ce,Re){var We=De(Ce,Re,!1);if(!Mt(We))return We.get(de)}function Ge(de,Ce,Re,We){De(Re,We,!0).set(de,Ce)}function qe(de,Ce){var Re=Et(de,Ce),We=ct(de);if(null===We)return Re;var Ne=qe(We,Ce);if(Ne.length<=0)return Re;if(Re.length<=0)return Ne;for(var ut=new ee,Je=[],Nt=0,yt=Re;Nt<yt.length;Nt++)ut.has(jt=yt[Nt])||(ut.add(jt),Je.push(jt));for(var qn=0,qt=Ne;qn<qt.length;qn++){var jt;ut.has(jt=qt[qn])||(ut.add(jt),Je.push(jt))}return Je}function Et(de,Ce){var Re=[],We=De(de,Ce,!1);if(Mt(We))return Re;for(var ut=function Qi(de){var Ce=yr(de,ae);if(!Qn(Ce))throw new TypeError;var Re=Ce.call(de);if(!rn(Re))throw new TypeError;return Re}(We.keys()),Je=0;;){var Nt=vr(ut);if(!Nt)return Re.length=Je,Re;var yt=Xn(Nt);try{Re[Je]=yt}catch(jt){try{kr(ut)}finally{throw jt}}Je++}}function cn(de){if(null===de)return 1;switch(typeof de){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===de?1:6;default:return 6}}function Mt(de){return void 0===de}function Qe(de){return null===de}function rn(de){return"object"==typeof de?null!==de:"function"==typeof de}function yn(de,Ce){switch(cn(de)){case 0:case 1:case 2:case 3:case 4:case 5:return de}var Re=3===Ce?"string":5===Ce?"number":"default",We=yr(de,P);if(void 0!==We){var Ne=We.call(de,Re);if(rn(Ne))throw new TypeError;return Ne}return function mn(de,Ce){if("string"===Ce){var Re=de.toString;if(Qn(Re)&&!rn(We=Re.call(de)))return We;if(Qn(Ne=de.valueOf)&&!rn(We=Ne.call(de)))return We}else{var Ne;if(Qn(Ne=de.valueOf)&&!rn(We=Ne.call(de)))return We;var We,ut=de.toString;if(Qn(ut)&&!rn(We=ut.call(de)))return We}throw new TypeError}(de,"default"===Re?"number":Re)}function Un(de){var Ce=yn(de,3);return function Rn(de){return"symbol"==typeof de}(Ce)?Ce:function Qt(de){return""+de}(Ce)}function as(de){return Array.isArray?Array.isArray(de):de instanceof Object?de instanceof Array:"[object Array]"===Object.prototype.toString.call(de)}function Qn(de){return"function"==typeof de}function Hn(de){return"function"==typeof de}function yr(de,Ce){var Re=de[Ce];if(null!=Re){if(!Qn(Re))throw new TypeError;return Re}}function Xn(de){return de.value}function vr(de){var Ce=de.next();return!Ce.done&&Ce}function kr(de){var Ce=de.return;Ce&&Ce.call(de)}function ct(de){var Ce=Object.getPrototypeOf(de);if("function"!=typeof de||de===Ee||Ce!==Ee)return Ce;var Re=de.prototype,We=Re&&Object.getPrototypeOf(Re);if(null==We||We===Object.prototype)return Ce;var Ne=We.constructor;return"function"!=typeof Ne||Ne===de?Ce:Ne}function gi(de){return de.__=void 0,delete de.__,de}F("decorate",function Te(de,Ce,Re,We){if(Mt(Re)){if(!as(de))throw new TypeError;if(!Hn(Ce))throw new TypeError;return function ce(de,Ce){for(var Re=de.length-1;Re>=0;--Re){var Ne=(0,de[Re])(Ce);if(!Mt(Ne)&&!Qe(Ne)){if(!Hn(Ne))throw new TypeError;Ce=Ne}}return Ce}(de,Ce)}if(!as(de))throw new TypeError;if(!rn(Ce))throw new TypeError;if(!rn(We)&&!Mt(We)&&!Qe(We))throw new TypeError;return Qe(We)&&(We=void 0),function me(de,Ce,Re,We){for(var Ne=de.length-1;Ne>=0;--Ne){var Je=(0,de[Ne])(Ce,Re,We);if(!Mt(Je)&&!Qe(Je)){if(!rn(Je))throw new TypeError;We=Je}}return We}(de,Ce,Re=Un(Re),We)}),F("metadata",function gt(de,Ce){return function Re(We,Ne){if(!rn(We))throw new TypeError;if(!Mt(Ne)&&!function Yr(de){switch(cn(de)){case 3:case 4:return!0;default:return!1}}(Ne))throw new TypeError;Ge(de,Ce,We,Ne)}}),F("defineMetadata",function Ie(de,Ce,Re,We){if(!rn(Re))throw new TypeError;return Mt(We)||(We=Un(We)),Ge(de,Ce,Re,We)}),F("hasMetadata",function we(de,Ce,Re){if(!rn(Ce))throw new TypeError;return Mt(Re)||(Re=Un(Re)),J(de,Ce,Re)}),F("hasOwnMetadata",function ht(de,Ce,Re){if(!rn(Ce))throw new TypeError;return Mt(Re)||(Re=Un(Re)),ie(de,Ce,Re)}),F("getMetadata",function ft(de,Ce,Re){if(!rn(Ce))throw new TypeError;return Mt(Re)||(Re=Un(Re)),ye(de,Ce,Re)}),F("getOwnMetadata",function He(de,Ce,Re){if(!rn(Ce))throw new TypeError;return Mt(Re)||(Re=Un(Re)),he(de,Ce,Re)}),F("getMetadataKeys",function Ve(de,Ce){if(!rn(de))throw new TypeError;return Mt(Ce)||(Ce=Un(Ce)),qe(de,Ce)}),F("getOwnMetadataKeys",function Ae(de,Ce){if(!rn(de))throw new TypeError;return Mt(Ce)||(Ce=Un(Ce)),Et(de,Ce)}),F("deleteMetadata",function et(de,Ce,Re){if(!rn(Ce))throw new TypeError;Mt(Re)||(Re=Un(Re));var We=De(Ce,Re,!1);if(Mt(We)||!We.delete(de))return!1;if(We.size>0)return!0;var Ne=Be.get(Ce);return Ne.delete(Re),Ne.size>0||Be.delete(Ce),!0})}(H)}()},9751:(Dt,Oe,F)=>{"use strict";F.d(Oe,{y:()=>pe});var l=F(930),H=F(727),P=F(8822),ae=F(9635),fe=F(2416),ve=F(576),se=F(2806);let pe=(()=>{class ee{constructor(Be){Be&&(this._subscribe=Be)}lift(Be){const Te=new ee;return Te.source=this,Te.operator=Be,Te}subscribe(Be,Te,gt){const Ie=function Y(ee){return ee&&ee instanceof l.Lv||function q(ee){return ee&&(0,ve.m)(ee.next)&&(0,ve.m)(ee.error)&&(0,ve.m)(ee.complete)}(ee)&&(0,H.Nn)(ee)}(Be)?Be:new l.Hp(Be,Te,gt);return(0,se.x)(()=>{const{operator:we,source:ht}=this;Ie.add(we?we.call(Ie,ht):ht?this._subscribe(Ie):this._trySubscribe(Ie))}),Ie}_trySubscribe(Be){try{return this._subscribe(Be)}catch(Te){Be.error(Te)}}forEach(Be,Te){return new(Te=Ee(Te))((gt,Ie)=>{const we=new l.Hp({next:ht=>{try{Be(ht)}catch(ft){Ie(ft),we.unsubscribe()}},error:Ie,complete:gt});this.subscribe(we)})}_subscribe(Be){var Te;return null===(Te=this.source)||void 0===Te?void 0:Te.subscribe(Be)}[P.L](){return this}pipe(...Be){return(0,ae.U)(Be)(this)}toPromise(Be){return new(Be=Ee(Be))((Te,gt)=>{let Ie;this.subscribe(we=>Ie=we,we=>gt(we),()=>Te(Ie))})}}return ee.create=Ke=>new ee(Ke),ee})();function Ee(ee){var Ke;return null!==(Ke=ee??fe.v.Promise)&&void 0!==Ke?Ke:Promise}},7579:(Dt,Oe,F)=>{"use strict";F.d(Oe,{x:()=>se});var l=F(9751),H=F(727);const ae=(0,F(3888).d)(Ee=>function(){Ee(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var fe=F(8737),ve=F(2806);let se=(()=>{class Ee extends l.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Y){const ee=new pe(this,this);return ee.operator=Y,ee}_throwIfClosed(){if(this.closed)throw new ae}next(Y){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ee of this.currentObservers)ee.next(Y)}})}error(Y){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Y;const{observers:ee}=this;for(;ee.length;)ee.shift().error(Y)}})}complete(){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Y}=this;for(;Y.length;)Y.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Y;return(null===(Y=this.observers)||void 0===Y?void 0:Y.length)>0}_trySubscribe(Y){return this._throwIfClosed(),super._trySubscribe(Y)}_subscribe(Y){return this._throwIfClosed(),this._checkFinalizedStatuses(Y),this._innerSubscribe(Y)}_innerSubscribe(Y){const{hasError:ee,isStopped:Ke,observers:Be}=this;return ee||Ke?H.Lc:(this.currentObservers=null,Be.push(Y),new H.w0(()=>{this.currentObservers=null,(0,fe.P)(Be,Y)}))}_checkFinalizedStatuses(Y){const{hasError:ee,thrownError:Ke,isStopped:Be}=this;ee?Y.error(Ke):Be&&Y.complete()}asObservable(){const Y=new l.y;return Y.source=this,Y}}return Ee.create=(q,Y)=>new pe(q,Y),Ee})();class pe extends se{constructor(q,Y){super(),this.destination=q,this.source=Y}next(q){var Y,ee;null===(ee=null===(Y=this.destination)||void 0===Y?void 0:Y.next)||void 0===ee||ee.call(Y,q)}error(q){var Y,ee;null===(ee=null===(Y=this.destination)||void 0===Y?void 0:Y.error)||void 0===ee||ee.call(Y,q)}complete(){var q,Y;null===(Y=null===(q=this.destination)||void 0===q?void 0:q.complete)||void 0===Y||Y.call(q)}_subscribe(q){var Y,ee;return null!==(ee=null===(Y=this.source)||void 0===Y?void 0:Y.subscribe(q))&&void 0!==ee?ee:H.Lc}}},930:(Dt,Oe,F)=>{"use strict";F.d(Oe,{Hp:()=>gt,Lv:()=>ee});var l=F(576),H=F(727),P=F(2416),ae=F(7849),fe=F(5032);const ve=Ee("C",void 0,void 0);function Ee(He,Ve,Ae){return{kind:He,value:Ve,error:Ae}}var q=F(3410),Y=F(2806);class ee extends H.w0{constructor(Ve){super(),this.isStopped=!1,Ve?(this.destination=Ve,(0,H.Nn)(Ve)&&Ve.add(this)):this.destination=ft}static create(Ve,Ae,et){return new gt(Ve,Ae,et)}next(Ve){this.isStopped?ht(function pe(He){return Ee("N",He,void 0)}(Ve),this):this._next(Ve)}error(Ve){this.isStopped?ht(function se(He){return Ee("E",void 0,He)}(Ve),this):(this.isStopped=!0,this._error(Ve))}complete(){this.isStopped?ht(ve,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ve){this.destination.next(Ve)}_error(Ve){try{this.destination.error(Ve)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ke=Function.prototype.bind;function Be(He,Ve){return Ke.call(He,Ve)}class Te{constructor(Ve){this.partialObserver=Ve}next(Ve){const{partialObserver:Ae}=this;if(Ae.next)try{Ae.next(Ve)}catch(et){Ie(et)}}error(Ve){const{partialObserver:Ae}=this;if(Ae.error)try{Ae.error(Ve)}catch(et){Ie(et)}else Ie(Ve)}complete(){const{partialObserver:Ve}=this;if(Ve.complete)try{Ve.complete()}catch(Ae){Ie(Ae)}}}class gt extends ee{constructor(Ve,Ae,et){let ce;if(super(),(0,l.m)(Ve)||!Ve)ce={next:Ve??void 0,error:Ae??void 0,complete:et??void 0};else{let me;this&&P.v.useDeprecatedNextContext?(me=Object.create(Ve),me.unsubscribe=()=>this.unsubscribe(),ce={next:Ve.next&&Be(Ve.next,me),error:Ve.error&&Be(Ve.error,me),complete:Ve.complete&&Be(Ve.complete,me)}):ce=Ve}this.destination=new Te(ce)}}function Ie(He){P.v.useDeprecatedSynchronousErrorHandling?(0,Y.O)(He):(0,ae.h)(He)}function ht(He,Ve){const{onStoppedNotification:Ae}=P.v;Ae&&q.z.setTimeout(()=>Ae(He,Ve))}const ft={closed:!0,next:fe.Z,error:function we(He){throw He},complete:fe.Z}},727:(Dt,Oe,F)=>{"use strict";F.d(Oe,{Lc:()=>ve,w0:()=>fe,Nn:()=>se});var l=F(576);const P=(0,F(3888).d)(Ee=>function(Y){Ee(this),this.message=Y?`${Y.length} errors occurred during unsubscription:\n${Y.map((ee,Ke)=>`${Ke+1}) ${ee.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Y});var ae=F(8737);class fe{constructor(q){this.initialTeardown=q,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let q;if(!this.closed){this.closed=!0;const{_parentage:Y}=this;if(Y)if(this._parentage=null,Array.isArray(Y))for(const Be of Y)Be.remove(this);else Y.remove(this);const{initialTeardown:ee}=this;if((0,l.m)(ee))try{ee()}catch(Be){q=Be instanceof P?Be.errors:[Be]}const{_finalizers:Ke}=this;if(Ke){this._finalizers=null;for(const Be of Ke)try{pe(Be)}catch(Te){q=q??[],Te instanceof P?q=[...q,...Te.errors]:q.push(Te)}}if(q)throw new P(q)}}add(q){var Y;if(q&&q!==this)if(this.closed)pe(q);else{if(q instanceof fe){if(q.closed||q._hasParent(this))return;q._addParent(this)}(this._finalizers=null!==(Y=this._finalizers)&&void 0!==Y?Y:[]).push(q)}}_hasParent(q){const{_parentage:Y}=this;return Y===q||Array.isArray(Y)&&Y.includes(q)}_addParent(q){const{_parentage:Y}=this;this._parentage=Array.isArray(Y)?(Y.push(q),Y):Y?[Y,q]:q}_removeParent(q){const{_parentage:Y}=this;Y===q?this._parentage=null:Array.isArray(Y)&&(0,ae.P)(Y,q)}remove(q){const{_finalizers:Y}=this;Y&&(0,ae.P)(Y,q),q instanceof fe&&q._removeParent(this)}}fe.EMPTY=(()=>{const Ee=new fe;return Ee.closed=!0,Ee})();const ve=fe.EMPTY;function se(Ee){return Ee instanceof fe||Ee&&"closed"in Ee&&(0,l.m)(Ee.remove)&&(0,l.m)(Ee.add)&&(0,l.m)(Ee.unsubscribe)}function pe(Ee){(0,l.m)(Ee)?Ee():Ee.unsubscribe()}},2416:(Dt,Oe,F)=>{"use strict";F.d(Oe,{v:()=>l});const l={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Dt,Oe,F)=>{"use strict";F.d(Oe,{E:()=>H});const H=new(F(9751).y)(fe=>fe.complete())},8996:(Dt,Oe,F)=>{"use strict";F.d(Oe,{D:()=>Ve});var l=F(8421),H=F(5363),P=F(9468),ve=F(9751),pe=F(2202),Ee=F(576),q=F(9672);function ee(Ae,et){if(!Ae)throw new Error("Iterable cannot be null");return new ve.y(ce=>{(0,q.f)(ce,et,()=>{const me=Ae[Symbol.asyncIterator]();(0,q.f)(ce,et,()=>{me.next().then(De=>{De.done?ce.complete():ce.next(De.value)})},0,!0)})})}var Ke=F(3670),Be=F(8239),Te=F(1144),gt=F(6495),Ie=F(2206),we=F(4532),ht=F(3260);function Ve(Ae,et){return et?function He(Ae,et){if(null!=Ae){if((0,Ke.c)(Ae))return function ae(Ae,et){return(0,l.Xf)(Ae).pipe((0,P.R)(et),(0,H.Q)(et))}(Ae,et);if((0,Te.z)(Ae))return function se(Ae,et){return new ve.y(ce=>{let me=0;return et.schedule(function(){me===Ae.length?ce.complete():(ce.next(Ae[me++]),ce.closed||this.schedule())})})}(Ae,et);if((0,Be.t)(Ae))return function fe(Ae,et){return(0,l.Xf)(Ae).pipe((0,P.R)(et),(0,H.Q)(et))}(Ae,et);if((0,Ie.D)(Ae))return ee(Ae,et);if((0,gt.T)(Ae))return function Y(Ae,et){return new ve.y(ce=>{let me;return(0,q.f)(ce,et,()=>{me=Ae[pe.h](),(0,q.f)(ce,et,()=>{let De,J;try{({value:De,done:J}=me.next())}catch(ie){return void ce.error(ie)}J?ce.complete():ce.next(De)},0,!0)}),()=>(0,Ee.m)(me?.return)&&me.return()})}(Ae,et);if((0,ht.L)(Ae))return function ft(Ae,et){return ee((0,ht.Q)(Ae),et)}(Ae,et)}throw(0,we.z)(Ae)}(Ae,et):(0,l.Xf)(Ae)}},8421:(Dt,Oe,F)=>{"use strict";F.d(Oe,{Xf:()=>Ke});var l=F(655),H=F(1144),P=F(8239),ae=F(9751),fe=F(3670),ve=F(2206),se=F(4532),pe=F(6495),Ee=F(3260),q=F(576),Y=F(7849),ee=F(8822);function Ke(He){if(He instanceof ae.y)return He;if(null!=He){if((0,fe.c)(He))return function Be(He){return new ae.y(Ve=>{const Ae=He[ee.L]();if((0,q.m)(Ae.subscribe))return Ae.subscribe(Ve);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(He);if((0,H.z)(He))return function Te(He){return new ae.y(Ve=>{for(let Ae=0;Ae<He.length&&!Ve.closed;Ae++)Ve.next(He[Ae]);Ve.complete()})}(He);if((0,P.t)(He))return function gt(He){return new ae.y(Ve=>{He.then(Ae=>{Ve.closed||(Ve.next(Ae),Ve.complete())},Ae=>Ve.error(Ae)).then(null,Y.h)})}(He);if((0,ve.D)(He))return we(He);if((0,pe.T)(He))return function Ie(He){return new ae.y(Ve=>{for(const Ae of He)if(Ve.next(Ae),Ve.closed)return;Ve.complete()})}(He);if((0,Ee.L)(He))return function ht(He){return we((0,Ee.Q)(He))}(He)}throw(0,se.z)(He)}function we(He){return new ae.y(Ve=>{(function ft(He,Ve){var Ae,et,ce,me;return(0,l.mG)(this,void 0,void 0,function*(){try{for(Ae=(0,l.KL)(He);!(et=yield Ae.next()).done;)if(Ve.next(et.value),Ve.closed)return}catch(De){ce={error:De}}finally{try{et&&!et.done&&(me=Ae.return)&&(yield me.call(Ae))}finally{if(ce)throw ce.error}}Ve.complete()})})(He,Ve).catch(Ae=>Ve.error(Ae))})}},6451:(Dt,Oe,F)=>{"use strict";F.d(Oe,{T:()=>ve});var l=F(8189),H=F(8421),P=F(515),ae=F(3269),fe=F(8996);function ve(...se){const pe=(0,ae.yG)(se),Ee=(0,ae._6)(se,1/0),q=se;return q.length?1===q.length?(0,H.Xf)(q[0]):(0,l.J)(Ee)((0,fe.D)(q,pe)):P.E}},5403:(Dt,Oe,F)=>{"use strict";F.d(Oe,{x:()=>H});var l=F(930);function H(ae,fe,ve,se,pe){return new P(ae,fe,ve,se,pe)}class P extends l.Lv{constructor(fe,ve,se,pe,Ee,q){super(fe),this.onFinalize=Ee,this.shouldUnsubscribe=q,this._next=ve?function(Y){try{ve(Y)}catch(ee){fe.error(ee)}}:super._next,this._error=pe?function(Y){try{pe(Y)}catch(ee){fe.error(ee)}finally{this.unsubscribe()}}:super._error,this._complete=se?function(){try{se()}catch(Y){fe.error(Y)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var fe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ve}=this;super.unsubscribe(),!ve&&(null===(fe=this.onFinalize)||void 0===fe||fe.call(this))}}}},4004:(Dt,Oe,F)=>{"use strict";F.d(Oe,{U:()=>P});var l=F(4482),H=F(5403);function P(ae,fe){return(0,l.e)((ve,se)=>{let pe=0;ve.subscribe((0,H.x)(se,Ee=>{se.next(ae.call(fe,Ee,pe++))}))})}},8189:(Dt,Oe,F)=>{"use strict";F.d(Oe,{J:()=>P});var l=F(5577),H=F(4671);function P(ae=1/0){return(0,l.z)(H.y,ae)}},5577:(Dt,Oe,F)=>{"use strict";F.d(Oe,{z:()=>pe});var l=F(4004),H=F(8421),P=F(4482),ae=F(9672),fe=F(5403),se=F(576);function pe(Ee,q,Y=1/0){return(0,se.m)(q)?pe((ee,Ke)=>(0,l.U)((Be,Te)=>q(ee,Be,Ke,Te))((0,H.Xf)(Ee(ee,Ke))),Y):("number"==typeof q&&(Y=q),(0,P.e)((ee,Ke)=>function ve(Ee,q,Y,ee,Ke,Be,Te,gt){const Ie=[];let we=0,ht=0,ft=!1;const He=()=>{ft&&!Ie.length&&!we&&q.complete()},Ve=et=>we<ee?Ae(et):Ie.push(et),Ae=et=>{Be&&q.next(et),we++;let ce=!1;(0,H.Xf)(Y(et,ht++)).subscribe((0,fe.x)(q,me=>{Ke?.(me),Be?Ve(me):q.next(me)},()=>{ce=!0},void 0,()=>{if(ce)try{for(we--;Ie.length&&we<ee;){const me=Ie.shift();Te?(0,ae.f)(q,Te,()=>Ae(me)):Ae(me)}He()}catch(me){q.error(me)}}))};return Ee.subscribe((0,fe.x)(q,Ve,()=>{ft=!0,He()})),()=>{gt?.()}}(ee,Ke,Ee,Y)))}},5363:(Dt,Oe,F)=>{"use strict";F.d(Oe,{Q:()=>ae});var l=F(9672),H=F(4482),P=F(5403);function ae(fe,ve=0){return(0,H.e)((se,pe)=>{se.subscribe((0,P.x)(pe,Ee=>(0,l.f)(pe,fe,()=>pe.next(Ee),ve),()=>(0,l.f)(pe,fe,()=>pe.complete(),ve),Ee=>(0,l.f)(pe,fe,()=>pe.error(Ee),ve)))})}},3099:(Dt,Oe,F)=>{"use strict";F.d(Oe,{B:()=>fe});var l=F(8421),H=F(7579),P=F(930),ae=F(4482);function fe(se={}){const{connector:pe=(()=>new H.x),resetOnError:Ee=!0,resetOnComplete:q=!0,resetOnRefCountZero:Y=!0}=se;return ee=>{let Ke,Be,Te,gt=0,Ie=!1,we=!1;const ht=()=>{Be?.unsubscribe(),Be=void 0},ft=()=>{ht(),Ke=Te=void 0,Ie=we=!1},He=()=>{const Ve=Ke;ft(),Ve?.unsubscribe()};return(0,ae.e)((Ve,Ae)=>{gt++,!we&&!Ie&&ht();const et=Te=Te??pe();Ae.add(()=>{gt--,0===gt&&!we&&!Ie&&(Be=ve(He,Y))}),et.subscribe(Ae),!Ke&&gt>0&&(Ke=new P.Hp({next:ce=>et.next(ce),error:ce=>{we=!0,ht(),Be=ve(ft,Ee,ce),et.error(ce)},complete:()=>{Ie=!0,ht(),Be=ve(ft,q),et.complete()}}),(0,l.Xf)(Ve).subscribe(Ke))})(ee)}}function ve(se,pe,...Ee){if(!0===pe)return void se();if(!1===pe)return;const q=new P.Hp({next:()=>{q.unsubscribe(),se()}});return pe(...Ee).subscribe(q)}},9468:(Dt,Oe,F)=>{"use strict";F.d(Oe,{R:()=>H});var l=F(4482);function H(P,ae=0){return(0,l.e)((fe,ve)=>{ve.add(P.schedule(()=>fe.subscribe(ve),ae))})}},8505:(Dt,Oe,F)=>{"use strict";F.d(Oe,{b:()=>fe});var l=F(576),H=F(4482),P=F(5403),ae=F(4671);function fe(ve,se,pe){const Ee=(0,l.m)(ve)||se||pe?{next:ve,error:se,complete:pe}:ve;return Ee?(0,H.e)((q,Y)=>{var ee;null===(ee=Ee.subscribe)||void 0===ee||ee.call(Ee);let Ke=!0;q.subscribe((0,P.x)(Y,Be=>{var Te;null===(Te=Ee.next)||void 0===Te||Te.call(Ee,Be),Y.next(Be)},()=>{var Be;Ke=!1,null===(Be=Ee.complete)||void 0===Be||Be.call(Ee),Y.complete()},Be=>{var Te;Ke=!1,null===(Te=Ee.error)||void 0===Te||Te.call(Ee,Be),Y.error(Be)},()=>{var Be,Te;Ke&&(null===(Be=Ee.unsubscribe)||void 0===Be||Be.call(Ee)),null===(Te=Ee.finalize)||void 0===Te||Te.call(Ee)}))}):ae.y}},4408:(Dt,Oe,F)=>{"use strict";F.d(Oe,{o:()=>fe});var l=F(727);class H extends l.w0{constructor(se,pe){super()}schedule(se,pe=0){return this}}const P={setInterval(ve,se,...pe){const{delegate:Ee}=P;return Ee?.setInterval?Ee.setInterval(ve,se,...pe):setInterval(ve,se,...pe)},clearInterval(ve){const{delegate:se}=P;return(se?.clearInterval||clearInterval)(ve)},delegate:void 0};var ae=F(8737);class fe extends H{constructor(se,pe){super(se,pe),this.scheduler=se,this.work=pe,this.pending=!1}schedule(se,pe=0){if(this.closed)return this;this.state=se;const Ee=this.id,q=this.scheduler;return null!=Ee&&(this.id=this.recycleAsyncId(q,Ee,pe)),this.pending=!0,this.delay=pe,this.id=this.id||this.requestAsyncId(q,this.id,pe),this}requestAsyncId(se,pe,Ee=0){return P.setInterval(se.flush.bind(se,this),Ee)}recycleAsyncId(se,pe,Ee=0){if(null!=Ee&&this.delay===Ee&&!1===this.pending)return pe;P.clearInterval(pe)}execute(se,pe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ee=this._execute(se,pe);if(Ee)return Ee;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(se,pe){let q,Ee=!1;try{this.work(se)}catch(Y){Ee=!0,q=Y||new Error("Scheduled action threw falsy error")}if(Ee)return this.unsubscribe(),q}unsubscribe(){if(!this.closed){const{id:se,scheduler:pe}=this,{actions:Ee}=pe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(Ee,this),null!=se&&(this.id=this.recycleAsyncId(pe,se,null)),this.delay=null,super.unsubscribe()}}}},7565:(Dt,Oe,F)=>{"use strict";F.d(Oe,{v:()=>P});var l=F(6063);class H{constructor(fe,ve=H.now){this.schedulerActionCtor=fe,this.now=ve}schedule(fe,ve=0,se){return new this.schedulerActionCtor(this,fe).schedule(se,ve)}}H.now=l.l.now;class P extends H{constructor(fe,ve=H.now){super(fe,ve),this.actions=[],this._active=!1,this._scheduled=void 0}flush(fe){const{actions:ve}=this;if(this._active)return void ve.push(fe);let se;this._active=!0;do{if(se=fe.execute(fe.state,fe.delay))break}while(fe=ve.shift());if(this._active=!1,se){for(;fe=ve.shift();)fe.unsubscribe();throw se}}}},4986:(Dt,Oe,F)=>{"use strict";F.d(Oe,{P:()=>ae,z:()=>P});var l=F(4408);const P=new(F(7565).v)(l.o),ae=P},6063:(Dt,Oe,F)=>{"use strict";F.d(Oe,{l:()=>l});const l={now:()=>(l.delegate||Date).now(),delegate:void 0}},3410:(Dt,Oe,F)=>{"use strict";F.d(Oe,{z:()=>l});const l={setTimeout(H,P,...ae){const{delegate:fe}=l;return fe?.setTimeout?fe.setTimeout(H,P,...ae):setTimeout(H,P,...ae)},clearTimeout(H){const{delegate:P}=l;return(P?.clearTimeout||clearTimeout)(H)},delegate:void 0}},2202:(Dt,Oe,F)=>{"use strict";F.d(Oe,{h:()=>H});const H=function l(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Dt,Oe,F)=>{"use strict";F.d(Oe,{L:()=>l});const l="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(Dt,Oe,F)=>{"use strict";F.d(Oe,{_6:()=>ve,jO:()=>ae,yG:()=>fe});var l=F(576),H=F(3532);function P(se){return se[se.length-1]}function ae(se){return(0,l.m)(P(se))?se.pop():void 0}function fe(se){return(0,H.K)(P(se))?se.pop():void 0}function ve(se,pe){return"number"==typeof P(se)?se.pop():pe}},8737:(Dt,Oe,F)=>{"use strict";function l(H,P){if(H){const ae=H.indexOf(P);0<=ae&&H.splice(ae,1)}}F.d(Oe,{P:()=>l})},3888:(Dt,Oe,F)=>{"use strict";function l(H){const ae=H(fe=>{Error.call(fe),fe.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}F.d(Oe,{d:()=>l})},2806:(Dt,Oe,F)=>{"use strict";F.d(Oe,{O:()=>ae,x:()=>P});var l=F(2416);let H=null;function P(fe){if(l.v.useDeprecatedSynchronousErrorHandling){const ve=!H;if(ve&&(H={errorThrown:!1,error:null}),fe(),ve){const{errorThrown:se,error:pe}=H;if(H=null,se)throw pe}}else fe()}function ae(fe){l.v.useDeprecatedSynchronousErrorHandling&&H&&(H.errorThrown=!0,H.error=fe)}},9672:(Dt,Oe,F)=>{"use strict";function l(H,P,ae,fe=0,ve=!1){const se=P.schedule(function(){ae(),ve?H.add(this.schedule(null,fe)):this.unsubscribe()},fe);if(H.add(se),!ve)return se}F.d(Oe,{f:()=>l})},4671:(Dt,Oe,F)=>{"use strict";function l(H){return H}F.d(Oe,{y:()=>l})},1144:(Dt,Oe,F)=>{"use strict";F.d(Oe,{z:()=>l});const l=H=>H&&"number"==typeof H.length&&"function"!=typeof H},2206:(Dt,Oe,F)=>{"use strict";F.d(Oe,{D:()=>H});var l=F(576);function H(P){return Symbol.asyncIterator&&(0,l.m)(P?.[Symbol.asyncIterator])}},576:(Dt,Oe,F)=>{"use strict";function l(H){return"function"==typeof H}F.d(Oe,{m:()=>l})},3670:(Dt,Oe,F)=>{"use strict";F.d(Oe,{c:()=>P});var l=F(8822),H=F(576);function P(ae){return(0,H.m)(ae[l.L])}},6495:(Dt,Oe,F)=>{"use strict";F.d(Oe,{T:()=>P});var l=F(2202),H=F(576);function P(ae){return(0,H.m)(ae?.[l.h])}},8239:(Dt,Oe,F)=>{"use strict";F.d(Oe,{t:()=>H});var l=F(576);function H(P){return(0,l.m)(P?.then)}},3260:(Dt,Oe,F)=>{"use strict";F.d(Oe,{L:()=>ae,Q:()=>P});var l=F(655),H=F(576);function P(fe){return(0,l.FC)(this,arguments,function*(){const se=fe.getReader();try{for(;;){const{value:pe,done:Ee}=yield(0,l.qq)(se.read());if(Ee)return yield(0,l.qq)(void 0);yield yield(0,l.qq)(pe)}}finally{se.releaseLock()}})}function ae(fe){return(0,H.m)(fe?.getReader)}},3532:(Dt,Oe,F)=>{"use strict";F.d(Oe,{K:()=>H});var l=F(576);function H(P){return P&&(0,l.m)(P.schedule)}},4482:(Dt,Oe,F)=>{"use strict";F.d(Oe,{A:()=>H,e:()=>P});var l=F(576);function H(ae){return(0,l.m)(ae?.lift)}function P(ae){return fe=>{if(H(fe))return fe.lift(function(ve){try{return ae(ve,this)}catch(se){this.error(se)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(Dt,Oe,F)=>{"use strict";function l(){}F.d(Oe,{Z:()=>l})},9635:(Dt,Oe,F)=>{"use strict";F.d(Oe,{U:()=>P,z:()=>H});var l=F(4671);function H(...ae){return P(ae)}function P(ae){return 0===ae.length?l.y:1===ae.length?ae[0]:function(ve){return ae.reduce((se,pe)=>pe(se),ve)}}},7849:(Dt,Oe,F)=>{"use strict";F.d(Oe,{h:()=>P});var l=F(2416),H=F(3410);function P(ae){H.z.setTimeout(()=>{const{onUnhandledError:fe}=l.v;if(!fe)throw ae;fe(ae)})}},4532:(Dt,Oe,F)=>{"use strict";function l(H){return new TypeError(`You provided ${null!==H&&"object"==typeof H?"an invalid object":`'${H}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(Oe,{z:()=>l})},655:(Dt,Oe,F)=>{"use strict";function ae(J,ie){var ye={};for(var he in J)Object.prototype.hasOwnProperty.call(J,he)&&ie.indexOf(he)<0&&(ye[he]=J[he]);if(null!=J&&"function"==typeof Object.getOwnPropertySymbols){var Ge=0;for(he=Object.getOwnPropertySymbols(J);Ge<he.length;Ge++)ie.indexOf(he[Ge])<0&&Object.prototype.propertyIsEnumerable.call(J,he[Ge])&&(ye[he[Ge]]=J[he[Ge]])}return ye}function pe(J,ie,ye,he){return new(ye||(ye=Promise))(function(qe,Et){function cn(Rn){try{Qe(he.next(Rn))}catch(rn){Et(rn)}}function Mt(Rn){try{Qe(he.throw(Rn))}catch(rn){Et(rn)}}function Qe(Rn){Rn.done?qe(Rn.value):function Ge(qe){return qe instanceof ye?qe:new ye(function(Et){Et(qe)})}(Rn.value).then(cn,Mt)}Qe((he=he.apply(J,ie||[])).next())})}function Ie(J){return this instanceof Ie?(this.v=J,this):new Ie(J)}function we(J,ie,ye){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ge,he=ye.apply(J,ie||[]),qe=[];return Ge={},Et("next"),Et("throw"),Et("return"),Ge[Symbol.asyncIterator]=function(){return this},Ge;function Et(yn){he[yn]&&(Ge[yn]=function(mn){return new Promise(function(sn,Qt){qe.push([yn,mn,sn,Qt])>1||cn(yn,mn)})})}function cn(yn,mn){try{!function Mt(yn){yn.value instanceof Ie?Promise.resolve(yn.value.v).then(Qe,Rn):rn(qe[0][2],yn)}(he[yn](mn))}catch(sn){rn(qe[0][3],sn)}}function Qe(yn){cn("next",yn)}function Rn(yn){cn("throw",yn)}function rn(yn,mn){yn(mn),qe.shift(),qe.length&&cn(qe[0][0],qe[0][1])}}function ft(J){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ye,ie=J[Symbol.asyncIterator];return ie?ie.call(J):(J=function ee(J){var ie="function"==typeof Symbol&&Symbol.iterator,ye=ie&&J[ie],he=0;if(ye)return ye.call(J);if(J&&"number"==typeof J.length)return{next:function(){return J&&he>=J.length&&(J=void 0),{value:J&&J[he++],done:!J}}};throw new TypeError(ie?"Object is not iterable.":"Symbol.iterator is not defined.")}(J),ye={},he("next"),he("throw"),he("return"),ye[Symbol.asyncIterator]=function(){return this},ye);function he(qe){ye[qe]=J[qe]&&function(Et){return new Promise(function(cn,Mt){!function Ge(qe,Et,cn,Mt){Promise.resolve(Mt).then(function(Qe){qe({value:Qe,done:cn})},Et)}(cn,Mt,(Et=J[qe](Et)).done,Et.value)})}}}F.d(Oe,{FC:()=>we,KL:()=>ft,_T:()=>ae,mG:()=>pe,qq:()=>Ie})},4650:(Dt,Oe,F)=>{"use strict";F.d(Oe,{$8M:()=>pc,$Z:()=>sE,AFp:()=>cC,ALo:()=>qh,AaK:()=>pe,AsE:()=>XE,BQk:()=>Yp,CHM:()=>zf,CRH:()=>uy,CZH:()=>Dm,CqO:()=>LE,D6c:()=>Hs,DdM:()=>DM,EJc:()=>rI,EiD:()=>Wv,EpF:()=>Bh,F$t:()=>Qp,F4k:()=>Vh,FYo:()=>bT,FiY:()=>Le,G48:()=>Lk,Gf:()=>ym,GfV:()=>CT,GkF:()=>f0,Gpc:()=>Y,Hsn:()=>m0,Ikx:()=>oM,JOm:()=>No,JVY:()=>Uv,KtG:()=>sa,L6k:()=>Hv,LAX:()=>Hg,LFG:()=>vn,LSH:()=>zg,Lbi:()=>tI,Lck:()=>J_,MAs:()=>l0,MMx:()=>F0,NdJ:()=>U_,O4$:()=>yu,OlP:()=>Wn,Oqu:()=>QE,PXZ:()=>wC,Q6J:()=>c0,QGY:()=>oo,QP$:()=>nt,QbO:()=>iI,Qsj:()=>ZN,R0b:()=>uo,RDi:()=>ch,Rgc:()=>td,SBq:()=>qg,Sil:()=>wy,Suo:()=>cy,TTD:()=>Ys,TgZ:()=>B_,Tol:()=>w0,Udp:()=>Hh,VKq:()=>Ju,WFA:()=>Zp,WLB:()=>H0,X6Q:()=>pI,XFs:()=>ct,Xpm:()=>Z,Xts:()=>Yv,Y36:()=>ju,YKP:()=>tn,YNc:()=>FE,Yjl:()=>oe,Yz7:()=>mn,Z0I:()=>as,ZZ4:()=>at,_Bn:()=>Tt,_UZ:()=>d0,_Vd:()=>Wg,_c5:()=>vI,_uU:()=>KE,aQg:()=>Yl,c2e:()=>hC,cJS:()=>Qt,cg1:()=>im,d8E:()=>I0,dDg:()=>xm,dqk:()=>Je,eBb:()=>jv,eFA:()=>EC,ekj:()=>C0,eoX:()=>vC,f3M:()=>Au,g9A:()=>eI,h0i:()=>Fc,hGG:()=>bI,hij:()=>Hl,iGM:()=>BM,ifc:()=>ut,ip1:()=>Gl,jDz:()=>yM,kL8:()=>aM,kcU:()=>zd,lG2:()=>Di,lcZ:()=>TM,lqb:()=>gh,lri:()=>yC,mCW:()=>le,n5z:()=>Js,n_E:()=>Kh,oAB:()=>Ft,oxw:()=>p0,pB0:()=>C,q3G:()=>Gi,q4F:()=>wT,qLn:()=>Ri,qOj:()=>e0,qZA:()=>V_,qzn:()=>Ta,rWj:()=>Iy,s9C:()=>es,sBO:()=>hr,sIi:()=>Gp,s_b:()=>mm,soG:()=>Mm,tb:()=>nI,tp0:()=>St,uIk:()=>Wp,vHH:()=>Te,vpe:()=>co,wAp:()=>zt,xp6:()=>XD,ynx:()=>Ku,z2F:()=>ql,z3N:()=>to,zSh:()=>CD,zs3:()=>Hu});var l=F(7579),H=F(727),P=F(9751),ae=F(6451),fe=F(3099);function ve(o){for(let a in o)if(o[a]===ve)return a;throw Error("Could not find renamed property on target object.")}function se(o,a){for(const u in a)a.hasOwnProperty(u)&&!o.hasOwnProperty(u)&&(o[u]=a[u])}function pe(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(pe).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const u=a.indexOf("\n");return-1===u?a:a.substring(0,u)}function Ee(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const q=ve({__forward_ref__:ve});function Y(o){return o.__forward_ref__=Y,o.toString=function(){return pe(this())},o}function ee(o){return Ke(o)?o():o}function Ke(o){return"function"==typeof o&&o.hasOwnProperty(q)&&o.__forward_ref__===Y}class Te extends Error{constructor(a,u){super(function gt(o,a){return`NG0${Math.abs(o)}${a?": "+a.trim():""}`}(a,u)),this.code=a}}function Ie(o){return"string"==typeof o?o:null==o?"":String(o)}function Ve(o,a){throw new Te(-201,!1)}function Mt(o,a){null==o&&function Qe(o,a,u,h){throw new Error(`ASSERTION ERROR: ${o}`+(null==h?"":` [Expected=> ${u} ${h} ${a} <=Actual]`))}(a,o,null,"!=")}function mn(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function Qt(o){return{providers:o.providers||[],imports:o.imports||[]}}function Un(o){return Qn(o,Qi)||Qn(o,vr)}function as(o){return null!==Un(o)}function Qn(o,a){return o.hasOwnProperty(a)?o[a]:null}function yr(o){return o&&(o.hasOwnProperty(Xn)||o.hasOwnProperty(kr))?o[Xn]:null}const Qi=ve({\u0275prov:ve}),Xn=ve({\u0275inj:ve}),vr=ve({ngInjectableDef:ve}),kr=ve({ngInjectorDef:ve});var ct=(()=>((ct=ct||{})[ct.Default=0]="Default",ct[ct.Host=1]="Host",ct[ct.Self=2]="Self",ct[ct.SkipSelf=4]="SkipSelf",ct[ct.Optional=8]="Optional",ct))();let wi;function Tn(o){const a=wi;return wi=o,a}function gi(o,a,u){const h=Un(o);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:u&ct.Optional?null:void 0!==a?a:void Ve(pe(o))}function Ce(o){return{toString:o}.toString()}var Re=(()=>((Re=Re||{})[Re.OnPush=0]="OnPush",Re[Re.Default=1]="Default",Re))(),ut=(()=>{return(o=ut||(ut={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",ut;var o})();const Je=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),jt={},tt=[],qn=ve({\u0275cmp:ve}),qt=ve({\u0275dir:ve}),br=ve({\u0275pipe:ve}),un=ve({\u0275mod:ve}),X=ve({\u0275fac:ve}),G=ve({__NG_ELEMENT_ID__:ve});let j=0;function Z(o){return Ce(()=>{const u=!0===o.standalone,h={},f={type:o.type,providersResolver:null,decls:o.decls,vars:o.vars,factory:null,template:o.template||null,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:h,inputs:null,outputs:null,exportAs:o.exportAs||null,onPush:o.changeDetection===Re.OnPush,directiveDefs:null,pipeDefs:null,standalone:u,dependencies:u&&o.dependencies||null,getStandaloneInjector:null,selectors:o.selectors||tt,viewQuery:o.viewQuery||null,features:o.features||null,data:o.data||{},encapsulation:o.encapsulation||ut.Emulated,id:"c"+j++,styles:o.styles||tt,_:null,setInput:null,schemas:o.schemas||null,tView:null},m=o.dependencies,v=o.features;return f.inputs=Sn(o.inputs,h),f.outputs=Sn(o.outputs),v&&v.forEach(w=>w(f)),f.directiveDefs=m?()=>("function"==typeof m?m():m).map(Pe).filter(Xe):null,f.pipeDefs=m?()=>("function"==typeof m?m():m).map(xe).filter(Xe):null,f})}function Pe(o){return $(o)||W(o)}function Xe(o){return null!==o}function Ft(o){return Ce(()=>({type:o.type,bootstrap:o.bootstrap||tt,declarations:o.declarations||tt,imports:o.imports||tt,exports:o.exports||tt,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null}))}function Sn(o,a){if(null==o)return jt;const u={};for(const h in o)if(o.hasOwnProperty(h)){let f=o[h],m=f;Array.isArray(f)&&(m=f[1],f=f[0]),u[f]=h,a&&(a[f]=m)}return u}const Di=Z;function oe(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,standalone:!0===o.standalone,onDestroy:o.type.prototype.ngOnDestroy||null}}function $(o){return o[qn]||null}function W(o){return o[qt]||null}function xe(o){return o[br]||null}function nt(o){const a=$(o)||W(o)||xe(o);return null!==a&&a.standalone}function kt(o,a){const u=o[un]||null;if(!u&&!0===a)throw new Error(`Type ${pe(o)} does not have '\u0275mod' property.`);return u}function Ei(o){return Array.isArray(o)&&"object"==typeof o[1]}function Or(o){return Array.isArray(o)&&!0===o[1]}function wo(o){return 0!=(8&o.flags)}function tc(o){return 2==(2&o.flags)}function nl(o){return 1==(1&o.flags)}function wr(o){return null!==o.template}function cu(o){return 0!=(256&o[2])}function zi(o,a){return o.hasOwnProperty(X)?o[X]:null}class ea{constructor(a,u,h){this.previousValue=a,this.currentValue=u,this.firstChange=h}isFirstChange(){return this.firstChange}}function Ys(){return Pd}function Pd(o){return o.type.prototype.ngOnChanges&&(o.setInput=du),rc}function rc(){const o=ta(this),a=o?.current;if(a){const u=o.previous;if(u===jt)o.previous=a;else for(let h in a)u[h]=a[h];o.current=null,this.ngOnChanges(a)}}function du(o,a,u,h){const f=ta(o)||function Mi(o,a){return o[Nd]=a}(o,{previous:jt,current:null}),m=f.current||(f.current={}),v=f.previous,w=this.declaredInputs[u],M=v[w];m[w]=new ea(M&&M.currentValue,a,v===jt),o[h]=a}Ys.ngInherit=!0;const Nd="__ngSimpleChanges__";function ta(o){return o[Nd]||null}function ri(o){for(;Array.isArray(o);)o=o[0];return o}function Zr(o,a){return ri(a[o])}function $i(o,a){return ri(a[o.index])}function ia(o,a){return o.data[a]}function cs(o,a){return o[a]}function In(o,a){const u=a[o];return Ei(u)?u:u[0]}function Zs(o){return 64==(64&o[2])}function Lr(o,a){return null==a?null:o[a]}function sl(o){o[18]=0}function ci(o,a){o[5]+=a;let u=o,h=o[3];for(;null!==h&&(1===a&&1===u[5]||-1===a&&0===u[5]);)h[5]+=a,u=h,h=h[3]}const Yt={lFrame:ml(null),bindingsEnabled:!0};function Mo(){return Yt.bindingsEnabled}function Ue(){return Yt.lFrame.lView}function dn(){return Yt.lFrame.tView}function zf(o){return Yt.lFrame.contextLView=o,o[8]}function sa(o){return Yt.lFrame.contextLView=null,o}function Ii(){let o=oa();for(;null!==o&&64===o.type;)o=o.parent;return o}function oa(){return Yt.lFrame.currentTNode}function nr(o,a){const u=Yt.lFrame;u.currentTNode=o,u.isParent=a}function ac(){return Yt.lFrame.isParent}function aa(){Yt.lFrame.isParent=!1}function xi(){const o=Yt.lFrame;let a=o.bindingRootIndex;return-1===a&&(a=o.bindingRootIndex=o.tView.bindingStartIndex),a}function hl(){return Yt.lFrame.bindingIndex++}function Ss(o){const a=Yt.lFrame,u=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,u}function Vd(o,a){const u=Yt.lFrame;u.bindingIndex=u.bindingRootIndex=o,la(a)}function la(o){Yt.lFrame.currentDirectiveIndex=o}function gu(o){const a=Yt.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}function fl(){return Yt.lFrame.currentQueryIndex}function _u(o){Yt.lFrame.currentQueryIndex=o}function pl(o){const a=o[1];return 2===a.type?a.declTNode:1===a.type?o[6]:null}function Ud(o,a,u){if(u&ct.SkipSelf){let f=a,m=o;for(;!(f=f.parent,null!==f||u&ct.Host||(f=pl(m),null===f||(m=m[15],10&f.type))););if(null===f)return!1;a=f,o=m}const h=Yt.lFrame=Wf();return h.currentTNode=a,h.lView=o,!0}function ca(o){const a=Wf(),u=o[1];Yt.lFrame=a,a.currentTNode=u.firstChild,a.lView=o,a.tView=u,a.contextLView=o,a.bindingIndex=u.bindingStartIndex,a.inI18n=!1}function Wf(){const o=Yt.lFrame,a=null===o?null:o.child;return null===a?ml(o):a}function ml(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function qf(){const o=Yt.lFrame;return Yt.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const Hd=qf;function Ks(){const o=qf();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function ti(){return Yt.lFrame.selectedIndex}function Ts(o){Yt.lFrame.selectedIndex=o}function ni(){const o=Yt.lFrame;return ia(o.tView,o.selectedIndex)}function yu(){Yt.lFrame.currentNamespace="svg"}function zd(){!function bu(){Yt.lFrame.currentNamespace=null}()}function wu(o,a){for(let u=a.directiveStart,h=a.directiveEnd;u<h;u++){const m=o.data[u].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:w,ngAfterViewInit:M,ngAfterViewChecked:S,ngOnDestroy:O}=m;v&&(o.contentHooks||(o.contentHooks=[])).push(-u,v),w&&((o.contentHooks||(o.contentHooks=[])).push(u,w),(o.contentCheckHooks||(o.contentCheckHooks=[])).push(u,w)),M&&(o.viewHooks||(o.viewHooks=[])).push(-u,M),S&&((o.viewHooks||(o.viewHooks=[])).push(u,S),(o.viewCheckHooks||(o.viewCheckHooks=[])).push(u,S)),null!=O&&(o.destroyHooks||(o.destroyHooks=[])).push(u,O)}}function ua(o,a,u){ha(o,a,3,u)}function da(o,a,u,h){(3&o[2])===u&&ha(o,a,u,h)}function Gd(o,a){let u=o[2];(3&u)===a&&(u&=2047,u+=1,o[2]=u)}function ha(o,a,u,h){const m=h??-1,v=a.length-1;let w=0;for(let M=void 0!==h?65535&o[18]:0;M<v;M++)if("number"==typeof a[M+1]){if(w=a[M],null!=h&&w>=h)break}else a[M]<0&&(o[18]+=65536),(w<m||-1==m)&&(Wd(o,u,a,M),o[18]=(4294901760&o[18])+M+2),M++}function Wd(o,a,u,h){const f=u[h]<0,m=u[h+1],w=o[f?-u[h]:u[h]];if(f){if(o[2]>>11<o[18]>>16&&(3&o[2])===a){o[2]+=2048;try{m.call(w)}finally{}}}else try{m.call(w)}finally{}}class Br{constructor(a,u,h){this.factory=a,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=h}}function As(o,a,u){let h=0;for(;h<u.length;){const f=u[h];if("number"==typeof f){if(0!==f)break;h++;const m=u[h++],v=u[h++],w=u[h++];o.setAttribute(a,v,w,m)}else{const m=f,v=u[++h];Eu(m)?o.setProperty(a,m,v):o.setAttribute(a,m,v),h++}}return h}function _l(o){return 3===o||4===o||6===o}function Eu(o){return 64===o.charCodeAt(0)}function yl(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let u=-1;for(let h=0;h<a.length;h++){const f=a[h];"number"==typeof f?u=f:0===u||Yd(o,u,f,null,-1===u||2===u?a[++h]:null)}}return o}function Yd(o,a,u,h,f){let m=0,v=o.length;if(-1===a)v=-1;else for(;m<o.length;){const w=o[m++];if("number"==typeof w){if(w===a){v=-1;break}if(w>a){v=m-1;break}}}for(;m<o.length;){const w=o[m];if("number"==typeof w)break;if(w===u){if(null===h)return void(null!==f&&(o[m+1]=f));if(h===o[m+1])return void(o[m+2]=f)}m++,null!==h&&m++,null!==f&&m++}-1!==v&&(o.splice(v,0,a),m=v+1),o.splice(m++,0,u),null!==h&&o.splice(m++,0,h),null!==f&&o.splice(m++,0,f)}function Zf(o){return-1!==o}function Si(o){return 32767&o}function Xs(o,a){let u=function Kf(o){return o>>16}(o),h=a;for(;u>0;)h=h[15],u--;return h}let Mu=!0;function vl(o){const a=Mu;return Mu=o,a}let Zd=0;const Er={};function ks(o,a){const u=dc(o,a);if(-1!==u)return u;const h=a[1];h.firstCreatePass&&(o.injectorIndex=a.length,Iu(h.data,o),Iu(a,null),Iu(h.blueprint,null));const f=bl(o,a),m=o.injectorIndex;if(Zf(f)){const v=Si(f),w=Xs(f,a),M=w[1].data;for(let S=0;S<8;S++)a[m+S]=w[v+S]|M[v+S]}return a[m+8]=f,m}function Iu(o,a){o.push(0,0,0,0,0,0,0,0,a)}function dc(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function bl(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let u=0,h=null,f=a;for(;null!==f;){if(h=va(f),null===h)return-1;if(u++,f=f[15],-1!==h.injectorIndex)return h.injectorIndex|u<<16}return-1}function xo(o,a,u){!function Kd(o,a,u){let h;"string"==typeof u?h=u.charCodeAt(0)||0:u.hasOwnProperty(G)&&(h=u[G]),null==h&&(h=u[G]=Zd++);const f=255&h;a.data[o+(f>>5)]|=1<<f}(o,a,u)}function pa(o,a,u){if(u&ct.Optional||void 0!==o)return o;Ve()}function So(o,a,u,h){if(u&ct.Optional&&void 0===h&&(h=null),0==(u&(ct.Self|ct.Host))){const f=o[9],m=Tn(void 0);try{return f?f.get(a,h,u&ct.Optional):gi(a,h,u&ct.Optional)}finally{Tn(m)}}return pa(h,0,u)}function ma(o,a,u,h=ct.Default,f){if(null!==o){if(1024&a[2]){const v=function Jf(o,a,u,h,f){let m=o,v=a;for(;null!==m&&null!==v&&1024&v[2]&&!(256&v[2]);){const w=Qd(m,v,u,h|ct.Self,Er);if(w!==Er)return w;let M=m.parent;if(!M){const S=v[21];if(S){const O=S.get(u,Er,h);if(O!==Er)return O}M=va(v),v=v[15]}m=M}return f}(o,a,u,h,Er);if(v!==Er)return v}const m=Qd(o,a,u,h,Er);if(m!==Er)return m}return So(a,u,h,f)}function Qd(o,a,u,h,f){const m=function Xf(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty(G)?o[G]:void 0;return"number"==typeof a?a>=0?255&a:xu:a}(u);if("function"==typeof m){if(!Ud(a,o,h))return h&ct.Host?pa(f,0,h):So(a,u,h,f);try{const v=m(h);if(null!=v||h&ct.Optional)return v;Ve()}finally{Hd()}}else if("number"==typeof m){let v=null,w=dc(o,a),M=-1,S=h&ct.Host?a[16][6]:null;for((-1===w||h&ct.SkipSelf)&&(M=-1===w?bl(o,a):a[w+8],-1!==M&&fc(h,!1)?(v=a[1],w=Si(M),a=Xs(M,a)):w=-1);-1!==w;){const O=a[1];if(ga(m,w,O.data)){const B=hc(w,a,u,v,h,S);if(B!==Er)return B}M=a[w+8],-1!==M&&fc(h,a[1].data[w+8]===S)&&ga(m,w,a)?(v=O,w=Si(M),a=Xs(M,a)):w=-1}}return f}function hc(o,a,u,h,f,m){const v=a[1],w=v.data[o+8],O=wl(w,v,u,null==h?tc(w)&&Mu:h!=v&&0!=(3&w.type),f&ct.Host&&m===w);return null!==O?ds(a,v,O,w):Er}function wl(o,a,u,h,f){const m=o.providerIndexes,v=a.data,w=1048575&m,M=o.directiveStart,O=m>>20,z=f?w+O:o.directiveEnd;for(let ue=h?w:w+O;ue<z;ue++){const Se=v[ue];if(ue<M&&u===Se||ue>=M&&Se.type===u)return ue}if(f){const ue=v[M];if(ue&&wr(ue)&&ue.type===u)return M}return null}function ds(o,a,u,h){let f=o[u];const m=a.data;if(function Du(o){return o instanceof Br}(f)){const v=f;v.resolving&&function ht(o,a){const u=a?`. Dependency path: ${a.join(" > ")} > ${o}`:"";throw new Te(-200,`Circular dependency in DI detected for ${o}${u}`)}(function we(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():Ie(o)}(m[u]));const w=vl(v.canSeeViewProviders);v.resolving=!0;const M=v.injectImpl?Tn(v.injectImpl):null;Ud(o,h,ct.Default);try{f=o[u]=v.factory(void 0,m,o,h),a.firstCreatePass&&u>=h.directiveStart&&function $d(o,a,u){const{ngOnChanges:h,ngOnInit:f,ngDoCheck:m}=a.type.prototype;if(h){const v=Pd(a);(u.preOrderHooks||(u.preOrderHooks=[])).push(o,v),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(o,v)}f&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-o,f),m&&((u.preOrderHooks||(u.preOrderHooks=[])).push(o,m),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(o,m))}(u,m[u],a)}finally{null!==M&&Tn(M),vl(w),v.resolving=!1,Hd()}}return f}function ga(o,a,u){return!!(u[a+(o>>5)]&1<<o)}function fc(o,a){return!(o&ct.Self||o&ct.Host&&a)}class _a{constructor(a,u){this._tNode=a,this._lView=u}get(a,u,h){return ma(this._tNode,this._lView,a,h,u)}}function xu(){return new _a(Ii(),Ue())}function Js(o){return Ce(()=>{const a=o.prototype.constructor,u=a[X]||ya(a),h=Object.prototype;let f=Object.getPrototypeOf(o.prototype).constructor;for(;f&&f!==h;){const m=f[X]||ya(f);if(m&&m!==u)return m;f=Object.getPrototypeOf(f)}return m=>new m})}function ya(o){return Ke(o)?()=>{const a=ya(ee(o));return a&&a()}:zi(o)}function va(o){const a=o[1],u=a.type;return 2===u?a.declTNode:1===u?o[6]:null}function pc(o){return function Cl(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const u=o.attrs;if(u){const h=u.length;let f=0;for(;f<h;){const m=u[f];if(_l(m))break;if(0===m)f+=2;else if("number"==typeof m)for(f++;f<h&&"string"==typeof u[f];)f++;else{if(m===a)return u[f+1];f+=2}}}return null}(Ii(),o)}const ba="__parameters__";function wa(o,a,u){return Ce(()=>{const h=function Su(o){return function(...u){if(o){const h=o(...u);for(const f in h)this[f]=h[f]}}}(a);function f(...m){if(this instanceof f)return h.apply(this,m),this;const v=new f(...m);return w.annotation=v,w;function w(M,S,O){const B=M.hasOwnProperty(ba)?M[ba]:Object.defineProperty(M,ba,{value:[]})[ba];for(;B.length<=O;)B.push(null);return(B[O]=B[O]||[]).push(v),M}}return u&&(f.prototype=Object.create(u.prototype)),f.prototype.ngMetadataName=o,f.annotationCls=f,f})}class Wn{constructor(a,u){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=mn({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function ir(o,a){void 0===a&&(a=o);for(let u=0;u<o.length;u++){let h=o[u];Array.isArray(h)?(a===o&&(a=o.slice(0,u)),ir(h,a)):a!==o&&a.push(h)}return a}function Rs(o,a){o.forEach(u=>Array.isArray(u)?Rs(u,a):a(u))}function Ea(o,a,u){a>=o.length?o.push(u):o.splice(a,0,u)}function ko(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function Ro(o,a){const u=[];for(let h=0;h<o;h++)u.push(a);return u}function rr(o,a,u){let h=Os(o,a);return h>=0?o[1|h]=u:(h=~h,function np(o,a,u,h){let f=o.length;if(f==a)o.push(u,h);else if(1===f)o.push(h,o[0]),o[0]=u;else{for(f--,o.push(o[f-1],o[f]);f>a;)o[f]=o[f-2],f--;o[a]=u,o[a+1]=h}}(o,h,a,u)),h}function nh(o,a){const u=Os(o,a);if(u>=0)return o[1|u]}function Os(o,a){return function Me(o,a,u){let h=0,f=o.length>>u;for(;f!==h;){const m=h+(f-h>>1),v=o[m<<u];if(a===v)return m<<u;v>a?f=m:h=m+1}return~(f<<u)}(o,a,1)}const Ir={},Ia="__NG_DI_FLAG__",xa="ngTempTokenPath",Ps=/\n/gm,Ns="__source";let Dl;function Sa(o){const a=Dl;return Dl=o,a}function oh(o,a=ct.Default){if(void 0===Dl)throw new Te(-203,!1);return null===Dl?gi(o,void 0,a):Dl.get(o,a&ct.Optional?null:void 0,a)}function vn(o,a=ct.Default){return(function Jn(){return wi}()||oh)(ee(o),a)}function Au(o,a=ct.Default){return"number"!=typeof a&&(a=0|(a.optional&&8)|(a.host&&1)|(a.self&&2)|(a.skipSelf&&4)),vn(o,a)}function I(o){const a=[];for(let u=0;u<o.length;u++){const h=ee(o[u]);if(Array.isArray(h)){if(0===h.length)throw new Te(900,!1);let f,m=ct.Default;for(let v=0;v<h.length;v++){const w=h[v],M=R(w);"number"==typeof M?-1===M?f=w.token:m|=M:f=w}a.push(vn(f,m))}else a.push(vn(h))}return a}function x(o,a){return o[Ia]=a,o.prototype[Ia]=a,o}function R(o){return o[Ia]}const Le=x(wa("Optional"),8),St=x(wa("SkipSelf"),4);let op,_c;function ch(o){op=o}function Al(o){return function ku(){if(void 0===_c&&(_c=null,Je.trustedTypes))try{_c=Je.trustedTypes.createPolicy("angular",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch{}return _c}()?.createHTML(o)||o}class kl{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class lp extends kl{getTypeName(){return"HTML"}}class Bv extends kl{getTypeName(){return"Style"}}class Ug extends kl{getTypeName(){return"Script"}}class Vv extends kl{getTypeName(){return"URL"}}class yc extends kl{getTypeName(){return"ResourceURL"}}function to(o){return o instanceof kl?o.changingThisBreaksApplicationSecurity:o}function Ta(o,a){const u=function fh(o){return o instanceof kl&&o.getTypeName()||null}(o);if(null!=u&&u!==a){if("ResourceURL"===u&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===a}function Uv(o){return new lp(o)}function Hv(o){return new Bv(o)}function jv(o){return new Ug(o)}function Hg(o){return new Vv(o)}function C(o){return new yc(o)}class y{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const u=(new window.DOMParser).parseFromString(Al(a),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(a):(u.removeChild(u.firstChild),u)}catch{return null}}}class D{constructor(a){if(this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const u=this.inertDocument.createElement("html");this.inertDocument.appendChild(u);const h=this.inertDocument.createElement("body");u.appendChild(h)}}getInertBodyElement(a){const u=this.inertDocument.createElement("template");if("content"in u)return u.innerHTML=Al(a),u;const h=this.inertDocument.createElement("body");return h.innerHTML=Al(a),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(h),h}stripCustomNsAttrs(a){const u=a.attributes;for(let f=u.length-1;0<f;f--){const v=u.item(f).name;("xmlns:ns1"===v||0===v.indexOf("ns1:"))&&a.removeAttribute(v)}let h=a.firstChild;for(;h;)h.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(h),h=h.nextSibling}}const L=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function le(o){return(o=String(o)).match(L)?o:"unsafe:"+o}function ke(o){const a={};for(const u of o.split(","))a[u]=!0;return a}function dt(...o){const a={};for(const u of o)for(const h in u)u.hasOwnProperty(h)&&(a[h]=!0);return a}const Ot=ke("area,br,col,hr,img,wbr"),an=ke("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Zn=ke("rp,rt"),no=dt(Ot,dt(an,ke("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),dt(Zn,ke("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),dt(Zn,an)),ph=ke("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),mh=dt(ph,ke("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ke("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),zv=ke("script,style,template");class jg{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let u=a.firstChild,h=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?h=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,h&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let f=this.checkClobberedElement(u,u.nextSibling);if(f){u=f;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(a){const u=a.nodeName.toLowerCase();if(!no.hasOwnProperty(u))return this.sanitizedSomething=!0,!zv.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const h=a.attributes;for(let f=0;f<h.length;f++){const m=h.item(f),v=m.name,w=v.toLowerCase();if(!mh.hasOwnProperty(w)){this.sanitizedSomething=!0;continue}let M=m.value;ph[w]&&(M=le(M)),this.buf.push(" ",v,'="',Gv(M),'"')}return this.buf.push(">"),!0}endElement(a){const u=a.nodeName.toLowerCase();no.hasOwnProperty(u)&&!Ot.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(a){this.buf.push(Gv(a))}checkClobberedElement(a,u){if(u&&(a.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return u}}const up=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,$v=/([^\#-~ |!])/g;function Gv(o){return o.replace(/&/g,"&amp;").replace(up,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace($v,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let vc;function Wv(o,a){let u=null;try{vc=vc||function g(o){const a=new D(o);return function k(){try{return!!(new window.DOMParser).parseFromString(Al(""),"text/html")}catch{return!1}}()?new y(a):a}(o);let h=a?String(a):"";u=vc.getInertBodyElement(h);let f=5,m=h;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,h=m,m=u.innerHTML,u=vc.getInertBodyElement(h)}while(h!==m);return Al((new jg).sanitizeChildren(_D(u)||u))}finally{if(u){const h=_D(u)||u;for(;h.firstChild;)h.removeChild(h.firstChild)}}}function _D(o){return"content"in o&&function TN(o){return o.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===o.nodeName}(o)?o.content:null}var Gi=(()=>((Gi=Gi||{})[Gi.NONE=0]="NONE",Gi[Gi.HTML=1]="HTML",Gi[Gi.STYLE=2]="STYLE",Gi[Gi.SCRIPT=3]="SCRIPT",Gi[Gi.URL=4]="URL",Gi[Gi.RESOURCE_URL=5]="RESOURCE_URL",Gi))();function zg(o){const a=function dp(){const o=Ue();return o&&o[12]}();return a?a.sanitize(Gi.URL,o)||"":Ta(o,"URL")?to(o):le(Ie(o))}const Yv=new Wn("ENVIRONMENT_INITIALIZER"),cT=new Wn("INJECTOR",-1),uT=new Wn("INJECTOR_DEF_TYPES");class dT{get(a,u=Ir){if(u===Ir){const h=new Error(`NullInjectorError: No provider for ${pe(a)}!`);throw h.name="NullInjectorError",h}return u}}function PN(...o){return{\u0275providers:hT(0,o)}}function hT(o,...a){const u=[],h=new Set;let f;return Rs(a,m=>{const v=m;vD(v,u,[],h)&&(f||(f=[]),f.push(v))}),void 0!==f&&fT(f,u),u}function fT(o,a){for(let u=0;u<o.length;u++){const{providers:f}=o[u];Rs(f,m=>{a.push(m)})}}function vD(o,a,u,h){if(!(o=ee(o)))return!1;let f=null,m=yr(o);const v=!m&&$(o);if(m||v){if(v&&!v.standalone)return!1;f=o}else{const M=o.ngModule;if(m=yr(M),!m)return!1;f=M}const w=h.has(f);if(v){if(w)return!1;if(h.add(f),v.dependencies){const M="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const S of M)vD(S,a,u,h)}}else{if(!m)return!1;{if(null!=m.imports&&!w){let S;h.add(f);try{Rs(m.imports,O=>{vD(O,a,u,h)&&(S||(S=[]),S.push(O))})}finally{}void 0!==S&&fT(S,a)}if(!w){const S=zi(f)||(()=>new f);a.push({provide:f,useFactory:S,deps:tt},{provide:uT,useValue:f,multi:!0},{provide:Yv,useValue:()=>vn(f),multi:!0})}const M=m.providers;null==M||w||Rs(M,O=>{a.push(O)})}}return f!==o&&void 0!==o.providers}const NN=ve({provide:String,useValue:ve});function bD(o){return null!==o&&"object"==typeof o&&NN in o}function Ou(o){return"function"==typeof o}const CD=new Wn("Set Injector scope."),Zv={},LN={};let wD;function Kv(){return void 0===wD&&(wD=new dT),wD}class gh{}class gT extends gh{constructor(a,u,h,f){super(),this.parent=u,this.source=h,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ED(a,v=>this.processProvider(v)),this.records.set(cT,hp(void 0,this)),f.has("environment")&&this.records.set(gh,hp(void 0,this));const m=this.records.get(CD);null!=m&&"string"==typeof m.value&&this.scopes.add(m.value),this.injectorDefTypes=new Set(this.get(uT.multi,tt,ct.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();for(const a of this._onDestroyHooks)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(a){this._onDestroyHooks.push(a)}runInContext(a){this.assertNotDestroyed();const u=Sa(this),h=Tn(void 0);try{return a()}finally{Sa(u),Tn(h)}}get(a,u=Ir,h=ct.Default){this.assertNotDestroyed();const f=Sa(this),m=Tn(void 0);try{if(!(h&ct.SkipSelf)){let w=this.records.get(a);if(void 0===w){const M=function jN(o){return"function"==typeof o||"object"==typeof o&&o instanceof Wn}(a)&&Un(a);w=M&&this.injectableDefInScope(M)?hp(DD(a),Zv):null,this.records.set(a,w)}if(null!=w)return this.hydrate(a,w)}return(h&ct.Self?Kv():this.parent).get(a,u=h&ct.Optional&&u===Ir?null:u)}catch(v){if("NullInjectorError"===v.name){if((v[xa]=v[xa]||[]).unshift(pe(a)),f)throw v;return function U(o,a,u,h){const f=o[xa];throw a[Ns]&&f.unshift(a[Ns]),o.message=function ne(o,a,u,h=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.slice(2):o;let f=pe(a);if(Array.isArray(a))f=a.map(pe).join(" -> ");else if("object"==typeof a){let m=[];for(let v in a)if(a.hasOwnProperty(v)){let w=a[v];m.push(v+":"+("string"==typeof w?JSON.stringify(w):pe(w)))}f=`{${m.join(", ")}}`}return`${u}${h?"("+h+")":""}[${f}]: ${o.replace(Ps,"\n  ")}`}("\n"+o.message,f,u,h),o.ngTokenPath=f,o[xa]=null,o}(v,a,"R3InjectorError",this.source)}throw v}finally{Tn(m),Sa(f)}}resolveInjectorInitializers(){const a=Sa(this),u=Tn(void 0);try{const h=this.get(Yv.multi,tt,ct.Self);for(const f of h)f()}finally{Sa(a),Tn(u)}}toString(){const a=[],u=this.records;for(const h of u.keys())a.push(pe(h));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Te(205,!1)}processProvider(a){let u=Ou(a=ee(a))?a:ee(a&&a.provide);const h=function VN(o){return bD(o)?hp(void 0,o.useValue):hp(_T(o),Zv)}(a);if(Ou(a)||!0!==a.multi)this.records.get(u);else{let f=this.records.get(u);f||(f=hp(void 0,Zv,!0),f.factory=()=>I(f.multi),this.records.set(u,f)),u=a,f.multi.push(a)}this.records.set(u,h)}hydrate(a,u){return u.value===Zv&&(u.value=LN,u.value=u.factory()),"object"==typeof u.value&&u.value&&function HN(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(a){if(!a.providedIn)return!1;const u=ee(a.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function DD(o){const a=Un(o),u=null!==a?a.factory:zi(o);if(null!==u)return u;if(o instanceof Wn)throw new Te(204,!1);if(o instanceof Function)return function BN(o){const a=o.length;if(a>0)throw Ro(a,"?"),new Te(204,!1);const u=function Hn(o){const a=o&&(o[Qi]||o[vr]);if(a){const u=function Yr(o){if(o.hasOwnProperty("name"))return o.name;const a=(""+o).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(o);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),a}return null}(o);return null!==u?()=>u.factory(o):()=>new o}(o);throw new Te(204,!1)}function _T(o,a,u){let h;if(Ou(o)){const f=ee(o);return zi(f)||DD(f)}if(bD(o))h=()=>ee(o.useValue);else if(function mT(o){return!(!o||!o.useFactory)}(o))h=()=>o.useFactory(...I(o.deps||[]));else if(function pT(o){return!(!o||!o.useExisting)}(o))h=()=>vn(ee(o.useExisting));else{const f=ee(o&&(o.useClass||o.provide));if(!function UN(o){return!!o.deps}(o))return zi(f)||DD(f);h=()=>new f(...I(o.deps))}return h}function hp(o,a,u=!1){return{factory:o,value:a,multi:u?[]:void 0}}function zN(o){return!!o.\u0275providers}function ED(o,a){for(const u of o)Array.isArray(u)?ED(u,a):zN(u)?ED(u.\u0275providers,a):a(u)}class yT{}class WN{resolveComponentFactory(a){throw function GN(o){const a=Error(`No component factory found for ${pe(o)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=o,a}(a)}}let Wg=(()=>{class o{}return o.NULL=new WN,o})();function qN(){return fp(Ii(),Ue())}function fp(o,a){return new qg($i(o,a))}let qg=(()=>{class o{constructor(u){this.nativeElement=u}}return o.__NG_ELEMENT_ID__=qN,o})();function YN(o){return o instanceof qg?o.nativeElement:o}class bT{}let ZN=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>function KN(){const o=Ue(),u=In(Ii().index,o);return(Ei(u)?u:o)[11]}(),o})(),QN=(()=>{class o{}return o.\u0275prov=mn({token:o,providedIn:"root",factory:()=>null}),o})();class CT{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const wT=new CT("14.2.2"),MD={};function Kg(o){return o.ngOriginalError}class Ri{constructor(){this._console=console}handleError(a){const u=this._findOriginalError(a);this._console.error("ERROR",a),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(a){let u=a&&Kg(a);for(;u&&Kg(u);)u=Kg(u);return u||null}}const io=new Map;let Nu=0;const tb="__ngContext__";function Hr(o,a){Ei(a)?(o[tb]=a[20],function mp(o){io.set(o[20],o)}(a)):o[tb]=a}function Ra(o){return o instanceof Function?o():o}var No=(()=>((No=No||{})[No.Important=1]="Important",No[No.DashCase=2]="DashCase",No))();function _p(o,a){return undefined(o,a)}function yp(o){const a=o[3];return Or(a)?a[3]:a}function sb(o){return ab(o[13])}function ob(o){return ab(o[4])}function ab(o){for(;null!==o&&!Or(o);)o=o[4];return o}function Lu(o,a,u,h,f){if(null!=h){let m,v=!1;Or(h)?m=h:Ei(h)&&(v=!0,h=h[0]);const w=ri(h);0===o&&null!==u?null==f?$D(a,u,w):Bu(a,u,w,f||null,!0):1===o&&null!==u?Bu(a,u,w,f||null,!0):2===o?function Cp(o,a,u){const h=s_(o,a);h&&function hb(o,a,u,h){o.removeChild(a,u,h)}(o,h,a,u)}(a,w,v):3===o&&a.destroyNode(w),null!=m&&function gn(o,a,u,h,f){const m=u[7];m!==ri(u)&&Lu(a,o,h,m,f);for(let w=10;w<u.length;w++){const M=u[w];wh(M[1],M,o,a,h,m)}}(a,o,m,u,f)}}function cb(o,a,u){return o.createElement(a,u)}function Pl(o,a){const u=o[9],h=u.indexOf(a),f=a[3];512&a[2]&&(a[2]&=-513,ci(f,-1)),u.splice(h,1)}function vp(o,a){if(o.length<=10)return;const u=10+a,h=o[u];if(h){const f=h[17];null!==f&&f!==o&&Pl(f,h),a>0&&(o[u-1][4]=h[4]);const m=ko(o,10+a);!function NT(o,a){wh(o,a,a[11],2,null,null),a[0]=null,a[6]=null}(h[1],h);const v=m[19];null!==v&&v.detachView(m[1]),h[3]=null,h[4]=null,h[2]&=-65}return h}function jD(o,a){if(!(128&a[2])){const u=a[11];u.destroyNode&&wh(o,a,u,3,null,null),function FT(o){let a=o[13];if(!a)return ub(o[1],o);for(;a;){let u=null;if(Ei(a))u=a[13];else{const h=a[10];h&&(u=h)}if(!u){for(;a&&!a[4]&&a!==o;)Ei(a)&&ub(a[1],a),a=a[3];null===a&&(a=o),Ei(a)&&ub(a[1],a),u=a&&a[4]}a=u}}(a)}}function ub(o,a){if(!(128&a[2])){a[2]&=-65,a[2]|=128,function Ch(o,a){let u;if(null!=o&&null!=(u=o.destroyHooks))for(let h=0;h<u.length;h+=2){const f=a[u[h]];if(!(f instanceof Br)){const m=u[h+1];if(Array.isArray(m))for(let v=0;v<m.length;v+=2){const w=f[m[v]],M=m[v+1];try{M.call(w)}finally{}}else try{m.call(f)}finally{}}}}(o,a),function r_(o,a){const u=o.cleanup,h=a[7];let f=-1;if(null!==u)for(let m=0;m<u.length-1;m+=2)if("string"==typeof u[m]){const v=u[m+1],w="function"==typeof v?v(a):ri(a[v]),M=h[f=u[m+2]],S=u[m+3];"boolean"==typeof S?w.removeEventListener(u[m],M,S):S>=0?h[f=S]():h[f=-S].unsubscribe(),m+=2}else{const v=h[f=u[m+1]];u[m].call(v)}if(null!==h){for(let m=f+1;m<h.length;m++)(0,h[m])();a[7]=null}}(o,a),1===a[1].type&&a[11].destroy();const u=a[17];if(null!==u&&Or(a[3])){u!==a[3]&&Pl(u,a);const h=a[19];null!==h&&h.detachView(o)}!function TD(o){io.delete(o[20])}(a)}}function db(o,a,u){return function zD(o,a,u){let h=a;for(;null!==h&&40&h.type;)h=(a=h).parent;if(null===h)return u[0];if(2&h.flags){const f=o.data[h.directiveStart].encapsulation;if(f===ut.None||f===ut.Emulated)return null}return $i(h,u)}(o,a.parent,u)}function Bu(o,a,u,h,f){o.insertBefore(a,u,h,f)}function $D(o,a,u){o.appendChild(a,u)}function GD(o,a,u,h,f){null!==h?Bu(o,a,u,h,f):$D(o,a,u)}function s_(o,a){return o.parentNode(a)}function qD(o,a,u){return pb(o,a,u)}let pb=function fb(o,a,u){return 40&o.type?$i(o,u):null};function a_(o,a,u,h){const f=db(o,h,a),m=a[11],w=qD(h.parent||a[6],h,a);if(null!=f)if(Array.isArray(u))for(let M=0;M<u.length;M++)GD(m,f,u[M],w,!1);else GD(m,f,u,w,!1)}function bp(o,a){if(null!==a){const u=a.type;if(3&u)return $i(a,o);if(4&u)return l_(-1,o[a.index]);if(8&u){const h=a.child;if(null!==h)return bp(o,h);{const f=o[a.index];return Or(f)?l_(-1,f):ri(f)}}if(32&u)return _p(a,o)()||ri(o[a.index]);{const h=gb(o,a);return null!==h?Array.isArray(h)?h[0]:bp(yp(o[16]),h):bp(o,a.next)}}return null}function gb(o,a){return null!==a?o[16][6].projection[a.projection]:null}function l_(o,a){const u=10+o+1;if(u<a.length){const h=a[u],f=h[1].firstChild;if(null!==f)return bp(h,f)}return a[7]}function c_(o,a,u,h,f,m,v){for(;null!=u;){const w=h[u.index],M=u.type;if(v&&0===a&&(w&&Hr(ri(w),h),u.flags|=4),64!=(64&u.flags))if(8&M)c_(o,a,u.child,h,f,m,!1),Lu(a,o,f,w,m);else if(32&M){const S=_p(u,h);let O;for(;O=S();)Lu(a,o,f,O,m);Lu(a,o,f,w,m)}else 16&M?On(o,a,h,u,f,m):Lu(a,o,f,w,m);u=v?u.projectionNext:u.next}}function wh(o,a,u,h,f,m){c_(u,h,o.firstChild,a,f,m,!1)}function On(o,a,u,h,f,m){const v=u[16],M=v[6].projection[h.projection];if(Array.isArray(M))for(let S=0;S<M.length;S++)Lu(a,o,f,M[S],m);else c_(o,a,M,v[3],f,m,!0)}function Kn(o,a,u){o.setAttribute(a,"style",u)}function wp(o,a,u){""===u?o.removeAttribute(a,"class"):o.setAttribute(a,"class",u)}function YD(o,a,u){let h=o.length;for(;;){const f=o.indexOf(a,u);if(-1===f)return f;if(0===f||o.charCodeAt(f-1)<=32){const m=a.length;if(f+m===h||o.charCodeAt(f+m)<=32)return f}u=f+1}}const _b="ng-template";function vi(o,a,u){let h=0;for(;h<o.length;){let f=o[h++];if(u&&"class"===f){if(f=o[h],-1!==YD(f.toLowerCase(),a,0))return!0}else if(1===f){for(;h<o.length&&"string"==typeof(f=o[h++]);)if(f.toLowerCase()===a)return!0;return!1}}return!1}function fn(o){return 4===o.type&&o.value!==_b}function Qr(o,a,u){return a===(4!==o.type||u?o.value:_b)}function UT(o,a,u){let h=4;const f=o.attrs||[],m=function jT(o){for(let a=0;a<o.length;a++)if(_l(o[a]))return a;return o.length}(f);let v=!1;for(let w=0;w<a.length;w++){const M=a[w];if("number"!=typeof M){if(!v)if(4&h){if(h=2|1&h,""!==M&&!Qr(o,M,u)||""===M&&1===a.length){if(Ls(h))return!1;v=!0}}else{const S=8&h?M:a[++w];if(8&h&&null!==o.attrs){if(!vi(o.attrs,S,u)){if(Ls(h))return!1;v=!0}continue}const B=ro(8&h?"class":M,f,fn(o),u);if(-1===B){if(Ls(h))return!1;v=!0;continue}if(""!==S){let z;z=B>m?"":f[B+1].toLowerCase();const ue=8&h?z:null;if(ue&&-1!==YD(ue,S,0)||2&h&&S!==z){if(Ls(h))return!1;v=!0}}}}else{if(!v&&!Ls(h)&&!Ls(M))return!1;if(v&&Ls(M))continue;v=!1,h=M|1&h}}return Ls(h)||v}function Ls(o){return 0==(1&o)}function ro(o,a,u,h){if(null===a)return-1;let f=0;if(h||!u){let m=!1;for(;f<a.length;){const v=a[f];if(v===o)return f;if(3===v||6===v)m=!0;else{if(1===v||2===v){let w=a[++f];for(;"string"==typeof w;)w=a[++f];continue}if(4===v)break;if(0===v){f+=4;continue}}f+=m?1:2}return-1}return function KD(o,a){let u=o.indexOf(4);if(u>-1)for(u++;u<o.length;){const h=o[u];if("number"==typeof h)return-1;if(h===a)return u;u++}return-1}(a,o)}function ZD(o,a,u=!1){for(let h=0;h<a.length;h++)if(UT(o,a[h],u))return!0;return!1}function Vu(o,a){e:for(let u=0;u<a.length;u++){const h=a[u];if(o.length===h.length){for(let f=0;f<o.length;f++)if(o[f]!==h[f])continue e;return!0}}return!1}function d_(o,a){return o?":not("+a.trim()+")":a}function Dp(o){let a=o[0],u=1,h=2,f="",m=!1;for(;u<o.length;){let v=o[u];if("string"==typeof v)if(2&h){const w=o[++u];f+="["+v+(w.length>0?'="'+w+'"':"")+"]"}else 8&h?f+="."+v:4&h&&(f+=" "+v);else""!==f&&!Ls(v)&&(a+=d_(m,f),f=""),h=v,m=m||!Ls(h);u++}return""!==f&&(a+=d_(m,f)),a}const on={};function XD(o){JD(dn(),Ue(),ti()+o,!1)}function JD(o,a,u,h){if(!h)if(3==(3&a[2])){const m=o.preOrderCheckHooks;null!==m&&ua(a,m,u)}else{const m=o.preOrderHooks;null!==m&&da(a,m,0,u)}Ts(u)}function eE(o,a=null,u=null,h){const f=Xr(o,a,u,h);return f.resolveInjectorInitializers(),f}function Xr(o,a=null,u=null,h,f=new Set){const m=[u||tt,PN(o)];return h=h||("object"==typeof o?void 0:pe(o)),new gT(m,a||Kv(),h||null,f)}let Hu=(()=>{class o{static create(u,h){if(Array.isArray(u))return eE({name:""},h,u,"");{const f=u.name??"";return eE({name:f},u.parent,u.providers,f)}}}return o.THROW_IF_NOT_FOUND=Ir,o.NULL=new dT,o.\u0275prov=mn({token:o,providedIn:"any",factory:()=>vn(cT)}),o.__NG_ELEMENT_ID__=-1,o})();function ju(o,a=ct.Default){const u=Ue();return null===u?vn(o,a):ma(Ii(),u,ee(o),a)}function sE(){throw new Error("invalid")}function Sp(o,a){return o<<17|a<<2}function so(o){return o>>17&32767}function $u(o){return 2|o}function Fl(o){return(131068&o)>>2}function Ap(o,a){return-131069&o|a<<2}function Ib(o){return 1|o}function yE(o,a){const u=o.contentQueries;if(null!==u)for(let h=0;h<u.length;h+=2){const f=u[h],m=u[h+1];if(-1!==m){const v=o.data[m];_u(f),v.contentQueries(2,a[m],m)}}}function Dc(o,a,u,h,f,m,v,w,M,S,O){const B=a.blueprint.slice();return B[0]=f,B[2]=76|h,(null!==O||o&&1024&o[2])&&(B[2]|=1024),sl(B),B[3]=B[15]=o,B[8]=u,B[10]=v||o&&o[10],B[11]=w||o&&o[11],B[12]=M||o&&o[12]||null,B[9]=S||o&&o[9]||null,B[6]=m,B[20]=function xT(){return Nu++}(),B[21]=O,B[16]=2==a.type?o[16]:B,B}function Ec(o,a,u,h,f){let m=o.data[a];if(null===m)m=function C_(o,a,u,h,f){const m=oa(),v=ac(),M=o.data[a]=function eA(o,a,u,h,f,m){return{type:u,index:h,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?m:m&&m.parent,u,a,h,f);return null===o.firstChild&&(o.firstChild=M),null!==m&&(v?null==m.child&&null!==M.parent&&(m.child=M):null===m.next&&(m.next=M)),M}(o,a,u,h,f),function Bd(){return Yt.lFrame.inI18n}()&&(m.flags|=64);else if(64&m.type){m.type=u,m.value=h,m.attrs=f;const v=function oc(){const o=Yt.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}();m.injectorIndex=null===v?-1:v.injectorIndex}return nr(m,!0),m}function Mc(o,a,u,h){if(0===u)return-1;const f=a.length;for(let m=0;m<u;m++)a.push(h),o.blueprint.push(h),o.data.push(null);return f}function Bl(o,a,u){ca(a);try{const h=o.viewQuery;null!==h&&Yb(1,h,u);const f=o.template;null!==f&&Vl(o,a,f,1,u),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&yE(o,a),o.staticViewQueries&&Yb(2,o.viewQuery,u);const m=o.components;null!==m&&function Lo(o,a){for(let u=0;u<a.length;u++)Wb(o,a[u])}(a,m)}catch(h){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),h}finally{a[2]&=-5,Ks()}}function Lp(o,a,u,h){const f=a[2];if(128!=(128&f)){ca(a);try{sl(a),function dl(o){return Yt.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==u&&Vl(o,a,u,2,h);const v=3==(3&f);if(v){const S=o.preOrderCheckHooks;null!==S&&ua(a,S,null)}else{const S=o.preOrderHooks;null!==S&&da(a,S,0,null),Gd(a,0)}if(function xE(o){for(let a=sb(o);null!==a;a=ob(a)){if(!a[2])continue;const u=a[9];for(let h=0;h<u.length;h++){const f=u[h],m=f[3];0==(512&f[2])&&ci(m,1),f[2]|=512}}}(a),function Gb(o){for(let a=sb(o);null!==a;a=ob(a))for(let u=10;u<a.length;u++){const h=a[u],f=h[1];Zs(h)&&Lp(f,h,f.template,h[8])}}(a),null!==o.contentQueries&&yE(o,a),v){const S=o.contentCheckHooks;null!==S&&ua(a,S)}else{const S=o.contentHooks;null!==S&&da(a,S,1),Gd(a,1)}!function Nb(o,a){const u=o.hostBindingOpCodes;if(null!==u)try{for(let h=0;h<u.length;h++){const f=u[h];if(f<0)Ts(~f);else{const m=f,v=u[++h],w=u[++h];Vd(v,m),w(2,a[m])}}}finally{Ts(-1)}}(o,a);const w=o.components;null!==w&&function oi(o,a){for(let u=0;u<a.length;u++)aA(o,a[u])}(a,w);const M=o.viewQuery;if(null!==M&&Yb(2,M,h),v){const S=o.viewCheckHooks;null!==S&&ua(a,S)}else{const S=o.viewHooks;null!==S&&da(a,S,2),Gd(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),a[2]&=-41,512&a[2]&&(a[2]&=-513,ci(a[3],-1))}finally{Ks()}}}function Vl(o,a,u,h,f){const m=ti(),v=2&h;try{Ts(-1),v&&a.length>22&&JD(o,a,22,!1),u(h,f)}finally{Ts(m)}}function w_(o,a,u){if(wo(a)){const f=a.directiveEnd;for(let m=a.directiveStart;m<f;m++){const v=o.data[m];v.contentQueries&&v.contentQueries(1,u[m],m)}}}function Ic(o,a,u){!Mo()||(function DE(o,a,u,h){const f=u.directiveStart,m=u.directiveEnd;o.firstCreatePass||ks(u,a),Hr(h,a);const v=u.initialInputs;for(let w=f;w<m;w++){const M=o.data[w],S=wr(M);S&&zb(a,u,M);const O=ds(a,o,w,u);Hr(O,a),null!==v&&rA(0,w-f,O,M,0,v),S&&(In(u.index,a)[8]=O)}}(o,a,u,$i(u,a)),128==(128&u.flags)&&function E_(o,a,u){const h=u.directiveStart,f=u.directiveEnd,m=u.index,v=function Gf(){return Yt.lFrame.currentDirectiveIndex}();try{Ts(m);for(let w=h;w<f;w++){const M=o.data[w],S=a[w];la(w),(null!==M.hostBindings||0!==M.hostVars||null!==M.hostAttrs)&&EE(M,S)}}finally{Ts(-1),la(v)}}(o,a,u))}function D_(o,a,u=$i){const h=a.localNames;if(null!==h){let f=a.index+1;for(let m=0;m<h.length;m+=2){const v=h[m+1],w=-1===v?u(a,o):o[v];o[f++]=w}}}function Bp(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=Fb(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):a}function Fb(o,a,u,h,f,m,v,w,M,S){const O=22+h,B=O+f,z=function XT(o,a){const u=[];for(let h=0;h<a;h++)u.push(h<o?null:on);return u}(O,B),ue="function"==typeof S?S():S;return z[1]={type:o,blueprint:z,template:u,queries:null,viewQuery:w,declTNode:a,data:z.slice().fill(null,O),bindingStartIndex:O,expandoStartIndex:B,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:M,consts:ue,incompleteFirstPass:!1}}function vE(o,a,u,h){const f=Zb(a);null===u?f.push(h):(f.push(u),o.firstCreatePass&&SE(o).push(h,f.length-1))}function bE(o,a,u){for(let h in o)if(o.hasOwnProperty(h)){const f=o[h];(u=null===u?{}:u).hasOwnProperty(h)?u[h].push(a,f):u[h]=[a,f]}return u}function Lb(o,a){const h=a.directiveEnd,f=o.data,m=a.attrs,v=[];let w=null,M=null;for(let S=a.directiveStart;S<h;S++){const O=f[S],B=O.inputs,z=null===m||fn(a)?null:sA(B,m);v.push(z),w=bE(B,S,w),M=bE(O.outputs,S,M)}null!==w&&(w.hasOwnProperty("class")&&(a.flags|=16),w.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=v,a.inputs=w,a.outputs=M}function Bs(o,a,u,h,f,m,v,w){const M=$i(a,u);let O,S=a.inputs;!w&&null!=S&&(O=S[h])?(Xb(o,u,O,h,f),tc(a)&&wE(u,a.index)):3&a.type&&(h=function CE(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(h),f=null!=v?v(f,a.value||"",h):f,m.setProperty(M,h,f))}function wE(o,a){const u=In(a,o);16&u[2]||(u[2]|=32)}function Bb(o,a,u,h){let f=!1;if(Mo()){const m=function Ub(o,a,u){const h=o.directiveRegistry;let f=null;if(h)for(let m=0;m<h.length;m++){const v=h[m];ZD(u,v.selectors,!1)&&(f||(f=[]),xo(ks(u,a),o,v.type),wr(v)?(Hb(o,u),f.unshift(v)):f.push(v))}return f}(o,a,u),v=null===h?null:{"":-1};if(null!==m){f=!0,IE(u,o.data.length,m.length);for(let O=0;O<m.length;O++){const B=m[O];B.providersResolver&&B.providersResolver(B)}let w=!1,M=!1,S=Mc(o,a,m.length,null);for(let O=0;O<m.length;O++){const B=m[O];u.mergedAttrs=yl(u.mergedAttrs,B.hostAttrs),jb(o,u,a,S,B),iA(S,B,v),null!==B.contentQueries&&(u.flags|=8),(null!==B.hostBindings||null!==B.hostAttrs||0!==B.hostVars)&&(u.flags|=128);const z=B.type.prototype;!w&&(z.ngOnChanges||z.ngOnInit||z.ngDoCheck)&&((o.preOrderHooks||(o.preOrderHooks=[])).push(u.index),w=!0),!M&&(z.ngOnChanges||z.ngDoCheck)&&((o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(u.index),M=!0),S++}Lb(o,u)}v&&function ME(o,a,u){if(a){const h=o.localNames=[];for(let f=0;f<a.length;f+=2){const m=u[a[f+1]];if(null==m)throw new Te(-301,!1);h.push(a[f],m)}}}(u,h,v)}return u.mergedAttrs=yl(u.mergedAttrs,u.attrs),f}function Vp(o,a,u,h,f,m){const v=m.hostBindings;if(v){let w=o.hostBindingOpCodes;null===w&&(w=o.hostBindingOpCodes=[]);const M=~a.index;(function Vb(o){let a=o.length;for(;a>0;){const u=o[--a];if("number"==typeof u&&u<0)return u}return 0})(w)!=M&&w.push(M),w.push(h,f,v)}}function EE(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function Hb(o,a){a.flags|=2,(o.components||(o.components=[])).push(a.index)}function iA(o,a,u){if(u){if(a.exportAs)for(let h=0;h<a.exportAs.length;h++)u[a.exportAs[h]]=o;wr(a)&&(u[""]=o)}}function IE(o,a,u){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+u,o.providerIndexes=a}function jb(o,a,u,h,f){o.data[h]=f;const m=f.factory||(f.factory=zi(f.type)),v=new Br(m,wr(f),ju);o.blueprint[h]=v,u[h]=v,Vp(o,a,0,h,Mc(o,u,f.hostVars,on),f)}function zb(o,a,u){const h=$i(a,o),f=Bp(u),m=o[10],v=I_(o,Dc(o,f,null,u.onPush?32:16,h,a,m,m.createRenderer(h,u),null,null,null));o[a.index]=v}function Na(o,a,u,h,f,m){const v=$i(o,a);!function $b(o,a,u,h,f,m,v){if(null==m)o.removeAttribute(a,f,u);else{const w=null==v?Ie(m):v(m,h||"",f);o.setAttribute(a,f,w,u)}}(a[11],v,m,o.value,u,h,f)}function rA(o,a,u,h,f,m){const v=m[a];if(null!==v){const w=h.setInput;for(let M=0;M<v.length;){const S=v[M++],O=v[M++],B=v[M++];null!==w?h.setInput(u,B,S,O):u[O]=B}}}function sA(o,a){let u=null,h=0;for(;h<a.length;){const f=a[h];if(0!==f)if(5!==f){if("number"==typeof f)break;o.hasOwnProperty(f)&&(null===u&&(u=[]),u.push(f,o[f],a[h+1])),h+=2}else h+=2;else h+=4}return u}function Up(o,a,u,h){return new Array(o,!0,!1,a,null,0,h,u,null,null)}function aA(o,a){const u=In(a,o);if(Zs(u)){const h=u[1];48&u[2]?Lp(h,u,h.template,u[8]):u[5]>0&&M_(u)}}function M_(o){for(let h=sb(o);null!==h;h=ob(h))for(let f=10;f<h.length;f++){const m=h[f];if(Zs(m))if(512&m[2]){const v=m[1];Lp(v,m,v.template,m[8])}else m[5]>0&&M_(m)}const u=o[1].components;if(null!==u)for(let h=0;h<u.length;h++){const f=In(u[h],o);Zs(f)&&f[5]>0&&M_(f)}}function Wb(o,a){const u=In(a,o),h=u[1];(function lA(o,a){for(let u=a.length;u<o.blueprint.length;u++)a.push(o.blueprint[u])})(h,u),Bl(h,u,u[8])}function I_(o,a){return o[13]?o[14][4]=a:o[13]=a,o[14]=a,a}function qb(o){for(;o;){o[2]|=32;const a=yp(o);if(cu(o)&&!a)return o;o=a}return null}function x_(o,a,u,h=!0){const f=a[10];f.begin&&f.begin();try{Lp(o,a,o.template,u)}catch(v){throw h&&Qb(a,v),v}finally{f.end&&f.end()}}function Yb(o,a,u){_u(0),a(o,u)}function Zb(o){return o[7]||(o[7]=[])}function SE(o){return o.cleanup||(o.cleanup=[])}function Kb(o,a,u){return(null===o||wr(o))&&(u=function Fd(o){for(;Array.isArray(o);){if("object"==typeof o[1])return o;o=o[0]}return null}(u[a.index])),u[11]}function Qb(o,a){const u=o[9],h=u?u.get(Ri,null):null;h&&h.handleError(a)}function Xb(o,a,u,h,f){for(let m=0;m<u.length;){const v=u[m++],w=u[m++],M=a[v],S=o.data[v];null!==S.setInput?S.setInput(M,f,h,w):M[w]=f}}function Fa(o,a,u){const h=Zr(a,o);!function VD(o,a,u){o.setValue(a,u)}(o[11],h,u)}function Wu(o,a,u){let h=u?o.styles:null,f=u?o.classes:null,m=0;if(null!==a)for(let v=0;v<a.length;v++){const w=a[v];"number"==typeof w?m=w:1==m?f=Ee(f,w):2==m&&(h=Ee(h,w+": "+a[++v]+";"))}u?o.styles=h:o.stylesWithoutHost=h,u?o.classes=f:o.classesWithoutHost=f}function Hp(o,a,u,h,f=!1){for(;null!==u;){const m=a[u.index];if(null!==m&&h.push(ri(m)),Or(m))for(let w=10;w<m.length;w++){const M=m[w],S=M[1].firstChild;null!==S&&Hp(M[1],M,S,h)}const v=u.type;if(8&v)Hp(o,a,u.child,h);else if(32&v){const w=_p(u,a);let M;for(;M=w();)h.push(M)}else if(16&v){const w=gb(a,u);if(Array.isArray(w))h.push(...w);else{const M=yp(a[16]);Hp(M[1],M,w,h,!0)}}u=f?u.projectionNext:u.next}return h}class jp{constructor(a,u){this._lView=a,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,u=a[1];return Hp(u,a,u.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(Or(a)){const u=a[8],h=u?u.indexOf(this):-1;h>-1&&(vp(a,h),ko(u,h))}this._attachedToViewContainer=!1}jD(this._lView[1],this._lView)}onDestroy(a){vE(this._lView[1],this._lView,null,a)}markForCheck(){qb(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){x_(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Te(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function HD(o,a){wh(o,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new Te(902,!1);this._appRef=a}}class cA extends jp{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;x_(a[1],a,a[8],!1)}checkNoChanges(){}get context(){return null}}class Jb extends Wg{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const u=$(a);return new zp(u,this.ngModule)}}function S_(o){const a=[];for(let u in o)o.hasOwnProperty(u)&&a.push({propName:o[u],templateName:u});return a}class uA{constructor(a,u){this.injector=a,this.parentInjector=u}get(a,u,h){const f=this.injector.get(a,MD,h);return f!==MD||u===MD?f:this.parentInjector.get(a,u,h)}}class zp extends yT{constructor(a,u){super(),this.componentDef=a,this.ngModule=u,this.componentType=a.type,this.selector=function zT(o){return o.map(Dp).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return S_(this.componentDef.inputs)}get outputs(){return S_(this.componentDef.outputs)}create(a,u,h,f){let m=(f=f||this.ngModule)instanceof gh?f:f?.injector;m&&null!==this.componentDef.getStandaloneInjector&&(m=this.componentDef.getStandaloneInjector(m)||m);const v=m?new uA(a,m):a,w=v.get(bT,null);if(null===w)throw new Te(407,!1);const M=v.get(QN,null),S=w.createRenderer(null,this.componentDef),O=this.componentDef.selectors[0][0]||"div",B=h?function JT(o,a,u){return o.selectRootElement(a,u===ut.ShadowDom)}(S,h,this.componentDef.encapsulation):cb(w.createRenderer(null,this.componentDef),O,function TE(o){const a=o.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(O)),z=this.componentDef.onPush?288:272,ue=Fb(0,null,null,1,0,null,null,null,null,null),Se=Dc(null,ue,null,z,null,null,w,S,M,v,null);let $e,lt;ca(Se);try{const ot=function xc(o,a,u,h,f,m){const v=u[1];u[22]=o;const M=Ec(v,22,2,"#host",null),S=M.mergedAttrs=a.hostAttrs;null!==S&&(Wu(M,S,!0),null!==o&&(As(f,o,S),null!==M.classes&&wp(f,o,M.classes),null!==M.styles&&Kn(f,o,M.styles)));const O=h.createRenderer(o,a),B=Dc(u,Bp(a),null,a.onPush?32:16,u[22],M,h,O,m||null,null,null);return v.firstCreatePass&&(xo(ks(M,u),v,a.type),Hb(v,M),IE(M,u.length,1)),I_(u,B),u[22]=B}(B,this.componentDef,Se,w,S);if(B)if(h)As(S,B,["ng-version",wT.full]);else{const{attrs:Vt,classes:Fe}=function QD(o){const a=[],u=[];let h=1,f=2;for(;h<o.length;){let m=o[h];if("string"==typeof m)2===f?""!==m&&a.push(m,o[++h]):8===f&&u.push(m);else{if(!Ls(f))break;f=m}h++}return{attrs:a,classes:u}}(this.componentDef.selectors[0]);Vt&&As(S,B,Vt),Fe&&Fe.length>0&&wp(S,B,Fe.join(" "))}if(lt=ia(ue,22),void 0!==u){const Vt=lt.projection=[];for(let Fe=0;Fe<this.ngContentSelectors.length;Fe++){const bt=u[Fe];Vt.push(null!=bt?Array.from(bt):null)}}$e=function T_(o,a,u,h){const f=u[1],m=function nA(o,a,u){const h=Ii();o.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),jb(o,h,a,Mc(o,a,1,null),u),Lb(o,h));const f=ds(a,o,h.directiveStart,h);Hr(f,a);const m=$i(h,a);return m&&Hr(m,a),f}(f,u,a);if(o[8]=u[8]=m,null!==h)for(const w of h)w(m,a);if(a.contentQueries){const w=Ii();a.contentQueries(1,m,w.directiveStart)}const v=Ii();return!f.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(Ts(v.index),Vp(u[1],v,0,v.directiveStart,v.directiveEnd,a),EE(a,m)),m}(ot,this.componentDef,Se,[A_]),Bl(ue,Se,null)}finally{Ks()}return new kE(this.componentType,$e,fp(lt,Se),Se,lt)}}class kE extends class $N{}{constructor(a,u,h,f,m){super(),this.location=h,this._rootLView=f,this._tNode=m,this.instance=u,this.hostView=this.changeDetectorRef=new cA(f),this.componentType=a}setInput(a,u){const h=this._tNode.inputs;let f;if(null!==h&&(f=h[a])){const m=this._rootLView;Xb(m[1],m,f,a,u),wE(m,this._tNode.index)}}get injector(){return new _a(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function A_(){const o=Ii();wu(Ue()[1],o)}function e0(o){let a=function RE(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),u=!0;const h=[o];for(;a;){let f;if(wr(o))f=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new Te(903,!1);f=a.\u0275dir}if(f){if(u){h.push(f);const v=o;v.inputs=k_(o.inputs),v.declaredInputs=k_(o.declaredInputs),v.outputs=k_(o.outputs);const w=f.hostBindings;w&&Sc(o,w);const M=f.viewQuery,S=f.contentQueries;if(M&&t0(o,M),S&&fA(o,S),se(o.inputs,f.inputs),se(o.declaredInputs,f.declaredInputs),se(o.outputs,f.outputs),wr(f)&&f.data.animation){const O=o.data;O.animation=(O.animation||[]).concat(f.data.animation)}}const m=f.features;if(m)for(let v=0;v<m.length;v++){const w=m[v];w&&w.ngInherit&&w(o),w===e0&&(u=!1)}}a=Object.getPrototypeOf(a)}!function hA(o){let a=0,u=null;for(let h=o.length-1;h>=0;h--){const f=o[h];f.hostVars=a+=f.hostVars,f.hostAttrs=yl(f.hostAttrs,u=yl(u,f.hostAttrs))}}(h)}function k_(o){return o===jt?{}:o===tt?[]:o}function t0(o,a){const u=o.viewQuery;o.viewQuery=u?(h,f)=>{a(h,f),u(h,f)}:a}function fA(o,a){const u=o.contentQueries;o.contentQueries=u?(h,f,m)=>{a(h,f,m),u(h,f,m)}:a}function Sc(o,a){const u=o.hostBindings;o.hostBindings=u?(h,f)=>{a(h,f),u(h,f)}:a}let R_=null;function La(){if(!R_){const o=Je.Symbol;if(o&&o.iterator)R_=o.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<a.length;++u){const h=a[u];"entries"!==h&&"size"!==h&&Map.prototype[h]===Map.prototype.entries&&(R_=h)}}}return R_}function Gp(o){return!!r0(o)&&(Array.isArray(o)||!(o instanceof Map)&&La()in o)}function r0(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function Bo(o,a,u){return o[a]=u}function Sr(o,a,u){return!Object.is(o[a],u)&&(o[a]=u,!0)}function Vo(o,a,u,h){const f=Sr(o,a,u);return Sr(o,a+1,h)||f}function Wp(o,a,u,h){const f=Ue();return Sr(f,hl(),a)&&(dn(),Na(ni(),f,o,a,u,h)),Wp}function Oh(o,a,u,h){return Sr(o,hl(),u)?a+Ie(u)+h:on}function Ba(o,a,u,h,f,m){const w=Vo(o,function us(){return Yt.lFrame.bindingIndex}(),u,f);return Ss(2),w?a+Ie(u)+h+Ie(f)+m:on}function FE(o,a,u,h,f,m,v,w){const M=Ue(),S=dn(),O=o+22,B=S.firstCreatePass?function NE(o,a,u,h,f,m,v,w,M){const S=a.consts,O=Ec(a,o,4,v||null,Lr(S,w));Bb(a,u,O,Lr(S,M)),wu(a,O);const B=O.tViews=Fb(2,O,h,f,m,a.directiveRegistry,a.pipeRegistry,null,a.schemas,S);return null!==a.queries&&(a.queries.template(a,O),B.queries=a.queries.embeddedTView(O)),O}(O,S,M,a,u,h,f,m,v):S.data[O];nr(B,!1);const z=M[11].createComment("");a_(S,M,z,B),Hr(z,M),I_(M,M[O]=Up(z,M,z,B)),nl(B)&&Ic(S,M,B),null!=v&&D_(M,B,w)}function l0(o){return cs(function ul(){return Yt.lFrame.contextLView}(),22+o)}function c0(o,a,u){const h=Ue();return Sr(h,hl(),a)&&Bs(dn(),ni(),h,o,a,h[11],u,!1),c0}function Zu(o,a,u,h,f){const v=f?"class":"style";Xb(o,u,a.inputs[v],v,h)}function B_(o,a,u,h){const f=Ue(),m=dn(),v=22+o,w=f[11],M=f[v]=cb(w,a,function Cu(){return Yt.lFrame.currentNamespace}()),S=m.firstCreatePass?function u0(o,a,u,h,f,m,v){const w=a.consts,S=Ec(a,o,2,f,Lr(w,m));return Bb(a,u,S,Lr(w,v)),null!==S.attrs&&Wu(S,S.attrs,!1),null!==S.mergedAttrs&&Wu(S,S.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,S),S}(v,m,f,0,a,u,h):m.data[v];nr(S,!0);const O=S.mergedAttrs;null!==O&&As(w,M,O);const B=S.classes;null!==B&&wp(w,M,B);const z=S.styles;return null!==z&&Kn(w,M,z),64!=(64&S.flags)&&a_(m,f,M,S),0===function al(){return Yt.lFrame.elementDepthCount}()&&Hr(M,f),function Ld(){Yt.lFrame.elementDepthCount++}(),nl(S)&&(Ic(m,f,S),w_(m,S,f)),null!==h&&D_(f,S),B_}function V_(){let o=Ii();ac()?aa():(o=o.parent,nr(o,!1));const a=o;!function ll(){Yt.lFrame.elementDepthCount--}();const u=dn();return u.firstCreatePass&&(wu(u,o),wo(o)&&u.queries.elementEnd(o)),null!=a.classesWithoutHost&&function cc(o){return 0!=(16&o.flags)}(a)&&Zu(u,a,Ue(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function uc(o){return 0!=(32&o.flags)}(a)&&Zu(u,a,Ue(),a.stylesWithoutHost,!1),V_}function d0(o,a,u,h){return B_(o,a,u,h),V_(),d0}function Ku(o,a,u){const h=Ue(),f=dn(),m=o+22,v=f.firstCreatePass?function h0(o,a,u,h,f){const m=a.consts,v=Lr(m,h),w=Ec(a,o,8,"ng-container",v);return null!==v&&Wu(w,v,!0),Bb(a,u,w,Lr(m,f)),null!==a.queries&&a.queries.elementStart(a,w),w}(m,f,h,a,u):f.data[m];nr(v,!0);const w=h[m]=h[11].createComment("");return a_(f,h,w,v),Hr(w,h),nl(v)&&(Ic(f,h,v),w_(f,v,h)),null!=u&&D_(h,v),Ku}function Yp(){let o=Ii();const a=dn();return ac()?aa():(o=o.parent,nr(o,!1)),a.firstCreatePass&&(wu(a,o),wo(o)&&a.queries.elementEnd(o)),Yp}function f0(o,a,u){return Ku(o,a,u),Yp(),f0}function Bh(){return Ue()}function oo(o){return!!o&&"function"==typeof o.then}function Vh(o){return!!o&&"function"==typeof o.subscribe}const LE=Vh;function U_(o,a,u,h){const f=Ue(),m=dn(),v=Ii();return H_(m,f,f[11],v,o,a,0,h),U_}function Zp(o,a){const u=Ii(),h=Ue(),f=dn();return H_(f,h,Kb(gu(f.data),u,h),u,o,a),Zp}function H_(o,a,u,h,f,m,v,w){const M=nl(h),O=o.firstCreatePass&&SE(o),B=a[8],z=Zb(a);let ue=!0;if(3&h.type||w){const lt=$i(h,a),ot=w?w(lt):lt,Vt=z.length,Fe=w?wn=>w(ri(wn[h.index])):h.index;let bt=null;if(!w&&M&&(bt=function Kp(o,a,u,h){const f=o.cleanup;if(null!=f)for(let m=0;m<f.length-1;m+=2){const v=f[m];if(v===u&&f[m+1]===h){const w=a[7],M=f[m+2];return w.length>M?w[M]:null}"string"==typeof v&&(m+=2)}return null}(o,a,f,h.index)),null!==bt)(bt.__ngLastListenerFn__||bt).__ngNextListenerFn__=m,bt.__ngLastListenerFn__=m,ue=!1;else{m=Uo(h,a,B,m,!1);const wn=u.listen(ot,f,m);z.push(m,wn),O&&O.push(f,Fe,Vt,Vt+1)}}else m=Uo(h,a,B,m,!1);const Se=h.outputs;let $e;if(ue&&null!==Se&&($e=Se[f])){const lt=$e.length;if(lt)for(let ot=0;ot<lt;ot+=2){const ai=a[$e[ot]][$e[ot+1]].subscribe(m),jc=z.length;z.push(m,ai),O&&O.push(f,h.index,jc,-(jc+1))}}}function BE(o,a,u,h){try{return!1!==u(h)}catch(f){return Qb(o,f),!1}}function Uo(o,a,u,h,f){return function m(v){if(v===Function)return h;qb(2&o.flags?In(o.index,a):a);let M=BE(a,0,h,v),S=m.__ngNextListenerFn__;for(;S;)M=BE(a,0,S,v)&&M,S=S.__ngNextListenerFn__;return f&&!1===M&&(v.preventDefault(),v.returnValue=!1),M}}function p0(o=1){return function Qs(o){return(Yt.lFrame.contextLView=function jd(o,a){for(;o>0;)a=a[15],o--;return a}(o,Yt.lFrame.contextLView))[8]}(o)}function _A(o,a){let u=null;const h=function HT(o){const a=o.attrs;if(null!=a){const u=a.indexOf(5);if(0==(1&u))return a[u+1]}return null}(o);for(let f=0;f<a.length;f++){const m=a[f];if("*"!==m){if(null===h?ZD(o,m,!0):Vu(h,m))return f}else u=f}return u}function Qp(o){const a=Ue()[16][6];if(!a.projection){const h=a.projection=Ro(o?o.length:1,null),f=h.slice();let m=a.child;for(;null!==m;){const v=o?_A(m,o):0;null!==v&&(f[v]?f[v].projectionNext=m:h[v]=m,f[v]=m),m=m.next}}}function m0(o,a=0,u){const h=Ue(),f=dn(),m=Ec(f,22+o,16,null,u||null);null===m.projection&&(m.projection=a),aa(),64!=(64&m.flags)&&function jn(o,a,u){On(a[11],0,a,u,db(o,u,a),qD(u.parent||a[6],u,a))}(f,h,m)}function es(o,a,u){return j_(o,"",a,"",u),es}function j_(o,a,u,h,f){const m=Ue(),v=Oh(m,a,u,h);return v!==on&&Bs(dn(),ni(),m,o,v,m[11],f,!1),j_}function Xp(o,a,u,h,f){const m=o[u+1],v=null===a;let w=h?so(m):Fl(m),M=!1;for(;0!==w&&(!1===M||v);){const O=o[w+1];bA(o[w],a)&&(M=!0,o[w+1]=h?Ib(O):$u(O)),w=h?so(O):Fl(O)}M&&(o[u+1]=h?$u(m):Ib(m))}function bA(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&Os(o,a)>=0}const Li={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function zE(o){return o.substring(Li.key,Li.keyEnd)}function b0(o,a){const u=Li.textEnd;return u===a?-1:(a=Li.keyEnd=function WE(o,a,u){for(;a<u&&o.charCodeAt(a)>32;)a++;return a}(o,Li.key=a,u),Oc(o,a,u))}function Oc(o,a,u){for(;a<u&&o.charCodeAt(a)<=32;)a++;return a}function Hh(o,a,u){return ao(o,a,u,!1),Hh}function C0(o,a){return ao(o,a,null,!0),C0}function w0(o){!function _s(o,a,u,h){const f=dn(),m=Ss(2);f.firstUpdatePass&&$_(f,null,m,h);const v=Ue();if(u!==on&&Sr(v,m,u)){const w=f.data[ti()];if(Nc(w,h)&&!z_(f,m)){let M=h?w.classesWithoutHost:w.stylesWithoutHost;null!==M&&(u=Ee(M,u||"")),Zu(f,w,v,u,h)}else!function Vs(o,a,u,h,f,m,v,w){f===on&&(f=tt);let M=0,S=0,O=0<f.length?f[0]:null,B=0<m.length?m[0]:null;for(;null!==O||null!==B;){const z=M<f.length?f[M+1]:void 0,ue=S<m.length?m[S+1]:void 0;let $e,Se=null;O===B?(M+=2,S+=2,z!==ue&&(Se=B,$e=ue)):null===B||null!==O&&O<B?(M+=2,Se=O):(S+=2,Se=B,$e=ue),null!==Se&&Jp(o,a,u,h,Se,$e,v,w),O=M<f.length?f[M]:null,B=S<m.length?m[S]:null}}(f,w,v,v[11],v[m+1],v[m+1]=function E0(o,a,u){if(null==u||""===u)return tt;const h=[],f=to(u);if(Array.isArray(f))for(let m=0;m<f.length;m++)o(h,f[m],!0);else if("object"==typeof f)for(const m in f)f.hasOwnProperty(m)&&o(h,m,f[m]);else"string"==typeof f&&a(h,f);return h}(o,a,u),h,m)}}(rr,Ho,o,!0)}function Ho(o,a){for(let u=function wA(o){return function GE(o){Li.key=0,Li.keyEnd=0,Li.value=0,Li.valueEnd=0,Li.textEnd=o.length}(o),b0(o,Oc(o,0,Li.textEnd))}(a);u>=0;u=b0(a,u))rr(o,zE(a),!0)}function ao(o,a,u,h){const f=Ue(),m=dn(),v=Ss(2);m.firstUpdatePass&&$_(m,o,v,h),a!==on&&Sr(f,v,a)&&Jp(m,m.data[ti()],f,f[11],o,f[v+1]=function jo(o,a){return null==o||("string"==typeof a?o+=a:"object"==typeof o&&(o=pe(to(o)))),o}(a,u),h,v)}function z_(o,a){return a>=o.expandoStartIndex}function $_(o,a,u,h){const f=o.data;if(null===f[u+1]){const m=f[ti()],v=z_(o,u);Nc(m,h)&&null===a&&!v&&(a=!1),a=function IA(o,a,u,h){const f=gu(o);let m=h?a.residualClasses:a.residualStyles;if(null===f)0===(h?a.classBindings:a.styleBindings)&&(u=jh(u=G_(null,o,a,u,h),a.attrs,h),m=null);else{const v=a.directiveStylingLast;if(-1===v||o[v]!==f)if(u=G_(f,o,a,u,h),null===m){let M=function xA(o,a,u){const h=u?a.classBindings:a.styleBindings;if(0!==Fl(h))return o[so(h)]}(o,a,h);void 0!==M&&Array.isArray(M)&&(M=G_(null,o,a,M[1],h),M=jh(M,a.attrs,h),function D0(o,a,u,h){o[so(u?a.classBindings:a.styleBindings)]=h}(o,a,h,M))}else m=function SA(o,a,u){let h;const f=a.directiveEnd;for(let m=1+a.directiveStylingLast;m<f;m++)h=jh(h,o[m].hostAttrs,u);return jh(h,a.attrs,u)}(o,a,h)}return void 0!==m&&(h?a.residualClasses=m:a.residualStyles=m),u}(f,m,a,h),function vA(o,a,u,h,f,m){let v=m?a.classBindings:a.styleBindings,w=so(v),M=Fl(v);o[h]=u;let O,S=!1;if(Array.isArray(u)){const B=u;O=B[1],(null===O||Os(B,O)>0)&&(S=!0)}else O=u;if(f)if(0!==M){const z=so(o[w+1]);o[h+1]=Sp(z,w),0!==z&&(o[z+1]=Ap(o[z+1],h)),o[w+1]=function Tp(o,a){return 131071&o|a<<17}(o[w+1],h)}else o[h+1]=Sp(w,0),0!==w&&(o[w+1]=Ap(o[w+1],h)),w=h;else o[h+1]=Sp(M,0),0===w?w=h:o[M+1]=Ap(o[M+1],h),M=h;S&&(o[h+1]=$u(o[h+1])),Xp(o,O,h,!0),Xp(o,O,h,!1),function v0(o,a,u,h,f){const m=f?o.residualClasses:o.residualStyles;null!=m&&"string"==typeof a&&Os(m,a)>=0&&(u[h+1]=Ib(u[h+1]))}(a,O,o,h,m),v=Sp(w,M),m?a.classBindings=v:a.styleBindings=v}(f,m,a,u,v,h)}}function G_(o,a,u,h,f){let m=null;const v=u.directiveEnd;let w=u.directiveStylingLast;for(-1===w?w=u.directiveStart:w++;w<v&&(m=a[w],h=jh(h,m.hostAttrs,f),m!==o);)w++;return null!==o&&(u.directiveStylingLast=w),h}function jh(o,a,u){const h=u?1:2;let f=-1;if(null!==a)for(let m=0;m<a.length;m++){const v=a[m];"number"==typeof v?f=v:f===h&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),rr(o,v,!!u||a[++m]))}return void 0===o?null:o}function Jp(o,a,u,h,f,m,v,w){if(!(3&a.type))return;const M=o.data,S=M[w+1];Xu(function Ih(o){return 1==(1&o)}(S)?Ul(M,a,u,f,Fl(S),v):void 0)||(Xu(m)||function zu(o){return 2==(2&o)}(S)&&(m=Ul(M,null,u,f,w,v)),function Cc(o,a,u,h,f){if(a)f?o.addClass(u,h):o.removeClass(u,h);else{let m=-1===h.indexOf("-")?void 0:No.DashCase;null==f?o.removeStyle(u,h,m):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),m|=No.Important),o.setStyle(u,h,f,m))}}(h,v,Zr(ti(),u),f,m))}function Ul(o,a,u,h,f,m){const v=null===a;let w;for(;f>0;){const M=o[f],S=Array.isArray(M),O=S?M[1]:M,B=null===O;let z=u[f+1];z===on&&(z=B?tt:void 0);let ue=B?nh(z,h):O===h?z:void 0;if(S&&!Xu(ue)&&(ue=nh(M,h)),Xu(ue)&&(w=ue,v))return w;const Se=o[f+1];f=v?so(Se):Fl(Se)}if(null!==a){let M=m?a.residualClasses:a.residualStyles;null!=M&&(w=nh(M,h))}return w}function Xu(o){return void 0!==o}function Nc(o,a){return 0!=(o.flags&(a?16:32))}function KE(o,a=""){const u=Ue(),h=dn(),f=o+22,m=h.firstCreatePass?Ec(h,f,1,a,null):h.data[f],v=u[f]=function lb(o,a){return o.createText(a)}(u[11],a);a_(h,u,v,m),nr(m,!1)}function QE(o){return Hl("",o,""),QE}function Hl(o,a,u){const h=Ue(),f=Oh(h,o,a,u);return f!==on&&Fa(h,ti(),f),Hl}function XE(o,a,u,h,f){const m=Ue(),v=Ba(m,o,a,u,h,f);return v!==on&&Fa(m,ti(),v),XE}function oM(o,a,u){const h=Ue();return Sr(h,hl(),a)&&Bs(dn(),ni(),h,o,a,h[11],u,!0),oM}function I0(o,a,u){const h=Ue();if(Sr(h,hl(),a)){const m=dn(),v=ni();Bs(m,v,h,o,a,Kb(gu(m.data),v,h),u,!0)}return I0}const zh=void 0;var wF=["en",[["a","p"],["AM","PM"],zh],[["AM","PM"],zh,zh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],zh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],zh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",zh,"{1} 'at' {0}",zh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function jA(o){const u=Math.floor(Math.abs(o)),h=o.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===h?1:5}];let nm={};function im(o){const a=function $A(o){return o.toLowerCase().replace(/_/g,"-")}(o);let u=lM(a);if(u)return u;const h=a.split("-")[0];if(u=lM(h),u)return u;if("en"===h)return wF;throw new Te(701,!1)}function aM(o){return im(o)[zt.PluralCase]}function lM(o){return o in nm||(nm[o]=Je.ng&&Je.ng.common&&Je.ng.common.locales&&Je.ng.common.locales[o]),nm[o]}var zt=(()=>((zt=zt||{})[zt.LocaleId=0]="LocaleId",zt[zt.DayPeriodsFormat=1]="DayPeriodsFormat",zt[zt.DayPeriodsStandalone=2]="DayPeriodsStandalone",zt[zt.DaysFormat=3]="DaysFormat",zt[zt.DaysStandalone=4]="DaysStandalone",zt[zt.MonthsFormat=5]="MonthsFormat",zt[zt.MonthsStandalone=6]="MonthsStandalone",zt[zt.Eras=7]="Eras",zt[zt.FirstDayOfWeek=8]="FirstDayOfWeek",zt[zt.WeekendRange=9]="WeekendRange",zt[zt.DateFormat=10]="DateFormat",zt[zt.TimeFormat=11]="TimeFormat",zt[zt.DateTimeFormat=12]="DateTimeFormat",zt[zt.NumberSymbols=13]="NumberSymbols",zt[zt.NumberFormats=14]="NumberFormats",zt[zt.CurrencyCode=15]="CurrencyCode",zt[zt.CurrencySymbol=16]="CurrencySymbol",zt[zt.CurrencyName=17]="CurrencyName",zt[zt.Currencies=18]="Currencies",zt[zt.Directionality=19]="Directionality",zt[zt.PluralCase=20]="PluralCase",zt[zt.ExtraData=21]="ExtraData",zt))();const rm="en-US";let WA=rm;function dm(o,a,u,h,f){if(o=ee(o),Array.isArray(o))for(let m=0;m<o.length;m++)dm(o[m],a,u,h,f);else{const m=dn(),v=Ue();let w=Ou(o)?o:ee(o.provide),M=_T(o);const S=Ii(),O=1048575&S.providerIndexes,B=S.directiveStart,z=S.providerIndexes>>20;if(Ou(o)||!o.multi){const ue=new Br(M,f,ju),Se=Us(w,a,f?O:O+z,B);-1===Se?(xo(ks(S,v),m,w),k0(m,o,a.length),a.push(w),S.directiveStart++,S.directiveEnd++,f&&(S.providerIndexes+=1048576),u.push(ue),v.push(ue)):(u[Se]=ue,v[Se]=ue)}else{const ue=Us(w,a,O+z,B),Se=Us(w,a,O,O+z),$e=ue>=0&&u[ue],lt=Se>=0&&u[Se];if(f&&!lt||!f&&!$e){xo(ks(S,v),m,w);const ot=function jl(o,a,u,h,f){const m=new Br(o,u,ju);return m.multi=[],m.index=a,m.componentProviders=0,Ti(m,f,h&&!u),m}(f?pk:XF,u.length,f,h,M);!f&&lt&&(u[Se].providerFactory=ot),k0(m,o,a.length,0),a.push(w),S.directiveStart++,S.directiveEnd++,f&&(S.providerIndexes+=1048576),u.push(ot),v.push(ot)}else k0(m,o,ue>-1?ue:Se,Ti(u[f?Se:ue],M,!f&&h));!f&&h&&lt&&u[Se].componentProviders++}}}function k0(o,a,u,h){const f=Ou(a),m=function FN(o){return!!o.useClass}(a);if(f||m){const M=(m?ee(a.useClass):a).prototype.ngOnDestroy;if(M){const S=o.destroyHooks||(o.destroyHooks=[]);if(!f&&a.multi){const O=S.indexOf(u);-1===O?S.push(u,[h,M]):S[O+1].push(h,M)}else S.push(u,M)}}}function Ti(o,a,u){return u&&o.componentProviders++,o.multi.push(a)-1}function Us(o,a,u,h){for(let f=u;f<h;f++)if(a[f]===o)return f;return-1}function XF(o,a,u,h){return R0(this.multi,[])}function pk(o,a,u,h){const f=this.multi;let m;if(this.providerFactory){const v=this.providerFactory.componentProviders,w=ds(u,u[1],this.providerFactory.index,h);m=w.slice(0,v),R0(f,m);for(let M=v;M<w.length;M++)m.push(w[M])}else m=[],R0(f,m);return m}function R0(o,a){for(let u=0;u<o.length;u++)a.push((0,o[u])());return a}function Tt(o,a=[]){return u=>{u.providersResolver=(h,f)=>function um(o,a,u){const h=dn();if(h.firstCreatePass){const f=wr(o);dm(u,h.data,h.blueprint,f,!0),dm(a,h.data,h.blueprint,f,!1)}}(h,f?f(o):o,a)}}class Fc{}class tn{}function J_(o,a){return new Wh(o,a??null)}class Wh extends Fc{constructor(a,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Jb(this);const h=kt(a);this._bootstrapComponents=Ra(h.bootstrap),this._r3Injector=Xr(a,u,[{provide:Fc,useValue:this},{provide:Wg,useValue:this.componentFactoryResolver}],pe(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class P0 extends tn{constructor(a){super(),this.moduleType=a}create(a){return new Wh(this.moduleType,a)}}class N0 extends Fc{constructor(a,u,h){super(),this.componentFactoryResolver=new Jb(this),this.instance=null;const f=new gT([...a,{provide:Fc,useValue:this},{provide:Wg,useValue:this.componentFactoryResolver}],u||Kv(),h,new Set(["environment"]));this.injector=f,f.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function F0(o,a,u=null){return new N0(o,a,u).injector}let mk=(()=>{class o{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const h=hT(0,u.type),f=h.length>0?F0([h],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,f)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return o.\u0275prov=mn({token:o,providedIn:"environment",factory:()=>new o(vn(gh))}),o})();function yM(o){o.getStandaloneInjector=a=>a.get(mk).getOrCreateStandaloneInjector(o)}function DM(o,a,u){const h=xi()+o,f=Ue();return f[h]===on?Bo(f,h,u?a.call(u):a()):function Rh(o,a){return o[a]}(f,h)}function Ju(o,a,u,h){return IM(Ue(),xi(),o,a,u,h)}function H0(o,a,u,h,f){return function xM(o,a,u,h,f,m,v){const w=a+u;return Vo(o,w,f,m)?Bo(o,w+2,v?h.call(v,f,m):h(f,m)):ed(o,w+2)}(Ue(),xi(),o,a,u,h,f)}function ed(o,a){const u=o[a];return u===on?void 0:u}function IM(o,a,u,h,f,m){const v=a+u;return Sr(o,v,f)?Bo(o,v+1,m?h.call(m,f):h(f)):ed(o,v+1)}function qh(o,a){const u=dn();let h;const f=o+22;u.firstCreatePass?(h=function vk(o,a){if(a)for(let u=a.length-1;u>=0;u--){const h=a[u];if(o===h.name)return h}}(a,u.pipeRegistry),u.data[f]=h,h.onDestroy&&(u.destroyHooks||(u.destroyHooks=[])).push(f,h.onDestroy)):h=u.data[f];const m=h.factory||(h.factory=zi(h.type)),v=Tn(ju);try{const w=vl(!1),M=m();return vl(w),function L_(o,a,u,h){u>=o.data.length&&(o.data[u]=null,o.blueprint[u]=null),a[u]=h}(u,Ue(),f,M),M}finally{Tn(v)}}function TM(o,a,u){const h=o+22,f=Ue(),m=cs(f,h);return function Yh(o,a){return o[1].data[a].pure}(f,h)?IM(f,xi(),a,m.transform,u,m):m.transform(u)}function Zh(o){return a=>{setTimeout(o,void 0,a)}}const co=class kM extends l.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,u,h){let f=a,m=u||(()=>null),v=h;if(a&&"object"==typeof a){const M=a;f=M.next?.bind(M),m=M.error?.bind(M),v=M.complete?.bind(M)}this.__isAsync&&(m=Zh(m),f&&(f=Zh(f)),v&&(v=Zh(v)));const w=super.subscribe({next:f,error:m,complete:v});return a instanceof H.w0&&a.add(w),w}};function q0(){return this._results[La()]()}class Kh{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=La(),h=Kh.prototype;h[u]||(h[u]=q0)}get changes(){return this._changes||(this._changes=new co)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,u){return this._results.reduce(a,u)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,u){const h=this;h.dirty=!1;const f=ir(a);(this._changesDetected=!function Da(o,a,u){if(o.length!==a.length)return!1;for(let h=0;h<o.length;h++){let f=o[h],m=a[h];if(u&&(f=u(f),m=u(m)),m!==f)return!1}return!0}(h._results,f,u))&&(h._results=f,h.length=f.length,h.last=f[this.length-1],h.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let td=(()=>{class o{}return o.__NG_ELEMENT_ID__=Ck,o})();const RM=td,OM=class extends RM{constructor(a,u,h){super(),this._declarationLView=a,this._declarationTContainer=u,this.elementRef=h}createEmbeddedView(a,u){const h=this._declarationTContainer.tViews,f=Dc(this._declarationLView,h,a,16,null,h.declTNode,null,null,null,null,u||null);f[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(f[19]=v.createEmbeddedView(h)),Bl(h,f,a),new jp(f)}};function Ck(){return pm(Ii(),Ue())}function pm(o,a){return 4&o.type?new OM(a,o,fp(o,a)):null}let mm=(()=>{class o{}return o.__NG_ELEMENT_ID__=Y0,o})();function Y0(){return sy(Ii(),Ue())}const PM=mm,NM=class extends PM{constructor(a,u,h){super(),this._lContainer=a,this._hostTNode=u,this._hostLView=h}get element(){return fp(this._hostTNode,this._hostLView)}get injector(){return new _a(this._hostTNode,this._hostLView)}get parentInjector(){const a=bl(this._hostTNode,this._hostLView);if(Zf(a)){const u=Xs(a,this._hostLView),h=Si(a);return new _a(u[1].data[h+8],u)}return new _a(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const u=ry(this._lContainer);return null!==u&&u[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,u,h){let f,m;"number"==typeof h?f=h:null!=h&&(f=h.index,m=h.injector);const v=a.createEmbeddedView(u||{},m);return this.insert(v,f),v}createComponent(a,u,h,f,m){const v=a&&!function Mr(o){return"function"==typeof o}(a);let w;if(v)w=u;else{const B=u||{};w=B.index,h=B.injector,f=B.projectableNodes,m=B.environmentInjector||B.ngModuleRef}const M=v?a:new zp($(a)),S=h||this.parentInjector;if(!m&&null==M.ngModule){const z=(v?S:this.parentInjector).get(gh,null);z&&(m=z)}const O=M.create(S,f,void 0,m);return this.insert(O.hostView,w),O}insert(a,u){const h=a._lView,f=h[1];if(function pu(o){return Or(o[3])}(h)){const O=this.indexOf(a);if(-1!==O)this.detach(O);else{const B=h[3],z=new NM(B,B[6],B[3]);z.detach(z.indexOf(a))}}const m=this._adjustIndex(u),v=this._lContainer;!function LT(o,a,u,h){const f=10+h,m=u.length;h>0&&(u[f-1][4]=a),h<m-10?(a[4]=u[f],Ea(u,10+h,a)):(u.push(a),a[4]=null),a[3]=u;const v=a[17];null!==v&&u!==v&&function BT(o,a){const u=o[9];a[16]!==a[3][3][16]&&(o[2]=!0),null===u?o[9]=[a]:u.push(a)}(v,a);const w=a[19];null!==w&&w.insertView(o),a[2]|=64}(f,h,v,m);const w=l_(m,v),M=h[11],S=s_(M,v[7]);return null!==S&&function UD(o,a,u,h,f,m){h[0]=f,h[6]=a,wh(o,h,u,1,f,m)}(f,v[6],M,h,S,w),a.attachToViewContainerRef(),Ea(gm(v),m,a),a}move(a,u){return this.insert(a,u)}indexOf(a){const u=ry(this._lContainer);return null!==u?u.indexOf(a):-1}remove(a){const u=this._adjustIndex(a,-1),h=vp(this._lContainer,u);h&&(ko(gm(this._lContainer),u),jD(h[1],h))}detach(a){const u=this._adjustIndex(a,-1),h=vp(this._lContainer,u);return h&&null!=ko(gm(this._lContainer),u)?new jp(h):null}_adjustIndex(a,u=0){return a??this.length+u}};function ry(o){return o[8]}function gm(o){return o[8]||(o[8]=[])}function sy(o,a){let u;const h=a[o.index];if(Or(h))u=h;else{let f;if(8&o.type)f=ri(h);else{const m=a[11];f=m.createComment("");const v=$i(o,a);Bu(m,s_(m,v),f,function WD(o,a){return o.nextSibling(a)}(m,v),!1)}a[o.index]=u=Up(h,a,f,o),I_(a,u)}return new NM(u,o,a)}class _m{constructor(a){this.queryList=a,this.matches=null}clone(){return new _m(this.queryList)}setDirty(){this.queryList.setDirty()}}class K0{constructor(a=[]){this.queries=a}createEmbeddedView(a){const u=a.queries;if(null!==u){const h=null!==a.contentQueries?a.contentQueries[0]:u.length,f=[];for(let m=0;m<h;m++){const v=u.getByIndex(m);f.push(this.queries[v.indexInDeclarationView].clone())}return new K0(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let u=0;u<this.queries.length;u++)null!==J0(a,u).matches&&this.queries[u].setDirty()}}class FM{constructor(a,u,h=null){this.predicate=a,this.flags=u,this.read=h}}class oy{constructor(a=[]){this.queries=a}elementStart(a,u){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(a,u)}elementEnd(a){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(a)}embeddedTView(a){let u=null;for(let h=0;h<this.length;h++){const f=null!==u?u.length:0,m=this.getByIndex(h).embeddedTView(a,f);m&&(m.indexInDeclarationView=h,null!==u?u.push(m):u=[m])}return null!==u?new oy(u):null}template(a,u){for(let h=0;h<this.queries.length;h++)this.queries[h].template(a,u)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class Q0{constructor(a,u=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(a,u){this.isApplyingToNode(u)&&this.matchTNode(a,u)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,u){this.elementStart(a,u)}embeddedTView(a,u){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,u),new Q0(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let h=a.parent;for(;null!==h&&8&h.type&&h.index!==u;)h=h.parent;return u===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(a,u){const h=this.metadata.predicate;if(Array.isArray(h))for(let f=0;f<h.length;f++){const m=h[f];this.matchTNodeWithReadOption(a,u,wk(u,m)),this.matchTNodeWithReadOption(a,u,wl(u,a,m,!1,!1))}else h===td?4&u.type&&this.matchTNodeWithReadOption(a,u,-1):this.matchTNodeWithReadOption(a,u,wl(u,a,h,!1,!1))}matchTNodeWithReadOption(a,u,h){if(null!==h){const f=this.metadata.read;if(null!==f)if(f===qg||f===mm||f===td&&4&u.type)this.addMatch(u.index,-2);else{const m=wl(u,a,f,!1,!1);null!==m&&this.addMatch(u.index,m)}else this.addMatch(u.index,h)}}addMatch(a,u){null===this.matches?this.matches=[a,u]:this.matches.push(a,u)}}function wk(o,a){const u=o.localNames;if(null!==u)for(let h=0;h<u.length;h+=2)if(u[h]===a)return u[h+1];return null}function X0(o,a,u,h){return-1===u?function LM(o,a){return 11&o.type?fp(o,a):4&o.type?pm(o,a):null}(a,o):-2===u?function Dk(o,a,u){return u===qg?fp(a,o):u===td?pm(a,o):u===mm?sy(a,o):void 0}(o,a,h):ds(o,o[1],u,a)}function ay(o,a,u,h){const f=a[19].queries[h];if(null===f.matches){const m=o.data,v=u.matches,w=[];for(let M=0;M<v.length;M+=2){const S=v[M];w.push(S<0?null:X0(a,m[S],v[M+1],u.metadata.read))}f.matches=w}return f.matches}function ly(o,a,u,h){const f=o.queries.getByIndex(u),m=f.matches;if(null!==m){const v=ay(o,a,f,u);for(let w=0;w<m.length;w+=2){const M=m[w];if(M>0)h.push(v[w/2]);else{const S=m[w+1],O=a[-M];for(let B=10;B<O.length;B++){const z=O[B];z[17]===z[3]&&ly(z[1],z,S,h)}if(null!==O[9]){const B=O[9];for(let z=0;z<B.length;z++){const ue=B[z];ly(ue[1],ue,S,h)}}}}}return h}function BM(o){const a=Ue(),u=dn(),h=fl();_u(h+1);const f=J0(u,h);if(o.dirty&&function fu(o){return 4==(4&o[2])}(a)===(2==(2&f.metadata.flags))){if(null===f.matches)o.reset([]);else{const m=f.crossesNgTemplate?ly(u,a,h,[]):ay(u,a,f,h);o.reset(m,YN),o.notifyOnChanges()}return!0}return!1}function ym(o,a,u){const h=dn();h.firstCreatePass&&(Qh(h,new FM(o,a,u),-1),2==(2&a)&&(h.staticViewQueries=!0)),UM(h,Ue(),a)}function cy(o,a,u,h){const f=dn();if(f.firstCreatePass){const m=Ii();Qh(f,new FM(a,u,h),m.index),function HM(o,a){const u=o.contentQueries||(o.contentQueries=[]);a!==(u.length?u[u.length-1]:-1)&&u.push(o.queries.length-1,a)}(f,o),2==(2&u)&&(f.staticContentQueries=!0)}UM(f,Ue(),u)}function uy(){return function VM(o,a){return o[19].queries[a].queryList}(Ue(),fl())}function UM(o,a,u){const h=new Kh(4==(4&u));vE(o,a,h,h.destroy),null===a[19]&&(a[19]=new K0),a[19].queries.push(new _m(h))}function Qh(o,a,u){null===o.queries&&(o.queries=new oy),o.queries.track(new Q0(a,u))}function J0(o,a){return o.queries.getByIndex(a)}function by(...o){}const Gl=new Wn("Application Initializer");let Dm=(()=>{class o{constructor(u){this.appInits=u,this.resolve=by,this.reject=by,this.initialized=!1,this.done=!1,this.donePromise=new Promise((h,f)=>{this.resolve=h,this.reject=f})}runInitializers(){if(this.initialized)return;const u=[],h=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const m=this.appInits[f]();if(oo(m))u.push(m);else if(LE(m)){const v=new Promise((w,M)=>{m.subscribe({complete:w,error:M})});u.push(v)}}Promise.all(u).then(()=>{h()}).catch(f=>{this.reject(f)}),0===u.length&&h(),this.initialized=!0}}return o.\u0275fac=function(u){return new(u||o)(vn(Gl,8))},o.\u0275prov=mn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const cC=new Wn("AppId",{providedIn:"root",factory:function uC(){return`${dC()}${dC()}${dC()}`}});function dC(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const eI=new Wn("Platform Initializer"),tI=new Wn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),nI=new Wn("appBootstrapListener"),iI=new Wn("AnimationModuleType");let hC=(()=>{class o{log(u){console.log(u)}warn(u){console.warn(u)}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=mn({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();const Mm=new Wn("LocaleId",{providedIn:"root",factory:()=>Au(Mm,ct.Optional|ct.SkipSelf)||function fC(){return typeof $localize<"u"&&$localize.locale||rm}()}),rI=new Wn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class kk{constructor(a,u){this.ngModuleFactory=a,this.componentFactories=u}}let wy=(()=>{class o{compileModuleSync(u){return new P0(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const h=this.compileModuleSync(u),m=Ra(kt(u).declarations).reduce((v,w)=>{const M=$(w);return M&&v.push(new zp(M)),v},[]);return new kk(h,m)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=mn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const Wi=(()=>Promise.resolve(0))();function Ey(o){typeof Zone>"u"?Wi.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class uo{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new co(!1),this.onMicrotaskEmpty=new co(!1),this.onStable=new co(!1),this.onError=new co(!1),typeof Zone>"u")throw new Te(908,!1);Zone.assertZonePatched();const f=this;if(f._nesting=0,f._outer=f._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const m=Zone.AsyncStackTaggingZoneSpec;f._inner=f._inner.fork(new m("Angular"))}Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!h&&u,f.shouldCoalesceRunChangeDetection=h,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function Rk(){let o=Je.requestAnimationFrame,a=Je.cancelAnimationFrame;if(typeof Zone<"u"&&o&&a){const u=o[Zone.__symbol__("OriginalDelegate")];u&&(o=u);const h=a[Zone.__symbol__("OriginalDelegate")];h&&(a=h)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function aI(o){const a=()=>{!function oI(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(Je,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,rf(o),o.isCheckStableRunning=!0,My(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),rf(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,h,f,m,v,w)=>{try{return _C(o),u.invokeTask(f,m,v,w)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||o.shouldCoalesceRunChangeDetection)&&a(),Ha(o)}},onInvoke:(u,h,f,m,v,w,M)=>{try{return _C(o),u.invoke(f,m,v,w,M)}finally{o.shouldCoalesceRunChangeDetection&&a(),Ha(o)}},onHasTask:(u,h,f,m)=>{u.hasTask(f,m),h===f&&("microTask"==m.change?(o._hasPendingMicrotasks=m.microTask,rf(o),My(o)):"macroTask"==m.change&&(o.hasPendingMacrotasks=m.macroTask))},onHandleError:(u,h,f,m)=>(u.handleError(f,m),o.runOutsideAngular(()=>o.onError.emit(m)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!uo.isInAngularZone())throw new Te(909,!1)}static assertNotInAngularZone(){if(uo.isInAngularZone())throw new Te(909,!1)}run(a,u,h){return this._inner.run(a,u,h)}runTask(a,u,h,f){const m=this._inner,v=m.scheduleEventTask("NgZoneEvent: "+f,a,Ok,by,by);try{return m.runTask(v,u,h)}finally{m.cancelTask(v)}}runGuarded(a,u,h){return this._inner.runGuarded(a,u,h)}runOutsideAngular(a){return this._outer.run(a)}}const Ok={};function My(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function rf(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function _C(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function Ha(o){o._nesting--,My(o)}class lI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new co,this.onMicrotaskEmpty=new co,this.onStable=new co,this.onError=new co}run(a,u,h){return a.apply(u,h)}runGuarded(a,u,h){return a.apply(u,h)}runOutsideAngular(a){return a()}runTask(a,u,h,f){return a.apply(u,h)}}const yC=new Wn(""),Iy=new Wn("");let sf,xm=(()=>{class o{constructor(u,h,f){this._ngZone=u,this.registry=h,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,sf||(function bC(o){sf=o}(f),f.addToWindow(h)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{uo.assertNotInAngularZone(),Ey(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ey(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(u)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,h,f){let m=-1;h&&h>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==m),u(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:u,timeoutId:m,updateCb:f})}whenStable(u,h,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,h,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,h,f){return[]}}return o.\u0275fac=function(u){return new(u||o)(vn(uo),vn(vC),vn(Iy))},o.\u0275prov=mn({token:o,factory:o.\u0275fac}),o})(),vC=(()=>{class o{constructor(){this._applications=new Map}registerApplication(u,h){this._applications.set(u,h)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,h=!0){return sf?.findTestabilityInTree(this,u,h)??null}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=mn({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})(),Wl=null;const Sm=new Wn("AllowMultipleToken"),CC=new Wn("PlatformDestroyListeners");class wC{constructor(a,u){this.name=a,this.token=u}}function EC(o,a,u=[]){const h=`Platform: ${a}`,f=new Wn(h);return(m=[])=>{let v=xy();if(!v||v.injector.get(Sm,!1)){const w=[...u,...m,{provide:f,useValue:!0}];o?o(w):function DC(o){if(Wl&&!Wl.get(Sm,!1))throw new Te(400,!1);Wl=o;const a=o.get(IC);(function Am(o){const a=o.get(eI,null);a&&a.forEach(u=>u())})(o)}(function MC(o=[],a){return Hu.create({name:a,providers:[{provide:CD,useValue:"platform"},{provide:CC,useValue:new Set([()=>Wl=null])},...o]})}(w,h))}return function rd(o){const a=xy();if(!a)throw new Te(401,!1);return a}()}}function xy(){return Wl?.get(IC)??null}let IC=(()=>{class o{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,h){const f=function ys(o,a){let u;return u="noop"===o?new lI:("zone.js"===o?void 0:o)||new uo(a),u}(h?.ngZone,function km(o){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!o||!o.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!o||!o.ngZoneRunCoalescing)||!1}}(h)),m=[{provide:uo,useValue:f}];return f.run(()=>{const v=Hu.create({providers:m,parent:this.injector,name:u.moduleType.name}),w=u.create(v),M=w.injector.get(Ri,null);if(!M)throw new Te(402,!1);return f.runOutsideAngular(()=>{const S=f.onError.subscribe({next:O=>{M.handleError(O)}});w.onDestroy(()=>{Sy(this._modules,w),S.unsubscribe()})}),function xC(o,a,u){try{const h=u();return oo(h)?h.catch(f=>{throw a.runOutsideAngular(()=>o.handleError(f)),f}):h}catch(h){throw a.runOutsideAngular(()=>o.handleError(h)),h}}(M,f,()=>{const S=w.injector.get(Dm);return S.runInitializers(),S.donePromise.then(()=>(function uM(o){Mt(o,"Expected localeId to be defined"),"string"==typeof o&&(WA=o.toLowerCase().replace(/_/g,"-"))}(w.injector.get(Mm,rm)||rm),this._moduleDoBootstrap(w),w))})})}bootstrapModule(u,h=[]){const f=SC({},h);return function Tm(o,a,u){const h=new P0(u);return Promise.resolve(h)}(0,0,u).then(m=>this.bootstrapModuleFactory(m,f))}_moduleDoBootstrap(u){const h=u.injector.get(ql);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(f=>h.bootstrap(f));else{if(!u.instance.ngDoBootstrap)throw new Te(403,!1);u.instance.ngDoBootstrap(h)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Te(404,!1);this._modules.slice().forEach(h=>h.destroy()),this._destroyListeners.forEach(h=>h());const u=this._injector.get(CC,null);u&&(u.forEach(h=>h()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(u){return new(u||o)(vn(Hu))},o.\u0275prov=mn({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();function SC(o,a){return Array.isArray(a)?a.reduce(SC,o):{...o,...a}}let ql=(()=>{class o{constructor(u,h,f){this._zone=u,this._injector=h,this._exceptionHandler=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const m=new P.y(w=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{w.next(this._stable),w.complete()})}),v=new P.y(w=>{let M;this._zone.runOutsideAngular(()=>{M=this._zone.onStable.subscribe(()=>{uo.assertNotInAngularZone(),Ey(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,w.next(!0))})})});const S=this._zone.onUnstable.subscribe(()=>{uo.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{w.next(!1)}))});return()=>{M.unsubscribe(),S.unsubscribe()}});this.isStable=(0,ae.T)(m,v.pipe((0,fe.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,h){const f=u instanceof yT;if(!this._injector.get(Dm).done)throw!f&&nt(u),new Te(405,false);let v;v=f?u:this._injector.get(Wg).resolveComponentFactory(u),this.componentTypes.push(v.componentType);const w=function cI(o){return o.isBoundToModule}(v)?void 0:this._injector.get(Fc),S=v.create(Hu.NULL,[],h||v.selector,w),O=S.location.nativeElement,B=S.injector.get(yC,null);return B?.registerApplication(O),S.onDestroy(()=>{this.detachView(S.hostView),Sy(this.components,S),B?.unregisterApplication(O)}),this._loadComponent(S),S}tick(){if(this._runningTick)throw new Te(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const h=u;this._views.push(h),h.attachToAppRef(this)}detachView(u){const h=u;Sy(this._views,h),h.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(nI,[]).concat(this._bootstrapListeners).forEach(f=>f(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>Sy(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new Te(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return o.\u0275fac=function(u){return new(u||o)(vn(uo),vn(gh),vn(Ri))},o.\u0275prov=mn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function Sy(o,a){const u=o.indexOf(a);u>-1&&o.splice(u,1)}let hI=!0,fI=!1;function pI(){return fI=!0,hI}function Lk(){if(fI)throw new Error("Cannot enable prod mode after platform setup.");hI=!1}let hr=(()=>{class o{}return o.__NG_ELEMENT_ID__=af,o})();function af(o){return function Hc(o,a,u){if(tc(o)&&!u){const h=In(o.index,a);return new jp(h,h)}return 47&o.type?new jp(a[16],a):null}(Ii(),Ue(),16==(16&o))}class gI{constructor(){}supports(a){return Gp(a)}create(a){return new nn(a)}}const _I=(o,a)=>a;class nn{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||_I}forEachItem(a){let u;for(u=this._itHead;null!==u;u=u._next)a(u)}forEachOperation(a){let u=this._itHead,h=this._removalsHead,f=0,m=null;for(;u||h;){const v=!h||u&&u.currentIndex<Gt(h,f,m)?u:h,w=Gt(v,f,m),M=v.currentIndex;if(v===h)f--,h=h._nextRemoved;else if(u=u._next,null==v.previousIndex)f++;else{m||(m=[]);const S=w-f,O=M-f;if(S!=O){for(let z=0;z<S;z++){const ue=z<m.length?m[z]:m[z]=0,Se=ue+z;O<=Se&&Se<S&&(m[z]=ue+1)}m[v.previousIndex]=O-S}}w!==M&&a(v,w,M)}}forEachPreviousItem(a){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachMovedItem(a){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}forEachIdentityChange(a){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)a(u)}diff(a){if(null==a&&(a=[]),!Gp(a))throw new Te(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,m,v,u=this._itHead,h=!1;if(Array.isArray(a)){this.length=a.length;for(let w=0;w<this.length;w++)m=a[w],v=this._trackByFn(w,m),null!==u&&Object.is(u.trackById,v)?(h&&(u=this._verifyReinsertion(u,m,v,w)),Object.is(u.item,m)||this._addIdentityChange(u,m)):(u=this._mismatch(u,m,v,w),h=!0),u=u._next}else f=0,function O_(o,a){if(Array.isArray(o))for(let u=0;u<o.length;u++)a(o[u]);else{const u=o[La()]();let h;for(;!(h=u.next()).done;)a(h.value)}}(a,w=>{v=this._trackByFn(f,w),null!==u&&Object.is(u.trackById,v)?(h&&(u=this._verifyReinsertion(u,w,v,f)),Object.is(u.item,w)||this._addIdentityChange(u,w)):(u=this._mismatch(u,w,v,f),h=!0),u=u._next,f++}),this.length=f;return this._truncate(u),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,u,h,f){let m;return null===a?m=this._itTail:(m=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._reinsertAfter(a,m,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(h,f))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._moveAfter(a,m,f)):a=this._addAfter(new cf(u,h),m,f),a}_verifyReinsertion(a,u,h,f){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==m?a=this._reinsertAfter(m,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const u=a._next;this._addToRemovals(this._unlink(a)),a=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,u,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,m=a._nextRemoved;return null===f?this._removalsHead=m:f._nextRemoved=m,null===m?this._removalsTail=f:m._prevRemoved=f,this._insertAfter(a,u,h),this._addToMoves(a,h),a}_moveAfter(a,u,h){return this._unlink(a),this._insertAfter(a,u,h),this._addToMoves(a,h),a}_addAfter(a,u,h){return this._insertAfter(a,u,h),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,u,h){const f=null===u?this._itHead:u._next;return a._next=f,a._prev=u,null===f?this._itTail=a:f._prev=a,null===u?this._itHead=a:u._next=a,null===this._linkedRecords&&(this._linkedRecords=new mi),this._linkedRecords.put(a),a.currentIndex=h,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const u=a._prev,h=a._next;return null===u?this._itHead=h:u._next=h,null===h?this._itTail=u:h._prev=u,a}_addToMoves(a,u){return a.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new mi),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,u){return a.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class cf{constructor(a,u){this.item=a,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class yI{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,u){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===u||u<=h.currentIndex)&&Object.is(h.trackById,a))return h;return null}remove(a){const u=a._prevDup,h=a._nextDup;return null===u?this._head=h:u._nextDup=h,null===h?this._tail=u:h._prevDup=u,null===this._head}}class mi{constructor(){this.map=new Map}put(a){const u=a.trackById;let h=this.map.get(u);h||(h=new yI,this.map.set(u,h)),h.add(a)}get(a,u){const f=this.map.get(a);return f?f.get(a,u):null}remove(a){const u=a.trackById;return this.map.get(u).remove(a)&&this.map.delete(u),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Gt(o,a,u){const h=o.previousIndex;if(null===h)return h;let f=0;return u&&h<u.length&&(f=u[h]),h+a+f}class uf{constructor(){}supports(a){return a instanceof Map||r0(a)}create(){return new kn}}class kn{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let u;for(u=this._mapHead;null!==u;u=u._next)a(u)}forEachPreviousItem(a){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)a(u)}forEachChangedItem(a){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}diff(a){if(a){if(!(a instanceof Map||r0(a)))throw new Te(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(a,(h,f)=>{if(u&&u.key===f)this._maybeAddToChanges(u,h),this._appendAfter=u,u=u._next;else{const m=this._getOrCreateRecordForKey(f,h);u=this._insertBeforeOrAppend(u,m)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let h=u;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,u){if(a){const h=a._prev;return u._next=a,u._prev=h,a._prev=u,h&&(h._next=u),a===this._mapHead&&(this._mapHead=u),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(a,u){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,u);const m=f._prev,v=f._next;return m&&(m._next=v),v&&(v._prev=m),f._next=null,f._prev=null,f}const h=new Hk(a);return this._records.set(a,h),h.currentValue=u,this._addToAdditions(h),h}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,u){Object.is(u,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=u,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,u){a instanceof Map?a.forEach(u):Object.keys(a).forEach(h=>u(a[h],h))}}class Hk{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Ai(){return new at([new gI])}let at=(()=>{class o{constructor(u){this.factories=u}static create(u,h){if(null!=h){const f=h.factories.slice();u=u.concat(f)}return new o(u)}static extend(u){return{provide:o,useFactory:h=>o.create(u,h||Ai()),deps:[[o,new St,new Le]]}}find(u){const h=this.factories.find(f=>f.supports(u));if(null!=h)return h;throw new Te(901,!1)}}return o.\u0275prov=mn({token:o,providedIn:"root",factory:Ai}),o})();function ky(){return new Yl([new uf])}let Yl=(()=>{class o{constructor(u){this.factories=u}static create(u,h){if(h){const f=h.factories.slice();u=u.concat(f)}return new o(u)}static extend(u){return{provide:o,useFactory:h=>o.create(u,h||ky()),deps:[[o,new St,new Le]]}}find(u){const h=this.factories.find(f=>f.supports(u));if(h)return h;throw new Te(901,!1)}}return o.\u0275prov=mn({token:o,providedIn:"root",factory:ky}),o})();const vI=EC(null,"core",[]);let bI=(()=>{class o{constructor(u){}}return o.\u0275fac=function(u){return new(u||o)(vn(ql))},o.\u0275mod=Ft({type:o}),o.\u0275inj=Qt({}),o})();function Hs(o){return"boolean"==typeof o?o:null!=o&&"false"!==o}},3942:(Dt,Oe,F)=>{"use strict";F.d(Oe,{Z:()=>Te});var l=F(2090),H=F(4859),P=F(9681),ae=F(1877);class fe{constructor(Ie,we){this._delegate=Ie,this.firebase=we,(0,P._addComponent)(Ie,new H.wA("app-compat",()=>this,"PUBLIC")),this.container=Ie.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ie){this._delegate.automaticDataCollectionEnabled=Ie}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ie=>{this._delegate.checkDestroyed(),Ie()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(Ie,we=P._DEFAULT_ENTRY_NAME){var ht;this._delegate.checkDestroyed();const ft=this._delegate.container.getProvider(Ie);return!ft.isInitialized()&&"EXPLICIT"===(null===(ht=ft.getComponent())||void 0===ht?void 0:ht.instantiationMode)&&ft.initialize(),ft.getImmediate({identifier:we})}_removeServiceInstance(Ie,we=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ie).clearInstance(we)}_addComponent(Ie){(0,P._addComponent)(this._delegate,Ie)}_addOrOverwriteComponent(Ie){(0,P._addOrOverwriteComponent)(this._delegate,Ie)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const se=new l.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),q=function Ee(){const gt=function pe(gt){const Ie={},we={__esModule:!0,initializeApp:function He(ce,me={}){const De=P.initializeApp(ce,me);if((0,l.r3)(Ie,De.name))return Ie[De.name];const J=new gt(De,we);return Ie[De.name]=J,J},app:ft,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function Ae(ce){const me=ce.name,De=me.replace("-compat","");if(P._registerComponent(ce)&&"PUBLIC"===ce.type){const J=(ie=ft())=>{if("function"!=typeof ie[De])throw se.create("invalid-app-argument",{appName:me});return ie[De]()};void 0!==ce.serviceProps&&(0,l.ZB)(J,ce.serviceProps),we[De]=J,gt.prototype[De]=function(...ie){return this._getService.bind(this,me).apply(this,ce.multipleInstances?ie:[])}}return"PUBLIC"===ce.type?we[De]:null},removeApp:function ht(ce){delete Ie[ce]},useAsService:function et(ce,me){return"serverAuth"===me?null:me},modularAPIs:P}};function ft(ce){if(!(0,l.r3)(Ie,ce=ce||P._DEFAULT_ENTRY_NAME))throw se.create("no-app",{appName:ce});return Ie[ce]}return we.default=we,Object.defineProperty(we,"apps",{get:function Ve(){return Object.keys(Ie).map(ce=>Ie[ce])}}),ft.App=gt,we}(fe);return gt.INTERNAL=Object.assign(Object.assign({},gt.INTERNAL),{createFirebaseNamespace:Ee,extendNamespace:function Ie(we){(0,l.ZB)(gt,we)},createSubscribe:l.ne,ErrorFactory:l.LL,deepExtend:l.ZB}),gt}(),Y=new ae.Yd("@firebase/app-compat");if((0,l.jU)()&&void 0!==self.firebase){Y.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const gt=self.firebase.SDK_VERSION;gt&&gt.indexOf("LITE")>=0&&Y.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Te=q;!function Be(gt){(0,P.registerVersion)("@firebase/app-compat","0.1.34",gt)}()},9681:(Dt,Oe,F)=>{"use strict";F.r(Oe),F.d(Oe,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>yr,_DEFAULT_ENTRY_NAME:()=>Mt,_addComponent:()=>yn,_addOrOverwriteComponent:()=>mn,_apps:()=>Rn,_clearComponents:()=>as,_components:()=>rn,_getProvider:()=>Qt,_registerComponent:()=>sn,_removeServiceInstance:()=>Un,deleteApp:()=>kr,getApp:()=>Xn,getApps:()=>vr,initializeApp:()=>Qi,onLog:()=>Jn,registerVersion:()=>wi,setLogLevel:()=>Tn});var l=F(5861),H=F(4859),P=F(1877),ae=F(2090),fe=F(8766);class ve{constructor(Z){this.container=Z}getPlatformInfoString(){return this.container.getProviders().map(Q=>{if(function se(j){return"VERSION"===j.getComponent()?.type}(Q)){const Pe=Q.getImmediate();return`${Pe.library}/${Pe.version}`}return null}).filter(Q=>Q).join(" ")}}const pe="@firebase/app",q=new P.Yd("@firebase/app"),Mt="[DEFAULT]",Qe={[pe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Rn=new Map,rn=new Map;function yn(j,Z){try{j.container.addComponent(Z)}catch(Q){q.debug(`Component ${Z.name} failed to register with FirebaseApp ${j.name}`,Q)}}function mn(j,Z){j.container.addOrOverwriteComponent(Z)}function sn(j){const Z=j.name;if(rn.has(Z))return q.debug(`There were multiple attempts to register component ${Z}.`),!1;rn.set(Z,j);for(const Q of Rn.values())yn(Q,j);return!0}function Qt(j,Z){const Q=j.container.getProvider("heartbeat").getImmediate({optional:!0});return Q&&Q.triggerHeartbeat(),j.container.getProvider(Z)}function Un(j,Z,Q=Mt){Qt(j,Z).clearInstance(Q)}function as(){rn.clear()}const Hn=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Yr{constructor(Z,Q,Pe){this._isDeleted=!1,this._options=Object.assign({},Z),this._config=Object.assign({},Q),this._name=Q.name,this._automaticDataCollectionEnabled=Q.automaticDataCollectionEnabled,this._container=Pe,this.container.addComponent(new H.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Z){this.checkDestroyed(),this._automaticDataCollectionEnabled=Z}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Z){this._isDeleted=Z}checkDestroyed(){if(this.isDeleted)throw Hn.create("app-deleted",{appName:this._name})}}const yr="9.10.0";function Qi(j,Z={}){"object"!=typeof Z&&(Z={name:Z});const Q=Object.assign({name:Mt,automaticDataCollectionEnabled:!1},Z),Pe=Q.name;if("string"!=typeof Pe||!Pe)throw Hn.create("bad-app-name",{appName:String(Pe)});const Xe=Rn.get(Pe);if(Xe){if((0,ae.vZ)(j,Xe.options)&&(0,ae.vZ)(Q,Xe.config))return Xe;throw Hn.create("duplicate-app",{appName:Pe})}const Ft=new H.H0(Pe);for(const Sn of rn.values())Ft.addComponent(Sn);const An=new Yr(j,Q,Ft);return Rn.set(Pe,An),An}function Xn(j=Mt){const Z=Rn.get(j);if(!Z)throw Hn.create("no-app",{appName:j});return Z}function vr(){return Array.from(Rn.values())}function kr(j){return ct.apply(this,arguments)}function ct(){return(ct=(0,l.Z)(function*(j){const Z=j.name;Rn.has(Z)&&(Rn.delete(Z),yield Promise.all(j.container.getProviders().map(Q=>Q.delete())),j.isDeleted=!0)})).apply(this,arguments)}function wi(j,Z,Q){var Pe;let Xe=null!==(Pe=Qe[j])&&void 0!==Pe?Pe:j;Q&&(Xe+=`-${Q}`);const Ft=Xe.match(/\s|\//),An=Z.match(/\s|\//);if(Ft||An){const Sn=[`Unable to register library "${Xe}" with version "${Z}":`];return Ft&&Sn.push(`library name "${Xe}" contains illegal characters (whitespace or "/")`),Ft&&An&&Sn.push("and"),An&&Sn.push(`version name "${Z}" contains illegal characters (whitespace or "/")`),void q.warn(Sn.join(" "))}sn(new H.wA(`${Xe}-version`,()=>({library:Xe,version:Z}),"VERSION"))}function Jn(j,Z){if(null!==j&&"function"!=typeof j)throw Hn.create("invalid-log-argument");(0,P.Am)(j,Z)}function Tn(j){(0,P.Ub)(j)}const Ce="firebase-heartbeat-store";let Re=null;function We(){return Re||(Re=(0,fe.X3)("firebase-heartbeat-database",1,{upgrade:(j,Z)=>{0===Z&&j.createObjectStore(Ce)}}).catch(j=>{throw Hn.create("idb-open",{originalErrorMessage:j.message})})),Re}function ut(){return(ut=(0,l.Z)(function*(j){var Z;try{return(yield We()).transaction(Ce).objectStore(Ce).get(yt(j))}catch(Q){if(Q instanceof ae.ZR)q.warn(Q.message);else{const Pe=Hn.create("idb-get",{originalErrorMessage:null===(Z=Q)||void 0===Z?void 0:Z.message});q.warn(Pe.message)}}})).apply(this,arguments)}function Je(j,Z){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,l.Z)(function*(j,Z){var Q;try{const Xe=(yield We()).transaction(Ce,"readwrite");return yield Xe.objectStore(Ce).put(Z,yt(j)),Xe.done}catch(Pe){if(Pe instanceof ae.ZR)q.warn(Pe.message);else{const Xe=Hn.create("idb-set",{originalErrorMessage:null===(Q=Pe)||void 0===Q?void 0:Q.message});q.warn(Xe.message)}}})).apply(this,arguments)}function yt(j){return`${j.name}!${j.options.appId}`}class qn{constructor(Z){this.container=Z,this._heartbeatsCache=null;const Q=this.container.getProvider("app").getImmediate();this._storage=new un(Q),this._heartbeatsCachePromise=this._storage.read().then(Pe=>(this._heartbeatsCache=Pe,Pe))}triggerHeartbeat(){var Z=this;return(0,l.Z)(function*(){const Pe=Z.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Xe=qt();if(null===Z._heartbeatsCache&&(Z._heartbeatsCache=yield Z._heartbeatsCachePromise),Z._heartbeatsCache.lastSentHeartbeatDate!==Xe&&!Z._heartbeatsCache.heartbeats.some(Ft=>Ft.date===Xe))return Z._heartbeatsCache.heartbeats.push({date:Xe,agent:Pe}),Z._heartbeatsCache.heartbeats=Z._heartbeatsCache.heartbeats.filter(Ft=>{const An=new Date(Ft.date).valueOf();return Date.now()-An<=2592e6}),Z._storage.overwrite(Z._heartbeatsCache)})()}getHeartbeatsHeader(){var Z=this;return(0,l.Z)(function*(){if(null===Z._heartbeatsCache&&(yield Z._heartbeatsCachePromise),null===Z._heartbeatsCache||0===Z._heartbeatsCache.heartbeats.length)return"";const Q=qt(),{heartbeatsToSend:Pe,unsentEntries:Xe}=function br(j,Z=1024){const Q=[];let Pe=j.slice();for(const Xe of j){const Ft=Q.find(An=>An.agent===Xe.agent);if(Ft){if(Ft.dates.push(Xe.date),X(Q)>Z){Ft.dates.pop();break}}else if(Q.push({agent:Xe.agent,dates:[Xe.date]}),X(Q)>Z){Q.pop();break}Pe=Pe.slice(1)}return{heartbeatsToSend:Q,unsentEntries:Pe}}(Z._heartbeatsCache.heartbeats),Ft=(0,ae.L)(JSON.stringify({version:2,heartbeats:Pe}));return Z._heartbeatsCache.lastSentHeartbeatDate=Q,Xe.length>0?(Z._heartbeatsCache.heartbeats=Xe,yield Z._storage.overwrite(Z._heartbeatsCache)):(Z._heartbeatsCache.heartbeats=[],Z._storage.overwrite(Z._heartbeatsCache)),Ft})()}}function qt(){return(new Date).toISOString().substring(0,10)}class un{constructor(Z){this.app=Z,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,l.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Z=this;return(0,l.Z)(function*(){return(yield Z._canUseIndexedDBPromise)&&(yield function Ne(j){return ut.apply(this,arguments)}(Z.app))||{heartbeats:[]}})()}overwrite(Z){var Q=this;return(0,l.Z)(function*(){var Pe;if(yield Q._canUseIndexedDBPromise){const Ft=yield Q.read();return Je(Q.app,{lastSentHeartbeatDate:null!==(Pe=Z.lastSentHeartbeatDate)&&void 0!==Pe?Pe:Ft.lastSentHeartbeatDate,heartbeats:Z.heartbeats})}})()}add(Z){var Q=this;return(0,l.Z)(function*(){var Pe;if(yield Q._canUseIndexedDBPromise){const Ft=yield Q.read();return Je(Q.app,{lastSentHeartbeatDate:null!==(Pe=Z.lastSentHeartbeatDate)&&void 0!==Pe?Pe:Ft.lastSentHeartbeatDate,heartbeats:[...Ft.heartbeats,...Z.heartbeats]})}})()}}function X(j){return(0,ae.L)(JSON.stringify({version:2,heartbeats:j})).length}!function G(j){sn(new H.wA("platform-logger",Z=>new ve(Z),"PRIVATE")),sn(new H.wA("heartbeat",Z=>new qn(Z),"PRIVATE")),wi(pe,"0.7.33",j),wi(pe,"0.7.33","esm2017"),wi("fire-js","")}("")},4859:(Dt,Oe,F)=>{"use strict";F.d(Oe,{H0:()=>pe,wA:()=>P});var l=F(5861),H=F(2090);class P{constructor(q,Y,ee){this.name=q,this.instanceFactory=Y,this.type=ee,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(q){return this.instantiationMode=q,this}setMultipleInstances(q){return this.multipleInstances=q,this}setServiceProps(q){return this.serviceProps=q,this}setInstanceCreatedCallback(q){return this.onInstanceCreated=q,this}}const ae="[DEFAULT]";class fe{constructor(q,Y){this.name=q,this.container=Y,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(q){const Y=this.normalizeInstanceIdentifier(q);if(!this.instancesDeferred.has(Y)){const ee=new H.BH;if(this.instancesDeferred.set(Y,ee),this.isInitialized(Y)||this.shouldAutoInitialize())try{const Ke=this.getOrInitializeService({instanceIdentifier:Y});Ke&&ee.resolve(Ke)}catch{}}return this.instancesDeferred.get(Y).promise}getImmediate(q){var Y;const ee=this.normalizeInstanceIdentifier(q?.identifier),Ke=null!==(Y=q?.optional)&&void 0!==Y&&Y;if(!this.isInitialized(ee)&&!this.shouldAutoInitialize()){if(Ke)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ee})}catch(Be){if(Ke)return null;throw Be}}getComponent(){return this.component}setComponent(q){if(q.name!==this.name)throw Error(`Mismatching Component ${q.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=q,this.shouldAutoInitialize()){if(function se(Ee){return"EAGER"===Ee.instantiationMode}(q))try{this.getOrInitializeService({instanceIdentifier:ae})}catch{}for(const[Y,ee]of this.instancesDeferred.entries()){const Ke=this.normalizeInstanceIdentifier(Y);try{const Be=this.getOrInitializeService({instanceIdentifier:Ke});ee.resolve(Be)}catch{}}}}clearInstance(q=ae){this.instancesDeferred.delete(q),this.instancesOptions.delete(q),this.instances.delete(q)}delete(){var q=this;return(0,l.Z)(function*(){const Y=Array.from(q.instances.values());yield Promise.all([...Y.filter(ee=>"INTERNAL"in ee).map(ee=>ee.INTERNAL.delete()),...Y.filter(ee=>"_delete"in ee).map(ee=>ee._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(q=ae){return this.instances.has(q)}getOptions(q=ae){return this.instancesOptions.get(q)||{}}initialize(q={}){const{options:Y={}}=q,ee=this.normalizeInstanceIdentifier(q.instanceIdentifier);if(this.isInitialized(ee))throw Error(`${this.name}(${ee}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ke=this.getOrInitializeService({instanceIdentifier:ee,options:Y});for(const[Be,Te]of this.instancesDeferred.entries())ee===this.normalizeInstanceIdentifier(Be)&&Te.resolve(Ke);return Ke}onInit(q,Y){var ee;const Ke=this.normalizeInstanceIdentifier(Y),Be=null!==(ee=this.onInitCallbacks.get(Ke))&&void 0!==ee?ee:new Set;Be.add(q),this.onInitCallbacks.set(Ke,Be);const Te=this.instances.get(Ke);return Te&&q(Te,Ke),()=>{Be.delete(q)}}invokeOnInitCallbacks(q,Y){const ee=this.onInitCallbacks.get(Y);if(ee)for(const Ke of ee)try{Ke(q,Y)}catch{}}getOrInitializeService({instanceIdentifier:q,options:Y={}}){let ee=this.instances.get(q);if(!ee&&this.component&&(ee=this.component.instanceFactory(this.container,{instanceIdentifier:(Ee=q,Ee===ae?void 0:Ee),options:Y}),this.instances.set(q,ee),this.instancesOptions.set(q,Y),this.invokeOnInitCallbacks(ee,q),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,q,ee)}catch{}var Ee;return ee||null}normalizeInstanceIdentifier(q=ae){return this.component?this.component.multipleInstances?q:ae:q}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class pe{constructor(q){this.name=q,this.providers=new Map}addComponent(q){const Y=this.getProvider(q.name);if(Y.isComponentSet())throw new Error(`Component ${q.name} has already been registered with ${this.name}`);Y.setComponent(q)}addOrOverwriteComponent(q){this.getProvider(q.name).isComponentSet()&&this.providers.delete(q.name),this.addComponent(q)}getProvider(q){if(this.providers.has(q))return this.providers.get(q);const Y=new fe(q,this);return this.providers.set(q,Y),Y}getProviders(){return Array.from(this.providers.values())}}},1877:(Dt,Oe,F)=>{"use strict";F.d(Oe,{Am:()=>Ee,Ub:()=>pe,Yd:()=>se,in:()=>H});const l=[];var H=(()=>{return(q=H||(H={}))[q.DEBUG=0]="DEBUG",q[q.VERBOSE=1]="VERBOSE",q[q.INFO=2]="INFO",q[q.WARN=3]="WARN",q[q.ERROR=4]="ERROR",q[q.SILENT=5]="SILENT",H;var q})();const P={debug:H.DEBUG,verbose:H.VERBOSE,info:H.INFO,warn:H.WARN,error:H.ERROR,silent:H.SILENT},ae=H.INFO,fe={[H.DEBUG]:"log",[H.VERBOSE]:"log",[H.INFO]:"info",[H.WARN]:"warn",[H.ERROR]:"error"},ve=(q,Y,...ee)=>{if(Y<q.logLevel)return;const Ke=(new Date).toISOString(),Be=fe[Y];if(!Be)throw new Error(`Attempted to log a message with an invalid logType (value: ${Y})`);console[Be](`[${Ke}]  ${q.name}:`,...ee)};class se{constructor(Y){this.name=Y,this._logLevel=ae,this._logHandler=ve,this._userLogHandler=null,l.push(this)}get logLevel(){return this._logLevel}set logLevel(Y){if(!(Y in H))throw new TypeError(`Invalid value "${Y}" assigned to \`logLevel\``);this._logLevel=Y}setLogLevel(Y){this._logLevel="string"==typeof Y?P[Y]:Y}get logHandler(){return this._logHandler}set logHandler(Y){if("function"!=typeof Y)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Y}get userLogHandler(){return this._userLogHandler}set userLogHandler(Y){this._userLogHandler=Y}debug(...Y){this._userLogHandler&&this._userLogHandler(this,H.DEBUG,...Y),this._logHandler(this,H.DEBUG,...Y)}log(...Y){this._userLogHandler&&this._userLogHandler(this,H.VERBOSE,...Y),this._logHandler(this,H.VERBOSE,...Y)}info(...Y){this._userLogHandler&&this._userLogHandler(this,H.INFO,...Y),this._logHandler(this,H.INFO,...Y)}warn(...Y){this._userLogHandler&&this._userLogHandler(this,H.WARN,...Y),this._logHandler(this,H.WARN,...Y)}error(...Y){this._userLogHandler&&this._userLogHandler(this,H.ERROR,...Y),this._logHandler(this,H.ERROR,...Y)}}function pe(q){l.forEach(Y=>{Y.setLogLevel(q)})}function Ee(q,Y){for(const ee of l){let Ke=null;Y&&Y.level&&(Ke=P[Y.level]),ee.userLogHandler=null===q?null:(Be,Te,...gt)=>{const Ie=gt.map(we=>{if(null==we)return null;if("string"==typeof we)return we;if("number"==typeof we||"boolean"==typeof we)return we.toString();if(we instanceof Error)return we.message;try{return JSON.stringify(we)}catch{return null}}).filter(we=>we).join(" ");Te>=(Ke??Be.logLevel)&&q({level:H[Te].toLowerCase(),message:Ie,args:gt,type:Be.name})}}}},8766:(Dt,Oe,F)=>{"use strict";F.d(Oe,{Lj:()=>He,X3:()=>ft});var l=F(5861);let P,ae;const se=new WeakMap,pe=new WeakMap,Ee=new WeakMap,q=new WeakMap,Y=new WeakMap;let Be={get(me,De,J){if(me instanceof IDBTransaction){if("done"===De)return pe.get(me);if("objectStoreNames"===De)return me.objectStoreNames||Ee.get(me);if("store"===De)return J.objectStoreNames[1]?void 0:J.objectStore(J.objectStoreNames[0])}return we(me[De])},set:(me,De,J)=>(me[De]=J,!0),has:(me,De)=>me instanceof IDBTransaction&&("done"===De||"store"===De)||De in me};function Ie(me){return"function"==typeof me?function gt(me){return me!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ve(){return ae||(ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(me)?function(...De){return me.apply(ht(this),De),we(se.get(this))}:function(...De){return we(me.apply(ht(this),De))}:function(De,...J){const ie=me.call(ht(this),De,...J);return Ee.set(ie,De.sort?De.sort():[De]),we(ie)}}(me):(me instanceof IDBTransaction&&function Ke(me){if(pe.has(me))return;const De=new Promise((J,ie)=>{const ye=()=>{me.removeEventListener("complete",he),me.removeEventListener("error",Ge),me.removeEventListener("abort",Ge)},he=()=>{J(),ye()},Ge=()=>{ie(me.error||new DOMException("AbortError","AbortError")),ye()};me.addEventListener("complete",he),me.addEventListener("error",Ge),me.addEventListener("abort",Ge)});pe.set(me,De)}(me),((me,De)=>De.some(J=>me instanceof J))(me,function fe(){return P||(P=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(me,Be):me)}function we(me){if(me instanceof IDBRequest)return function ee(me){const De=new Promise((J,ie)=>{const ye=()=>{me.removeEventListener("success",he),me.removeEventListener("error",Ge)},he=()=>{J(we(me.result)),ye()},Ge=()=>{ie(me.error),ye()};me.addEventListener("success",he),me.addEventListener("error",Ge)});return De.then(J=>{J instanceof IDBCursor&&se.set(J,me)}).catch(()=>{}),Y.set(De,me),De}(me);if(q.has(me))return q.get(me);const De=Ie(me);return De!==me&&(q.set(me,De),Y.set(De,me)),De}const ht=me=>Y.get(me);function ft(me,De,{blocked:J,upgrade:ie,blocking:ye,terminated:he}={}){const Ge=indexedDB.open(me,De),qe=we(Ge);return ie&&Ge.addEventListener("upgradeneeded",Et=>{ie(we(Ge.result),Et.oldVersion,Et.newVersion,we(Ge.transaction))}),J&&Ge.addEventListener("blocked",()=>J()),qe.then(Et=>{he&&Et.addEventListener("close",()=>he()),ye&&Et.addEventListener("versionchange",()=>ye())}).catch(()=>{}),qe}function He(me,{blocked:De}={}){const J=indexedDB.deleteDatabase(me);return De&&J.addEventListener("blocked",()=>De()),we(J).then(()=>{})}const Ve=["get","getKey","getAll","getAllKeys","count"],Ae=["put","add","delete","clear"],et=new Map;function ce(me,De){if(!(me instanceof IDBDatabase)||De in me||"string"!=typeof De)return;if(et.get(De))return et.get(De);const J=De.replace(/FromIndex$/,""),ie=De!==J,ye=Ae.includes(J);if(!(J in(ie?IDBIndex:IDBObjectStore).prototype)||!ye&&!Ve.includes(J))return;const he=function(){var Ge=(0,l.Z)(function*(qe,...Et){const cn=this.transaction(qe,ye?"readwrite":"readonly");let Mt=cn.store;return ie&&(Mt=Mt.index(Et.shift())),(yield Promise.all([Mt[J](...Et),ye&&cn.done]))[0]});return function(Et){return Ge.apply(this,arguments)}}();return et.set(De,he),he}!function Te(me){Be=me(Be)}(me=>({...me,get:(De,J,ie)=>ce(De,J)||me.get(De,J,ie),has:(De,J)=>!!ce(De,J)||me.has(De,J)}))},5861:(Dt,Oe,F)=>{"use strict";function l(P,ae,fe,ve,se,pe,Ee){try{var q=P[pe](Ee),Y=q.value}catch(ee){return void fe(ee)}q.done?ae(Y):Promise.resolve(Y).then(ve,se)}function H(P){return function(){var ae=this,fe=arguments;return new Promise(function(ve,se){var pe=P.apply(ae,fe);function Ee(Y){l(pe,ve,se,Ee,q,"next",Y)}function q(Y){l(pe,ve,se,Ee,q,"throw",Y)}Ee(void 0)})}}F.d(Oe,{Z:()=>H})}},Dt=>{Dt(Dt.s=3563)}]);